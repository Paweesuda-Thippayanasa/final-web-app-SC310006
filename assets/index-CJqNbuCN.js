(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function XI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ug={exports:{}},Fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function JI(){if(jT)return Fu;jT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return Fu.Fragment=e,Fu.jsx=t,Fu.jsxs=t,Fu}var BT;function ZI(){return BT||(BT=1,ug.exports=JI()),ug.exports}var v=ZI(),cg={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function eN(){if(zT)return Oe;zT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,U={};function V(L,ie,ye){this.props=L,this.context=ie,this.refs=U,this.updater=ye||S}V.prototype.isReactComponent={},V.prototype.setState=function(L,ie){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ie,"setState")},V.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function z(){}z.prototype=V.prototype;function G(L,ie,ye){this.props=L,this.context=ie,this.refs=U,this.updater=ye||S}var H=G.prototype=new z;H.constructor=G,O(H,V.prototype),H.isPureReactComponent=!0;var Z=Array.isArray,le={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function M(L,ie,ye,de,me,Re){return ye=Re.ref,{$$typeof:n,type:L,key:ie,ref:ye!==void 0?ye:null,props:Re}}function D(L,ie){return M(L.type,ie,void 0,void 0,void 0,L.props)}function C(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function R(L){var ie={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ye){return ie[ye]})}var A=/\/+/g;function k(L,ie){return typeof L=="object"&&L!==null&&L.key!=null?R(""+L.key):ie.toString(36)}function I(){}function se(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(I,I):(L.status="pending",L.then(function(ie){L.status==="pending"&&(L.status="fulfilled",L.value=ie)},function(ie){L.status==="pending"&&(L.status="rejected",L.reason=ie)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function fe(L,ie,ye,de,me){var Re=typeof L;(Re==="undefined"||Re==="boolean")&&(L=null);var Ie=!1;if(L===null)Ie=!0;else switch(Re){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(L.$$typeof){case n:case e:Ie=!0;break;case y:return Ie=L._init,fe(Ie(L._payload),ie,ye,de,me)}}if(Ie)return me=me(L),Ie=de===""?"."+k(L,0):de,Z(me)?(ye="",Ie!=null&&(ye=Ie.replace(A,"$&/")+"/"),fe(me,ie,ye,"",function(it){return it})):me!=null&&(C(me)&&(me=D(me,ye+(me.key==null||L&&L.key===me.key?"":(""+me.key).replace(A,"$&/")+"/")+Ie)),ie.push(me)),1;Ie=0;var et=de===""?".":de+":";if(Z(L))for(var ke=0;ke<L.length;ke++)de=L[ke],Re=et+k(de,ke),Ie+=fe(de,ie,ye,Re,me);else if(ke=b(L),typeof ke=="function")for(L=ke.call(L),ke=0;!(de=L.next()).done;)de=de.value,Re=et+k(de,ke++),Ie+=fe(de,ie,ye,Re,me);else if(Re==="object"){if(typeof L.then=="function")return fe(se(L),ie,ye,de,me);throw ie=String(L),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function J(L,ie,ye){if(L==null)return L;var de=[],me=0;return fe(L,de,"","",function(Re){return ie.call(ye,Re,me++)}),de}function oe(L){if(L._status===-1){var ie=L._result;ie=ie(),ie.then(function(ye){(L._status===0||L._status===-1)&&(L._status=1,L._result=ye)},function(ye){(L._status===0||L._status===-1)&&(L._status=2,L._result=ye)}),L._status===-1&&(L._status=0,L._result=ie)}if(L._status===1)return L._result.default;throw L._result}var ue=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function we(){}return Oe.Children={map:J,forEach:function(L,ie,ye){J(L,function(){ie.apply(this,arguments)},ye)},count:function(L){var ie=0;return J(L,function(){ie++}),ie},toArray:function(L){return J(L,function(ie){return ie})||[]},only:function(L){if(!C(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Oe.Component=V,Oe.Fragment=t,Oe.Profiler=a,Oe.PureComponent=G,Oe.StrictMode=i,Oe.Suspense=m,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Oe.act=function(){throw Error("act(...) is not supported in production builds of React.")},Oe.cache=function(L){return function(){return L.apply(null,arguments)}},Oe.cloneElement=function(L,ie,ye){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=O({},L.props),me=L.key,Re=void 0;if(ie!=null)for(Ie in ie.ref!==void 0&&(Re=void 0),ie.key!==void 0&&(me=""+ie.key),ie)!te.call(ie,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ie.ref===void 0||(de[Ie]=ie[Ie]);var Ie=arguments.length-2;if(Ie===1)de.children=ye;else if(1<Ie){for(var et=Array(Ie),ke=0;ke<Ie;ke++)et[ke]=arguments[ke+2];de.children=et}return M(L.type,me,void 0,void 0,Re,de)},Oe.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Oe.createElement=function(L,ie,ye){var de,me={},Re=null;if(ie!=null)for(de in ie.key!==void 0&&(Re=""+ie.key),ie)te.call(ie,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(me[de]=ie[de]);var Ie=arguments.length-2;if(Ie===1)me.children=ye;else if(1<Ie){for(var et=Array(Ie),ke=0;ke<Ie;ke++)et[ke]=arguments[ke+2];me.children=et}if(L&&L.defaultProps)for(de in Ie=L.defaultProps,Ie)me[de]===void 0&&(me[de]=Ie[de]);return M(L,Re,void 0,void 0,null,me)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:h,render:L}},Oe.isValidElement=C,Oe.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:oe}},Oe.memo=function(L,ie){return{$$typeof:p,type:L,compare:ie===void 0?null:ie}},Oe.startTransition=function(L){var ie=le.T,ye={};le.T=ye;try{var de=L(),me=le.S;me!==null&&me(ye,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(we,ue)}catch(Re){ue(Re)}finally{le.T=ie}},Oe.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Oe.use=function(L){return le.H.use(L)},Oe.useActionState=function(L,ie,ye){return le.H.useActionState(L,ie,ye)},Oe.useCallback=function(L,ie){return le.H.useCallback(L,ie)},Oe.useContext=function(L){return le.H.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L,ie){return le.H.useDeferredValue(L,ie)},Oe.useEffect=function(L,ie){return le.H.useEffect(L,ie)},Oe.useId=function(){return le.H.useId()},Oe.useImperativeHandle=function(L,ie,ye){return le.H.useImperativeHandle(L,ie,ye)},Oe.useInsertionEffect=function(L,ie){return le.H.useInsertionEffect(L,ie)},Oe.useLayoutEffect=function(L,ie){return le.H.useLayoutEffect(L,ie)},Oe.useMemo=function(L,ie){return le.H.useMemo(L,ie)},Oe.useOptimistic=function(L,ie){return le.H.useOptimistic(L,ie)},Oe.useReducer=function(L,ie,ye){return le.H.useReducer(L,ie,ye)},Oe.useRef=function(L){return le.H.useRef(L)},Oe.useState=function(L){return le.H.useState(L)},Oe.useSyncExternalStore=function(L,ie,ye){return le.H.useSyncExternalStore(L,ie,ye)},Oe.useTransition=function(){return le.H.useTransition()},Oe.version="19.0.0",Oe}var FT;function X_(){return FT||(FT=1,cg.exports=eN()),cg.exports}var $=X_(),hg={exports:{}},qu={},dg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function tN(){return qT||(qT=1,function(n){function e(J,oe){var ue=J.length;J.push(oe);e:for(;0<ue;){var we=ue-1>>>1,L=J[we];if(0<a(L,oe))J[we]=oe,J[ue]=L,ue=we;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var oe=J[0],ue=J.pop();if(ue!==oe){J[0]=ue;e:for(var we=0,L=J.length,ie=L>>>1;we<ie;){var ye=2*(we+1)-1,de=J[ye],me=ye+1,Re=J[me];if(0>a(de,ue))me<L&&0>a(Re,de)?(J[we]=Re,J[me]=ue,we=me):(J[we]=de,J[ye]=ue,we=ye);else if(me<L&&0>a(Re,ue))J[we]=Re,J[me]=ue,we=me;else break e}}return oe}function a(J,oe){var ue=J.sortIndex-oe.sortIndex;return ue!==0?ue:J.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],p=[],y=1,E=null,b=3,S=!1,O=!1,U=!1,V=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function H(J){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=J)i(p),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(p)}}function Z(J){if(U=!1,H(J),!O)if(t(m)!==null)O=!0,se();else{var oe=t(p);oe!==null&&fe(Z,oe.startTime-J)}}var le=!1,te=-1,M=5,D=-1;function C(){return!(n.unstable_now()-D<M)}function R(){if(le){var J=n.unstable_now();D=J;var oe=!0;try{e:{O=!1,U&&(U=!1,z(te),te=-1),S=!0;var ue=b;try{t:{for(H(J),E=t(m);E!==null&&!(E.expirationTime>J&&C());){var we=E.callback;if(typeof we=="function"){E.callback=null,b=E.priorityLevel;var L=we(E.expirationTime<=J);if(J=n.unstable_now(),typeof L=="function"){E.callback=L,H(J),oe=!0;break t}E===t(m)&&i(m),H(J)}else i(m);E=t(m)}if(E!==null)oe=!0;else{var ie=t(p);ie!==null&&fe(Z,ie.startTime-J),oe=!1}}break e}finally{E=null,b=ue,S=!1}oe=void 0}}finally{oe?A():le=!1}}}var A;if(typeof G=="function")A=function(){G(R)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,I=k.port2;k.port1.onmessage=R,A=function(){I.postMessage(null)}}else A=function(){V(R,0)};function se(){le||(le=!0,A())}function fe(J,oe){te=V(function(){J(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){O||S||(O=!0,se())},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var ue=b;b=oe;try{return J()}finally{b=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ue=b;b=J;try{return oe()}finally{b=ue}},n.unstable_scheduleCallback=function(J,oe,ue){var we=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?we+ue:we):ue=we,J){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ue+L,J={id:y++,callback:oe,priorityLevel:J,startTime:ue,expirationTime:L,sortIndex:-1},ue>we?(J.sortIndex=ue,e(p,J),t(m)===null&&J===t(p)&&(U?(z(te),te=-1):U=!0,fe(Z,ue-we))):(J.sortIndex=L,e(m,J),O||S||(O=!0,se())),J},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(J){var oe=b;return function(){var ue=b;b=oe;try{return J.apply(this,arguments)}finally{b=ue}}}}(fg)),fg}var HT;function nN(){return HT||(HT=1,dg.exports=tN()),dg.exports}var mg={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function iN(){if(GT)return hn;GT=1;var n=X_();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,p,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,y)},hn.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},hn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},hn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},hn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,E=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},hn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,E=h(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},hn.requestFormReset=function(m){i.d.r(m)},hn.unstable_batchedUpdates=function(m,p){return m(p)},hn.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},hn.useFormStatus=function(){return u.H.useHostTransitionStatus()},hn.version="19.0.0",hn}var $T;function rN(){if($T)return mg.exports;$T=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mg.exports=iN(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function sN(){if(QT)return qu;QT=1;var n=nN(),e=X_(),t=rN();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),Z=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=le&&r[le]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function D(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case h:return"Portal";case y:return"Profiler";case p:return"StrictMode";case U:return"Suspense";case V:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case S:return(r.displayName||"Context")+".Provider";case b:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return s=r.displayName||null,s!==null?s:D(r.type)||"Memo";case G:s=r._payload,r=r._init;try{return D(r(s))}catch{}}return null}var C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=Object.assign,A,k;function I(r){if(A===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);A=s&&s[1]||"",k=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+A+r+k}var se=!1;function fe(r,s){if(!r||se)return"";se=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var K=W}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(W){K=W}r.call(ae.prototype)}}else{try{throw Error()}catch(W){K=W}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),w=g[0],x=g[1];if(w&&x){var P=w.split(`
`),B=x.split(`
`);for(f=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(c===P.length||f===B.length)for(c=P.length-1,f=B.length-1;1<=c&&0<=f&&P[c]!==B[f];)f--;for(;1<=c&&0<=f;c--,f--)if(P[c]!==B[f]){if(c!==1||f!==1)do if(c--,f--,0>f||P[c]!==B[f]){var X=`
`+P[c].replace(" at new "," at ");return r.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",r.displayName)),X}while(1<=c&&0<=f);break}}}finally{se=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?I(l):""}function J(r){switch(r.tag){case 26:case 27:case 5:return I(r.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 15:return r=fe(r.type,!1),r;case 11:return r=fe(r.type.render,!1),r;case 1:return r=fe(r.type,!0),r;default:return""}}function oe(r){try{var s="";do s+=J(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ue(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function we(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function L(r){if(ue(r)!==r)throw Error(i(188))}function ie(r){var s=r.alternate;if(!s){if(s=ue(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,c=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return L(f),r;if(g===c)return L(f),s;g=g.sibling}throw Error(i(188))}if(l.return!==c.return)l=f,c=g;else{for(var w=!1,x=f.child;x;){if(x===l){w=!0,l=f,c=g;break}if(x===c){w=!0,c=f,l=g;break}x=x.sibling}if(!w){for(x=g.child;x;){if(x===l){w=!0,l=g,c=f;break}if(x===c){w=!0,c=g,l=f;break}x=x.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function ye(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=ye(r),s!==null)return s;r=r.sibling}return null}var de=Array.isArray,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},Ie=[],et=-1;function ke(r){return{current:r}}function it(r){0>et||(r.current=Ie[et],Ie[et]=null,et--)}function Ye(r,s){et++,Ie[et]=r.current,r.current=s}var gn=ke(null),Xi=ke(null),Bn=ke(null),zr=ke(null);function Fr(r,s){switch(Ye(Bn,s),Ye(Xi,r),Ye(gn,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?mT(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=mT(r),s=pT(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}it(gn),Ye(gn,s)}function Ji(){it(gn),it(Xi),it(Bn)}function Vl(r){r.memoizedState!==null&&Ye(zr,r);var s=gn.current,l=pT(s,r.type);s!==l&&(Ye(Xi,r),Ye(gn,l))}function ro(r){Xi.current===r&&(it(gn),it(Xi)),zr.current===r&&(it(zr),Vu._currentValue=Re)}var so=Object.prototype.hasOwnProperty,Xs=n.unstable_scheduleCallback,ao=n.unstable_cancelCallback,hm=n.unstable_shouldYield,Ul=n.unstable_requestPaint,Sn=n.unstable_now,Jc=n.unstable_getCurrentPriorityLevel,Ot=n.unstable_ImmediatePriority,Ht=n.unstable_UserBlockingPriority,Zi=n.unstable_NormalPriority,Zc=n.unstable_LowPriority,jl=n.unstable_IdlePriority,dm=n.log,Js=n.unstable_setDisableYieldValue,qr=null,un=null;function Bl(r){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(qr,r,void 0,(r.current.flags&128)===128)}catch{}}function wi(r){if(typeof dm=="function"&&Js(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(qr,r)}catch{}}var _n=Math.clz32?Math.clz32:th,zl=Math.log,eh=Math.LN2;function th(r){return r>>>=0,r===0?32:31-(zl(r)/eh|0)|0}var bi=128,Hr=4194304;function li(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function zn(r,s){var l=r.pendingLanes;if(l===0)return 0;var c=0,f=r.suspendedLanes,g=r.pingedLanes,w=r.warmLanes;r=r.finishedLanes!==0;var x=l&134217727;return x!==0?(l=x&~f,l!==0?c=li(l):(g&=x,g!==0?c=li(g):r||(w=x&~w,w!==0&&(c=li(w))))):(x=l&~f,x!==0?c=li(x):g!==0?c=li(g):r||(w=l&~w,w!==0&&(c=li(w)))),c===0?0:s!==0&&s!==c&&!(s&f)&&(f=c&-c,w=s&-s,f>=w||f===32&&(w&4194176)!==0)?s:c}function Gr(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function oo(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fl(){var r=bi;return bi<<=1,!(bi&4194176)&&(bi=128),r}function $r(){var r=Hr;return Hr<<=1,!(Hr&62914560)&&(Hr=4194304),r}function lo(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function St(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function nh(r,s,l,c,f,g){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var x=r.entanglements,P=r.expirationTimes,B=r.hiddenUpdates;for(l=w&~l;0<l;){var X=31-_n(l),ae=1<<X;x[X]=0,P[X]=-1;var K=B[X];if(K!==null)for(B[X]=null,X=0;X<K.length;X++){var W=K[X];W!==null&&(W.lane&=-536870913)}l&=~ae}c!==0&&Qr(r,c,0),g!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=g&~(w&~s))}function Qr(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-_n(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|l&4194218}function Kr(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var c=31-_n(l),f=1<<c;f&s|r[c]&s&&(r[c]|=s),l&=~f}}function ih(r){return r&=-r,2<r?8<r?r&134217727?32:268435456:8:2}function rh(){var r=me.p;return r!==0?r:(r=window.event,r===void 0?32:OT(r.type))}function Yr(r,s){var l=me.p;try{return me.p=r,s()}finally{me.p=l}}var Si=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Si,Mt="__reactProps$"+Si,er="__reactContainer$"+Si,Zs="__reactEvents$"+Si,uo="__reactListeners$"+Si,Ci="__reactHandles$"+Si,ql="__reactResources$"+Si,Wr="__reactMarker$"+Si;function ea(r){delete r[Gt],delete r[Mt],delete r[Zs],delete r[uo],delete r[Ci]}function ui(r){var s=r[Gt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[er]||l[Gt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=yT(r);r!==null;){if(l=r[Gt])return l;r=yT(r)}return s}r=l,l=r.parentNode}return null}function tr(r){if(r=r[Gt]||r[er]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Xr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Jr(r){var s=r[ql];return s||(s=r[ql]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ft(r){r[Wr]=!0}var Hl=new Set,co={};function kn(r,s){Cn(r,s),Cn(r+"Capture",s)}function Cn(r,s){for(co[r]=s,r=0;r<s.length;r++)Hl.add(s[r])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gl={},$l={};function sh(r){return so.call($l,r)?!0:so.call(Gl,r)?!1:fm.test(r)?$l[r]=!0:(Gl[r]=!0,!1)}function Zr(r,s,l){if(sh(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function es(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function Fn(r,s,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+c)}}function yn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ah(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mm(r){var s=ah(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ta(r){r._valueTracker||(r._valueTracker=mm(r))}function Ql(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return r&&(c=ah(r)?r.checked?"true":"false":r.value),r=c,r!==l?(s.setValue(r),!0):!1}function ho(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var nr=/[\n"\\]/g;function yt(r){return r.replace(nr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ts(r,s,l,c,f,g,w,x){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+yn(s)):r.value!==""+yn(s)&&(r.value=""+yn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?fo(r,w,yn(s)):l!=null?fo(r,w,yn(l)):c!=null&&r.removeAttribute("value"),f==null&&g!=null&&(r.defaultChecked=!!g),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.name=""+yn(x):r.removeAttribute("name")}function na(r,s,l,c,f,g,w,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;l=l!=null?""+yn(l):"",s=s!=null?""+yn(s):l,x||s===r.value||(r.value=s),r.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=x?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function fo(r,s,l){s==="number"&&ho(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function We(r,s,l,c){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&c&&(r[l].defaultSelected=!0)}else{for(l=""+yn(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ia(r,s,l){if(s!=null&&(s=""+yn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+yn(l):""}function ns(r,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(de(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=yn(s),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c)}function qn(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var pm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kl(r,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,l):typeof l!="number"||l===0||pm.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function oh(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&l[f]!==c&&Kl(r,f,c)}else for(var g in s)s.hasOwnProperty(g)&&Kl(r,g,s[g])}function Yl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_m=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ai(r){return _m.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Hn=null;function mo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ir=null,rr=null;function sr(r){var s=tr(r);if(s&&(r=s.stateNode)){var l=r[Mt]||null;e:switch(r=s.stateNode,s.type){case"input":if(ts(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==r&&c.form===r.form){var f=c[Mt]||null;if(!f)throw Error(i(90));ts(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===r.form&&Ql(c)}break e;case"textarea":ia(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&We(r,!!l.multiple,s,!1)}}}var Wl=!1;function lh(r,s,l){if(Wl)return r(s,l);Wl=!0;try{var c=r(s);return c}finally{if(Wl=!1,(ir!==null||rr!==null)&&(Zh(),ir&&(s=ir,r=rr,rr=ir=null,sr(s),r)))for(s=0;s<r.length;s++)sr(r[s])}}function ra(r,s){var l=r.stateNode;if(l===null)return null;var c=l[Mt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Gn=!1;if(On)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{Gn=!1}var xi=null,is=null,ar=null;function Xl(){if(ar)return ar;var r,s=is,l=s.length,c,f="value"in xi?xi.value:xi.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var w=l-r;for(c=1;c<=w&&s[l-c]===f[g-c];c++);return ar=f.slice(r,1<c?1-c:void 0)}function Ri(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ii(){return!0}function Jl(){return!1}function $t(r){function s(l,c,f,g,w){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var x in r)r.hasOwnProperty(x)&&(l=r[x],this[x]=l?l(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ii:Jl,this.isPropagationStopped=Jl,this}return R(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),s}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=$t(tt),aa=R({},tt,{view:0,detail:0}),uh=$t(aa),go,_o,Ni,oa=R({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ni&&(Ni&&r.type==="mousemove"?(go=r.screenX-Ni.screenX,_o=r.screenY-Ni.screenY):_o=go=0,Ni=r),go)},movementY:function(r){return"movementY"in r?r.movementY:_o}}),$n=$t(oa),ch=R({},oa,{dataTransfer:0}),ym=$t(ch),la=R({},aa,{relatedTarget:0}),yo=$t(la),Zl=R({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),vo=$t(Zl),hh=R({},tt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Eo=$t(hh),vm=R({},tt,{data:0}),eu=$t(vm),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=fh[r])?!!s[r]:!1}function ca(){return tu}var mh=R({},aa,{key:function(r){if(r.key){var s=ua[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ri(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?dh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(r){return r.type==="keypress"?Ri(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ri(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),To=$t(mh),ph=R({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=$t(ph),or=R({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),gh=$t(or),_h=R({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),yh=$t(_h),vh=R({},oa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),wo=$t(vh),vn=R({},tt,{newState:0,oldState:0}),Eh=$t(vn),Th=[9,13,27,32],Di=On&&"CompositionEvent"in window,d=null;On&&"documentMode"in document&&(d=document.documentMode);var _=On&&"TextEvent"in window&&!d,T=On&&(!Di||d&&8<d&&11>=d),N=" ",q=!1;function Y(r,s){switch(r){case"keyup":return Th.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ge=!1;function Pt(r,s){switch(r){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(q=!0,N);case"textInput":return r=s.data,r===N&&q?null:r;default:return null}}function $e(r,s){if(Ge)return r==="compositionend"||!Di&&Y(r,s)?(r=Xl(),ar=is=xi=null,Ge=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var Qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Qt[r.type]:s==="textarea"}function lr(r,s,l,c){ir?rr?rr.push(c):rr=[c]:ir=c,s=rd(s,"onChange"),0<s.length&&(l=new po("onChange","change",null,l,c),r.push({event:l,listeners:s}))}var en=null,ki=null;function iu(r){uT(r,0)}function wh(r){var s=Xr(r);if(Ql(s))return r}function Uv(r,s){if(r==="change")return s}var jv=!1;if(On){var Em;if(On){var Tm="oninput"in document;if(!Tm){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),Tm=typeof Bv.oninput=="function"}Em=Tm}else Em=!1;jv=Em&&(!document.documentMode||9<document.documentMode)}function zv(){en&&(en.detachEvent("onpropertychange",Fv),ki=en=null)}function Fv(r){if(r.propertyName==="value"&&wh(ki)){var s=[];lr(s,ki,r,mo(r)),lh(iu,s)}}function x1(r,s,l){r==="focusin"?(zv(),en=s,ki=l,en.attachEvent("onpropertychange",Fv)):r==="focusout"&&zv()}function R1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wh(ki)}function I1(r,s){if(r==="click")return wh(s)}function N1(r,s){if(r==="input"||r==="change")return wh(s)}function D1(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Mn=typeof Object.is=="function"?Object.is:D1;function ru(r,s){if(Mn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!so.call(s,f)||!Mn(r[f],s[f]))return!1}return!0}function qv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hv(r,s){var l=qv(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=s&&c>=s)return{node:l,offset:s-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qv(l)}}function Gv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Gv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function $v(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ho(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=ho(r.document)}return s}function wm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function k1(r,s){var l=$v(s);s=r.focusedElem;var c=r.selectionRange;if(l!==s&&s&&s.ownerDocument&&Gv(s.ownerDocument.documentElement,s)){if(c!==null&&wm(s)){if(r=c.start,l=c.end,l===void 0&&(l=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(l,s.value.length);else if(l=(r=s.ownerDocument||document)&&r.defaultView||window,l.getSelection){l=l.getSelection();var f=s.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!l.extend&&g>c&&(f=c,c=g,g=f),f=Hv(s,g);var w=Hv(s,c);f&&w&&(l.rangeCount!==1||l.anchorNode!==f.node||l.anchorOffset!==f.offset||l.focusNode!==w.node||l.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),l.removeAllRanges(),g>c?(l.addRange(r),l.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),l.addRange(r)))}}for(r=[],l=s;l=l.parentNode;)l.nodeType===1&&r.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)l=r[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var O1=On&&"documentMode"in document&&11>=document.documentMode,bo=null,bm=null,su=null,Sm=!1;function Qv(r,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sm||bo==null||bo!==ho(c)||(c=bo,"selectionStart"in c&&wm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),su&&ru(su,c)||(su=c,c=rd(bm,"onSelect"),0<c.length&&(s=new po("onSelect","select",null,s,l),r.push({event:s,listeners:c}),s.target=bo)))}function ha(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var So={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Cm={},Kv={};On&&(Kv=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function da(r){if(Cm[r])return Cm[r];if(!So[r])return r;var s=So[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Kv)return Cm[r]=s[l];return r}var Yv=da("animationend"),Wv=da("animationiteration"),Xv=da("animationstart"),M1=da("transitionrun"),P1=da("transitionstart"),L1=da("transitioncancel"),Jv=da("transitionend"),Zv=new Map,e0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ci(r,s){Zv.set(r,s),kn(s,[r])}var Qn=[],Co=0,Am=0;function bh(){for(var r=Co,s=Am=Co=0;s<r;){var l=Qn[s];Qn[s++]=null;var c=Qn[s];Qn[s++]=null;var f=Qn[s];Qn[s++]=null;var g=Qn[s];if(Qn[s++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}g!==0&&t0(l,f,g)}}function Sh(r,s,l,c){Qn[Co++]=r,Qn[Co++]=s,Qn[Co++]=l,Qn[Co++]=c,Am|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function xm(r,s,l,c){return Sh(r,s,l,c),Ch(r)}function rs(r,s){return Sh(r,null,null,s),Ch(r)}function t0(r,s,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var f=!1,g=r.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(f=!0)),r=g,g=g.return;f&&s!==null&&r.tag===3&&(g=r.stateNode,f=31-_n(l),g=g.hiddenUpdates,r=g[f],r===null?g[f]=[s]:r.push(s),s.lane=l|536870912)}function Ch(r){if(50<Nu)throw Nu=0,Op=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ao={},n0=new WeakMap;function Kn(r,s){if(typeof r=="object"&&r!==null){var l=n0.get(r);return l!==void 0?l:(s={value:r,source:s,stack:oe(s)},n0.set(r,s),s)}return{value:r,source:s,stack:oe(s)}}var xo=[],Ro=0,Ah=null,xh=0,Yn=[],Wn=0,fa=null,ur=1,cr="";function ma(r,s){xo[Ro++]=xh,xo[Ro++]=Ah,Ah=r,xh=s}function i0(r,s,l){Yn[Wn++]=ur,Yn[Wn++]=cr,Yn[Wn++]=fa,fa=r;var c=ur;r=cr;var f=32-_n(c)-1;c&=~(1<<f),l+=1;var g=32-_n(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,ur=1<<32-_n(s)+f|l<<f|c,cr=g+r}else ur=1<<g|l<<f|c,cr=r}function Rm(r){r.return!==null&&(ma(r,1),i0(r,1,0))}function Im(r){for(;r===Ah;)Ah=xo[--Ro],xo[Ro]=null,xh=xo[--Ro],xo[Ro]=null;for(;r===fa;)fa=Yn[--Wn],Yn[Wn]=null,cr=Yn[--Wn],Yn[Wn]=null,ur=Yn[--Wn],Yn[Wn]=null}var En=null,tn=null,Xe=!1,hi=null,Oi=!1,Nm=Error(i(519));function pa(r){var s=Error(i(418,""));throw lu(Kn(s,r)),Nm}function r0(r){var s=r.stateNode,l=r.type,c=r.memoizedProps;switch(s[Gt]=r,s[Mt]=c,l){case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":case"embed":qe("load",s);break;case"video":case"audio":for(l=0;l<ku.length;l++)qe(ku[l],s);break;case"source":qe("error",s);break;case"img":case"image":case"link":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"input":qe("invalid",s),na(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ta(s);break;case"select":qe("invalid",s);break;case"textarea":qe("invalid",s),ns(s,c.value,c.defaultValue,c.children),ta(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||fT(s.textContent,l)?(c.popover!=null&&(qe("beforetoggle",s),qe("toggle",s)),c.onScroll!=null&&qe("scroll",s),c.onScrollEnd!=null&&qe("scrollend",s),c.onClick!=null&&(s.onclick=sd),s=!0):s=!1,s||pa(r)}function s0(r){for(En=r.return;En;)switch(En.tag){case 3:case 27:Oi=!0;return;case 5:case 13:Oi=!1;return;default:En=En.return}}function au(r){if(r!==En)return!1;if(!Xe)return s0(r),Xe=!0,!1;var s=!1,l;if((l=r.tag!==3&&r.tag!==27)&&((l=r.tag===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Wp(r.type,r.memoizedProps)),l=!l),l&&(s=!0),s&&tn&&pa(r),s0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){tn=fi(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}tn=null}}else tn=En?fi(r.stateNode.nextSibling):null;return!0}function ou(){tn=En=null,Xe=!1}function lu(r){hi===null?hi=[r]:hi.push(r)}var uu=Error(i(460)),a0=Error(i(474)),Dm={then:function(){}};function o0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Rh(){}function l0(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(Rh,Rh),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===uu?Error(i(483)):r;default:if(typeof s.status=="string")s.then(Rh,Rh);else{if(r=lt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===uu?Error(i(483)):r}throw cu=s,uu}}var cu=null;function u0(){if(cu===null)throw Error(i(459));var r=cu;return cu=null,r}var Io=null,hu=0;function Ih(r){var s=hu;return hu+=1,Io===null&&(Io=[]),l0(Io,r,s)}function du(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Nh(r,s){throw s.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function c0(r){var s=r._init;return s(r._payload)}function h0(r){function s(F,j){if(r){var Q=F.deletions;Q===null?(F.deletions=[j],F.flags|=16):Q.push(j)}}function l(F,j){if(!r)return null;for(;j!==null;)s(F,j),j=j.sibling;return null}function c(F){for(var j=new Map;F!==null;)F.key!==null?j.set(F.key,F):j.set(F.index,F),F=F.sibling;return j}function f(F,j){return F=gs(F,j),F.index=0,F.sibling=null,F}function g(F,j,Q){return F.index=Q,r?(Q=F.alternate,Q!==null?(Q=Q.index,Q<j?(F.flags|=33554434,j):Q):(F.flags|=33554434,j)):(F.flags|=1048576,j)}function w(F){return r&&F.alternate===null&&(F.flags|=33554434),F}function x(F,j,Q,ee){return j===null||j.tag!==6?(j=Cp(Q,F.mode,ee),j.return=F,j):(j=f(j,Q),j.return=F,j)}function P(F,j,Q,ee){var _e=Q.type;return _e===m?X(F,j,Q.props.children,ee,Q.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===G&&c0(_e)===j.type)?(j=f(j,Q.props),du(j,Q),j.return=F,j):(j=Kh(Q.type,Q.key,Q.props,null,F.mode,ee),du(j,Q),j.return=F,j)}function B(F,j,Q,ee){return j===null||j.tag!==4||j.stateNode.containerInfo!==Q.containerInfo||j.stateNode.implementation!==Q.implementation?(j=Ap(Q,F.mode,ee),j.return=F,j):(j=f(j,Q.children||[]),j.return=F,j)}function X(F,j,Q,ee,_e){return j===null||j.tag!==7?(j=Ca(Q,F.mode,ee,_e),j.return=F,j):(j=f(j,Q),j.return=F,j)}function ae(F,j,Q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Cp(""+j,F.mode,Q),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case u:return Q=Kh(j.type,j.key,j.props,null,F.mode,Q),du(Q,j),Q.return=F,Q;case h:return j=Ap(j,F.mode,Q),j.return=F,j;case G:var ee=j._init;return j=ee(j._payload),ae(F,j,Q)}if(de(j)||te(j))return j=Ca(j,F.mode,Q,null),j.return=F,j;if(typeof j.then=="function")return ae(F,Ih(j),Q);if(j.$$typeof===S)return ae(F,Gh(F,j),Q);Nh(F,j)}return null}function K(F,j,Q,ee){var _e=j!==null?j.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return _e!==null?null:x(F,j,""+Q,ee);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:return Q.key===_e?P(F,j,Q,ee):null;case h:return Q.key===_e?B(F,j,Q,ee):null;case G:return _e=Q._init,Q=_e(Q._payload),K(F,j,Q,ee)}if(de(Q)||te(Q))return _e!==null?null:X(F,j,Q,ee,null);if(typeof Q.then=="function")return K(F,j,Ih(Q),ee);if(Q.$$typeof===S)return K(F,j,Gh(F,Q),ee);Nh(F,Q)}return null}function W(F,j,Q,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(Q)||null,x(j,F,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case u:return F=F.get(ee.key===null?Q:ee.key)||null,P(j,F,ee,_e);case h:return F=F.get(ee.key===null?Q:ee.key)||null,B(j,F,ee,_e);case G:var Pe=ee._init;return ee=Pe(ee._payload),W(F,j,Q,ee,_e)}if(de(ee)||te(ee))return F=F.get(Q)||null,X(j,F,ee,_e,null);if(typeof ee.then=="function")return W(F,j,Q,Ih(ee),_e);if(ee.$$typeof===S)return W(F,j,Q,Gh(j,ee),_e);Nh(j,ee)}return null}function ve(F,j,Q,ee){for(var _e=null,Pe=null,Ee=j,be=j=0,Wt=null;Ee!==null&&be<Q.length;be++){Ee.index>be?(Wt=Ee,Ee=null):Wt=Ee.sibling;var Je=K(F,Ee,Q[be],ee);if(Je===null){Ee===null&&(Ee=Wt);break}r&&Ee&&Je.alternate===null&&s(F,Ee),j=g(Je,j,be),Pe===null?_e=Je:Pe.sibling=Je,Pe=Je,Ee=Wt}if(be===Q.length)return l(F,Ee),Xe&&ma(F,be),_e;if(Ee===null){for(;be<Q.length;be++)Ee=ae(F,Q[be],ee),Ee!==null&&(j=g(Ee,j,be),Pe===null?_e=Ee:Pe.sibling=Ee,Pe=Ee);return Xe&&ma(F,be),_e}for(Ee=c(Ee);be<Q.length;be++)Wt=W(Ee,F,be,Q[be],ee),Wt!==null&&(r&&Wt.alternate!==null&&Ee.delete(Wt.key===null?be:Wt.key),j=g(Wt,j,be),Pe===null?_e=Wt:Pe.sibling=Wt,Pe=Wt);return r&&Ee.forEach(function(bs){return s(F,bs)}),Xe&&ma(F,be),_e}function Ne(F,j,Q,ee){if(Q==null)throw Error(i(151));for(var _e=null,Pe=null,Ee=j,be=j=0,Wt=null,Je=Q.next();Ee!==null&&!Je.done;be++,Je=Q.next()){Ee.index>be?(Wt=Ee,Ee=null):Wt=Ee.sibling;var bs=K(F,Ee,Je.value,ee);if(bs===null){Ee===null&&(Ee=Wt);break}r&&Ee&&bs.alternate===null&&s(F,Ee),j=g(bs,j,be),Pe===null?_e=bs:Pe.sibling=bs,Pe=bs,Ee=Wt}if(Je.done)return l(F,Ee),Xe&&ma(F,be),_e;if(Ee===null){for(;!Je.done;be++,Je=Q.next())Je=ae(F,Je.value,ee),Je!==null&&(j=g(Je,j,be),Pe===null?_e=Je:Pe.sibling=Je,Pe=Je);return Xe&&ma(F,be),_e}for(Ee=c(Ee);!Je.done;be++,Je=Q.next())Je=W(Ee,F,be,Je.value,ee),Je!==null&&(r&&Je.alternate!==null&&Ee.delete(Je.key===null?be:Je.key),j=g(Je,j,be),Pe===null?_e=Je:Pe.sibling=Je,Pe=Je);return r&&Ee.forEach(function(WI){return s(F,WI)}),Xe&&ma(F,be),_e}function Tt(F,j,Q,ee){if(typeof Q=="object"&&Q!==null&&Q.type===m&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case u:e:{for(var _e=Q.key;j!==null;){if(j.key===_e){if(_e=Q.type,_e===m){if(j.tag===7){l(F,j.sibling),ee=f(j,Q.props.children),ee.return=F,F=ee;break e}}else if(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===G&&c0(_e)===j.type){l(F,j.sibling),ee=f(j,Q.props),du(ee,Q),ee.return=F,F=ee;break e}l(F,j);break}else s(F,j);j=j.sibling}Q.type===m?(ee=Ca(Q.props.children,F.mode,ee,Q.key),ee.return=F,F=ee):(ee=Kh(Q.type,Q.key,Q.props,null,F.mode,ee),du(ee,Q),ee.return=F,F=ee)}return w(F);case h:e:{for(_e=Q.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===Q.containerInfo&&j.stateNode.implementation===Q.implementation){l(F,j.sibling),ee=f(j,Q.children||[]),ee.return=F,F=ee;break e}else{l(F,j);break}else s(F,j);j=j.sibling}ee=Ap(Q,F.mode,ee),ee.return=F,F=ee}return w(F);case G:return _e=Q._init,Q=_e(Q._payload),Tt(F,j,Q,ee)}if(de(Q))return ve(F,j,Q,ee);if(te(Q)){if(_e=te(Q),typeof _e!="function")throw Error(i(150));return Q=_e.call(Q),Ne(F,j,Q,ee)}if(typeof Q.then=="function")return Tt(F,j,Ih(Q),ee);if(Q.$$typeof===S)return Tt(F,j,Gh(F,Q),ee);Nh(F,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,j!==null&&j.tag===6?(l(F,j.sibling),ee=f(j,Q),ee.return=F,F=ee):(l(F,j),ee=Cp(Q,F.mode,ee),ee.return=F,F=ee),w(F)):l(F,j)}return function(F,j,Q,ee){try{hu=0;var _e=Tt(F,j,Q,ee);return Io=null,_e}catch(Ee){if(Ee===uu)throw Ee;var Pe=ei(29,Ee,null,F.mode);return Pe.lanes=ee,Pe.return=F,Pe}finally{}}}var ga=h0(!0),d0=h0(!1),No=ke(null),Dh=ke(0);function f0(r,s){r=Tr,Ye(Dh,r),Ye(No,s),Tr=r|s.baseLanes}function km(){Ye(Dh,Tr),Ye(No,No.current)}function Om(){Tr=Dh.current,it(No),it(Dh)}var Xn=ke(null),Mi=null;function ss(r){var s=r.alternate;Ye(Vt,Vt.current&1),Ye(Xn,r),Mi===null&&(s===null||No.current!==null||s.memoizedState!==null)&&(Mi=r)}function m0(r){if(r.tag===22){if(Ye(Vt,Vt.current),Ye(Xn,r),Mi===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Mi=r)}}else as()}function as(){Ye(Vt,Vt.current),Ye(Xn,Xn.current)}function hr(r){it(Xn),Mi===r&&(Mi=null),it(Vt)}var Vt=ke(0);function kh(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var V1=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},U1=n.unstable_scheduleCallback,j1=n.unstable_NormalPriority,Ut={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mm(){return{controller:new V1,data:new Map,refCount:0}}function fu(r){r.refCount--,r.refCount===0&&U1(j1,function(){r.controller.abort()})}var mu=null,Pm=0,Do=0,ko=null;function B1(r,s){if(mu===null){var l=mu=[];Pm=0,Do=zp(),ko={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Pm++,s.then(p0,p0),s}function p0(){if(--Pm===0&&mu!==null){ko!==null&&(ko.status="fulfilled");var r=mu;mu=null,Do=0,ko=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function z1(r,s){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<l.length;f++)(0,l[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var g0=C.S;C.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&B1(r,s),g0!==null&&g0(r,s)};var _a=ke(null);function Lm(){var r=_a.current;return r!==null?r:lt.pooledCache}function Oh(r,s){s===null?Ye(_a,_a.current):Ye(_a,s.pool)}function _0(){var r=Lm();return r===null?null:{parent:Ut._currentValue,pool:r}}var os=0,Me=null,rt=null,xt=null,Mh=!1,Oo=!1,ya=!1,Ph=0,pu=0,Mo=null,F1=0;function Ct(){throw Error(i(321))}function Vm(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Mn(r[l],s[l]))return!1;return!0}function Um(r,s,l,c,f,g){return os=g,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,C.H=r===null||r.memoizedState===null?va:ls,ya=!1,g=l(c,f),ya=!1,Oo&&(g=v0(s,l,c,f)),y0(r),g}function y0(r){C.H=Pi;var s=rt!==null&&rt.next!==null;if(os=0,xt=rt=Me=null,Mh=!1,pu=0,Mo=null,s)throw Error(i(300));r===null||Kt||(r=r.dependencies,r!==null&&Hh(r)&&(Kt=!0))}function v0(r,s,l,c){Me=r;var f=0;do{if(Oo&&(Mo=null),pu=0,Oo=!1,25<=f)throw Error(i(301));if(f+=1,xt=rt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}C.H=Ea,g=s(l,c)}while(Oo);return g}function q1(){var r=C.H,s=r.useState()[0];return s=typeof s.then=="function"?gu(s):s,r=r.useState()[0],(rt!==null?rt.memoizedState:null)!==r&&(Me.flags|=1024),s}function jm(){var r=Ph!==0;return Ph=0,r}function Bm(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function zm(r){if(Mh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mh=!1}os=0,xt=rt=Me=null,Oo=!1,pu=Ph=0,Mo=null}function An(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Me.memoizedState=xt=r:xt=xt.next=r,xt}function Rt(){if(rt===null){var r=Me.alternate;r=r!==null?r.memoizedState:null}else r=rt.next;var s=xt===null?Me.memoizedState:xt.next;if(s!==null)xt=s,rt=r;else{if(r===null)throw Me.alternate===null?Error(i(467)):Error(i(310));rt=r,r={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},xt===null?Me.memoizedState=xt=r:xt=xt.next=r}return xt}var Lh;Lh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function gu(r){var s=pu;return pu+=1,Mo===null&&(Mo=[]),r=l0(Mo,r,s),s=Me,(xt===null?s.memoizedState:xt.next)===null&&(s=s.alternate,C.H=s===null||s.memoizedState===null?va:ls),r}function Vh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return gu(r);if(r.$$typeof===S)return cn(r)}throw Error(i(438,String(r)))}function Fm(r){var s=null,l=Me.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Lh(),Me.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),c=0;c<r;c++)l[c]=Z;return s.index++,l}function dr(r,s){return typeof s=="function"?s(r):s}function Uh(r){var s=Rt();return qm(s,rt,r)}function qm(r,s,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var f=r.baseQueue,g=c.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}s.baseQueue=f=g,c.pending=null}if(g=r.baseState,f===null)r.memoizedState=g;else{s=f.next;var x=w=null,P=null,B=s,X=!1;do{var ae=B.lane&-536870913;if(ae!==B.lane?(Qe&ae)===ae:(os&ae)===ae){var K=B.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ae===Do&&(X=!0);else if((os&K)===K){B=B.next,K===Do&&(X=!0);continue}else ae={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},P===null?(x=P=ae,w=g):P=P.next=ae,Me.lanes|=K,_s|=K;ae=B.action,ya&&l(g,ae),g=B.hasEagerState?B.eagerState:l(g,ae)}else K={lane:ae,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},P===null?(x=P=K,w=g):P=P.next=K,Me.lanes|=ae,_s|=ae;B=B.next}while(B!==null&&B!==s);if(P===null?w=g:P.next=x,!Mn(g,r.memoizedState)&&(Kt=!0,X&&(l=ko,l!==null)))throw l;r.memoizedState=g,r.baseState=w,r.baseQueue=P,c.lastRenderedState=g}return f===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Hm(r){var s=Rt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Mn(g,s.memoizedState)||(Kt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,c]}function E0(r,s,l){var c=Me,f=Rt(),g=Xe;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=s();var w=!Mn((rt||f).memoizedState,l);if(w&&(f.memoizedState=l,Kt=!0),f=f.queue,Qm(b0.bind(null,c,f,r),[r]),f.getSnapshot!==s||w||xt!==null&&xt.memoizedState.tag&1){if(c.flags|=2048,Po(9,w0.bind(null,c,f,l,s),{destroy:void 0},null),lt===null)throw Error(i(349));g||os&60||T0(c,s,l)}return l}function T0(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Me.updateQueue,s===null?(s=Lh(),Me.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function w0(r,s,l,c){s.value=l,s.getSnapshot=c,S0(s)&&C0(r)}function b0(r,s,l){return l(function(){S0(s)&&C0(r)})}function S0(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Mn(r,l)}catch{return!0}}function C0(r){var s=rs(r,2);s!==null&&Tn(s,r,2)}function Gm(r){var s=An();if(typeof r=="function"){var l=r;if(r=l(),ya){wi(!0);try{l()}finally{wi(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:r},s}function A0(r,s,l,c){return r.baseState=l,qm(r,rt,typeof c=="function"?c:dr)}function H1(r,s,l,c,f){if(zh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};C.T!==null?l(!0):g.isTransition=!1,c(g),l=s.pending,l===null?(g.next=s.pending=g,x0(s,g)):(g.next=l.next,s.pending=l.next=g)}}function x0(r,s){var l=s.action,c=s.payload,f=r.state;if(s.isTransition){var g=C.T,w={};C.T=w;try{var x=l(f,c),P=C.S;P!==null&&P(w,x),R0(r,s,x)}catch(B){$m(r,s,B)}finally{C.T=g}}else try{g=l(f,c),R0(r,s,g)}catch(B){$m(r,s,B)}}function R0(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){I0(r,s,c)},function(c){return $m(r,s,c)}):I0(r,s,l)}function I0(r,s,l){s.status="fulfilled",s.value=l,N0(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,x0(r,l)))}function $m(r,s,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,N0(s),s=s.next;while(s!==c)}r.action=null}function N0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function D0(r,s){return s}function k0(r,s){if(Xe){var l=lt.formState;if(l!==null){e:{var c=Me;if(Xe){if(tn){t:{for(var f=tn,g=Oi;f.nodeType!==8;){if(!g){f=null;break t}if(f=fi(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){tn=fi(f.nextSibling),c=f.data==="F!";break e}}pa(c)}c=!1}c&&(s=l[0])}}return l=An(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D0,lastRenderedState:s},l.queue=c,l=W0.bind(null,Me,c),c.dispatch=l,c=Gm(!1),g=Jm.bind(null,Me,!1,c.queue),c=An(),f={state:s,dispatch:null,action:r,pending:null},c.queue=f,l=H1.bind(null,Me,f,g,l),f.dispatch=l,c.memoizedState=r,[s,l,!1]}function O0(r){var s=Rt();return M0(s,rt,r)}function M0(r,s,l){s=qm(r,s,D0)[0],r=Uh(dr)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?gu(s):s;var c=Rt(),f=c.queue,g=f.dispatch;return l!==c.memoizedState&&(Me.flags|=2048,Po(9,G1.bind(null,f,l),{destroy:void 0},null)),[s,g,r]}function G1(r,s){r.action=s}function P0(r){var s=Rt(),l=rt;if(l!==null)return M0(s,l,r);Rt(),s=s.memoizedState,l=Rt();var c=l.queue.dispatch;return l.memoizedState=r,[s,c,!1]}function Po(r,s,l,c){return r={tag:r,create:s,inst:l,deps:c,next:null},s=Me.updateQueue,s===null&&(s=Lh(),Me.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,s.lastEffect=r),r}function L0(){return Rt().memoizedState}function jh(r,s,l,c){var f=An();Me.flags|=r,f.memoizedState=Po(1|s,l,{destroy:void 0},c===void 0?null:c)}function Bh(r,s,l,c){var f=Rt();c=c===void 0?null:c;var g=f.memoizedState.inst;rt!==null&&c!==null&&Vm(c,rt.memoizedState.deps)?f.memoizedState=Po(s,l,g,c):(Me.flags|=r,f.memoizedState=Po(1|s,l,g,c))}function V0(r,s){jh(8390656,8,r,s)}function Qm(r,s){Bh(2048,8,r,s)}function U0(r,s){return Bh(4,2,r,s)}function j0(r,s){return Bh(4,4,r,s)}function B0(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function z0(r,s,l){l=l!=null?l.concat([r]):null,Bh(4,4,B0.bind(null,s,r),l)}function Km(){}function F0(r,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Vm(s,c[1])?c[0]:(l.memoizedState=[r,s],r)}function q0(r,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Vm(s,c[1]))return c[0];if(c=r(),ya){wi(!0);try{r()}finally{wi(!1)}}return l.memoizedState=[c,s],c}function Ym(r,s,l){return l===void 0||os&1073741824?r.memoizedState=s:(r.memoizedState=l,r=GE(),Me.lanes|=r,_s|=r,l)}function H0(r,s,l,c){return Mn(l,s)?l:No.current!==null?(r=Ym(r,l,c),Mn(r,s)||(Kt=!0),r):os&42?(r=GE(),Me.lanes|=r,_s|=r,s):(Kt=!0,r.memoizedState=l)}function G0(r,s,l,c,f){var g=me.p;me.p=g!==0&&8>g?g:8;var w=C.T,x={};C.T=x,Jm(r,!1,s,l);try{var P=f(),B=C.S;if(B!==null&&B(x,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var X=z1(P,c);_u(r,s,X,Un(r))}else _u(r,s,c,Un(r))}catch(ae){_u(r,s,{then:function(){},status:"rejected",reason:ae},Un())}finally{me.p=g,C.T=w}}function $1(){}function Wm(r,s,l,c){if(r.tag!==5)throw Error(i(476));var f=$0(r).queue;G0(r,f,s,Re,l===null?$1:function(){return Q0(r),l(c)})}function $0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:Re},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Q0(r){var s=$0(r).next.queue;_u(r,s,{},Un())}function Xm(){return cn(Vu)}function K0(){return Rt().memoizedState}function Y0(){return Rt().memoizedState}function Q1(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Un();r=hs(l);var c=ds(s,r,l);c!==null&&(Tn(c,s,l),Eu(c,s,l)),s={cache:Mm()},r.payload=s;return}s=s.return}}function K1(r,s,l){var c=Un();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},zh(r)?X0(s,l):(l=xm(r,s,l,c),l!==null&&(Tn(l,r,c),J0(l,s,c)))}function W0(r,s,l){var c=Un();_u(r,s,l,c)}function _u(r,s,l,c){var f={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(zh(r))X0(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,x=g(w,l);if(f.hasEagerState=!0,f.eagerState=x,Mn(x,w))return Sh(r,s,f,0),lt===null&&bh(),!1}catch{}finally{}if(l=xm(r,s,f,c),l!==null)return Tn(l,r,c),J0(l,s,c),!0}return!1}function Jm(r,s,l,c){if(c={lane:2,revertLane:zp(),action:c,hasEagerState:!1,eagerState:null,next:null},zh(r)){if(s)throw Error(i(479))}else s=xm(r,l,c,2),s!==null&&Tn(s,r,2)}function zh(r){var s=r.alternate;return r===Me||s!==null&&s===Me}function X0(r,s){Oo=Mh=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function J0(r,s,l){if(l&4194176){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,Kr(r,l)}}var Pi={readContext:cn,use:Vh,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct};Pi.useCacheRefresh=Ct,Pi.useMemoCache=Ct,Pi.useHostTransitionStatus=Ct,Pi.useFormState=Ct,Pi.useActionState=Ct,Pi.useOptimistic=Ct;var va={readContext:cn,use:Vh,useCallback:function(r,s){return An().memoizedState=[r,s===void 0?null:s],r},useContext:cn,useEffect:V0,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,jh(4194308,4,B0.bind(null,s,r),l)},useLayoutEffect:function(r,s){return jh(4194308,4,r,s)},useInsertionEffect:function(r,s){jh(4,2,r,s)},useMemo:function(r,s){var l=An();s=s===void 0?null:s;var c=r();if(ya){wi(!0);try{r()}finally{wi(!1)}}return l.memoizedState=[c,s],c},useReducer:function(r,s,l){var c=An();if(l!==void 0){var f=l(s);if(ya){wi(!0);try{l(s)}finally{wi(!1)}}}else f=s;return c.memoizedState=c.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},c.queue=r,r=r.dispatch=K1.bind(null,Me,r),[c.memoizedState,r]},useRef:function(r){var s=An();return r={current:r},s.memoizedState=r},useState:function(r){r=Gm(r);var s=r.queue,l=W0.bind(null,Me,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:Km,useDeferredValue:function(r,s){var l=An();return Ym(l,r,s)},useTransition:function(){var r=Gm(!1);return r=G0.bind(null,Me,r.queue,!0,!1),An().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var c=Me,f=An();if(Xe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),lt===null)throw Error(i(349));Qe&60||T0(c,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,V0(b0.bind(null,c,g,r),[r]),c.flags|=2048,Po(9,w0.bind(null,c,g,l,s),{destroy:void 0},null),l},useId:function(){var r=An(),s=lt.identifierPrefix;if(Xe){var l=cr,c=ur;l=(c&~(1<<32-_n(c)-1)).toString(32)+l,s=":"+s+"R"+l,l=Ph++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=F1++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return An().memoizedState=Q1.bind(null,Me)}};va.useMemoCache=Fm,va.useHostTransitionStatus=Xm,va.useFormState=k0,va.useActionState=k0,va.useOptimistic=function(r){var s=An();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Jm.bind(null,Me,!0,l),l.dispatch=s,[r,s]};var ls={readContext:cn,use:Vh,useCallback:F0,useContext:cn,useEffect:Qm,useImperativeHandle:z0,useInsertionEffect:U0,useLayoutEffect:j0,useMemo:q0,useReducer:Uh,useRef:L0,useState:function(){return Uh(dr)},useDebugValue:Km,useDeferredValue:function(r,s){var l=Rt();return H0(l,rt.memoizedState,r,s)},useTransition:function(){var r=Uh(dr)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:gu(r),s]},useSyncExternalStore:E0,useId:K0};ls.useCacheRefresh=Y0,ls.useMemoCache=Fm,ls.useHostTransitionStatus=Xm,ls.useFormState=O0,ls.useActionState=O0,ls.useOptimistic=function(r,s){var l=Rt();return A0(l,rt,r,s)};var Ea={readContext:cn,use:Vh,useCallback:F0,useContext:cn,useEffect:Qm,useImperativeHandle:z0,useInsertionEffect:U0,useLayoutEffect:j0,useMemo:q0,useReducer:Hm,useRef:L0,useState:function(){return Hm(dr)},useDebugValue:Km,useDeferredValue:function(r,s){var l=Rt();return rt===null?Ym(l,r,s):H0(l,rt.memoizedState,r,s)},useTransition:function(){var r=Hm(dr)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:gu(r),s]},useSyncExternalStore:E0,useId:K0};Ea.useCacheRefresh=Y0,Ea.useMemoCache=Fm,Ea.useHostTransitionStatus=Xm,Ea.useFormState=P0,Ea.useActionState=P0,Ea.useOptimistic=function(r,s){var l=Rt();return rt!==null?A0(l,rt,r,s):(l.baseState=r,[r,l.queue.dispatch])};function Zm(r,s,l,c){s=r.memoizedState,l=l(c,s),l=l==null?s:R({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var ep={isMounted:function(r){return(r=r._reactInternals)?ue(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var c=Un(),f=hs(c);f.payload=s,l!=null&&(f.callback=l),s=ds(r,f,c),s!==null&&(Tn(s,r,c),Eu(s,r,c))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var c=Un(),f=hs(c);f.tag=1,f.payload=s,l!=null&&(f.callback=l),s=ds(r,f,c),s!==null&&(Tn(s,r,c),Eu(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Un(),c=hs(l);c.tag=2,s!=null&&(c.callback=s),s=ds(r,c,l),s!==null&&(Tn(s,r,l),Eu(s,r,l))}};function Z0(r,s,l,c,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!ru(l,c)||!ru(f,g):!0}function eE(r,s,l,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==r&&ep.enqueueReplaceState(s,s.state,null)}function Ta(r,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(r=r.defaultProps){l===s&&(l=R({},l));for(var f in r)l[f]===void 0&&(l[f]=r[f])}return l}var Fh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function tE(r){Fh(r)}function nE(r){console.error(r)}function iE(r){Fh(r)}function qh(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function rE(r,s,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tp(r,s,l){return l=hs(l),l.tag=3,l.payload={element:null},l.callback=function(){qh(r,s)},l}function sE(r){return r=hs(r),r.tag=3,r}function aE(r,s,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;r.payload=function(){return f(g)},r.callback=function(){rE(s,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){rE(s,l,c),typeof f!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Y1(r,s,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&vu(s,l,f,!0),l=Xn.current,l!==null){switch(l.tag){case 13:return Mi===null?Lp():l.alternate===null&&Et===0&&(Et=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===Dm?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Up(r,c,f)),!1;case 22:return l.flags|=65536,c===Dm?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Up(r,c,f)),!1}throw Error(i(435,l.tag))}return Up(r,c,f),Lp(),!1}if(Xe)return s=Xn.current,s!==null?(!(s.flags&65536)&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Nm&&(r=Error(i(422),{cause:c}),lu(Kn(r,l)))):(c!==Nm&&(s=Error(i(423),{cause:c}),lu(Kn(s,l))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,c=Kn(c,l),f=tp(r.stateNode,c,f),gp(r,f),Et!==4&&(Et=2)),!1;var g=Error(i(520),{cause:c});if(g=Kn(g,l),Ru===null?Ru=[g]:Ru.push(g),Et!==4&&(Et=2),s===null)return!0;c=Kn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=f&-f,l.lanes|=r,r=tp(l.stateNode,c,r),gp(l,r),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ys===null||!ys.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=sE(f),aE(f,r,l,c),gp(l,f),!1}l=l.return}while(l!==null);return!1}var oE=Error(i(461)),Kt=!1;function nn(r,s,l,c){s.child=r===null?d0(s,null,l,c):ga(s,r.child,l,c)}function lE(r,s,l,c,f){l=l.render;var g=s.ref;if("ref"in c){var w={};for(var x in c)x!=="ref"&&(w[x]=c[x])}else w=c;return ba(s),c=Um(r,s,l,w,g,f),x=jm(),r!==null&&!Kt?(Bm(r,s,f),fr(r,s,f)):(Xe&&x&&Rm(s),s.flags|=1,nn(r,s,c,f),s.child)}function uE(r,s,l,c,f){if(r===null){var g=l.type;return typeof g=="function"&&!Sp(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,cE(r,s,g,c,f)):(r=Kh(l.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!cp(r,f)){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:ru,l(w,c)&&r.ref===s.ref)return fr(r,s,f)}return s.flags|=1,r=gs(g,c),r.ref=s.ref,r.return=s,s.child=r}function cE(r,s,l,c,f){if(r!==null){var g=r.memoizedProps;if(ru(g,c)&&r.ref===s.ref)if(Kt=!1,s.pendingProps=c=g,cp(r,f))r.flags&131072&&(Kt=!0);else return s.lanes=r.lanes,fr(r,s,f)}return np(r,s,l,c,f)}function hE(r,s,l){var c=s.pendingProps,f=c.children,g=(s.stateNode._pendingVisibility&2)!==0,w=r!==null?r.memoizedState:null;if(yu(r,s),c.mode==="hidden"||g){if(s.flags&128){if(c=w!==null?w.baseLanes|l:l,r!==null){for(f=s.child=r.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return dE(r,s,c,l)}if(l&536870912)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Oh(s,w!==null?w.cachePool:null),w!==null?f0(s,w):km(),m0(s);else return s.lanes=s.childLanes=536870912,dE(r,s,w!==null?w.baseLanes|l:l,l)}else w!==null?(Oh(s,w.cachePool),f0(s,w),as(),s.memoizedState=null):(r!==null&&Oh(s,null),km(),as());return nn(r,s,f,l),s.child}function dE(r,s,l,c){var f=Lm();return f=f===null?null:{parent:Ut._currentValue,pool:f},s.memoizedState={baseLanes:l,cachePool:f},r!==null&&Oh(s,null),km(),m0(s),r!==null&&vu(r,s,c,!0),null}function yu(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=2097664)}}function np(r,s,l,c,f){return ba(s),l=Um(r,s,l,c,void 0,f),c=jm(),r!==null&&!Kt?(Bm(r,s,f),fr(r,s,f)):(Xe&&c&&Rm(s),s.flags|=1,nn(r,s,l,f),s.child)}function fE(r,s,l,c,f,g){return ba(s),s.updateQueue=null,l=v0(s,c,l,f),y0(r),c=jm(),r!==null&&!Kt?(Bm(r,s,g),fr(r,s,g)):(Xe&&c&&Rm(s),s.flags|=1,nn(r,s,l,g),s.child)}function mE(r,s,l,c,f){if(ba(s),s.stateNode===null){var g=Ao,w=l.contextType;typeof w=="object"&&w!==null&&(g=cn(w)),g=new l(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ep,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},mp(s),w=l.contextType,g.context=typeof w=="object"&&w!==null?cn(w):Ao,g.state=s.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Zm(s,l,w,c),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&ep.enqueueReplaceState(g,g.state,null),wu(s,c,g,f),Tu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var x=s.memoizedProps,P=Ta(l,x);g.props=P;var B=g.context,X=l.contextType;w=Ao,typeof X=="object"&&X!==null&&(w=cn(X));var ae=l.getDerivedStateFromProps;X=typeof ae=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,X||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||B!==w)&&eE(s,g,c,w),cs=!1;var K=s.memoizedState;g.state=K,wu(s,c,g,f),Tu(),B=s.memoizedState,x||K!==B||cs?(typeof ae=="function"&&(Zm(s,l,ae,c),B=s.memoizedState),(P=cs||Z0(s,l,P,c,K,B,w))?(X||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=B),g.props=c,g.state=B,g.context=w,c=P):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,pp(r,s),w=s.memoizedProps,X=Ta(l,w),g.props=X,ae=s.pendingProps,K=g.context,B=l.contextType,P=Ao,typeof B=="object"&&B!==null&&(P=cn(B)),x=l.getDerivedStateFromProps,(B=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ae||K!==P)&&eE(s,g,c,P),cs=!1,K=s.memoizedState,g.state=K,wu(s,c,g,f),Tu();var W=s.memoizedState;w!==ae||K!==W||cs||r!==null&&r.dependencies!==null&&Hh(r.dependencies)?(typeof x=="function"&&(Zm(s,l,x,c),W=s.memoizedState),(X=cs||Z0(s,l,X,c,K,W,P)||r!==null&&r.dependencies!==null&&Hh(r.dependencies))?(B||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,W,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,W,P)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),g.props=c,g.state=W,g.context=P,c=X):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,yu(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=ga(s,r.child,null,f),s.child=ga(s,null,l,f)):nn(r,s,l,f),s.memoizedState=g.state,r=s.child):r=fr(r,s,f),r}function pE(r,s,l,c){return ou(),s.flags|=256,nn(r,s,l,c),s.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function rp(r){return{baseLanes:r,cachePool:_0()}}function sp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=ti),r}function gE(r,s,l){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(Vt.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(Xe){if(f?ss(s):as(),Xe){var x=tn,P;if(P=x){e:{for(P=x,x=Oi;P.nodeType!==8;){if(!x){x=null;break e}if(P=fi(P.nextSibling),P===null){x=null;break e}}x=P}x!==null?(s.memoizedState={dehydrated:x,treeContext:fa!==null?{id:ur,overflow:cr}:null,retryLane:536870912},P=ei(18,null,null,0),P.stateNode=x,P.return=s,s.child=P,En=s,tn=null,P=!0):P=!1}P||pa(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return x.data==="$!"?s.lanes=16:s.lanes=536870912,null;hr(s)}return x=c.children,c=c.fallback,f?(as(),f=s.mode,x=op({mode:"hidden",children:x},f),c=Ca(c,f,l,null),x.return=s,c.return=s,x.sibling=c,s.child=x,f=s.child,f.memoizedState=rp(l),f.childLanes=sp(r,w,l),s.memoizedState=ip,c):(ss(s),ap(s,x))}if(P=r.memoizedState,P!==null&&(x=P.dehydrated,x!==null)){if(g)s.flags&256?(ss(s),s.flags&=-257,s=lp(r,s,l)):s.memoizedState!==null?(as(),s.child=r.child,s.flags|=128,s=null):(as(),f=c.fallback,x=s.mode,c=op({mode:"visible",children:c.children},x),f=Ca(f,x,l,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,ga(s,r.child,null,l),c=s.child,c.memoizedState=rp(l),c.childLanes=sp(r,w,l),s.memoizedState=ip,s=f);else if(ss(s),x.data==="$!"){if(w=x.nextSibling&&x.nextSibling.dataset,w)var B=w.dgst;w=B,c=Error(i(419)),c.stack="",c.digest=w,lu({value:c,source:null,stack:null}),s=lp(r,s,l)}else if(Kt||vu(r,s,l,!1),w=(l&r.childLanes)!==0,Kt||w){if(w=lt,w!==null){if(c=l&-l,c&42)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=c&(w.suspendedLanes|l)?0:c,c!==0&&c!==P.retryLane)throw P.retryLane=c,rs(r,c),Tn(w,r,c),oE}x.data==="$?"||Lp(),s=lp(r,s,l)}else x.data==="$?"?(s.flags|=128,s.child=r.child,s=cI.bind(null,r),x._reactRetry=s,s=null):(r=P.treeContext,tn=fi(x.nextSibling),En=s,Xe=!0,hi=null,Oi=!1,r!==null&&(Yn[Wn++]=ur,Yn[Wn++]=cr,Yn[Wn++]=fa,ur=r.id,cr=r.overflow,fa=s),s=ap(s,c.children),s.flags|=4096);return s}return f?(as(),f=c.fallback,x=s.mode,P=r.child,B=P.sibling,c=gs(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&31457280,B!==null?f=gs(B,f):(f=Ca(f,x,l,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,x=r.child.memoizedState,x===null?x=rp(l):(P=x.cachePool,P!==null?(B=Ut._currentValue,P=P.parent!==B?{parent:B,pool:B}:P):P=_0(),x={baseLanes:x.baseLanes|l,cachePool:P}),f.memoizedState=x,f.childLanes=sp(r,w,l),s.memoizedState=ip,c):(ss(s),l=r.child,r=l.sibling,l=gs(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=l,s.memoizedState=null,l)}function ap(r,s){return s=op({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function op(r,s){return FE(r,s,0,null)}function lp(r,s,l){return ga(s,r.child,null,l),r=ap(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function _E(r,s,l){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),dp(r.return,s,l)}function up(r,s,l,c,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=f)}function yE(r,s,l){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(nn(r,s,c.children,l),c=Vt.current,c&2)c=c&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&_E(r,l,s);else if(r.tag===19)_E(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(Ye(Vt,c),f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&kh(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),up(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&kh(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}up(s,!0,l,null,g);break;case"together":up(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function fr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),_s|=s.lanes,!(l&s.childLanes))if(r!==null){if(vu(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=gs(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=gs(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function cp(r,s){return r.lanes&s?!0:(r=r.dependencies,!!(r!==null&&Hh(r)))}function W1(r,s,l){switch(s.tag){case 3:Fr(s,s.stateNode.containerInfo),us(s,Ut,r.memoizedState.cache),ou();break;case 27:case 5:Vl(s);break;case 4:Fr(s,s.stateNode.containerInfo);break;case 10:us(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ss(s),s.flags|=128,null):l&s.child.childLanes?gE(r,s,l):(ss(s),r=fr(r,s,l),r!==null?r.sibling:null);ss(s);break;case 19:var f=(r.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(vu(r,s,l,!1),c=(l&s.childLanes)!==0),f){if(c)return yE(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(Vt,Vt.current),c)break;return null;case 22:case 23:return s.lanes=0,hE(r,s,l);case 24:us(s,Ut,r.memoizedState.cache)}return fr(r,s,l)}function vE(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Kt=!0;else{if(!cp(r,l)&&!(s.flags&128))return Kt=!1,W1(r,s,l);Kt=!!(r.flags&131072)}else Kt=!1,Xe&&s.flags&1048576&&i0(s,xh,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")Sp(c)?(r=Ta(c,r),s.tag=1,s=mE(null,s,c,r,l)):(s.tag=0,s=np(null,s,c,r,l));else{if(c!=null){if(f=c.$$typeof,f===O){s.tag=11,s=lE(null,s,c,r,l);break e}else if(f===z){s.tag=14,s=uE(null,s,c,r,l);break e}}throw s=D(c)||c,Error(i(306,s,""))}}return s;case 0:return np(r,s,s.type,s.pendingProps,l);case 1:return c=s.type,f=Ta(c,s.pendingProps),mE(r,s,c,f,l);case 3:e:{if(Fr(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var g=s.pendingProps;f=s.memoizedState,c=f.element,pp(r,s),wu(s,g,null,l);var w=s.memoizedState;if(g=w.cache,us(s,Ut,g),g!==f.cache&&fp(s,[Ut],l,!0),Tu(),g=w.element,f.isDehydrated)if(f={element:g,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=pE(r,s,g,l);break e}else if(g!==c){c=Kn(Error(i(424)),s),lu(c),s=pE(r,s,g,l);break e}else for(tn=fi(s.stateNode.containerInfo.firstChild),En=s,Xe=!0,hi=null,Oi=!0,l=d0(s,null,g,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ou(),g===c){s=fr(r,s,l);break e}nn(r,s,g,l)}s=s.child}return s;case 26:return yu(r,s),r===null?(l=wT(s.type,null,s.pendingProps,null))?s.memoizedState=l:Xe||(l=s.type,r=s.pendingProps,c=ad(Bn.current).createElement(l),c[Gt]=s,c[Mt]=r,rn(c,l,r),ft(c),s.stateNode=c):s.memoizedState=wT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Vl(s),r===null&&Xe&&(c=s.stateNode=vT(s.type,s.pendingProps,Bn.current),En=s,Oi=!0,tn=fi(c.firstChild)),c=s.pendingProps.children,r!==null||Xe?nn(r,s,c,l):s.child=ga(s,null,c,l),yu(r,s),s.child;case 5:return r===null&&Xe&&((f=c=tn)&&(c=AI(c,s.type,s.pendingProps,Oi),c!==null?(s.stateNode=c,En=s,tn=fi(c.firstChild),Oi=!1,f=!0):f=!1),f||pa(s)),Vl(s),f=s.type,g=s.pendingProps,w=r!==null?r.memoizedProps:null,c=g.children,Wp(f,g)?c=null:w!==null&&Wp(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=Um(r,s,q1,null,null,l),Vu._currentValue=f),yu(r,s),nn(r,s,c,l),s.child;case 6:return r===null&&Xe&&((r=l=tn)&&(l=xI(l,s.pendingProps,Oi),l!==null?(s.stateNode=l,En=s,tn=null,r=!0):r=!1),r||pa(s)),null;case 13:return gE(r,s,l);case 4:return Fr(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=ga(s,null,c,l):nn(r,s,c,l),s.child;case 11:return lE(r,s,s.type,s.pendingProps,l);case 7:return nn(r,s,s.pendingProps,l),s.child;case 8:return nn(r,s,s.pendingProps.children,l),s.child;case 12:return nn(r,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,us(s,s.type,c.value),nn(r,s,c.children,l),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,ba(s),f=cn(f),c=c(f),s.flags|=1,nn(r,s,c,l),s.child;case 14:return uE(r,s,s.type,s.pendingProps,l);case 15:return cE(r,s,s.type,s.pendingProps,l);case 19:return yE(r,s,l);case 22:return hE(r,s,l);case 24:return ba(s),c=cn(Ut),r===null?(f=Lm(),f===null&&(f=lt,g=Mm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),s.memoizedState={parent:c,cache:f},mp(s),us(s,Ut,f)):(r.lanes&l&&(pp(r,s),wu(s,null,null,l),Tu()),f=r.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),us(s,Ut,c)):(c=g.cache,us(s,Ut,c),c!==f.cache&&fp(s,[Ut],l,!0))),nn(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var hp=ke(null),wa=null,mr=null;function us(r,s,l){Ye(hp,s._currentValue),s._currentValue=l}function pr(r){r._currentValue=hp.current,it(hp)}function dp(r,s,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===l)break;r=r.return}}function fp(r,s,l,c){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var g=f.dependencies;if(g!==null){var w=f.child;g=g.firstContext;e:for(;g!==null;){var x=g;g=f;for(var P=0;P<s.length;P++)if(x.context===s[P]){g.lanes|=l,x=g.alternate,x!==null&&(x.lanes|=l),dp(g.return,l,r),c||(w=null);break e}g=x.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(i(341));w.lanes|=l,g=w.alternate,g!==null&&(g.lanes|=l),dp(w,l,r),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===r){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function vu(r,s,l,c){r=null;for(var f=s,g=!1;f!==null;){if(!g){if(f.flags&524288)g=!0;else if(f.flags&262144)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var x=f.type;Mn(f.pendingProps.value,w.value)||(r!==null?r.push(x):r=[x])}}else if(f===zr.current){if(w=f.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Vu):r=[Vu])}f=f.return}r!==null&&fp(s,r,l,c),s.flags|=262144}function Hh(r){for(r=r.firstContext;r!==null;){if(!Mn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ba(r){wa=r,mr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function cn(r){return EE(wa,r)}function Gh(r,s){return wa===null&&ba(r),EE(r,s)}function EE(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},mr===null){if(r===null)throw Error(i(308));mr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else mr=mr.next=s;return l}var cs=!1;function mp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function hs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ds(r,s,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,pt&2){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Ch(r),t0(r,null,l),s}return Sh(r,c,s,l),Ch(r)}function Eu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194176)!==0)){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,Kr(r,l)}}function gp(r,s){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var _p=!1;function Tu(){if(_p){var r=ko;if(r!==null)throw r}}function wu(r,s,l,c){_p=!1;var f=r.updateQueue;cs=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var P=x,B=P.next;P.next=null,w===null?g=B:w.next=B,w=P;var X=r.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==w&&(x===null?X.firstBaseUpdate=B:x.next=B,X.lastBaseUpdate=P))}if(g!==null){var ae=f.baseState;w=0,X=B=P=null,x=g;do{var K=x.lane&-536870913,W=K!==x.lane;if(W?(Qe&K)===K:(c&K)===K){K!==0&&K===Do&&(_p=!0),X!==null&&(X=X.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ve=r,Ne=x;K=s;var Tt=l;switch(Ne.tag){case 1:if(ve=Ne.payload,typeof ve=="function"){ae=ve.call(Tt,ae,K);break e}ae=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ne.payload,K=typeof ve=="function"?ve.call(Tt,ae,K):ve,K==null)break e;ae=R({},ae,K);break e;case 2:cs=!0}}K=x.callback,K!==null&&(r.flags|=64,W&&(r.flags|=8192),W=f.callbacks,W===null?f.callbacks=[K]:W.push(K))}else W={lane:K,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(B=X=W,P=ae):X=X.next=W,w|=K;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;W=x,x=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);X===null&&(P=ae),f.baseState=P,f.firstBaseUpdate=B,f.lastBaseUpdate=X,g===null&&(f.shared.lanes=0),_s|=w,r.lanes=w,r.memoizedState=ae}}function TE(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function wE(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)TE(l[r],s)}function bu(r,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&r)===r){c=void 0;var g=l.create,w=l.inst;c=g(),w.destroy=c}l=l.next}while(l!==f)}}catch(x){ot(s,s.return,x)}}function fs(r,s,l){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&r)===r){var w=c.inst,x=w.destroy;if(x!==void 0){w.destroy=void 0,f=s;var P=l;try{x()}catch(B){ot(f,P,B)}}}c=c.next}while(c!==g)}}catch(B){ot(s,s.return,B)}}function bE(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{wE(s,l)}catch(c){ot(r,r.return,c)}}}function SE(r,s,l){l.props=Ta(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){ot(r,s,c)}}function Sa(r,s){try{var l=r.ref;if(l!==null){var c=r.stateNode;switch(r.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof l=="function"?r.refCleanup=l(f):l.current=f}}catch(g){ot(r,s,g)}}function Pn(r,s){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){ot(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){ot(r,s,f)}else l.current=null}function CE(r){var s=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){ot(r,r.return,f)}}function AE(r,s,l){try{var c=r.stateNode;TI(c,r.type,l,s),c[Mt]=s}catch(f){ot(r,r.return,f)}}function xE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function yp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||xE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vp(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=sd));else if(c!==4&&c!==27&&(r=r.child,r!==null))for(vp(r,s,l),r=r.sibling;r!==null;)vp(r,s,l),r=r.sibling}function $h(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(c!==4&&c!==27&&(r=r.child,r!==null))for($h(r,s,l),r=r.sibling;r!==null;)$h(r,s,l),r=r.sibling}var gr=!1,vt=!1,Ep=!1,RE=typeof WeakSet=="function"?WeakSet:Set,Yt=null,IE=!1;function X1(r,s){if(r=r.containerInfo,Kp=dd,r=$v(r),wm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,x=-1,P=-1,B=0,X=0,ae=r,K=null;t:for(;;){for(var W;ae!==l||f!==0&&ae.nodeType!==3||(x=w+f),ae!==g||c!==0&&ae.nodeType!==3||(P=w+c),ae.nodeType===3&&(w+=ae.nodeValue.length),(W=ae.firstChild)!==null;)K=ae,ae=W;for(;;){if(ae===r)break t;if(K===l&&++B===f&&(x=w),K===g&&++X===c&&(P=w),(W=ae.nextSibling)!==null)break;ae=K,K=ae.parentNode}ae=W}l=x===-1||P===-1?null:{start:x,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Yp={focusedElem:r,selectionRange:l},dd=!1,Yt=s;Yt!==null;)if(s=Yt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Yt=r;else for(;Yt!==null;){switch(s=Yt,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(r&1024&&g!==null){r=void 0,l=s,f=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var ve=Ta(l.type,f,l.elementType===l.type);r=c.getSnapshotBeforeUpdate(ve,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ne){ot(l,l.return,Ne)}}break;case 3:if(r&1024){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Zp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Zp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(r&1024)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Yt=r;break}Yt=s.return}return ve=IE,IE=!1,ve}function NE(r,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:yr(r,l),c&4&&bu(5,l);break;case 1:if(yr(r,l),c&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(x){ot(l,l.return,x)}else{var f=Ta(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){ot(l,l.return,x)}}c&64&&bE(l),c&512&&Sa(l,l.return);break;case 3:if(yr(r,l),c&64&&(c=l.updateQueue,c!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{wE(c,r)}catch(x){ot(l,l.return,x)}}break;case 26:yr(r,l),c&512&&Sa(l,l.return);break;case 27:case 5:yr(r,l),s===null&&c&4&&CE(l),c&512&&Sa(l,l.return);break;case 12:yr(r,l);break;case 13:yr(r,l),c&4&&OE(r,l);break;case 22:if(f=l.memoizedState!==null||gr,!f){s=s!==null&&s.memoizedState!==null||vt;var g=gr,w=vt;gr=f,(vt=s)&&!w?ms(r,l,(l.subtreeFlags&8772)!==0):yr(r,l),gr=g,vt=w}c&512&&(l.memoizedProps.mode==="manual"?Sa(l,l.return):Pn(l,l.return));break;default:yr(r,l)}}function DE(r){var s=r.alternate;s!==null&&(r.alternate=null,DE(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ea(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var It=null,Ln=!1;function _r(r,s,l){for(l=l.child;l!==null;)kE(r,s,l),l=l.sibling}function kE(r,s,l){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(qr,l)}catch{}switch(l.tag){case 26:vt||Pn(l,s),_r(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:vt||Pn(l,s);var c=It,f=Ln;for(It=l.stateNode,_r(r,s,l),l=l.stateNode,s=l.attributes;s.length;)l.removeAttributeNode(s[0]);ea(l),It=c,Ln=f;break;case 5:vt||Pn(l,s);case 6:f=It;var g=Ln;if(It=null,_r(r,s,l),It=f,Ln=g,It!==null)if(Ln)try{r=It,c=l.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)}catch(w){ot(l,s,w)}else try{It.removeChild(l.stateNode)}catch(w){ot(l,s,w)}break;case 18:It!==null&&(Ln?(s=It,l=l.stateNode,s.nodeType===8?Jp(s.parentNode,l):s.nodeType===1&&Jp(s,l),zu(s)):Jp(It,l.stateNode));break;case 4:c=It,f=Ln,It=l.stateNode.containerInfo,Ln=!0,_r(r,s,l),It=c,Ln=f;break;case 0:case 11:case 14:case 15:vt||fs(2,l,s),vt||fs(4,l,s),_r(r,s,l);break;case 1:vt||(Pn(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&SE(l,s,c)),_r(r,s,l);break;case 21:_r(r,s,l);break;case 22:vt||Pn(l,s),vt=(c=vt)||l.memoizedState!==null,_r(r,s,l),vt=c;break;default:_r(r,s,l)}}function OE(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{zu(r)}catch(l){ot(s,s.return,l)}}function J1(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new RE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new RE),s;default:throw Error(i(435,r.tag))}}function Tp(r,s){var l=J1(r);s.forEach(function(c){var f=hI.bind(null,r,c);l.has(c)||(l.add(c),c.then(f,f))})}function Jn(r,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],g=r,w=s,x=w;e:for(;x!==null;){switch(x.tag){case 27:case 5:It=x.stateNode,Ln=!1;break e;case 3:It=x.stateNode.containerInfo,Ln=!0;break e;case 4:It=x.stateNode.containerInfo,Ln=!0;break e}x=x.return}if(It===null)throw Error(i(160));kE(g,w,f),It=null,Ln=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)ME(s,r),s=s.sibling}var di=null;function ME(r,s){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jn(s,r),Zn(r),c&4&&(fs(3,r,r.return),bu(3,r),fs(5,r,r.return));break;case 1:Jn(s,r),Zn(r),c&512&&(vt||l===null||Pn(l,l.return)),c&64&&gr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=di;if(Jn(s,r),Zn(r),c&512&&(vt||l===null||Pn(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Wr]||g[Gt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),rn(g,c,l),g[Gt]=r,ft(g),c=g;break e;case"link":var w=CT("link","href",f).get(c+(l.href||""));if(w){for(var x=0;x<w.length;x++)if(g=w[x],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(x,1);break t}}g=f.createElement(c),rn(g,c,l),f.head.appendChild(g);break;case"meta":if(w=CT("meta","content",f).get(c+(l.content||""))){for(x=0;x<w.length;x++)if(g=w[x],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(x,1);break t}}g=f.createElement(c),rn(g,c,l),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[Gt]=r,ft(g),c=g}r.stateNode=c}else AT(f,r.type,r.stateNode);else r.stateNode=ST(f,c,r.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?AT(f,r.type,r.stateNode):ST(f,c,r.memoizedProps)):c===null&&r.stateNode!==null&&AE(r,r.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&r.alternate===null){f=r.stateNode,g=r.memoizedProps;try{for(var P=f.firstChild;P;){var B=P.nextSibling,X=P.nodeName;P[Wr]||X==="HEAD"||X==="BODY"||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&P.rel.toLowerCase()==="stylesheet"||f.removeChild(P),P=B}for(var ae=r.type,K=f.attributes;K.length;)f.removeAttributeNode(K[0]);rn(f,ae,g),f[Gt]=r,f[Mt]=g}catch(ve){ot(r,r.return,ve)}}case 5:if(Jn(s,r),Zn(r),c&512&&(vt||l===null||Pn(l,l.return)),r.flags&32){f=r.stateNode;try{qn(f,"")}catch(ve){ot(r,r.return,ve)}}c&4&&r.stateNode!=null&&(f=r.memoizedProps,AE(r,f,l!==null?l.memoizedProps:f)),c&1024&&(Ep=!0);break;case 6:if(Jn(s,r),Zn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(ve){ot(r,r.return,ve)}}break;case 3:if(ud=null,f=di,di=od(s.containerInfo),Jn(s,r),di=f,Zn(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{zu(s.containerInfo)}catch(ve){ot(r,r.return,ve)}Ep&&(Ep=!1,PE(r));break;case 4:c=di,di=od(r.stateNode.containerInfo),Jn(s,r),Zn(r),di=c;break;case 12:Jn(s,r),Zn(r);break;case 13:Jn(s,r),Zn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Np=Sn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Tp(r,c)));break;case 22:if(c&512&&(vt||l===null||Pn(l,l.return)),P=r.memoizedState!==null,B=l!==null&&l.memoizedState!==null,X=gr,ae=vt,gr=X||P,vt=ae||B,Jn(s,r),vt=ae,gr=X,Zn(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=P?s._visibility&-2:s._visibility|1,P&&(s=gr||vt,l===null||B||s||Lo(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(l=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(l===null){B=l=s;try{if(f=B.stateNode,P)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{w=B.stateNode,x=B.memoizedProps.style;var W=x!=null&&x.hasOwnProperty("display")?x.display:null;w.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ve){ot(B,B.return,ve)}}}else if(s.tag===6){if(l===null){B=s;try{B.stateNode.nodeValue=P?"":B.memoizedProps}catch(ve){ot(B,B.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Tp(r,l))));break;case 19:Jn(s,r),Zn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Tp(r,c)));break;case 21:break;default:Jn(s,r),Zn(r)}}function Zn(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var l=r.return;l!==null;){if(xE(l)){var c=l;break e}l=l.return}throw Error(i(160))}switch(c.tag){case 27:var f=c.stateNode,g=yp(r);$h(r,g,f);break;case 5:var w=c.stateNode;c.flags&32&&(qn(w,""),c.flags&=-33);var x=yp(r);$h(r,x,w);break;case 3:case 4:var P=c.stateNode.containerInfo,B=yp(r);vp(r,B,P);break;default:throw Error(i(161))}}}catch(X){ot(r,r.return,X)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function PE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;PE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function yr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)NE(r,s.alternate,s),s=s.sibling}function Lo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:fs(4,s,s.return),Lo(s);break;case 1:Pn(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&SE(s,s.return,l),Lo(s);break;case 26:case 27:case 5:Pn(s,s.return),Lo(s);break;case 22:Pn(s,s.return),s.memoizedState===null&&Lo(s);break;default:Lo(s)}r=r.sibling}}function ms(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=r,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:ms(f,g,l),bu(4,g);break;case 1:if(ms(f,g,l),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){ot(c,c.return,B)}if(c=g,f=c.updateQueue,f!==null){var x=c.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)TE(P[f],x)}catch(B){ot(c,c.return,B)}}l&&w&64&&bE(g),Sa(g,g.return);break;case 26:case 27:case 5:ms(f,g,l),l&&c===null&&w&4&&CE(g),Sa(g,g.return);break;case 12:ms(f,g,l);break;case 13:ms(f,g,l),l&&w&4&&OE(f,g);break;case 22:g.memoizedState===null&&ms(f,g,l),Sa(g,g.return);break;default:ms(f,g,l)}s=s.sibling}}function wp(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&fu(l))}function bp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&fu(r))}function ps(r,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)LE(r,s,l,c),s=s.sibling}function LE(r,s,l,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ps(r,s,l,c),f&2048&&bu(9,s);break;case 3:ps(r,s,l,c),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&fu(r)));break;case 12:if(f&2048){ps(r,s,l,c),r=s.stateNode;try{var g=s.memoizedProps,w=g.id,x=g.onPostCommit;typeof x=="function"&&x(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){ot(s,s.return,P)}}else ps(r,s,l,c);break;case 23:break;case 22:g=s.stateNode,s.memoizedState!==null?g._visibility&4?ps(r,s,l,c):Su(r,s):g._visibility&4?ps(r,s,l,c):(g._visibility|=4,Vo(r,s,l,c,(s.subtreeFlags&10256)!==0)),f&2048&&wp(s.alternate,s);break;case 24:ps(r,s,l,c),f&2048&&bp(s.alternate,s);break;default:ps(r,s,l,c)}}function Vo(r,s,l,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,w=s,x=l,P=c,B=w.flags;switch(w.tag){case 0:case 11:case 15:Vo(g,w,x,P,f),bu(8,w);break;case 23:break;case 22:var X=w.stateNode;w.memoizedState!==null?X._visibility&4?Vo(g,w,x,P,f):Su(g,w):(X._visibility|=4,Vo(g,w,x,P,f)),f&&B&2048&&wp(w.alternate,w);break;case 24:Vo(g,w,x,P,f),f&&B&2048&&bp(w.alternate,w);break;default:Vo(g,w,x,P,f)}s=s.sibling}}function Su(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,c=s,f=c.flags;switch(c.tag){case 22:Su(l,c),f&2048&&wp(c.alternate,c);break;case 24:Su(l,c),f&2048&&bp(c.alternate,c);break;default:Su(l,c)}s=s.sibling}}var Cu=8192;function Uo(r){if(r.subtreeFlags&Cu)for(r=r.child;r!==null;)VE(r),r=r.sibling}function VE(r){switch(r.tag){case 26:Uo(r),r.flags&Cu&&r.memoizedState!==null&&BI(di,r.memoizedState,r.memoizedProps);break;case 5:Uo(r);break;case 3:case 4:var s=di;di=od(r.stateNode.containerInfo),Uo(r),di=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Cu,Cu=16777216,Uo(r),Cu=s):Uo(r));break;default:Uo(r)}}function UE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Au(r){var s=r.deletions;if(r.flags&16){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Yt=c,BE(c,r)}UE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jE(r),r=r.sibling}function jE(r){switch(r.tag){case 0:case 11:case 15:Au(r),r.flags&2048&&fs(9,r,r.return);break;case 3:Au(r);break;case 12:Au(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,Qh(r)):Au(r);break;default:Au(r)}}function Qh(r){var s=r.deletions;if(r.flags&16){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Yt=c,BE(c,r)}UE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:fs(8,s,s.return),Qh(s);break;case 22:l=s.stateNode,l._visibility&4&&(l._visibility&=-5,Qh(s));break;default:Qh(s)}r=r.sibling}}function BE(r,s){for(;Yt!==null;){var l=Yt;switch(l.tag){case 0:case 11:case 15:fs(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Yt=c;else e:for(l=r;Yt!==null;){c=Yt;var f=c.sibling,g=c.return;if(DE(c),c===l){Yt=null;break e}if(f!==null){f.return=g,Yt=f;break e}Yt=g}}}function Z1(r,s,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(r,s,l,c){return new Z1(r,s,l,c)}function Sp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function gs(r,s){var l=r.alternate;return l===null?(l=ei(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&31457280,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function zE(r,s){r.flags&=31457282;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Kh(r,s,l,c,f,g){var w=0;if(c=r,typeof r=="function")Sp(r)&&(w=1);else if(typeof r=="string")w=UI(r,l,gn.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case m:return Ca(l.children,f,g,s);case p:w=8,f|=24;break;case y:return r=ei(12,l,s,f|2),r.elementType=y,r.lanes=g,r;case U:return r=ei(13,l,s,f),r.elementType=U,r.lanes=g,r;case V:return r=ei(19,l,s,f),r.elementType=V,r.lanes=g,r;case H:return FE(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:case S:w=10;break e;case b:w=9;break e;case O:w=11;break e;case z:w=14;break e;case G:w=16,c=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=ei(w,l,s,f),s.elementType=r,s.type=c,s.lanes=g,s}function Ca(r,s,l,c){return r=ei(7,r,c,s),r.lanes=l,r}function FE(r,s,l,c){r=ei(22,r,c,s),r.elementType=H,r.lanes=l;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=f._current;if(g===null)throw Error(i(456));if(!(f._pendingVisibility&2)){var w=rs(g,2);w!==null&&(f._pendingVisibility|=2,Tn(w,g,2))}},attach:function(){var g=f._current;if(g===null)throw Error(i(456));if(f._pendingVisibility&2){var w=rs(g,2);w!==null&&(f._pendingVisibility&=-3,Tn(w,g,2))}}};return r.stateNode=f,r}function Cp(r,s,l){return r=ei(6,r,null,s),r.lanes=l,r}function Ap(r,s,l){return s=ei(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function vr(r){r.flags|=4}function qE(r,s){if(s.type!=="stylesheet"||s.state.loading&4)r.flags&=-16777217;else if(r.flags|=16777216,!xT(s)){if(s=Xn.current,s!==null&&((Qe&4194176)===Qe?Mi!==null:(Qe&62914560)!==Qe&&!(Qe&536870912)||s!==Mi))throw cu=Dm,a0;r.flags|=8192}}function Yh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?$r():536870912,r.lanes|=s,Bo|=s)}function xu(r,s){if(!Xe)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function mt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=l,s}function eI(r,s,l){var c=s.pendingProps;switch(Im(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return l=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),pr(Ut),Ji(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(au(s)?vr(s):r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,hi!==null&&(Mp(hi),hi=null))),mt(s),null;case 26:return l=s.memoizedState,r===null?(vr(s),l!==null?(mt(s),qE(s,l)):(mt(s),s.flags&=-16777217)):l?l!==r.memoizedState?(vr(s),mt(s),qE(s,l)):(mt(s),s.flags&=-16777217):(r.memoizedProps!==c&&vr(s),mt(s),s.flags&=-16777217),null;case 27:ro(s),l=Bn.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&vr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return mt(s),null}r=gn.current,au(s)?r0(s):(r=vT(f,c,l),s.stateNode=r,vr(s))}return mt(s),null;case 5:if(ro(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&vr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(r=gn.current,au(s))r0(s);else{switch(f=ad(Bn.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?f.createElement(l,{is:c.is}):f.createElement(l)}}r[Gt]=s,r[Mt]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(rn(r,l,c),l){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&vr(s)}}return mt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&vr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Bn.current,au(s)){if(r=s.stateNode,l=s.memoizedProps,c=null,f=En,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}r[Gt]=s,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||fT(r.nodeValue,l)),r||pa(s)}else r=ad(r).createTextNode(c),r[Gt]=s,s.stateNode=r}return mt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=au(s),c!==null&&c.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Gt]=s}else ou(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;mt(s),f=!1}else hi!==null&&(Mp(hi),hi=null),f=!0;if(!f)return s.flags&256?(hr(s),s):(hr(s),null)}if(hr(s),s.flags&128)return s.lanes=l,s;if(l=c!==null,r=r!==null&&r.memoizedState!==null,l){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),Yh(s,s.updateQueue),mt(s),null;case 4:return Ji(),r===null&&Gp(s.stateNode.containerInfo),mt(s),null;case 10:return pr(s.type),mt(s),null;case 19:if(it(Vt),f=s.memoizedState,f===null)return mt(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)xu(f,!1);else{if(Et!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(g=kh(r),g!==null){for(s.flags|=128,xu(f,!1),r=g.updateQueue,s.updateQueue=r,Yh(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)zE(l,r),l=l.sibling;return Ye(Vt,Vt.current&1|2),s.child}r=r.sibling}f.tail!==null&&Sn()>Wh&&(s.flags|=128,c=!0,xu(f,!1),s.lanes=4194304)}else{if(!c)if(r=kh(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Yh(s,r),xu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Xe)return mt(s),null}else 2*Sn()-f.renderingStartTime>Wh&&l!==536870912&&(s.flags|=128,c=!0,xu(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(r=f.last,r!==null?r.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Sn(),s.sibling=null,r=Vt.current,Ye(Vt,c?r&1|2:r&1),s):(mt(s),null);case 22:case 23:return hr(s),Om(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?l&536870912&&!(s.flags&128)&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),l=s.updateQueue,l!==null&&Yh(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),r!==null&&it(_a),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),pr(Ut),mt(s),null;case 25:return null}throw Error(i(156,s.tag))}function tI(r,s){switch(Im(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return pr(Ut),Ji(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ro(s),null;case 13:if(hr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ou()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return it(Vt),null;case 4:return Ji(),null;case 10:return pr(s.type),null;case 22:case 23:return hr(s),Om(),r!==null&&it(_a),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return pr(Ut),null;case 25:return null;default:return null}}function HE(r,s){switch(Im(s),s.tag){case 3:pr(Ut),Ji();break;case 26:case 27:case 5:ro(s);break;case 4:Ji();break;case 13:hr(s);break;case 19:it(Vt);break;case 10:pr(s.type);break;case 22:case 23:hr(s),Om(),r!==null&&it(_a);break;case 24:pr(Ut)}}var nI={getCacheForType:function(r){var s=cn(Ut),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},iI=typeof WeakMap=="function"?WeakMap:Map,pt=0,lt=null,Ue=null,Qe=0,ut=0,Vn=null,Er=!1,jo=!1,xp=!1,Tr=0,Et=0,_s=0,Aa=0,Rp=0,ti=0,Bo=0,Ru=null,Li=null,Ip=!1,Np=0,Wh=1/0,Xh=null,ys=null,Jh=!1,xa=null,Iu=0,Dp=0,kp=null,Nu=0,Op=null;function Un(){if(pt&2&&Qe!==0)return Qe&-Qe;if(C.T!==null){var r=Do;return r!==0?r:zp()}return rh()}function GE(){ti===0&&(ti=!(Qe&536870912)||Xe?Fl():536870912);var r=Xn.current;return r!==null&&(r.flags|=32),ti}function Tn(r,s,l){(r===lt&&ut===2||r.cancelPendingCommit!==null)&&(zo(r,0),wr(r,Qe,ti,!1)),St(r,l),(!(pt&2)||r!==lt)&&(r===lt&&(!(pt&2)&&(Aa|=l),Et===4&&wr(r,Qe,ti,!1)),Vi(r))}function $E(r,s,l){if(pt&6)throw Error(i(327));var c=!l&&(s&60)===0&&(s&r.expiredLanes)===0||Gr(r,s),f=c?aI(r,s):Vp(r,s,!0),g=c;do{if(f===0){jo&&!c&&wr(r,s,0,!1);break}else if(f===6)wr(r,s,0,!Er);else{if(l=r.current.alternate,g&&!rI(l)){f=Vp(r,s,!1),g=!1;continue}if(f===2){if(g=s,r.errorRecoveryDisabledLanes&g)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var x=r;f=Ru;var P=x.current.memoizedState.isDehydrated;if(P&&(zo(x,w).flags|=256),w=Vp(x,w,!1),w!==2){if(xp&&!P){x.errorRecoveryDisabledLanes|=g,Aa|=g,f=4;break e}g=Li,Li=f,g!==null&&Mp(g)}f=w}if(g=!1,f!==2)continue}}if(f===1){zo(r,0),wr(r,s,0,!0);break}e:{switch(c=r,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){wr(c,s,ti,!Er);break e}break;case 2:Li=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=l,c.finishedLanes=s,(s&62914560)===s&&(g=Np+300-Sn(),10<g)){if(wr(c,s,ti,!Er),zn(c,0)!==0)break e;c.timeoutHandle=gT(QE.bind(null,c,l,Li,Xh,Ip,s,ti,Aa,Bo,Er,2,-0,0),g);break e}QE(c,l,Li,Xh,Ip,s,ti,Aa,Bo,Er,0,-0,0)}}break}while(!0);Vi(r)}function Mp(r){Li===null?Li=r:Li.push.apply(Li,r)}function QE(r,s,l,c,f,g,w,x,P,B,X,ae,K){var W=s.subtreeFlags;if((W&8192||(W&16785408)===16785408)&&(Lu={stylesheets:null,count:0,unsuspend:jI},VE(s),s=zI(),s!==null)){r.cancelPendingCommit=s(eT.bind(null,r,l,c,f,w,x,P,1,ae,K)),wr(r,g,w,!B);return}eT(r,l,c,f,w,x,P,X,ae,K)}function rI(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],g=f.getSnapshot;f=f.value;try{if(!Mn(g(),f))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wr(r,s,l,c){s&=~Rp,s&=~Aa,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var f=s;0<f;){var g=31-_n(f),w=1<<g;c[g]=-1,f&=~w}l!==0&&Qr(r,l,s)}function Zh(){return pt&6?!0:(Du(0),!1)}function Pp(){if(Ue!==null){if(ut===0)var r=Ue.return;else r=Ue,mr=wa=null,zm(r),Io=null,hu=0,r=Ue;for(;r!==null;)HE(r.alternate,r),r=r.return;Ue=null}}function zo(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,bI(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Pp(),lt=r,Ue=l=gs(r.current,null),Qe=s,ut=0,Vn=null,Er=!1,jo=Gr(r,s),xp=!1,Bo=ti=Rp=Aa=_s=Et=0,Li=Ru=null,Ip=!1,s&8&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var f=31-_n(c),g=1<<f;s|=r[f],c&=~g}return Tr=s,bh(),l}function KE(r,s){Me=null,C.H=Pi,s===uu?(s=u0(),ut=3):s===a0?(s=u0(),ut=4):ut=s===oE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vn=s,Ue===null&&(Et=1,qh(r,Kn(s,r.current)))}function YE(){var r=C.H;return C.H=Pi,r===null?Pi:r}function WE(){var r=C.A;return C.A=nI,r}function Lp(){Et=4,Er||(Qe&4194176)!==Qe&&Xn.current!==null||(jo=!0),!(_s&134217727)&&!(Aa&134217727)||lt===null||wr(lt,Qe,ti,!1)}function Vp(r,s,l){var c=pt;pt|=2;var f=YE(),g=WE();(lt!==r||Qe!==s)&&(Xh=null,zo(r,s)),s=!1;var w=Et;e:do try{if(ut!==0&&Ue!==null){var x=Ue,P=Vn;switch(ut){case 8:Pp(),w=6;break e;case 3:case 2:case 6:Xn.current===null&&(s=!0);var B=ut;if(ut=0,Vn=null,Fo(r,x,P,B),l&&jo){w=0;break e}break;default:B=ut,ut=0,Vn=null,Fo(r,x,P,B)}}sI(),w=Et;break}catch(X){KE(r,X)}while(!0);return s&&r.shellSuspendCounter++,mr=wa=null,pt=c,C.H=f,C.A=g,Ue===null&&(lt=null,Qe=0,bh()),w}function sI(){for(;Ue!==null;)XE(Ue)}function aI(r,s){var l=pt;pt|=2;var c=YE(),f=WE();lt!==r||Qe!==s?(Xh=null,Wh=Sn()+500,zo(r,s)):jo=Gr(r,s);e:do try{if(ut!==0&&Ue!==null){s=Ue;var g=Vn;t:switch(ut){case 1:ut=0,Vn=null,Fo(r,s,g,1);break;case 2:if(o0(g)){ut=0,Vn=null,JE(s);break}s=function(){ut===2&&lt===r&&(ut=7),Vi(r)},g.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:o0(g)?(ut=0,Vn=null,JE(s)):(ut=0,Vn=null,Fo(r,s,g,7));break;case 5:var w=null;switch(Ue.tag){case 26:w=Ue.memoizedState;case 5:case 27:var x=Ue;if(!w||xT(w)){ut=0,Vn=null;var P=x.sibling;if(P!==null)Ue=P;else{var B=x.return;B!==null?(Ue=B,ed(B)):Ue=null}break t}}ut=0,Vn=null,Fo(r,s,g,5);break;case 6:ut=0,Vn=null,Fo(r,s,g,6);break;case 8:Pp(),Et=6;break e;default:throw Error(i(462))}}oI();break}catch(X){KE(r,X)}while(!0);return mr=wa=null,C.H=c,C.A=f,pt=l,Ue!==null?0:(lt=null,Qe=0,bh(),Et)}function oI(){for(;Ue!==null&&!hm();)XE(Ue)}function XE(r){var s=vE(r.alternate,r,Tr);r.memoizedProps=r.pendingProps,s===null?ed(r):Ue=s}function JE(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=fE(l,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=fE(l,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:zm(s);default:HE(l,s),s=Ue=zE(s,Tr),s=vE(l,s,Tr)}r.memoizedProps=r.pendingProps,s===null?ed(r):Ue=s}function Fo(r,s,l,c){mr=wa=null,zm(s),Io=null,hu=0;var f=s.return;try{if(Y1(r,f,s,l,Qe)){Et=1,qh(r,Kn(l,r.current)),Ue=null;return}}catch(g){if(f!==null)throw Ue=f,g;Et=1,qh(r,Kn(l,r.current)),Ue=null;return}s.flags&32768?(Xe||c===1?r=!0:jo||Qe&536870912?r=!1:(Er=r=!0,(c===2||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),ZE(s,r)):ed(s)}function ed(r){var s=r;do{if(s.flags&32768){ZE(s,Er);return}r=s.return;var l=eI(s.alternate,s,Tr);if(l!==null){Ue=l;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=r}while(s!==null);Et===0&&(Et=5)}function ZE(r,s){do{var l=tI(r.alternate,r);if(l!==null){l.flags&=32767,Ue=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){Ue=r;return}Ue=r=l}while(r!==null);Et=6,Ue=null}function eT(r,s,l,c,f,g,w,x,P,B){var X=C.T,ae=me.p;try{me.p=2,C.T=null,lI(r,s,l,c,ae,f,g,w,x,P,B)}finally{C.T=X,me.p=ae}}function lI(r,s,l,c,f,g,w,x){do qo();while(xa!==null);if(pt&6)throw Error(i(327));var P=r.finishedWork;if(c=r.finishedLanes,P===null)return null;if(r.finishedWork=null,r.finishedLanes=0,P===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var B=P.lanes|P.childLanes;if(B|=Am,nh(r,c,B,g,w,x),r===lt&&(Ue=lt=null,Qe=0),!(P.subtreeFlags&10256)&&!(P.flags&10256)||Jh||(Jh=!0,Dp=B,kp=l,dI(Zi,function(){return qo(),null})),l=(P.flags&15990)!==0,P.subtreeFlags&15990||l?(l=C.T,C.T=null,g=me.p,me.p=2,w=pt,pt|=4,X1(r,P),ME(P,r),k1(Yp,r.containerInfo),dd=!!Kp,Yp=Kp=null,r.current=P,NE(r,P.alternate,P),Ul(),pt=w,me.p=g,C.T=l):r.current=P,Jh?(Jh=!1,xa=r,Iu=c):tT(r,B),B=r.pendingLanes,B===0&&(ys=null),Bl(P.stateNode),Vi(r),s!==null)for(f=r.onRecoverableError,P=0;P<s.length;P++)B=s[P],f(B.value,{componentStack:B.stack});return Iu&3&&qo(),B=r.pendingLanes,c&4194218&&B&42?r===Op?Nu++:(Nu=0,Op=r):Nu=0,Du(0),null}function tT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,fu(s)))}function qo(){if(xa!==null){var r=xa,s=Dp;Dp=0;var l=ih(Iu),c=C.T,f=me.p;try{if(me.p=32>l?32:l,C.T=null,xa===null)var g=!1;else{l=kp,kp=null;var w=xa,x=Iu;if(xa=null,Iu=0,pt&6)throw Error(i(331));var P=pt;if(pt|=4,jE(w.current),LE(w,w.current,x,l),pt=P,Du(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(qr,w)}catch{}g=!0}return g}finally{me.p=f,C.T=c,tT(r,s)}}return!1}function nT(r,s,l){s=Kn(l,s),s=tp(r.stateNode,s,2),r=ds(r,s,2),r!==null&&(St(r,2),Vi(r))}function ot(r,s,l){if(r.tag===3)nT(r,r,l);else for(;s!==null;){if(s.tag===3){nT(s,r,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ys===null||!ys.has(c))){r=Kn(l,r),l=sE(2),c=ds(s,l,2),c!==null&&(aE(l,c,s,r),St(c,2),Vi(c));break}}s=s.return}}function Up(r,s,l){var c=r.pingCache;if(c===null){c=r.pingCache=new iI;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(l)||(xp=!0,f.add(l),r=uI.bind(null,r,s,l),s.then(r,r))}function uI(r,s,l){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,lt===r&&(Qe&l)===l&&(Et===4||Et===3&&(Qe&62914560)===Qe&&300>Sn()-Np?!(pt&2)&&zo(r,0):Rp|=l,Bo===Qe&&(Bo=0)),Vi(r)}function iT(r,s){s===0&&(s=$r()),r=rs(r,s),r!==null&&(St(r,s),Vi(r))}function cI(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),iT(r,l)}function hI(r,s){var l=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),iT(r,l)}function dI(r,s){return Xs(r,s)}var td=null,Ho=null,jp=!1,nd=!1,Bp=!1,Ra=0;function Vi(r){r!==Ho&&r.next===null&&(Ho===null?td=Ho=r:Ho=Ho.next=r),nd=!0,jp||(jp=!0,mI(fI))}function Du(r,s){if(!Bp&&nd){Bp=!0;do for(var l=!1,c=td;c!==null;){if(r!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var w=c.suspendedLanes,x=c.pingedLanes;g=(1<<31-_n(42|r)+1)-1,g&=f&~(w&~x),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,aT(c,g))}else g=Qe,g=zn(c,c===lt?g:0),!(g&3)||Gr(c,g)||(l=!0,aT(c,g));c=c.next}while(l);Bp=!1}}function fI(){nd=jp=!1;var r=0;Ra!==0&&(wI()&&(r=Ra),Ra=0);for(var s=Sn(),l=null,c=td;c!==null;){var f=c.next,g=rT(c,s);g===0?(c.next=null,l===null?td=f:l.next=f,f===null&&(Ho=l)):(l=c,(r!==0||g&3)&&(nd=!0)),c=f}Du(r)}function rT(r,s){for(var l=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var w=31-_n(g),x=1<<w,P=f[w];P===-1?(!(x&l)||x&c)&&(f[w]=oo(x,s)):P<=s&&(r.expiredLanes|=x),g&=~x}if(s=lt,l=Qe,l=zn(r,r===s?l:0),c=r.callbackNode,l===0||r===s&&ut===2||r.cancelPendingCommit!==null)return c!==null&&c!==null&&ao(c),r.callbackNode=null,r.callbackPriority=0;if(!(l&3)||Gr(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(c!==null&&ao(c),ih(l)){case 2:case 8:l=Ht;break;case 32:l=Zi;break;case 268435456:l=jl;break;default:l=Zi}return c=sT.bind(null,r),l=Xs(l,c),r.callbackPriority=s,r.callbackNode=l,s}return c!==null&&c!==null&&ao(c),r.callbackPriority=2,r.callbackNode=null,2}function sT(r,s){var l=r.callbackNode;if(qo()&&r.callbackNode!==l)return null;var c=Qe;return c=zn(r,r===lt?c:0),c===0?null:($E(r,c,s),rT(r,Sn()),r.callbackNode!=null&&r.callbackNode===l?sT.bind(null,r):null)}function aT(r,s){if(qo())return null;$E(r,s,!0)}function mI(r){SI(function(){pt&6?Xs(Ot,r):r()})}function zp(){return Ra===0&&(Ra=Fl()),Ra}function oT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ai(""+r)}function lT(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function pI(r,s,l,c,f){if(s==="submit"&&l&&l.stateNode===f){var g=oT((f[Mt]||null).action),w=c.submitter;w&&(s=(s=w[Mt]||null)?oT(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var x=new po("action","action",null,c,f);r.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ra!==0){var P=w?lT(f,w):new FormData(f);Wm(l,{pending:!0,data:P,method:f.method,action:g},null,P)}}else typeof g=="function"&&(x.preventDefault(),P=w?lT(f,w):new FormData(f),Wm(l,{pending:!0,data:P,method:f.method,action:g},g,P))},currentTarget:f}]})}}for(var Fp=0;Fp<e0.length;Fp++){var qp=e0[Fp],gI=qp.toLowerCase(),_I=qp[0].toUpperCase()+qp.slice(1);ci(gI,"on"+_I)}ci(Yv,"onAnimationEnd"),ci(Wv,"onAnimationIteration"),ci(Xv,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(M1,"onTransitionRun"),ci(P1,"onTransitionStart"),ci(L1,"onTransitionCancel"),ci(Jv,"onTransitionEnd"),Cn("onMouseEnter",["mouseout","mouseover"]),Cn("onMouseLeave",["mouseout","mouseover"]),Cn("onPointerEnter",["pointerout","pointerover"]),Cn("onPointerLeave",["pointerout","pointerover"]),kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function uT(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var x=c[w],P=x.instance,B=x.currentTarget;if(x=x.listener,P!==g&&f.isPropagationStopped())break e;g=x,f.currentTarget=B;try{g(f)}catch(X){Fh(X)}f.currentTarget=null,g=P}else for(w=0;w<c.length;w++){if(x=c[w],P=x.instance,B=x.currentTarget,x=x.listener,P!==g&&f.isPropagationStopped())break e;g=x,f.currentTarget=B;try{g(f)}catch(X){Fh(X)}f.currentTarget=null,g=P}}}}function qe(r,s){var l=s[Zs];l===void 0&&(l=s[Zs]=new Set);var c=r+"__bubble";l.has(c)||(cT(s,r,2,!1),l.add(c))}function Hp(r,s,l){var c=0;s&&(c|=4),cT(l,r,c,s)}var id="_reactListening"+Math.random().toString(36).slice(2);function Gp(r){if(!r[id]){r[id]=!0,Hl.forEach(function(l){l!=="selectionchange"&&(yI.has(l)||Hp(l,!1,r),Hp(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[id]||(s[id]=!0,Hp("selectionchange",!1,s))}}function cT(r,s,l,c){switch(OT(s)){case 2:var f=HI;break;case 8:f=GI;break;default:f=rg}l=f.bind(null,s,l,r),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function $p(r,s,l,c,f){var g=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===f||x.nodeType===8&&x.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&(P=w.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;w=w.return}for(;x!==null;){if(w=ui(x),w===null)return;if(P=w.tag,P===5||P===6||P===26||P===27){c=g=w;continue e}x=x.parentNode}}c=c.return}lh(function(){var B=g,X=mo(l),ae=[];e:{var K=Zv.get(r);if(K!==void 0){var W=po,ve=r;switch(r){case"keypress":if(Ri(l)===0)break e;case"keydown":case"keyup":W=To;break;case"focusin":ve="focus",W=yo;break;case"focusout":ve="blur",W=yo;break;case"beforeblur":case"afterblur":W=yo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=gh;break;case Yv:case Wv:case Xv:W=vo;break;case Jv:W=yh;break;case"scroll":case"scrollend":W=uh;break;case"wheel":W=wo;break;case"copy":case"cut":case"paste":W=Eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=nu;break;case"toggle":case"beforetoggle":W=Eh}var Ne=(s&4)!==0,Tt=!Ne&&(r==="scroll"||r==="scrollend"),F=Ne?K!==null?K+"Capture":null:K;Ne=[];for(var j=B,Q;j!==null;){var ee=j;if(Q=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||Q===null||F===null||(ee=ra(j,F),ee!=null&&Ne.push(Ou(j,ee,Q))),Tt)break;j=j.return}0<Ne.length&&(K=new W(K,ve,null,l,X),ae.push({event:K,listeners:Ne}))}}if(!(s&7)){e:{if(K=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",K&&l!==Hn&&(ve=l.relatedTarget||l.fromElement)&&(ui(ve)||ve[er]))break e;if((W||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,W?(ve=l.relatedTarget||l.toElement,W=B,ve=ve?ui(ve):null,ve!==null&&(Tt=ue(ve),Ne=ve.tag,ve!==Tt||Ne!==5&&Ne!==27&&Ne!==6)&&(ve=null)):(W=null,ve=B),W!==ve)){if(Ne=$n,ee="onMouseLeave",F="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(Ne=nu,ee="onPointerLeave",F="onPointerEnter",j="pointer"),Tt=W==null?K:Xr(W),Q=ve==null?K:Xr(ve),K=new Ne(ee,j+"leave",W,l,X),K.target=Tt,K.relatedTarget=Q,ee=null,ui(X)===B&&(Ne=new Ne(F,j+"enter",ve,l,X),Ne.target=Q,Ne.relatedTarget=Tt,ee=Ne),Tt=ee,W&&ve)t:{for(Ne=W,F=ve,j=0,Q=Ne;Q;Q=Go(Q))j++;for(Q=0,ee=F;ee;ee=Go(ee))Q++;for(;0<j-Q;)Ne=Go(Ne),j--;for(;0<Q-j;)F=Go(F),Q--;for(;j--;){if(Ne===F||F!==null&&Ne===F.alternate)break t;Ne=Go(Ne),F=Go(F)}Ne=null}else Ne=null;W!==null&&hT(ae,K,W,Ne,!1),ve!==null&&Tt!==null&&hT(ae,Tt,ve,Ne,!0)}}e:{if(K=B?Xr(B):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var _e=Uv;else if(Lt(K))if(jv)_e=N1;else{_e=R1;var Pe=x1}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?B&&Yl(B.elementType)&&(_e=Uv):_e=I1;if(_e&&(_e=_e(r,B))){lr(ae,_e,l,X);break e}Pe&&Pe(r,K,B),r==="focusout"&&B&&K.type==="number"&&B.memoizedProps.value!=null&&fo(K,"number",K.value)}switch(Pe=B?Xr(B):window,r){case"focusin":(Lt(Pe)||Pe.contentEditable==="true")&&(bo=Pe,bm=B,su=null);break;case"focusout":su=bm=bo=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Qv(ae,l,X);break;case"selectionchange":if(O1)break;case"keydown":case"keyup":Qv(ae,l,X)}var Ee;if(Di)e:{switch(r){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Ge?Y(r,l)&&(be="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(T&&l.locale!=="ko"&&(Ge||be!=="onCompositionStart"?be==="onCompositionEnd"&&Ge&&(Ee=Xl()):(xi=X,is="value"in xi?xi.value:xi.textContent,Ge=!0)),Pe=rd(B,be),0<Pe.length&&(be=new eu(be,r,null,l,X),ae.push({event:be,listeners:Pe}),Ee?be.data=Ee:(Ee=he(l),Ee!==null&&(be.data=Ee)))),(Ee=_?Pt(r,l):$e(r,l))&&(be=rd(B,"onBeforeInput"),0<be.length&&(Pe=new eu("onBeforeInput","beforeinput",null,l,X),ae.push({event:Pe,listeners:be}),Pe.data=Ee)),pI(ae,r,B,l,X)}uT(ae,s)})}function Ou(r,s,l){return{instance:r,listener:s,currentTarget:l}}function rd(r,s){for(var l=s+"Capture",c=[];r!==null;){var f=r,g=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ra(r,l),f!=null&&c.unshift(Ou(r,f,g)),f=ra(r,s),f!=null&&c.push(Ou(r,f,g))),r=r.return}return c}function Go(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function hT(r,s,l,c,f){for(var g=s._reactName,w=[];l!==null&&l!==c;){var x=l,P=x.alternate,B=x.stateNode;if(x=x.tag,P!==null&&P===c)break;x!==5&&x!==26&&x!==27||B===null||(P=B,f?(B=ra(l,g),B!=null&&w.unshift(Ou(l,B,P))):f||(B=ra(l,g),B!=null&&w.push(Ou(l,B,P)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var vI=/\r\n?/g,EI=/\u0000|\uFFFD/g;function dT(r){return(typeof r=="string"?r:""+r).replace(vI,`
`).replace(EI,"")}function fT(r,s){return s=dT(s),dT(r)===s}function sd(){}function st(r,s,l,c,f,g){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||qn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&qn(r,""+c);break;case"className":es(r,"class",c);break;case"tabIndex":es(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":es(r,l,c);break;case"style":oh(r,c,g);break;case"data":if(s!=="object"){es(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Ai(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&st(r,s,"name",f.name,f,null),st(r,s,"formEncType",f.formEncType,f,null),st(r,s,"formMethod",f.formMethod,f,null),st(r,s,"formTarget",f.formTarget,f,null)):(st(r,s,"encType",f.encType,f,null),st(r,s,"method",f.method,f,null),st(r,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Ai(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=sd);break;case"onScroll":c!=null&&qe("scroll",r);break;case"onScrollEnd":c!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Ai(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":qe("beforetoggle",r),qe("toggle",r),Zr(r,"popover",c);break;case"xlinkActuate":Fn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Fn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Fn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Fn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Fn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Fn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Zr(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=gm.get(l)||l,Zr(r,l,c))}}function Qp(r,s,l,c,f,g){switch(l){case"style":oh(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?qn(r,c):(typeof c=="number"||typeof c=="bigint")&&qn(r,""+c);break;case"onScroll":c!=null&&qe("scroll",r);break;case"onScrollEnd":c!=null&&qe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=sd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),s=l.slice(2,f?l.length-7:void 0),g=r[Mt]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,c,f);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Zr(r,l,c)}}}function rn(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var c=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var w=l[g];if(w!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,g,w,l,null)}}f&&st(r,s,"srcSet",l.srcSet,l,null),c&&st(r,s,"src",l.src,l,null);return;case"input":qe("invalid",r);var x=g=w=f=null,P=null,B=null;for(c in l)if(l.hasOwnProperty(c)){var X=l[c];if(X!=null)switch(c){case"name":f=X;break;case"type":w=X;break;case"checked":P=X;break;case"defaultChecked":B=X;break;case"value":g=X;break;case"defaultValue":x=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:st(r,s,c,X,l,null)}}na(r,g,x,P,B,w,f,!1),ta(r);return;case"select":qe("invalid",r),c=w=g=null;for(f in l)if(l.hasOwnProperty(f)&&(x=l[f],x!=null))switch(f){case"value":g=x;break;case"defaultValue":w=x;break;case"multiple":c=x;default:st(r,s,f,x,l,null)}s=g,l=w,r.multiple=!!c,s!=null?We(r,!!c,s,!1):l!=null&&We(r,!!c,l,!0);return;case"textarea":qe("invalid",r),g=f=c=null;for(w in l)if(l.hasOwnProperty(w)&&(x=l[w],x!=null))switch(w){case"value":c=x;break;case"defaultValue":f=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:st(r,s,w,x,l,null)}ns(r,c,f,g),ta(r);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(c=l[P],c!=null))switch(P){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(r,s,P,c,l,null)}return;case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(c=0;c<ku.length;c++)qe(ku[c],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in l)if(l.hasOwnProperty(B)&&(c=l[B],c!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,B,c,l,null)}return;default:if(Yl(s)){for(X in l)l.hasOwnProperty(X)&&(c=l[X],c!==void 0&&Qp(r,s,X,c,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(c=l[x],c!=null&&st(r,s,x,c,l,null))}function TI(r,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,w=null,x=null,P=null,B=null,X=null;for(W in l){var ae=l[W];if(l.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":P=ae;default:c.hasOwnProperty(W)||st(r,s,W,null,c,ae)}}for(var K in c){var W=c[K];if(ae=l[K],c.hasOwnProperty(K)&&(W!=null||ae!=null))switch(K){case"type":g=W;break;case"name":f=W;break;case"checked":B=W;break;case"defaultChecked":X=W;break;case"value":w=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ae&&st(r,s,K,W,c,ae)}}ts(r,w,x,P,B,X,g,f);return;case"select":W=w=x=K=null;for(g in l)if(P=l[g],l.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":W=P;default:c.hasOwnProperty(g)||st(r,s,g,null,c,P)}for(f in c)if(g=c[f],P=l[f],c.hasOwnProperty(f)&&(g!=null||P!=null))switch(f){case"value":K=g;break;case"defaultValue":x=g;break;case"multiple":w=g;default:g!==P&&st(r,s,f,g,c,P)}s=x,l=w,c=W,K!=null?We(r,!!l,K,!1):!!c!=!!l&&(s!=null?We(r,!!l,s,!0):We(r,!!l,l?[]:"",!1));return;case"textarea":W=K=null;for(x in l)if(f=l[x],l.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:st(r,s,x,null,c,f)}for(w in c)if(f=c[w],g=l[w],c.hasOwnProperty(w)&&(f!=null||g!=null))switch(w){case"value":K=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&st(r,s,w,f,c,g)}ia(r,K,W);return;case"option":for(var ve in l)if(K=l[ve],l.hasOwnProperty(ve)&&K!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":r.selected=!1;break;default:st(r,s,ve,null,c,K)}for(P in c)if(K=c[P],W=l[P],c.hasOwnProperty(P)&&K!==W&&(K!=null||W!=null))switch(P){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:st(r,s,P,K,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)K=l[Ne],l.hasOwnProperty(Ne)&&K!=null&&!c.hasOwnProperty(Ne)&&st(r,s,Ne,null,c,K);for(B in c)if(K=c[B],W=l[B],c.hasOwnProperty(B)&&K!==W&&(K!=null||W!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:st(r,s,B,K,c,W)}return;default:if(Yl(s)){for(var Tt in l)K=l[Tt],l.hasOwnProperty(Tt)&&K!==void 0&&!c.hasOwnProperty(Tt)&&Qp(r,s,Tt,void 0,c,K);for(X in c)K=c[X],W=l[X],!c.hasOwnProperty(X)||K===W||K===void 0&&W===void 0||Qp(r,s,X,K,c,W);return}}for(var F in l)K=l[F],l.hasOwnProperty(F)&&K!=null&&!c.hasOwnProperty(F)&&st(r,s,F,null,c,K);for(ae in c)K=c[ae],W=l[ae],!c.hasOwnProperty(ae)||K===W||K==null&&W==null||st(r,s,ae,K,c,W)}var Kp=null,Yp=null;function ad(r){return r.nodeType===9?r:r.ownerDocument}function mT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Wp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xp=null;function wI(){var r=window.event;return r&&r.type==="popstate"?r===Xp?!1:(Xp=r,!0):(Xp=null,!1)}var gT=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,SI=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(r){return _T.resolve(null).then(r).catch(CI)}:gT;function CI(r){setTimeout(function(){throw r})}function Jp(r,s){var l=s,c=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(c===0){r.removeChild(f),zu(s);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=f}while(l);zu(s)}function Zp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Zp(l),ea(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function AI(r,s,l,c){for(;r.nodeType===1;){var f=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Wr])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==f.rel||r.getAttribute("href")!==(f.href==null?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=fi(r.nextSibling),r===null)break}return null}function xI(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=fi(r.nextSibling),r===null))return null;return r}function fi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function yT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function vT(r,s,l){switch(s=ad(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var ni=new Map,ET=new Set;function od(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var br=me.d;me.d={f:RI,r:II,D:NI,C:DI,L:kI,m:OI,X:PI,S:MI,M:LI};function RI(){var r=br.f(),s=Zh();return r||s}function II(r){var s=tr(r);s!==null&&s.tag===5&&s.type==="form"?Q0(s):br.r(r)}var $o=typeof document>"u"?null:document;function TT(r,s,l){var c=$o;if(c&&typeof s=="string"&&s){var f=yt(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),ET.has(f)||(ET.add(f),r={rel:r,crossOrigin:l,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),rn(s,"link",r),ft(s),c.head.appendChild(s)))}}function NI(r){br.D(r),TT("dns-prefetch",r,null)}function DI(r,s){br.C(r,s),TT("preconnect",r,s)}function kI(r,s,l){br.L(r,s,l);var c=$o;if(c&&r&&s){var f='link[rel="preload"][as="'+yt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+yt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+yt(l.imageSizes)+'"]')):f+='[href="'+yt(r)+'"]';var g=f;switch(s){case"style":g=Qo(r);break;case"script":g=Ko(r)}ni.has(g)||(r=R({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),ni.set(g,r),c.querySelector(f)!==null||s==="style"&&c.querySelector(Mu(g))||s==="script"&&c.querySelector(Pu(g))||(s=c.createElement("link"),rn(s,"link",r),ft(s),c.head.appendChild(s)))}}function OI(r,s){br.m(r,s);var l=$o;if(l&&r){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+yt(c)+'"][href="'+yt(r)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ko(r)}if(!ni.has(g)&&(r=R({rel:"modulepreload",href:r},s),ni.set(g,r),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Pu(g)))return}c=l.createElement("link"),rn(c,"link",r),ft(c),l.head.appendChild(c)}}}function MI(r,s,l){br.S(r,s,l);var c=$o;if(c&&r){var f=Jr(c).hoistableStyles,g=Qo(r);s=s||"default";var w=f.get(g);if(!w){var x={loading:0,preload:null};if(w=c.querySelector(Mu(g)))x.loading=5;else{r=R({rel:"stylesheet",href:r,"data-precedence":s},l),(l=ni.get(g))&&eg(r,l);var P=w=c.createElement("link");ft(P),rn(P,"link",r),P._p=new Promise(function(B,X){P.onload=B,P.onerror=X}),P.addEventListener("load",function(){x.loading|=1}),P.addEventListener("error",function(){x.loading|=2}),x.loading|=4,ld(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:x},f.set(g,w)}}}function PI(r,s){br.X(r,s);var l=$o;if(l&&r){var c=Jr(l).hoistableScripts,f=Ko(r),g=c.get(f);g||(g=l.querySelector(Pu(f)),g||(r=R({src:r,async:!0},s),(s=ni.get(f))&&tg(r,s),g=l.createElement("script"),ft(g),rn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function LI(r,s){br.M(r,s);var l=$o;if(l&&r){var c=Jr(l).hoistableScripts,f=Ko(r),g=c.get(f);g||(g=l.querySelector(Pu(f)),g||(r=R({src:r,async:!0,type:"module"},s),(s=ni.get(f))&&tg(r,s),g=l.createElement("script"),ft(g),rn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function wT(r,s,l,c){var f=(f=Bn.current)?od(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Qo(l.href),l=Jr(f).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Qo(l.href);var g=Jr(f).hoistableStyles,w=g.get(r);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,w),(g=f.querySelector(Mu(r)))&&!g._p&&(w.instance=g,w.state.loading=5),ni.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ni.set(r,l),g||VI(f,r,l,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ko(l),l=Jr(f).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Qo(r){return'href="'+yt(r)+'"'}function Mu(r){return'link[rel="stylesheet"]['+r+"]"}function bT(r){return R({},r,{"data-precedence":r.precedence,precedence:null})}function VI(r,s,l,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),rn(s,"link",l),ft(s),r.head.appendChild(s))}function Ko(r){return'[src="'+yt(r)+'"]'}function Pu(r){return"script[async]"+r}function ST(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+yt(l.href)+'"]');if(c)return s.instance=c,ft(c),c;var f=R({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),ft(c),rn(c,"style",f),ld(c,l.precedence,r),s.instance=c;case"stylesheet":f=Qo(l.href);var g=r.querySelector(Mu(f));if(g)return s.state.loading|=4,s.instance=g,ft(g),g;c=bT(l),(f=ni.get(f))&&eg(c,f),g=(r.ownerDocument||r).createElement("link"),ft(g);var w=g;return w._p=new Promise(function(x,P){w.onload=x,w.onerror=P}),rn(g,"link",c),s.state.loading|=4,ld(g,l.precedence,r),s.instance=g;case"script":return g=Ko(l.src),(f=r.querySelector(Pu(g)))?(s.instance=f,ft(f),f):(c=l,(f=ni.get(g))&&(c=R({},l),tg(c,f)),r=r.ownerDocument||r,f=r.createElement("script"),ft(f),rn(f,"link",c),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&!(s.state.loading&4)&&(c=s.instance,s.state.loading|=4,ld(c,l.precedence,r));return s.instance}function ld(r,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,w=0;w<c.length;w++){var x=c[w];if(x.dataset.precedence===s)g=x;else if(g!==f)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function eg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function tg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var ud=null;function CT(r,s,l){if(ud===null){var c=new Map,f=ud=new Map;f.set(l,c)}else f=ud,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),f=0;f<l.length;f++){var g=l[f];if(!(g[Wr]||g[Gt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=r+w;var x=c.get(w);x?x.push(g):c.set(w,[g])}}return c}function AT(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function UI(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xT(r){return!(r.type==="stylesheet"&&!(r.state.loading&3))}var Lu=null;function jI(){}function BI(r,s,l){if(Lu===null)throw Error(i(475));var c=Lu;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&!(s.state.loading&4)){if(s.instance===null){var f=Qo(l.href),g=r.querySelector(Mu(f));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=cd.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=g,ft(g);return}g=r.ownerDocument||r,l=bT(l),(f=ni.get(f))&&eg(l,f),g=g.createElement("link"),ft(g);var w=g;w._p=new Promise(function(x,P){w.onload=x,w.onerror=P}),rn(g,"link",l),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&!(s.state.loading&3)&&(c.count++,s=cd.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function zI(){if(Lu===null)throw Error(i(475));var r=Lu;return r.stylesheets&&r.count===0&&ng(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&ng(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function cd(){if(this.count--,this.count===0){if(this.stylesheets)ng(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var hd=null;function ng(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,hd=new Map,s.forEach(FI,r),hd=null,cd.call(r))}function FI(r,s){if(!(s.state.loading&4)){var l=hd.get(r);if(l)var c=l.get(null);else{l=new Map,hd.set(r,l);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var w=f[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}f=s.instance,w=f.getAttribute("data-precedence"),g=l.get(w)||c,g===c&&l.set(null,f),l.set(w,f),this.count++,c=cd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var Vu={$$typeof:S,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function qI(r,s,l,c,f,g,w,x){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lo(0),this.hiddenUpdates=lo(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function RT(r,s,l,c,f,g,w,x,P,B,X,ae){return r=new qI(r,s,l,w,x,P,B,ae),s=1,g===!0&&(s|=24),g=ei(3,null,null,s),r.current=g,g.stateNode=r,s=Mm(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:s},mp(g),r}function IT(r){return r?(r=Ao,r):Ao}function NT(r,s,l,c,f,g){f=IT(f),c.context===null?c.context=f:c.pendingContext=f,c=hs(s),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=ds(r,c,s),l!==null&&(Tn(l,r,s),Eu(l,r,s))}function DT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function ig(r,s){DT(r,s),(r=r.alternate)&&DT(r,s)}function kT(r){if(r.tag===13){var s=rs(r,67108864);s!==null&&Tn(s,r,67108864),ig(r,67108864)}}var dd=!0;function HI(r,s,l,c){var f=C.T;C.T=null;var g=me.p;try{me.p=2,rg(r,s,l,c)}finally{me.p=g,C.T=f}}function GI(r,s,l,c){var f=C.T;C.T=null;var g=me.p;try{me.p=8,rg(r,s,l,c)}finally{me.p=g,C.T=f}}function rg(r,s,l,c){if(dd){var f=sg(c);if(f===null)$p(r,s,c,fd,l),MT(r,c);else if(QI(f,r,s,l,c))c.stopPropagation();else if(MT(r,c),s&4&&-1<$I.indexOf(r)){for(;f!==null;){var g=tr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=li(g.pendingLanes);if(w!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;w;){var P=1<<31-_n(w);x.entanglements[1]|=P,w&=~P}Vi(g),!(pt&6)&&(Wh=Sn()+500,Du(0))}}break;case 13:x=rs(g,2),x!==null&&Tn(x,g,2),Zh(),ig(g,2)}if(g=sg(c),g===null&&$p(r,s,c,fd,l),g===f)break;f=g}f!==null&&c.stopPropagation()}else $p(r,s,c,null,l)}}function sg(r){return r=mo(r),ag(r)}var fd=null;function ag(r){if(fd=null,r=ui(r),r!==null){var s=ue(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=we(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return fd=r,null}function OT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jc()){case Ot:return 2;case Ht:return 8;case Zi:case Zc:return 32;case jl:return 268435456;default:return 32}default:return 32}}var og=!1,vs=null,Es=null,Ts=null,Uu=new Map,ju=new Map,ws=[],$I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MT(r,s){switch(r){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Uu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(s.pointerId)}}function Bu(r,s,l,c,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=tr(s),s!==null&&kT(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function QI(r,s,l,c,f){switch(s){case"focusin":return vs=Bu(vs,r,s,l,c,f),!0;case"dragenter":return Es=Bu(Es,r,s,l,c,f),!0;case"mouseover":return Ts=Bu(Ts,r,s,l,c,f),!0;case"pointerover":var g=f.pointerId;return Uu.set(g,Bu(Uu.get(g)||null,r,s,l,c,f)),!0;case"gotpointercapture":return g=f.pointerId,ju.set(g,Bu(ju.get(g)||null,r,s,l,c,f)),!0}return!1}function PT(r){var s=ui(r.target);if(s!==null){var l=ue(s);if(l!==null){if(s=l.tag,s===13){if(s=we(l),s!==null){r.blockedOn=s,Yr(r.priority,function(){if(l.tag===13){var c=Un(),f=rs(l,c);f!==null&&Tn(f,l,c),ig(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function md(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=sg(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Hn=c,l.target.dispatchEvent(c),Hn=null}else return s=tr(l),s!==null&&kT(s),r.blockedOn=l,!1;s.shift()}return!0}function LT(r,s,l){md(r)&&l.delete(s)}function KI(){og=!1,vs!==null&&md(vs)&&(vs=null),Es!==null&&md(Es)&&(Es=null),Ts!==null&&md(Ts)&&(Ts=null),Uu.forEach(LT),ju.forEach(LT)}function pd(r,s){r.blockedOn===s&&(r.blockedOn=null,og||(og=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,KI)))}var gd=null;function VT(r){gd!==r&&(gd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gd===r&&(gd=null);for(var s=0;s<r.length;s+=3){var l=r[s],c=r[s+1],f=r[s+2];if(typeof c!="function"){if(ag(c||l)===null)continue;break}var g=tr(l);g!==null&&(r.splice(s,3),s-=3,Wm(g,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function zu(r){function s(P){return pd(P,r)}vs!==null&&pd(vs,r),Es!==null&&pd(Es,r),Ts!==null&&pd(Ts,r),Uu.forEach(s),ju.forEach(s);for(var l=0;l<ws.length;l++){var c=ws[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<ws.length&&(l=ws[0],l.blockedOn===null);)PT(l),l.blockedOn===null&&ws.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],g=l[c+1],w=f[Mt]||null;if(typeof g=="function")w||VT(l);else if(w){var x=null;if(g&&g.hasAttribute("formAction")){if(f=g,w=g[Mt]||null)x=w.formAction;else if(ag(f)!==null)continue}else x=w.action;typeof x=="function"?l[c+1]=x:(l.splice(c,3),c-=3),VT(l)}}}function lg(r){this._internalRoot=r}_d.prototype.render=lg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Un();NT(l,c,r,s,null,null)},_d.prototype.unmount=lg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&qo(),NT(r.current,2,null,r,null,null),Zh(),s[er]=null}};function _d(r){this._internalRoot=r}_d.prototype.unstable_scheduleHydration=function(r){if(r){var s=rh();r={blockedOn:null,target:r,priority:s};for(var l=0;l<ws.length&&s!==0&&s<ws[l].priority;l++);ws.splice(l,0,r),l===0&&PT(r)}};var UT=e.version;if(UT!=="19.0.0")throw Error(i(527,UT,"19.0.0"));me.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=ie(s),r=r!==null?ye(r):null,r=r===null?null:r.stateNode,r};var YI={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:C,findFiberByHostInstance:ui,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{qr=yd.inject(YI),un=yd}catch{}}return qu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,c="",f=tE,g=nE,w=iE,x=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=RT(r,1,!1,null,null,l,c,f,g,w,x,null),r[er]=s.current,Gp(r.nodeType===8?r.parentNode:r),new lg(s)},qu.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var c=!1,f="",g=tE,w=nE,x=iE,P=null,B=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&(B=l.formState)),s=RT(r,1,!0,s,l??null,c,f,g,w,x,P,B),s.context=IT(null),l=s.current,c=Un(),f=hs(c),f.callback=null,ds(l,f,c),s.current.lanes=c,St(s,c),Vi(s),r[er]=s.current,Gp(r),new _d(s)},qu.version="19.0.0",qu}var KT;function aN(){if(KT)return hg.exports;KT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hg.exports=sN(),hg.exports}var oN=aN(),Hu={},YT;function lN(){if(YT)return Hu;YT=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.parse=u,Hu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function u(b,S){const O=new o,U=b.length;if(U<2)return O;const V=(S==null?void 0:S.decode)||y;let z=0;do{const G=b.indexOf("=",z);if(G===-1)break;const H=b.indexOf(";",z),Z=H===-1?U:H;if(G>Z){z=b.lastIndexOf(";",G-1)+1;continue}const le=h(b,z,G),te=m(b,G,le),M=b.slice(le,te);if(O[M]===void 0){let D=h(b,G+1,Z),C=m(b,Z,D);const R=V(b.slice(D,C));O[M]=R}z=Z+1}while(z<U);return O}function h(b,S,O){do{const U=b.charCodeAt(S);if(U!==32&&U!==9)return S}while(++S<O);return O}function m(b,S,O){for(;S>O;){const U=b.charCodeAt(--S);if(U!==32&&U!==9)return S+1}return O}function p(b,S,O){const U=(O==null?void 0:O.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const V=U(S);if(!e.test(V))throw new TypeError(`argument val is invalid: ${S}`);let z=b+"="+V;if(!O)return z;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);z+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);z+="; Domain="+O.domain}if(O.path){if(!i.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);z+="; Path="+O.path}if(O.expires){if(!E(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);z+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(z+="; HttpOnly"),O.secure&&(z+="; Secure"),O.partitioned&&(z+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return z}function y(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function E(b){return a.call(b)==="[object Date]"}return Hu}lN();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var WT="popstate";function uN(n={}){function e(i,a){let{pathname:o,search:u,hash:h}=i.location;return o_("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:fc(a)}return hN(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Hi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cN(){return Math.random().toString(36).substring(2,10)}function XT(n,e){return{usr:n.state,key:n.key,idx:e}}function o_(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Cl(e):e,state:t,key:e&&e.key||i||cN()}}function fc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Cl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function hN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,u=a.history,h="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function E(){h="POP";let V=y(),z=V==null?null:V-p;p=V,m&&m({action:h,location:U.location,delta:z})}function b(V,z){h="PUSH";let G=o_(U.location,V,z);p=y()+1;let H=XT(G,p),Z=U.createHref(G);try{u.pushState(H,"",Z)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(Z)}o&&m&&m({action:h,location:U.location,delta:1})}function S(V,z){h="REPLACE";let G=o_(U.location,V,z);p=y();let H=XT(G,p),Z=U.createHref(G);u.replaceState(H,"",Z),o&&m&&m({action:h,location:U.location,delta:0})}function O(V){let z=a.location.origin!=="null"?a.location.origin:a.location.href,G=typeof V=="string"?V:fc(V);return G=G.replace(/ $/,"%20"),gt(z,`No window.location.(origin|href) available to create URL for href: ${G}`),new URL(G,z)}let U={get action(){return h},get location(){return n(a,u)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(WT,E),m=V,()=>{a.removeEventListener(WT,E),m=null}},createHref(V){return e(a,V)},createURL:O,encodeLocation(V){let z=O(V);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:b,replace:S,go(V){return u.go(V)}};return U}function GS(n,e,t="/"){return dN(n,e,t,!1)}function dN(n,e,t,i){let a=typeof e=="string"?Cl(e):e,o=js(a.pathname||"/",t);if(o==null)return null;let u=$S(n);fN(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let p=SN(o);h=wN(u[m],p,i)}return h}function $S(n,e=[],t=[],i=""){let a=(o,u,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};m.relativePath.startsWith("/")&&(gt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=kr([i,m.relativePath]),y=t.concat(m);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),$S(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:EN(p,o.index),routesMeta:y})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let m of QS(o.path))a(o,u,m)}),e}function QS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let u=QS(i.join("/")),h=[];return h.push(...u.map(m=>m===""?o:[o,m].join("/"))),a&&h.push(...u),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function fN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:TN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var mN=/^:[\w-]+$/,pN=3,gN=2,_N=1,yN=10,vN=-2,JT=n=>n==="*";function EN(n,e){let t=n.split("/"),i=t.length;return t.some(JT)&&(i+=vN),e&&(i+=gN),t.filter(a=>!JT(a)).reduce((a,o)=>a+(mN.test(o)?pN:o===""?_N:yN),i)}function TN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function wN(n,e,t=!1){let{routesMeta:i}=n,a={},o="/",u=[];for(let h=0;h<i.length;++h){let m=i[h],p=h===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",E=Fd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!E&&p&&t&&!i[i.length-1].route.index&&(E=Fd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(a,E.params),u.push({params:a,pathname:kr([o,E.pathname]),pathnameBase:RN(kr([o,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(o=kr([o,E.pathnameBase]))}return u}function Fd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=bN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:E},b)=>{if(y==="*"){let O=h[b]||"";u=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const S=h[b];return E&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function bN(n,e=!1,t=!0){Hi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function SN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function js(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function CN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Cl(n):n;return{pathname:t?t.startsWith("/")?t:AN(t,e):e,search:IN(i),hash:NN(a)}}function AN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function pg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KS(n){let e=xN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function YS(n,e,t,i=!1){let a;typeof n=="string"?a=Cl(n):(a={...n},gt(!a.pathname||!a.pathname.includes("?"),pg("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),pg("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),pg("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),E-=1;a.pathname=b.join("/")}h=E>=0?e[E]:"/"}let m=CN(a,h),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var kr=n=>n.join("/").replace(/\/\/+/g,"/"),RN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function DN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var WS=["POST","PUT","PATCH","DELETE"];new Set(WS);var kN=["GET",...WS];new Set(kN);var Al=$.createContext(null);Al.displayName="DataRouter";var xf=$.createContext(null);xf.displayName="DataRouterState";var XS=$.createContext({isTransitioning:!1});XS.displayName="ViewTransition";var ON=$.createContext(new Map);ON.displayName="Fetchers";var MN=$.createContext(null);MN.displayName="Await";var Qi=$.createContext(null);Qi.displayName="Navigation";var Dc=$.createContext(null);Dc.displayName="Location";var Ki=$.createContext({outlet:null,matches:[],isDataRoute:!1});Ki.displayName="Route";var J_=$.createContext(null);J_.displayName="RouteError";function PN(n,{relative:e}={}){gt(kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=$.useContext(Qi),{hash:a,pathname:o,search:u}=Oc(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:kr([t,o])),i.createHref({pathname:h,search:u,hash:a})}function kc(){return $.useContext(Dc)!=null}function $a(){return gt(kc(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Dc).location}var JS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ZS(n){$.useContext(Qi).static||$.useLayoutEffect(n)}function Ys(){let{isDataRoute:n}=$.useContext(Ki);return n?KN():LN()}function LN(){gt(kc(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Al),{basename:e,navigator:t}=$.useContext(Qi),{matches:i}=$.useContext(Ki),{pathname:a}=$a(),o=JSON.stringify(KS(i)),u=$.useRef(!1);return ZS(()=>{u.current=!0}),$.useCallback((m,p={})=>{if(Hi(u.current,JS),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=YS(m,JSON.parse(o),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:kr([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,a,n])}$.createContext(null);function Z_(){let{matches:n}=$.useContext(Ki),e=n[n.length-1];return e?e.params:{}}function Oc(n,{relative:e}={}){let{matches:t}=$.useContext(Ki),{pathname:i}=$a(),a=JSON.stringify(KS(t));return $.useMemo(()=>YS(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function VN(n,e){return eC(n,e)}function eC(n,e,t,i){var G;gt(kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=$.useContext(Qi),{matches:u}=$.useContext(Ki),h=u[u.length-1],m=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",E=h&&h.route;{let H=E&&E.path||"";tC(p,!E||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let b=$a(),S;if(e){let H=typeof e=="string"?Cl(e):e;gt(y==="/"||((G=H.pathname)==null?void 0:G.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${H.pathname}" was given in the \`location\` prop.`),S=H}else S=b;let O=S.pathname||"/",U=O;if(y!=="/"){let H=y.replace(/^\//,"").split("/");U="/"+O.replace(/^\//,"").split("/").slice(H.length).join("/")}let V=!o&&t&&t.matches&&t.matches.length>0?t.matches:GS(n,{pathname:U});Hi(E||V!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Hi(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=FN(V&&V.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:kr([y,a.encodeLocation?a.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?y:kr([y,a.encodeLocation?a.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),u,t,i);return e&&z?$.createElement(Dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},z):z}function UN(){let n=QN(),e=DN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:o},"ErrorBoundary")," or"," ",$.createElement("code",{style:o},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:a},t):null,u)}var jN=$.createElement(UN,null),BN=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?$.createElement(Ki.Provider,{value:this.props.routeContext},$.createElement(J_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zN({routeContext:n,match:e,children:t}){let i=$.useContext(Al);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Ki.Provider,{value:n},t)}function FN(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t==null?void 0:t.errors;if(o!=null){let m=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,h=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:y,errors:E}=t,b=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!E||E[p.route.id]===void 0);if(p.route.lazy||b){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let E,b=!1,S=null,O=null;t&&(E=o&&p.route.id?o[p.route.id]:void 0,S=p.route.errorElement||jN,u&&(h<0&&y===0?(tC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,O=null):h===y&&(b=!0,O=p.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,y+1)),V=()=>{let z;return E?z=S:b?z=O:p.route.Component?z=$.createElement(p.route.Component,null):p.route.element?z=p.route.element:z=m,$.createElement(zN,{match:p,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:z})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?$.createElement(BN,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:V(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):V()},null)}function ey(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qN(n){let e=$.useContext(Al);return gt(e,ey(n)),e}function HN(n){let e=$.useContext(xf);return gt(e,ey(n)),e}function GN(n){let e=$.useContext(Ki);return gt(e,ey(n)),e}function ty(n){let e=GN(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $N(){return ty("useRouteId")}function QN(){var i;let n=$.useContext(J_),e=HN("useRouteError"),t=ty("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function KN(){let{router:n}=qN("useNavigate"),e=ty("useNavigate"),t=$.useRef(!1);return ZS(()=>{t.current=!0}),$.useCallback(async(a,o={})=>{Hi(t.current,JS),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var ZT={};function tC(n,e,t){!e&&!ZT[n]&&(ZT[n]=!0,Hi(!1,t))}$.memo(YN);function YN({routes:n,future:e,state:t}){return eC(n,void 0,t,e)}function As(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){gt(!kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof t=="string"&&(t=Cl(t));let{pathname:m="/",search:p="",hash:y="",state:E=null,key:b="default"}=t,S=$.useMemo(()=>{let O=js(m,u);return O==null?null:{location:{pathname:O,search:p,hash:y,state:E,key:b},navigationType:i}},[u,m,p,y,E,b,i]);return Hi(S!=null,`<Router basename="${u}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:$.createElement(Qi.Provider,{value:h},$.createElement(Dc.Provider,{children:e,value:S}))}function XN({children:n,location:e}){return VN(l_(n),e)}function l_(n,e=[]){let t=[];return $.Children.forEach(n,(i,a)=>{if(!$.isValidElement(i))return;let o=[...e,a];if(i.type===$.Fragment){t.push.apply(t,l_(i.props.children,o));return}gt(i.type===As,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=l_(i.props.children,o)),t.push(u)}),t}var Id="get",Nd="application/x-www-form-urlencoded";function Rf(n){return n!=null&&typeof n.tagName=="string"}function JN(n){return Rf(n)&&n.tagName.toLowerCase()==="button"}function ZN(n){return Rf(n)&&n.tagName.toLowerCase()==="form"}function e2(n){return Rf(n)&&n.tagName.toLowerCase()==="input"}function t2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function n2(n,e){return n.button===0&&(!e||e==="_self")&&!t2(n)}var vd=null;function i2(){if(vd===null)try{new FormData(document.createElement("form"),0),vd=!1}catch{vd=!0}return vd}var r2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gg(n){return n!=null&&!r2.has(n)?(Hi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nd}"`),null):n}function s2(n,e){let t,i,a,o,u;if(ZN(n)){let h=n.getAttribute("action");i=h?js(h,e):null,t=n.getAttribute("method")||Id,a=gg(n.getAttribute("enctype"))||Nd,o=new FormData(n)}else if(JN(n)||e2(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(i=m?js(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Id,a=gg(n.getAttribute("formenctype"))||gg(h.getAttribute("enctype"))||Nd,o=new FormData(h,n),!i2()){let{name:p,type:y,value:E}=n;if(y==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,E)}}else{if(Rf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Id,i=null,a=Nd,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:u}}function ny(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function a2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function l2(n,e,t){let i=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await a2(o,t);return u.links?u.links():[]}return[]}));return d2(i.flat(1).filter(o2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ew(n,e,t,i,a,o){let u=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,h=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,p)=>u(m,p)||h(m,p)):o==="data"?e.filter((m,p)=>{var E;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function u2(n,e){return c2(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let a=[i.module];return i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function c2(n){return[...new Set(n)]}function h2(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function d2(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let o=JSON.stringify(h2(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function f2(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function m2(){let n=$.useContext(Al);return ny(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function p2(){let n=$.useContext(xf);return ny(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var iy=$.createContext(void 0);iy.displayName="FrameworkContext";function nC(){let n=$.useContext(iy);return ny(n,"You must render this element inside a <HydratedRouter> element"),n}function g2(n,e){let t=$.useContext(iy),[i,a]=$.useState(!1),[o,u]=$.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:E}=e,b=$.useRef(null);$.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let U=z=>{z.forEach(G=>{u(G.isIntersecting)})},V=new IntersectionObserver(U,{threshold:.5});return b.current&&V.observe(b.current),()=>{V.disconnect()}}},[n]),$.useEffect(()=>{if(i){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[i]);let S=()=>{a(!0)},O=()=>{a(!1),u(!1)};return t?n!=="intent"?[o,b,{}]:[o,b,{onFocus:Gu(h,S),onBlur:Gu(m,O),onMouseEnter:Gu(p,S),onMouseLeave:Gu(y,O),onTouchStart:Gu(E,S)}]:[!1,b,{}]}function Gu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _2({page:n,...e}){let{router:t}=m2(),i=$.useMemo(()=>GS(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?$.createElement(v2,{page:n,matches:i,...e}):null}function y2(n){let{manifest:e,routeModules:t}=nC(),[i,a]=$.useState([]);return $.useEffect(()=>{let o=!1;return l2(n,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[n,e,t]),i}function v2({page:n,matches:e,...t}){let i=$a(),{manifest:a,routeModules:o}=nC(),{loaderData:u,matches:h}=p2(),m=$.useMemo(()=>ew(n,e,h,a,i,"data"),[n,e,h,a,i]),p=$.useMemo(()=>ew(n,e,h,a,i,"assets"),[n,e,h,a,i]),y=$.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,O=!1;if(e.forEach(V=>{var G;let z=a.routes[V.route.id];!z||!z.hasLoader||(!m.some(H=>H.route.id===V.route.id)&&V.route.id in u&&((G=o[V.route.id])!=null&&G.shouldRevalidate)||z.hasClientLoader?O=!0:S.add(V.route.id))}),S.size===0)return[];let U=f2(n);return O&&S.size>0&&U.searchParams.set("_routes",e.filter(V=>S.has(V.route.id)).map(V=>V.route.id).join(",")),[U.pathname+U.search]},[u,i,a,m,e,n,o]),E=$.useMemo(()=>u2(p,a),[p,a]),b=y2(p);return $.createElement($.Fragment,null,y.map(S=>$.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>$.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),b.map(({key:S,link:O})=>$.createElement("link",{key:S,...O})))}function E2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var iC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iC&&(window.__reactRouterVersion="7.1.5")}catch{}function T2({basename:n,children:e,window:t}){let i=$.useRef();i.current==null&&(i.current=uN({window:t,v5Compat:!0}));let a=i.current,[o,u]=$.useState({action:a.action,location:a.location}),h=$.useCallback(m=>{$.startTransition(()=>u(m))},[u]);return $.useLayoutEffect(()=>a.listen(h),[a,h]),$.createElement(WN,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a})}var rC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tc=$.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:u,state:h,target:m,to:p,preventScrollReset:y,viewTransition:E,...b},S){let{basename:O}=$.useContext(Qi),U=typeof p=="string"&&rC.test(p),V,z=!1;if(typeof p=="string"&&U&&(V=p,iC))try{let C=new URL(window.location.href),R=p.startsWith("//")?new URL(C.protocol+p):new URL(p),A=js(R.pathname,O);R.origin===C.origin&&A!=null?p=A+R.search+R.hash:z=!0}catch{Hi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=PN(p,{relative:a}),[H,Z,le]=g2(i,b),te=C2(p,{replace:u,state:h,target:m,preventScrollReset:y,relative:a,viewTransition:E});function M(C){e&&e(C),C.defaultPrevented||te(C)}let D=$.createElement("a",{...b,...le,href:V||G,onClick:z||o?e:M,ref:E2(S,Z),target:m,"data-discover":!U&&t==="render"?"true":void 0});return H&&!U?$.createElement($.Fragment,null,D,$.createElement(_2,{page:G})):D});tc.displayName="Link";var w2=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:h,children:m,...p},y){let E=Oc(u,{relative:p.relative}),b=$a(),S=$.useContext(xf),{navigator:O,basename:U}=$.useContext(Qi),V=S!=null&&N2(E)&&h===!0,z=O.encodeLocation?O.encodeLocation(E).pathname:E.pathname,G=b.pathname,H=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(G=G.toLowerCase(),H=H?H.toLowerCase():null,z=z.toLowerCase()),H&&U&&(H=js(H,U)||H);const Z=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let le=G===z||!a&&G.startsWith(z)&&G.charAt(Z)==="/",te=H!=null&&(H===z||!a&&H.startsWith(z)&&H.charAt(z.length)==="/"),M={isActive:le,isPending:te,isTransitioning:V},D=le?e:void 0,C;typeof i=="function"?C=i(M):C=[i,le?"active":null,te?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(M):o;return $.createElement(tc,{...p,"aria-current":D,className:C,ref:y,style:R,to:u,viewTransition:h},typeof m=="function"?m(M):m)});w2.displayName="NavLink";var b2=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:u=Id,action:h,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:E,...b},S)=>{let O=R2(),U=I2(h,{relative:p}),V=u.toLowerCase()==="get"?"get":"post",z=typeof h=="string"&&rC.test(h),G=H=>{if(m&&m(H),H.defaultPrevented)return;H.preventDefault();let Z=H.nativeEvent.submitter,le=(Z==null?void 0:Z.getAttribute("formmethod"))||u;O(Z||H.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:o,relative:p,preventScrollReset:y,viewTransition:E})};return $.createElement("form",{ref:S,method:V,action:U,onSubmit:i?m:G,...b,"data-discover":!z&&n==="render"?"true":void 0})});b2.displayName="Form";function S2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sC(n){let e=$.useContext(Al);return gt(e,S2(n)),e}function C2(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=Ys(),m=$a(),p=Oc(n,{relative:o});return $.useCallback(y=>{if(n2(y,e)){y.preventDefault();let E=t!==void 0?t:fc(m)===fc(p);h(n,{replace:E,state:i,preventScrollReset:a,relative:o,viewTransition:u})}},[m,h,p,t,i,e,n,a,o,u])}var A2=0,x2=()=>`__${String(++A2)}__`;function R2(){let{router:n}=sC("useSubmit"),{basename:e}=$.useContext(Qi),t=$N();return $.useCallback(async(i,a={})=>{let{action:o,method:u,encType:h,formData:m,body:p}=s2(i,e);if(a.navigate===!1){let y=a.fetcherKey||x2();await n.fetch(y,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function I2(n,{relative:e}={}){let{basename:t}=$.useContext(Qi),i=$.useContext(Ki);gt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Oc(n||".",{relative:e})},u=$a();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),m=h.getAll("index");if(m.some(y=>y==="")){h.delete("index"),m.filter(E=>E).forEach(E=>h.append("index",E));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:kr([t,o.pathname])),fc(o)}function N2(n,e={}){let t=$.useContext(XS);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=sC("useViewTransitionState"),a=Oc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=js(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=js(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Fd(a.pathname,u)!=null||Fd(a.pathname,o)!=null}new TextEncoder;var tw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(n,e){if(!n)throw xl(e)},xl=function(n){return new Error("Firebase Database ("+aC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},D2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],u=n[t++],h=n[t++],m=((a&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],u=a+1<n.length,h=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=o>>2,E=(o&3)<<4|h>>4;let b=(h&15)<<2|p>>6,S=p&63;m||(S=64,u||(b=64)),i.push(t[y],t[E],t[b],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):D2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||p==null||E==null)throw new k2;const b=o<<2|h>>4;if(i.push(b),p!==64){const S=h<<4&240|p>>2;if(i.push(S),E!==64){const O=p<<6&192|E;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class k2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lC=function(n){const e=oC(n);return ry.encodeByteArray(e,!0)},qd=function(n){return lC(n).replace(/\./g,"")},Hd=function(n){try{return ry.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){return uC(void 0,n)}function uC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!M2(t)||(n[t]=uC(n[t],e[t]));return n}function M2(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=()=>P2().__FIREBASE_DEFAULTS__,V2=()=>{if(typeof process>"u"||typeof tw>"u")return;const n=tw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},U2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Hd(n[1]);return e&&JSON.parse(e)},If=()=>{try{return L2()||V2()||U2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cC=n=>{var e,t;return(t=(e=If())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hC=n=>{const e=cC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},dC=()=>{var n;return(n=If())===null||n===void 0?void 0:n.config},fC=n=>{var e;return(e=If())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qd(JSON.stringify(t)),qd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function j2(){var n;const e=(n=If())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z2(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function F2(){return aC.NODE_ADMIN===!0}function q2(){return!j2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _C(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function H2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="FirebaseError";class Ti extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=G2,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qa.prototype.create)}}class Qa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?$2(o,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Ti(a,h,i)}}function $2(n,e){return n.replace(Q2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const Q2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(n){return JSON.parse(n)}function zt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=function(n){let e={},t={},i={},a="";try{const o=n.split(".");e=mc(Hd(o[0])||""),t=mc(Hd(o[1])||""),a=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},K2=function(n){const e=vC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Y2=function(n){const e=vC(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ll(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function u_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gd(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function pc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=n[a],u=e[a];if(nw(o)&&nw(u)){if(!pc(o,u))return!1}else if(o!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function nw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)i[E]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let E=0;E<16;E++)i[E]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let E=16;E<80;E++){const b=i[E-3]^i[E-8]^i[E-14]^i[E-16];i[E]=(b<<1|b>>>31)&4294967295}let a=this.chain_[0],o=this.chain_[1],u=this.chain_[2],h=this.chain_[3],m=this.chain_[4],p,y;for(let E=0;E<80;E++){E<40?E<20?(p=h^o&(u^h),y=1518500249):(p=o^u^h,y=1859775393):E<60?(p=o&u|h&(o|u),y=2400959708):(p=o^u^h,y=3395469782);const b=(a<<5|a>>>27)+p+m+y+i[E]&4294967295;m=h,h=u,u=(o<<30|o>>>2)&4294967295,o=a,a=b}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const o=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(o[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}else for(;a<t;)if(o[u]=e[a],++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[a]>>o&255,++i;return e}}function X2(n,e){const t=new J2(n,e);return t.subscribe.bind(t)}class J2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Z2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=_g),a.error===void 0&&(a.error=_g),a.complete===void 0&&(a.complete=_g);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _g(){}function Nf(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const o=a-55296;i++,ce(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(o<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Df=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1e3,nD=2,iD=4*60*60*1e3,rD=.5;function iw(n,e=tD,t=nD){const i=e*Math.pow(t,n),a=Math.round(rD*i*(Math.random()-.5)*2);return Math.min(iD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(n){return n&&n._delegate?n._delegate:n}class ai{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Mc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oD(e))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=Ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ia){return this.instances.has(e)}getOptions(e=Ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ia){return this.component?this.component.multipleInstances?e:Ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aD(n){return n===Ia?void 0:n}function oD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const uD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},cD=je.INFO,hD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},dD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=hD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pc{constructor(e){this.name=e,this._logLevel=cD,this._logHandler=dD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const fD=(n,e)=>e.some(t=>n instanceof t);let rw,sw;function mD(){return rw||(rw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pD(){return sw||(sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EC=new WeakMap,c_=new WeakMap,TC=new WeakMap,yg=new WeakMap,ay=new WeakMap;function gD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(ks(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&EC.set(t,n)}).catch(()=>{}),ay.set(e,n),e}function _D(n){if(c_.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});c_.set(n,e)}let h_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return c_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ks(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yD(n){h_=n(h_)}function vD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(vg(this),e,...t);return TC.set(i,e.sort?e.sort():[e]),ks(i)}:pD().includes(n)?function(...e){return n.apply(vg(this),e),ks(EC.get(this))}:function(...e){return ks(n.apply(vg(this),e))}}function ED(n){return typeof n=="function"?vD(n):(n instanceof IDBTransaction&&_D(n),fD(n,mD())?new Proxy(n,h_):n)}function ks(n){if(n instanceof IDBRequest)return gD(n);if(yg.has(n))return yg.get(n);const e=ED(n);return e!==n&&(yg.set(n,e),ay.set(e,n)),e}const vg=n=>ay.get(n);function wC(n,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const u=indexedDB.open(n,e),h=ks(u);return i&&u.addEventListener("upgradeneeded",m=>{i(ks(u.result),m.oldVersion,m.newVersion,ks(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const TD=["get","getKey","getAll","getAllKeys","count"],wD=["put","add","delete","clear"],Eg=new Map;function aw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=wD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||TD.includes(t)))return;const o=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&m.done]))[0]};return Eg.set(e,o),o}yD(n=>({...n,get:(e,t,i)=>aw(e,t)||n.get(e,t,i),has:(e,t)=>!!aw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function SD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const d_="@firebase/app",ow="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Pc("@firebase/app"),CD="@firebase/app-compat",AD="@firebase/analytics-compat",xD="@firebase/analytics",RD="@firebase/app-check-compat",ID="@firebase/app-check",ND="@firebase/auth",DD="@firebase/auth-compat",kD="@firebase/database",OD="@firebase/data-connect",MD="@firebase/database-compat",PD="@firebase/functions",LD="@firebase/functions-compat",VD="@firebase/installations",UD="@firebase/installations-compat",jD="@firebase/messaging",BD="@firebase/messaging-compat",zD="@firebase/performance",FD="@firebase/performance-compat",qD="@firebase/remote-config",HD="@firebase/remote-config-compat",GD="@firebase/storage",$D="@firebase/storage-compat",QD="@firebase/firestore",KD="@firebase/vertexai",YD="@firebase/firestore-compat",WD="firebase",XD="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="[DEFAULT]",JD={[d_]:"fire-core",[CD]:"fire-core-compat",[xD]:"fire-analytics",[AD]:"fire-analytics-compat",[ID]:"fire-app-check",[RD]:"fire-app-check-compat",[ND]:"fire-auth",[DD]:"fire-auth-compat",[kD]:"fire-rtdb",[OD]:"fire-data-connect",[MD]:"fire-rtdb-compat",[PD]:"fire-fn",[LD]:"fire-fn-compat",[VD]:"fire-iid",[UD]:"fire-iid-compat",[jD]:"fire-fcm",[BD]:"fire-fcm-compat",[zD]:"fire-perf",[FD]:"fire-perf-compat",[qD]:"fire-rc",[HD]:"fire-rc-compat",[GD]:"fire-gcs",[$D]:"fire-gcs-compat",[QD]:"fire-fst",[YD]:"fire-fst-compat",[KD]:"fire-vertex","fire-js":"fire-js",[WD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Map,ZD=new Map,m_=new Map;function lw(n,e){try{n.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vi(n){const e=n.name;if(m_.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;m_.set(e,n);for(const t of $d.values())lw(t,n);for(const t of ZD.values())lw(t,n);return!0}function Ws(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new Qa("app","Firebase",ek);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=XD;function bC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:f_,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw Os.create("bad-app-name",{appName:String(a)});if(t||(t=dC()),!t)throw Os.create("no-options");const o=$d.get(a);if(o){if(pc(t,o.options)&&pc(i,o.config))return o;throw Os.create("duplicate-app",{appName:a})}const u=new lD(a);for(const m of m_.values())u.addComponent(m);const h=new tk(t,i,u);return $d.set(a,h),h}function kf(n=f_){const e=$d.get(n);if(!e&&n===f_&&dC())return bC();if(!e)throw Os.create("no-app",{appName:n});return e}function In(n,e,t){var i;let a=(i=JD[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(h.join(" "));return}vi(new ai(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firebase-heartbeat-database",ik=1,gc="firebase-heartbeat-store";let Tg=null;function SC(){return Tg||(Tg=wC(nk,ik,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Os.create("idb-open",{originalErrorMessage:n.message})})),Tg}async function rk(n){try{const t=(await SC()).transaction(gc),i=await t.objectStore(gc).get(CC(n));return await t.done,i}catch(e){if(e instanceof Ti)Lr.warn(e.message);else{const t=Os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(t.message)}}}async function uw(n,e){try{const i=(await SC()).transaction(gc,"readwrite");await i.objectStore(gc).put(e,CC(n)),await i.done}catch(t){if(t instanceof Ti)Lr.warn(t.message);else{const i=Os.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Lr.warn(i.message)}}}function CC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1024,ak=30;class ok{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>ak){const u=ck(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cw(),{heartbeatsToSend:i,unsentEntries:a}=lk(this._heartbeatsCache.heartbeats),o=qd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Lr.warn(t),""}}}function cw(){return new Date().toISOString().substring(0,10)}function lk(n,e=sk){const t=[];let i=n.slice();for(const a of n){const o=t.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),hw(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),hw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class uk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _C()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return uw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return uw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function hw(n){return qd(JSON.stringify({version:2,heartbeats:n})).length}function ck(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n){vi(new ai("platform-logger",e=>new bD(e),"PRIVATE")),vi(new ai("heartbeat",e=>new ok(e),"PRIVATE")),In(d_,ow,n),In(d_,ow,"esm2017"),In("fire-js","")}hk("");var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,AC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function C(){}C.prototype=D.prototype,M.D=D.prototype,M.prototype=new C,M.prototype.constructor=M,M.C=function(R,A,k){for(var I=Array(arguments.length-2),se=2;se<arguments.length;se++)I[se-2]=arguments[se];return D.prototype[A].apply(R,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,D,C){C||(C=0);var R=Array(16);if(typeof D=="string")for(var A=0;16>A;++A)R[A]=D.charCodeAt(C++)|D.charCodeAt(C++)<<8|D.charCodeAt(C++)<<16|D.charCodeAt(C++)<<24;else for(A=0;16>A;++A)R[A]=D[C++]|D[C++]<<8|D[C++]<<16|D[C++]<<24;D=M.g[0],C=M.g[1],A=M.g[2];var k=M.g[3],I=D+(k^C&(A^k))+R[0]+3614090360&4294967295;D=C+(I<<7&4294967295|I>>>25),I=k+(A^D&(C^A))+R[1]+3905402710&4294967295,k=D+(I<<12&4294967295|I>>>20),I=A+(C^k&(D^C))+R[2]+606105819&4294967295,A=k+(I<<17&4294967295|I>>>15),I=C+(D^A&(k^D))+R[3]+3250441966&4294967295,C=A+(I<<22&4294967295|I>>>10),I=D+(k^C&(A^k))+R[4]+4118548399&4294967295,D=C+(I<<7&4294967295|I>>>25),I=k+(A^D&(C^A))+R[5]+1200080426&4294967295,k=D+(I<<12&4294967295|I>>>20),I=A+(C^k&(D^C))+R[6]+2821735955&4294967295,A=k+(I<<17&4294967295|I>>>15),I=C+(D^A&(k^D))+R[7]+4249261313&4294967295,C=A+(I<<22&4294967295|I>>>10),I=D+(k^C&(A^k))+R[8]+1770035416&4294967295,D=C+(I<<7&4294967295|I>>>25),I=k+(A^D&(C^A))+R[9]+2336552879&4294967295,k=D+(I<<12&4294967295|I>>>20),I=A+(C^k&(D^C))+R[10]+4294925233&4294967295,A=k+(I<<17&4294967295|I>>>15),I=C+(D^A&(k^D))+R[11]+2304563134&4294967295,C=A+(I<<22&4294967295|I>>>10),I=D+(k^C&(A^k))+R[12]+1804603682&4294967295,D=C+(I<<7&4294967295|I>>>25),I=k+(A^D&(C^A))+R[13]+4254626195&4294967295,k=D+(I<<12&4294967295|I>>>20),I=A+(C^k&(D^C))+R[14]+2792965006&4294967295,A=k+(I<<17&4294967295|I>>>15),I=C+(D^A&(k^D))+R[15]+1236535329&4294967295,C=A+(I<<22&4294967295|I>>>10),I=D+(A^k&(C^A))+R[1]+4129170786&4294967295,D=C+(I<<5&4294967295|I>>>27),I=k+(C^A&(D^C))+R[6]+3225465664&4294967295,k=D+(I<<9&4294967295|I>>>23),I=A+(D^C&(k^D))+R[11]+643717713&4294967295,A=k+(I<<14&4294967295|I>>>18),I=C+(k^D&(A^k))+R[0]+3921069994&4294967295,C=A+(I<<20&4294967295|I>>>12),I=D+(A^k&(C^A))+R[5]+3593408605&4294967295,D=C+(I<<5&4294967295|I>>>27),I=k+(C^A&(D^C))+R[10]+38016083&4294967295,k=D+(I<<9&4294967295|I>>>23),I=A+(D^C&(k^D))+R[15]+3634488961&4294967295,A=k+(I<<14&4294967295|I>>>18),I=C+(k^D&(A^k))+R[4]+3889429448&4294967295,C=A+(I<<20&4294967295|I>>>12),I=D+(A^k&(C^A))+R[9]+568446438&4294967295,D=C+(I<<5&4294967295|I>>>27),I=k+(C^A&(D^C))+R[14]+3275163606&4294967295,k=D+(I<<9&4294967295|I>>>23),I=A+(D^C&(k^D))+R[3]+4107603335&4294967295,A=k+(I<<14&4294967295|I>>>18),I=C+(k^D&(A^k))+R[8]+1163531501&4294967295,C=A+(I<<20&4294967295|I>>>12),I=D+(A^k&(C^A))+R[13]+2850285829&4294967295,D=C+(I<<5&4294967295|I>>>27),I=k+(C^A&(D^C))+R[2]+4243563512&4294967295,k=D+(I<<9&4294967295|I>>>23),I=A+(D^C&(k^D))+R[7]+1735328473&4294967295,A=k+(I<<14&4294967295|I>>>18),I=C+(k^D&(A^k))+R[12]+2368359562&4294967295,C=A+(I<<20&4294967295|I>>>12),I=D+(C^A^k)+R[5]+4294588738&4294967295,D=C+(I<<4&4294967295|I>>>28),I=k+(D^C^A)+R[8]+2272392833&4294967295,k=D+(I<<11&4294967295|I>>>21),I=A+(k^D^C)+R[11]+1839030562&4294967295,A=k+(I<<16&4294967295|I>>>16),I=C+(A^k^D)+R[14]+4259657740&4294967295,C=A+(I<<23&4294967295|I>>>9),I=D+(C^A^k)+R[1]+2763975236&4294967295,D=C+(I<<4&4294967295|I>>>28),I=k+(D^C^A)+R[4]+1272893353&4294967295,k=D+(I<<11&4294967295|I>>>21),I=A+(k^D^C)+R[7]+4139469664&4294967295,A=k+(I<<16&4294967295|I>>>16),I=C+(A^k^D)+R[10]+3200236656&4294967295,C=A+(I<<23&4294967295|I>>>9),I=D+(C^A^k)+R[13]+681279174&4294967295,D=C+(I<<4&4294967295|I>>>28),I=k+(D^C^A)+R[0]+3936430074&4294967295,k=D+(I<<11&4294967295|I>>>21),I=A+(k^D^C)+R[3]+3572445317&4294967295,A=k+(I<<16&4294967295|I>>>16),I=C+(A^k^D)+R[6]+76029189&4294967295,C=A+(I<<23&4294967295|I>>>9),I=D+(C^A^k)+R[9]+3654602809&4294967295,D=C+(I<<4&4294967295|I>>>28),I=k+(D^C^A)+R[12]+3873151461&4294967295,k=D+(I<<11&4294967295|I>>>21),I=A+(k^D^C)+R[15]+530742520&4294967295,A=k+(I<<16&4294967295|I>>>16),I=C+(A^k^D)+R[2]+3299628645&4294967295,C=A+(I<<23&4294967295|I>>>9),I=D+(A^(C|~k))+R[0]+4096336452&4294967295,D=C+(I<<6&4294967295|I>>>26),I=k+(C^(D|~A))+R[7]+1126891415&4294967295,k=D+(I<<10&4294967295|I>>>22),I=A+(D^(k|~C))+R[14]+2878612391&4294967295,A=k+(I<<15&4294967295|I>>>17),I=C+(k^(A|~D))+R[5]+4237533241&4294967295,C=A+(I<<21&4294967295|I>>>11),I=D+(A^(C|~k))+R[12]+1700485571&4294967295,D=C+(I<<6&4294967295|I>>>26),I=k+(C^(D|~A))+R[3]+2399980690&4294967295,k=D+(I<<10&4294967295|I>>>22),I=A+(D^(k|~C))+R[10]+4293915773&4294967295,A=k+(I<<15&4294967295|I>>>17),I=C+(k^(A|~D))+R[1]+2240044497&4294967295,C=A+(I<<21&4294967295|I>>>11),I=D+(A^(C|~k))+R[8]+1873313359&4294967295,D=C+(I<<6&4294967295|I>>>26),I=k+(C^(D|~A))+R[15]+4264355552&4294967295,k=D+(I<<10&4294967295|I>>>22),I=A+(D^(k|~C))+R[6]+2734768916&4294967295,A=k+(I<<15&4294967295|I>>>17),I=C+(k^(A|~D))+R[13]+1309151649&4294967295,C=A+(I<<21&4294967295|I>>>11),I=D+(A^(C|~k))+R[4]+4149444226&4294967295,D=C+(I<<6&4294967295|I>>>26),I=k+(C^(D|~A))+R[11]+3174756917&4294967295,k=D+(I<<10&4294967295|I>>>22),I=A+(D^(k|~C))+R[2]+718787259&4294967295,A=k+(I<<15&4294967295|I>>>17),I=C+(k^(A|~D))+R[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+A&4294967295,M.g[3]=M.g[3]+k&4294967295}i.prototype.u=function(M,D){D===void 0&&(D=M.length);for(var C=D-this.blockSize,R=this.B,A=this.h,k=0;k<D;){if(A==0)for(;k<=C;)a(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<D;)if(R[A++]=M.charCodeAt(k++),A==this.blockSize){a(this,R),A=0;break}}else for(;k<D;)if(R[A++]=M[k++],A==this.blockSize){a(this,R),A=0;break}}this.h=A,this.o+=D},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;var C=8*this.o;for(D=M.length-8;D<M.length;++D)M[D]=C&255,C/=256;for(this.u(M),M=Array(16),D=C=0;4>D;++D)for(var R=0;32>R;R+=8)M[C++]=this.g[D]>>>R&255;return M};function o(M,D){var C=h;return Object.prototype.hasOwnProperty.call(C,M)?C[M]:C[M]=D(M)}function u(M,D){this.h=D;for(var C=[],R=!0,A=M.length-1;0<=A;A--){var k=M[A]|0;R&&k==D||(C[A]=k,R=!1)}this.g=C}var h={};function m(M){return-128<=M&&128>M?o(M,function(D){return new u([D|0],0>D?-1:0)}):new u([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return V(p(-M));for(var D=[],C=1,R=0;M>=C;R++)D[R]=M/C|0,C*=4294967296;return new u(D,0)}function y(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return V(y(M.substring(1),D));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=p(Math.pow(D,8)),R=E,A=0;A<M.length;A+=8){var k=Math.min(8,M.length-A),I=parseInt(M.substring(A,A+k),D);8>k?(k=p(Math.pow(D,k)),R=R.j(k).add(p(I))):(R=R.j(C),R=R.add(p(I)))}return R}var E=m(0),b=m(1),S=m(16777216);n=u.prototype,n.m=function(){if(U(this))return-V(this).m();for(var M=0,D=1,C=0;C<this.g.length;C++){var R=this.i(C);M+=(0<=R?R:4294967296+R)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(U(this))return"-"+V(this).toString(M);for(var D=p(Math.pow(M,6)),C=this,R="";;){var A=Z(C,D).g;C=z(C,A.j(D));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(M);if(C=A,O(C))return k+R;for(;6>k.length;)k="0"+k;R=k+R}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(var D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function U(M){return M.h==-1}n.l=function(M){return M=z(this,M),U(M)?-1:O(M)?0:1};function V(M){for(var D=M.g.length,C=[],R=0;R<D;R++)C[R]=~M.g[R];return new u(C,~M.h).add(b)}n.abs=function(){return U(this)?V(this):this},n.add=function(M){for(var D=Math.max(this.g.length,M.g.length),C=[],R=0,A=0;A<=D;A++){var k=R+(this.i(A)&65535)+(M.i(A)&65535),I=(k>>>16)+(this.i(A)>>>16)+(M.i(A)>>>16);R=I>>>16,k&=65535,I&=65535,C[A]=I<<16|k}return new u(C,C[C.length-1]&-2147483648?-1:0)};function z(M,D){return M.add(V(D))}n.j=function(M){if(O(this)||O(M))return E;if(U(this))return U(M)?V(this).j(V(M)):V(V(this).j(M));if(U(M))return V(this.j(V(M)));if(0>this.l(S)&&0>M.l(S))return p(this.m()*M.m());for(var D=this.g.length+M.g.length,C=[],R=0;R<2*D;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<M.g.length;A++){var k=this.i(R)>>>16,I=this.i(R)&65535,se=M.i(A)>>>16,fe=M.i(A)&65535;C[2*R+2*A]+=I*fe,G(C,2*R+2*A),C[2*R+2*A+1]+=k*fe,G(C,2*R+2*A+1),C[2*R+2*A+1]+=I*se,G(C,2*R+2*A+1),C[2*R+2*A+2]+=k*se,G(C,2*R+2*A+2)}for(R=0;R<D;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=D;R<2*D;R++)C[R]=0;return new u(C,0)};function G(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function H(M,D){this.g=M,this.h=D}function Z(M,D){if(O(D))throw Error("division by zero");if(O(M))return new H(E,E);if(U(M))return D=Z(V(M),D),new H(V(D.g),V(D.h));if(U(D))return D=Z(M,V(D)),new H(V(D.g),D.h);if(30<M.g.length){if(U(M)||U(D))throw Error("slowDivide_ only works with positive integers.");for(var C=b,R=D;0>=R.l(M);)C=le(C),R=le(R);var A=te(C,1),k=te(R,1);for(R=te(R,2),C=te(C,2);!O(R);){var I=k.add(R);0>=I.l(M)&&(A=A.add(C),k=I),R=te(R,1),C=te(C,1)}return D=z(M,A.j(D)),new H(A,D)}for(A=E;0<=M.l(D);){for(C=Math.max(1,Math.floor(M.m()/D.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),k=p(C),I=k.j(D);U(I)||0<I.l(M);)C-=R,k=p(C),I=k.j(D);O(k)&&(k=b),A=A.add(k),M=z(M,I)}return new H(A,M)}n.A=function(M){return Z(this,M).h},n.and=function(M){for(var D=Math.max(this.g.length,M.g.length),C=[],R=0;R<D;R++)C[R]=this.i(R)&M.i(R);return new u(C,this.h&M.h)},n.or=function(M){for(var D=Math.max(this.g.length,M.g.length),C=[],R=0;R<D;R++)C[R]=this.i(R)|M.i(R);return new u(C,this.h|M.h)},n.xor=function(M){for(var D=Math.max(this.g.length,M.g.length),C=[],R=0;R<D;R++)C[R]=this.i(R)^M.i(R);return new u(C,this.h^M.h)};function le(M){for(var D=M.g.length+1,C=[],R=0;R<D;R++)C[R]=M.i(R)<<1|M.i(R-1)>>>31;return new u(C,M.h)}function te(M,D){var C=D>>5;D%=32;for(var R=M.g.length-C,A=[],k=0;k<R;k++)A[k]=0<D?M.i(k+C)>>>D|M.i(k+C+1)<<32-D:M.i(k+C);return new u(A,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,AC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Ms=u}).apply(typeof dw<"u"?dw:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xC,Xu,RC,Dd,p_,IC,NC,DC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,T){return d==Array.prototype||d==Object.prototype||(d[_]=T.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var _=0;_<d.length;++_){var T=d[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(d,_){if(_)e:{var T=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var q=d[N];if(!(q in T))break e;T=T[q]}d=d[d.length-1],N=T[d],_=_(N),_!=N&&_!=null&&e(T,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var T=0,N=!1,q={next:function(){if(!N&&T<d.length){var Y=T++;return{value:_(Y,d[Y]),done:!1}}return N=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(d){return d||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function p(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function y(d,_,T){return d.call.apply(d.bind,arguments)}function E(d,_,T){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,N),d.apply(_,q)}}return function(){return d.apply(_,arguments)}}function b(d,_,T){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,b.apply(null,arguments)}function S(d,_){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function O(d,_){function T(){}T.prototype=_.prototype,d.aa=_.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(N,q,Y){for(var he=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)he[Ge-2]=arguments[Ge];return _.prototype[q].apply(N,he)}}function U(d){const _=d.length;if(0<_){const T=Array(_);for(let N=0;N<_;N++)T[N]=d[N];return T}return[]}function V(d,_){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(m(N)){const q=d.length||0,Y=N.length||0;d.length=q+Y;for(let he=0;he<Y;he++)d[q+he]=N[he]}else d.push(N)}}class z{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function G(d){return/^[\s\xa0]*$/.test(d)}function H(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function Z(d){return Z[" "](d),d}Z[" "]=function(){};var le=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function te(d,_,T){for(const N in d)_.call(T,d[N],N,d)}function M(d,_){for(const T in d)_.call(void 0,d[T],T,d)}function D(d){const _={};for(const T in d)_[T]=d[T];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,_){let T,N;for(let q=1;q<arguments.length;q++){N=arguments[q];for(T in N)d[T]=N[T];for(let Y=0;Y<C.length;Y++)T=C[Y],Object.prototype.hasOwnProperty.call(N,T)&&(d[T]=N[T])}}function A(d){var _=1;d=d.split(":");const T=[];for(;0<_&&d.length;)T.push(d.shift()),_--;return d.length&&T.push(d.join(":")),T}function k(d){h.setTimeout(()=>{throw d},0)}function I(){var d=we;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class se{constructor(){this.h=this.g=null}add(_,T){const N=fe.get();N.set(_,T),this.h?this.h.next=N:this.g=N,this.h=N}}var fe=new z(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ue=!1,we=new se,L=()=>{const d=h.Promise.resolve(void 0);oe=()=>{d.then(ie)}};var ie=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(T){k(T)}var _=fe;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ue=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};h.addEventListener("test",T,_),h.removeEventListener("test",T,_)}catch{}return d}();function Re(d,_){if(de.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(le){e:{try{Z(_.nodeName);var q=!0;break e}catch{}q=!1}q||(_=null)}}else T=="mouseover"?_=d.fromElement:T=="mouseout"&&(_=d.toElement);this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ie[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Re.aa.h.call(this)}}O(Re,de);var Ie={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),ke=0;function it(d,_,T,N,q){this.listener=d,this.proxy=null,this.src=_,this.type=T,this.capture=!!N,this.ha=q,this.key=++ke,this.da=this.fa=!1}function Ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function gn(d){this.src=d,this.g={},this.h=0}gn.prototype.add=function(d,_,T,N,q){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var he=Bn(d,_,N,q);return-1<he?(_=d[he],T||(_.fa=!1)):(_=new it(_,this.src,Y,!!N,q),_.fa=T,d.push(_)),_};function Xi(d,_){var T=_.type;if(T in d.g){var N=d.g[T],q=Array.prototype.indexOf.call(N,_,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(N,q,1),Y&&(Ye(_),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Bn(d,_,T,N){for(var q=0;q<d.length;++q){var Y=d[q];if(!Y.da&&Y.listener==_&&Y.capture==!!T&&Y.ha==N)return q}return-1}var zr="closure_lm_"+(1e6*Math.random()|0),Fr={};function Ji(d,_,T,N,q){if(Array.isArray(_)){for(var Y=0;Y<_.length;Y++)Ji(d,_[Y],T,N,q);return null}return T=Jc(T),d&&d[et]?d.K(_,T,p(N)?!!N.capture:!1,q):Vl(d,_,T,!1,N,q)}function Vl(d,_,T,N,q,Y){if(!_)throw Error("Invalid event type");var he=p(q)?!!q.capture:!!q,Ge=Ul(d);if(Ge||(d[zr]=Ge=new gn(d)),T=Ge.add(_,T,N,he,Y),T.proxy)return T;if(N=ro(),T.proxy=N,N.src=d,N.listener=T,d.addEventListener)me||(q=he),q===void 0&&(q=!1),d.addEventListener(_.toString(),N,q);else if(d.attachEvent)d.attachEvent(ao(_.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ro(){function d(T){return _.call(d.src,d.listener,T)}const _=hm;return d}function so(d,_,T,N,q){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)so(d,_[Y],T,N,q);else N=p(N)?!!N.capture:!!N,T=Jc(T),d&&d[et]?(d=d.i,_=String(_).toString(),_ in d.g&&(Y=d.g[_],T=Bn(Y,T,N,q),-1<T&&(Ye(Y[T]),Array.prototype.splice.call(Y,T,1),Y.length==0&&(delete d.g[_],d.h--)))):d&&(d=Ul(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Bn(_,T,N,q)),(T=-1<d?_[d]:null)&&Xs(T))}function Xs(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[et])Xi(_.i,d);else{var T=d.type,N=d.proxy;_.removeEventListener?_.removeEventListener(T,N,d.capture):_.detachEvent?_.detachEvent(ao(T),N):_.addListener&&_.removeListener&&_.removeListener(N),(T=Ul(_))?(Xi(T,d),T.h==0&&(T.src=null,_[zr]=null)):Ye(d)}}}function ao(d){return d in Fr?Fr[d]:Fr[d]="on"+d}function hm(d,_){if(d.da)d=!0;else{_=new Re(_,this);var T=d.listener,N=d.ha||d.src;d.fa&&Xs(d),d=T.call(N,_)}return d}function Ul(d){return d=d[zr],d instanceof gn?d:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jc(d){return typeof d=="function"?d:(d[Sn]||(d[Sn]=function(_){return d.handleEvent(_)}),d[Sn])}function Ot(){ye.call(this),this.i=new gn(this),this.M=this,this.F=null}O(Ot,ye),Ot.prototype[et]=!0,Ot.prototype.removeEventListener=function(d,_,T,N){so(this,d,_,T,N)};function Ht(d,_){var T,N=d.F;if(N)for(T=[];N;N=N.F)T.push(N);if(d=d.M,N=_.type||_,typeof _=="string")_=new de(_,d);else if(_ instanceof de)_.target=_.target||d;else{var q=_;_=new de(N,d),R(_,q)}if(q=!0,T)for(var Y=T.length-1;0<=Y;Y--){var he=_.g=T[Y];q=Zi(he,N,!0,_)&&q}if(he=_.g=d,q=Zi(he,N,!0,_)&&q,q=Zi(he,N,!1,_)&&q,T)for(Y=0;Y<T.length;Y++)he=_.g=T[Y],q=Zi(he,N,!1,_)&&q}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var T=d.g[_],N=0;N<T.length;N++)Ye(T[N]);delete d.g[_],d.h--}}this.F=null},Ot.prototype.K=function(d,_,T,N){return this.i.add(String(d),_,!1,T,N)},Ot.prototype.L=function(d,_,T,N){return this.i.add(String(d),_,!0,T,N)};function Zi(d,_,T,N){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var q=!0,Y=0;Y<_.length;++Y){var he=_[Y];if(he&&!he.da&&he.capture==T){var Ge=he.listener,Pt=he.ha||he.src;he.fa&&Xi(d.i,he),q=Ge.call(Pt,N)!==!1&&q}}return q&&!N.defaultPrevented}function Zc(d,_,T){if(typeof d=="function")T&&(d=b(d,T));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(d,_||0)}function jl(d){d.g=Zc(()=>{d.g=null,d.i&&(d.i=!1,jl(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class dm extends ye{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:jl(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(d){ye.call(this),this.h=d,this.g={}}O(Js,ye);var qr=[];function un(d){te(d.g,function(_,T){this.g.hasOwnProperty(T)&&Xs(_)},d),d.g={}}Js.prototype.N=function(){Js.aa.N.call(this),un(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bl=h.JSON.stringify,wi=h.JSON.parse,_n=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function zl(){}zl.prototype.h=null;function eh(d){return d.h||(d.h=d.i())}function th(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){de.call(this,"d")}O(Hr,de);function li(){de.call(this,"c")}O(li,de);var zn={},Gr=null;function oo(){return Gr=Gr||new Ot}zn.La="serverreachability";function Fl(d){de.call(this,zn.La,d)}O(Fl,de);function $r(d){const _=oo();Ht(_,new Fl(_))}zn.STAT_EVENT="statevent";function lo(d,_){de.call(this,zn.STAT_EVENT,d),this.stat=_}O(lo,de);function St(d){const _=oo();Ht(_,new lo(_,d))}zn.Ma="timingevent";function nh(d,_){de.call(this,zn.Ma,d),this.size=_}O(nh,de);function Qr(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},_)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function ih(d,_,T,N,q,Y){d.info(function(){if(d.g)if(Y)for(var he="",Ge=Y.split("&"),Pt=0;Pt<Ge.length;Pt++){var $e=Ge[Pt].split("=");if(1<$e.length){var Qt=$e[0];$e=$e[1];var Lt=Qt.split("_");he=2<=Lt.length&&Lt[1]=="type"?he+(Qt+"="+$e+"&"):he+(Qt+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+N+") [attempt "+q+"]: "+_+`
`+T+`
`+he})}function rh(d,_,T,N,q,Y,he){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+q+"]: "+_+`
`+T+`
`+Y+" "+he})}function Yr(d,_,T,N){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Gt(d,T)+(N?" "+N:"")})}function Si(d,_){d.info(function(){return"TIMEOUT: "+_})}Kr.prototype.info=function(){};function Gt(d,_){if(!d.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var N=T[d];if(!(2>N.length)){var q=N[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<q.length;he++)q[he]=""}}}}return Bl(T)}catch{return _}}var Mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},er={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zs;function uo(){}O(uo,zl),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},Zs=new uo;function Ci(d,_,T,N){this.j=d,this.i=_,this.l=T,this.R=N||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ql}function ql(){this.i=null,this.g="",this.h=!1}var Wr={},ea={};function ui(d,_,T){d.L=1,d.v=ia(yt(_)),d.m=T,d.P=!0,tr(d,null)}function tr(d,_){d.F=Date.now(),ft(d),d.A=yt(d.v);var T=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),rr(T.i,"t",N),d.C=0,T=d.j.J,d.h=new ql,d.g=yh(d.j,T?_:null,!d.m),0<d.O&&(d.M=new dm(b(d.Y,d,d.g),d.O)),_=d.U,T=d.g,N=d.ca;var q="readystatechange";Array.isArray(q)||(q&&(qr[0]=q.toString()),q=qr);for(var Y=0;Y<q.length;Y++){var he=Ji(T,q[Y],N||_.handleEvent,!1,_.h||_);if(!he)break;_.g[he.key]=he}_=d.H?D(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),$r(),ih(d.i,d.u,d.A,d.l,d.R,d.m)}Ci.prototype.ca=function(d){d=d.target;const _=this.M;_&&$n(d)==3?_.j():this.Y(d)},Ci.prototype.Y=function(d){try{if(d==this.g)e:{const Lt=$n(this.g);var _=this.g.Ba();const lr=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||ch(this.g)))){this.J||Lt!=4||_==7||(_==8||0>=lr?$r(3):$r(2)),co(this);var T=this.g.Z();this.X=T;t:if(Xr(this)){var N=ch(this.g);d="";var q=N.length,Y=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),kn(this);var he="";break t}this.h.i=new h.TextDecoder}for(_=0;_<q;_++)this.h.h=!0,d+=this.h.i.decode(N[_],{stream:!(Y&&_==q-1)});N.length=0,this.h.g+=d,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=T==200,rh(this.i,this.u,this.A,this.l,this.R,Lt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Pt=this.g;if((Ge=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ge)){var $e=Ge;break t}}$e=null}if(T=$e)Yr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,On(this,T);else{this.o=!1,this.s=3,St(12),Cn(this),kn(this);break e}}if(this.P){T=!0;let en;for(;!this.J&&this.C<he.length;)if(en=Jr(this,he),en==ea){Lt==4&&(this.s=4,St(14),T=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Wr){this.s=4,St(15),Yr(this.i,this.l,he,"[Invalid Chunk]"),T=!1;break}else Yr(this.i,this.l,en,null),On(this,en);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||he.length!=0||this.h.h||(this.s=1,St(16),T=!1),this.o=this.o&&T,!T)Yr(this.i,this.l,he,"[Invalid Chunked Response]"),Cn(this),kn(this);else if(0<he.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),ca(Qt),Qt.M=!0,St(11))}}else Yr(this.i,this.l,he,null),On(this,he);Lt==4&&Cn(this),this.o&&!this.J&&(Lt==4?ph(this.j,this):(this.o=!1,ft(this)))}else ym(this.g),T==400&&0<he.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Cn(this),kn(this)}}}catch{}finally{}};function Xr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Jr(d,_){var T=d.C,N=_.indexOf(`
`,T);return N==-1?ea:(T=Number(_.substring(T,N)),isNaN(T)?Wr:(N+=1,N+T>_.length?ea:(_=_.slice(N,N+T),d.C=N+T,_)))}Ci.prototype.cancel=function(){this.J=!0,Cn(this)};function ft(d){d.S=Date.now()+d.I,Hl(d,d.I)}function Hl(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Qr(b(d.ba,d),_)}function co(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Ci.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Si(this.i,this.A),this.L!=2&&($r(),St(17)),Cn(this),this.s=2,kn(this)):Hl(this,this.S-d)};function kn(d){d.j.G==0||d.J||ph(d.j,d)}function Cn(d){co(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,un(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function On(d,_){try{var T=d.j;if(T.G!=0&&(T.g==d||Zr(T.h,d))){if(!d.K&&Zr(T.h,d)&&T.G==3){try{var N=T.Da.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var q=N;if(q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)To(T),vo(T);else break e;tu(T),St(18)}}else T.za=q[1],0<T.za-T.T&&37500>q[2]&&T.F&&T.v==0&&!T.C&&(T.C=Qr(b(T.Za,T),6e3));if(1>=sh(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else or(T,11)}else if((d.K||T.g==d)&&To(T),!G(_))for(q=T.Da.g.parse(_),_=0;_<q.length;_++){let $e=q[_];if(T.T=$e[0],$e=$e[1],T.G==2)if($e[0]=="c"){T.K=$e[1],T.ia=$e[2];const Qt=$e[3];Qt!=null&&(T.la=Qt,T.j.info("VER="+T.la));const Lt=$e[4];Lt!=null&&(T.Aa=Lt,T.j.info("SVER="+T.Aa));const lr=$e[5];lr!=null&&typeof lr=="number"&&0<lr&&(N=1.5*lr,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const en=d.g;if(en){const ki=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var Y=N.h;Y.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(es(Y,Y.h),Y.h=null))}if(N.D){const iu=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(N.ya=iu,We(N.I,N.D,iu))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var he=d;if(N.qa=_h(N,N.J?N.ia:null,N.W),he.K){Fn(N.h,he);var Ge=he,Pt=N.L;Pt&&(Ge.I=Pt),Ge.B&&(co(Ge),ft(Ge)),N.g=he}else fh(N);0<T.i.length&&Eo(T)}else $e[0]!="stop"&&$e[0]!="close"||or(T,7);else T.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?or(T,7):Zl(T):$e[0]!="noop"&&T.l&&T.l.ta($e),T.v=0)}}$r(4)}catch{}}var fm=class{constructor(d,_){this.g=d,this.map=_}};function Gl(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $l(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function sh(d){return d.h?1:d.g?d.g.size:0}function Zr(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function es(d,_){d.g?d.g.add(_):d.h=_}function Fn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Gl.prototype.cancel=function(){if(this.i=yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function yn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const T of d.g.values())_=_.concat(T.D);return _}return U(d.i)}function ah(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(m(d)){for(var _=[],T=d.length,N=0;N<T;N++)_.push(d[N]);return _}_=[],T=0;for(N in d)_[T++]=d[N];return _}function mm(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(m(d)||typeof d=="string"){var _=[];d=d.length;for(var T=0;T<d;T++)_.push(T);return _}_=[],T=0;for(const N in d)_[T++]=N;return _}}}function ta(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(m(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var T=mm(d),N=ah(d),q=N.length,Y=0;Y<q;Y++)_.call(void 0,N[Y],T&&T[Y],d)}var Ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ho(d,_){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var N=d[T].indexOf("="),q=null;if(0<=N){var Y=d[T].substring(0,N);q=d[T].substring(N+1)}else Y=d[T];_(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function nr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof nr){this.h=d.h,ts(this,d.j),this.o=d.o,this.g=d.g,na(this,d.s),this.l=d.l;var _=d.i,T=new Ai;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),fo(this,T),this.m=d.m}else d&&(_=String(d).match(Ql))?(this.h=!1,ts(this,_[1]||"",!0),this.o=ns(_[2]||""),this.g=ns(_[3]||"",!0),na(this,_[4]),this.l=ns(_[5]||"",!0),fo(this,_[6]||"",!0),this.m=ns(_[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}nr.prototype.toString=function(){var d=[],_=this.j;_&&d.push(qn(_,Kl,!0),":");var T=this.g;return(T||_=="file")&&(d.push("//"),(_=this.o)&&d.push(qn(_,Kl,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(qn(T,T.charAt(0)=="/"?Yl:oh,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",qn(T,_m)),d.join("")};function yt(d){return new nr(d)}function ts(d,_,T){d.j=T?ns(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function na(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function fo(d,_,T){_ instanceof Ai?(d.i=_,Wl(d.i,d.h)):(T||(_=qn(_,gm)),d.i=new Ai(_,d.h))}function We(d,_,T){d.i.set(_,T)}function ia(d){return We(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ns(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qn(d,_,T){return typeof d=="string"?(d=encodeURI(d).replace(_,pm),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function pm(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Kl=/[#\/\?@]/g,oh=/[#\?:]/g,Yl=/[#\?]/g,gm=/[#\?@]/g,_m=/#/g;function Ai(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Hn(d){d.g||(d.g=new Map,d.h=0,d.i&&ho(d.i,function(_,T){d.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Ai.prototype,n.add=function(d,_){Hn(this),this.i=null,d=sr(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(_),this.h+=1,this};function mo(d,_){Hn(d),_=sr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function ir(d,_){return Hn(d),_=sr(d,_),d.g.has(_)}n.forEach=function(d,_){Hn(this),this.g.forEach(function(T,N){T.forEach(function(q){d.call(_,q,N,this)},this)},this)},n.na=function(){Hn(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let N=0;N<_.length;N++){const q=d[N];for(let Y=0;Y<q.length;Y++)T.push(_[N])}return T},n.V=function(d){Hn(this);let _=[];if(typeof d=="string")ir(this,d)&&(_=_.concat(this.g.get(sr(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)_=_.concat(d[T])}return _},n.set=function(d,_){return Hn(this),this.i=null,d=sr(this,d),ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function rr(d,_,T){mo(d,_),0<T.length&&(d.i=null,d.g.set(sr(d,_),U(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var N=_[T];const Y=encodeURIComponent(String(N)),he=this.V(N);for(N=0;N<he.length;N++){var q=Y;he[N]!==""&&(q+="="+encodeURIComponent(String(he[N]))),d.push(q)}}return this.i=d.join("&")};function sr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Wl(d,_){_&&!d.j&&(Hn(d),d.i=null,d.g.forEach(function(T,N){var q=N.toLowerCase();N!=q&&(mo(this,N),rr(this,q,T))},d)),d.j=_}function lh(d,_){const T=new Kr;if(h.Image){const N=new Image;N.onload=S(Gn,T,"TestLoadImage: loaded",!0,_,N),N.onerror=S(Gn,T,"TestLoadImage: error",!1,_,N),N.onabort=S(Gn,T,"TestLoadImage: abort",!1,_,N),N.ontimeout=S(Gn,T,"TestLoadImage: timeout",!1,_,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else _(!1)}function ra(d,_){const T=new Kr,N=new AbortController,q=setTimeout(()=>{N.abort(),Gn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:N.signal}).then(Y=>{clearTimeout(q),Y.ok?Gn(T,"TestPingServer: ok",!0,_):Gn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Gn(T,"TestPingServer: error",!1,_)})}function Gn(d,_,T,N,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),N(T)}catch{}}function sa(){this.g=new _n}function xi(d,_,T){const N=T||"";try{ta(d,function(q,Y){let he=q;p(q)&&(he=Bl(q)),_.push(N+Y+"="+encodeURIComponent(he))})}catch(q){throw _.push(N+"type="+encodeURIComponent("_badmap")),q}}function is(d){this.l=d.Ub||null,this.j=d.eb||!1}O(is,zl),is.prototype.g=function(){return new ar(this.l,this.j)},is.prototype.i=function(d){return function(){return d}}({});function ar(d,_){Ot.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ar,Ot),n=ar.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Ii(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ri(this):Ii(this),this.readyState==3&&Xl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Ri(this))},n.Qa=function(d){this.g&&(this.response=d,Ri(this))},n.ga=function(){this.g&&Ri(this)};function Ri(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ii(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=_.next();return d.join(`\r
`)};function Ii(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Jl(d){let _="";return te(d,function(T,N){_+=N,_+=":",_+=T,_+=`\r
`}),_}function $t(d,_,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=Jl(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):We(d,_,T))}function tt(d){Ot.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(tt,Ot);var po=/^https?$/i,aa=["POST","PUT"];n=tt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zs.g(),this.v=this.o?eh(this.o):eh(Zs),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Y){uh(this,Y);return}if(d=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var q in N)T.set(q,N[q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Y of N.keys())T.set(Y,N.get(Y));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(aa,_,void 0))||N||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of T)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oa(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){uh(this,Y)}};function uh(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,go(d),Ni(d)}function go(d){d.A||(d.A=!0,Ht(d,"complete"),Ht(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ht(this,"complete"),Ht(this,"abort"),Ni(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_o(this):this.bb())},n.bb=function(){_o(this)};function _o(d){if(d.h&&typeof u<"u"&&(!d.v[1]||$n(d)!=4||d.Z()!=2)){if(d.u&&$n(d)==4)Zc(d.Ea,0,d);else if(Ht(d,"readystatechange"),$n(d)==4){d.h=!1;try{const he=d.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var N;if(N=he===0){var q=String(d.D).match(Ql)[1]||null;!q&&h.self&&h.self.location&&(q=h.self.location.protocol.slice(0,-1)),N=!po.test(q?q.toLowerCase():"")}T=N}if(T)Ht(d,"complete"),Ht(d,"success");else{d.m=6;try{var Y=2<$n(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",go(d)}}finally{Ni(d)}}}}function Ni(d,_){if(d.g){oa(d);const T=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Ht(d,"ready");try{T.onreadystatechange=N}catch{}}}function oa(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function $n(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),wi(_)}};function ch(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ym(d){const _={};d=(d.g&&2<=$n(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(G(d[N]))continue;var T=A(d[N]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Y=_[q]||[];_[q]=Y,Y.push(T)}M(_,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(d,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||_}function yo(d){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,d),this.cb=la("retryDelaySeedMs",1e4,d),this.Wa=la("forwardChannelMaxRetries",2,d),this.wa=la("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Gl(d&&d.concurrentRequestLimit),this.Da=new sa,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=yo.prototype,n.la=8,n.G=1,n.connect=function(d,_,T,N){St(0),this.W=d,this.H=_||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=_h(this,null,this.W),Eo(this)};function Zl(d){if(hh(d),d.G==3){var _=d.U++,T=yt(d.I);if(We(T,"SID",d.K),We(T,"RID",_),We(T,"TYPE","terminate"),ua(d,T),_=new Ci(d,d.j,_),_.L=2,_.v=ia(yt(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=_.v,T=!0),T||(_.g=yh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ft(_)}gh(d)}function vo(d){d.g&&(ca(d),d.g.cancel(),d.g=null)}function hh(d){vo(d),d.u&&(h.clearTimeout(d.u),d.u=null),To(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function Eo(d){if(!$l(d.h)&&!d.s){d.s=!0;var _=d.Ga;oe||L(),ue||(oe(),ue=!0),we.add(_,d),d.B=0}}function vm(d,_){return sh(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Qr(b(d.Ga,d,_),nu(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const q=new Ci(this,this.j,d);let Y=this.o;if(this.S&&(Y?(Y=D(Y),R(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=dh(this,q,_),T=yt(this.I),We(T,"RID",d),We(T,"CVER",22),this.D&&We(T,"X-HTTP-Session-Id",this.D),ua(this,T),Y&&(this.O?_="headers="+encodeURIComponent(String(Jl(Y)))+"&"+_:this.m&&$t(T,this.m,Y)),es(this.h,q),this.Ua&&We(T,"TYPE","init"),this.P?(We(T,"$req",_),We(T,"SID","null"),q.T=!0,ui(q,T,null)):ui(q,T,_),this.G=2}}else this.G==3&&(d?eu(this,d):this.i.length==0||$l(this.h)||eu(this))};function eu(d,_){var T;_?T=_.l:T=d.U++;const N=yt(d.I);We(N,"SID",d.K),We(N,"RID",T),We(N,"AID",d.T),ua(d,N),d.m&&d.o&&$t(N,d.m,d.o),T=new Ci(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),_&&(d.i=_.D.concat(d.i)),_=dh(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),es(d.h,T),ui(T,N,_)}function ua(d,_){d.H&&te(d.H,function(T,N){We(_,N,T)}),d.l&&ta({},function(T,N){We(_,N,T)})}function dh(d,_,T){T=Math.min(d.i.length,T);var N=d.l?b(d.l.Na,d.l,d):null;e:{var q=d.i;let Y=-1;for(;;){const he=["count="+T];Y==-1?0<T?(Y=q[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let Ge=!0;for(let Pt=0;Pt<T;Pt++){let $e=q[Pt].g;const Qt=q[Pt].map;if($e-=Y,0>$e)Y=Math.max(0,q[Pt].g-100),Ge=!1;else try{xi(Qt,he,"req"+$e+"_")}catch{N&&N(Qt)}}if(Ge){N=he.join("&");break e}}}return d=d.i.splice(0,T),_.D=d,N}function fh(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;oe||L(),ue||(oe(),ue=!0),we.add(_,d),d.v=0}}function tu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Qr(b(d.Fa,d),nu(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,mh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Qr(b(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),vo(this),mh(this))};function ca(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function mh(d){d.g=new Ci(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=yt(d.qa);We(_,"RID","rpc"),We(_,"SID",d.K),We(_,"AID",d.T),We(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&We(_,"TO",d.ja),We(_,"TYPE","xmlhttp"),ua(d,_),d.m&&d.o&&$t(_,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=ia(yt(_)),T.m=null,T.P=!0,tr(T,d)}n.Za=function(){this.C!=null&&(this.C=null,vo(this),tu(this),St(19))};function To(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function ph(d,_){var T=null;if(d.g==_){To(d),ca(d),d.g=null;var N=2}else if(Zr(d.h,_))T=_.D,Fn(d.h,_),N=1;else return;if(d.G!=0){if(_.o)if(N==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var q=d.B;N=oo(),Ht(N,new nh(N,T)),Eo(d)}else fh(d);else if(q=_.s,q==3||q==0&&0<_.X||!(N==1&&vm(d,_)||N==2&&tu(d)))switch(T&&0<T.length&&(_=d.h,_.i=_.i.concat(T)),q){case 1:or(d,5);break;case 4:or(d,10);break;case 3:or(d,6);break;default:or(d,2)}}}function nu(d,_){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*_}function or(d,_){if(d.j.info("Error code "+_),_==2){var T=b(d.fb,d),N=d.Xa;const q=!N;N=new nr(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ts(N,"https"),ia(N),q?lh(N.toString(),T):ra(N.toString(),T)}else St(2);d.G=0,d.l&&d.l.sa(_),gh(d),hh(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function gh(d){if(d.G=0,d.ka=[],d.l){const _=yn(d.h);(_.length!=0||d.i.length!=0)&&(V(d.ka,_),V(d.ka,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.ra()}}function _h(d,_,T){var N=T instanceof nr?yt(T):new nr(T);if(N.g!="")_&&(N.g=_+"."+N.g),na(N,N.s);else{var q=h.location;N=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;var Y=new nr(null);N&&ts(Y,N),_&&(Y.g=_),q&&na(Y,q),T&&(Y.l=T),N=Y}return T=d.D,_=d.ya,T&&_&&We(N,T,_),We(N,"VER",d.la),ua(d,N),N}function yh(d,_,T){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new tt(new is({eb:T})):new tt(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vh(){}n=vh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function wo(){}wo.prototype.g=function(d,_){return new vn(d,_)};function vn(d,_){Ot.call(this),this.g=new yo(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!G(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!G(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Di(this)}O(vn,Ot),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Zl(this.g)},vn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Bl(d),d=T);_.i.push(new fm(_.Ya++,d)),_.G==3&&Eo(_)},vn.prototype.N=function(){this.g.l=null,delete this.j,Zl(this.g),delete this.g,vn.aa.N.call(this)};function Eh(d){Hr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const T in _){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}O(Eh,Hr);function Th(){li.call(this),this.status=1}O(Th,li);function Di(d){this.g=d}O(Di,vh),Di.prototype.ua=function(){Ht(this.g,"a")},Di.prototype.ta=function(d){Ht(this.g,new Eh(d))},Di.prototype.sa=function(d){Ht(this.g,new Th)},Di.prototype.ra=function(){Ht(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,DC=function(){return new wo},NC=function(){return oo()},IC=zn,p_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,Dd=Mt,er.COMPLETE="complete",RC=er,th.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Xu=th,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,xC=tt}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});const fw="@firebase/firestore",mw="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Pc("@firebase/firestore");function Xo(){return La.logLevel}function pe(n,...e){if(La.logLevel<=je.DEBUG){const t=e.map(oy);La.debug(`Firestore (${Il}): ${n}`,...t)}}function Vr(n,...e){if(La.logLevel<=je.ERROR){const t=e.map(oy);La.error(`Firestore (${Il}): ${n}`,...t)}}function ul(n,...e){if(La.logLevel<=je.WARN){const t=e.map(oy);La.warn(`Firestore (${Il}): ${n}`,...t)}}function oy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n="Unexpected state"){const e=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function nt(n,e){n||Ce()}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class fk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mk{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let o=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Or,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},h=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Or)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string"),new kC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new fn(e)}}class pk{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class gk{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new pk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _k{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ii(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0);const i=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const a=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?a(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new pw(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string"),this.R=t.token,new pw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=yk(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<t&&(i+=e.charAt(a[o]%62))}return i}}function He(n,e){return n<e?-1:n>e?1:0}function cl(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=-62135596800,_w=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*_w);return new Ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gw)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_w}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-gw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ft(0,0))}static max(){return new xe(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="__name__";class ji{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(),i===void 0?i=e.length-t:i>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const o=ji.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=ji.isNumericId(e),a=ji.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ji.extractNumericId(e).compare(ji.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class dt extends ji{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const vk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends ji{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return vk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yw}static keyField(){return new an([yw])}static fromServerFormat(e){const t=[];let i="",a=0;const o=()=>{if(i.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(o(),a++)}if(o(),u)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(dt.fromString(e))}static fromName(e){return new Te(dt.fromString(e).popFirst(5))}static empty(){return new Te(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function Ek(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=xe.fromTimestamp(i===1e9?new Ft(t+1,0):new Ft(t,i));return new Bs(a,Te.empty(),e)}function Tk(n){return new Bs(n.readTime,n.key,_c)}class Bs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Bs(xe.min(),Te.empty(),_c)}static max(){return new Bs(xe.max(),Te.empty(),_c)}}function wk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==bk)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,i)=>{t(e)})}static reject(e){return new ne((t,i)=>{i(e)})}static waitFor(e){return new ne((t,i)=>{let a=0,o=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++o,u&&o===a&&t()},m=>i(m))}),u=!0,o===a&&t()})}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next(a=>a?ne.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,o)=>{i.push(t.call(this,a,o))}),this.waitFor(i)}static mapArray(e,t){return new ne((i,a)=>{const o=e.length,u=new Array(o);let h=0;for(let m=0;m<o;m++){const p=m;t(e[p]).next(y=>{u[p]=y,++h,h===o&&i(u)},y=>a(y))}})}static doWhile(e,t){return new ne((i,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):i()};o()})}}function Ck(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Of.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function Mf(n){return n==null}function Qd(n){return n===0&&1/n==-1/0}function Ak(n){return typeof n=="number"&&Number.isInteger(n)&&!Qd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="";function xk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vw(e)),e=Rk(n.get(t),e);return vw(e)}function Rk(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case MC:t+="";break;default:t+=o}}return t}function vw(n){return n+MC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kt=class g_{constructor(e,t){this.comparator=e,this.root=t||Ps.EMPTY}insert(e,t){return new g_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ps.BLACK,null,null))}remove(e){return new g_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Td(this.root,e,this.comparator,!1)}getReverseIterator(){return new Td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Td(this.root,e,this.comparator,!0)}},Td=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ps=class Sr{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??Sr.RED,this.left=a??Sr.EMPTY,this.right=o??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,o){return new Sr(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}};Ps.EMPTY=null,Ps.RED=!0,Ps.BLACK=!1;Ps.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,i,a,o){return this}insert(e,t,i){return new Ps(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tw(this.data.getIterator())}getIteratorFrom(e){return new Tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class Tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new pi([])}unionWith(e){let t=new qt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new pi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LC("Invalid base64 string: "+o):o}}(e);return new on(t)}static fromUint8Array(e){const t=function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o}(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const Ik=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(n){if(nt(!!n),typeof n=="string"){let e=0;const t=Ik.exec(n);if(nt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fs(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="server_timestamp",UC="__type__",jC="__previous_value__",BC="__local_write_time__";function uy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[UC])===null||t===void 0?void 0:t.stringValue)===VC}function Pf(n){const e=n.mapValue.fields[jC];return uy(e)?Pf(e):e}function yc(n){const e=zs(n.mapValue.fields[BC].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t,i,a,o,u,h,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p}}const Kd="(default)";class vc{constructor(e,t){this.projectId=e,this.database=t||Kd}static empty(){return new vc("","")}get isDefaultDatabase(){return this.database===Kd}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__type__",Dk="__max__",wd={mapValue:{}},FC="__vector__",Yd="value";function qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uy(n)?4:Ok(n)?9007199254740991:kk(n)?10:11:Ce()}function Gi(n,e){if(n===e)return!0;const t=qs(n);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yc(n).isEqual(yc(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=zs(a.timestampValue),h=zs(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return Fs(a.bytesValue).isEqual(Fs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return At(a.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(a.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return At(a.integerValue)===At(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=At(a.doubleValue),h=At(o.doubleValue);return u===h?Qd(u)===Qd(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return cl(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return function(a,o){const u=a.mapValue.fields||{},h=o.mapValue.fields||{};if(Ew(u)!==Ew(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!Gi(u[m],h[m])))return!1;return!0}(n,e);default:return Ce()}}function Ec(n,e){return(n.values||[]).find(t=>Gi(t,e))!==void 0}function hl(n,e){if(n===e)return 0;const t=qs(n),i=qs(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=At(o.integerValue||o.doubleValue),m=At(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return ww(n.timestampValue,e.timestampValue);case 4:return ww(yc(n),yc(e));case 5:return He(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Fs(o),m=Fs(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let p=0;p<h.length&&p<m.length;p++){const y=He(h[p],m[p]);if(y!==0)return y}return He(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=He(At(o.latitude),At(u.latitude));return h!==0?h:He(At(o.longitude),At(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return bw(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,m,p,y;const E=o.fields||{},b=u.fields||{},S=(h=E[Yd])===null||h===void 0?void 0:h.arrayValue,O=(m=b[Yd])===null||m===void 0?void 0:m.arrayValue,U=He(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0);return U!==0?U:bw(S,O)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===wd.mapValue&&u===wd.mapValue)return 0;if(o===wd.mapValue)return 1;if(u===wd.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let E=0;E<m.length&&E<y.length;++E){const b=He(m[E],y[E]);if(b!==0)return b;const S=hl(h[m[E]],p[y[E]]);if(S!==0)return S}return He(m.length,y.length)}(n.mapValue,e.mapValue);default:throw Ce()}}function ww(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=zs(n),i=zs(e),a=He(t.seconds,i.seconds);return a!==0?a:He(t.nanos,i.nanos)}function bw(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const o=hl(t[a],i[a]);if(o)return o}return He(t.length,i.length)}function dl(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=zs(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const o of t.values||[])a?a=!1:i+=",",i+=__(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const u of i)o?o=!1:a+=",",a+=`${u}:${__(t.fields[u])}`;return a+"}"}(n.mapValue):Ce()}function kd(n){switch(qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(n);return e?16+kd(e):16;case 5:return 2*n.stringValue.length;case 6:return Fs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+kd(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ya(i.fields,(o,u)=>{a+=o.length+kd(u)}),a}(n.mapValue);default:throw Ce()}}function Sw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function y_(n){return!!n&&"integerValue"in n}function cy(n){return!!n&&"arrayValue"in n}function Cw(n){return!!n&&"nullValue"in n}function Aw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Od(n){return!!n&&"mapValue"in n}function kk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||t===void 0?void 0:t.stringValue)===FC}function nc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ya(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=nc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ok(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Dk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(t)}setAll(e){let t=an.emptyPath(),i={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=h.popLast()}u?i[h.lastSegment()]=nc(u):a.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,a)}delete(e){const t=this.field(e.popLast());Od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Od(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ya(t,(a,o)=>e[a]=o);for(const a of i)delete e[a]}clone(){return new ri(nc(this.value))}}function qC(n){const e=[];return Ya(n.fields,(t,i)=>{const a=new an([t]);if(Od(i)){const o=qC(i.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)}),new pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t,i,a,o,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new mn(e,0,xe.min(),xe.min(),xe.min(),ri.empty(),0)}static newFoundDocument(e,t,i,a){return new mn(e,1,t,xe.min(),i,a,0)}static newNoDocument(e,t){return new mn(e,2,t,xe.min(),xe.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,xe.min(),xe.min(),ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.position=e,this.inclusive=t}}function xw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const o=e[a],u=n.position[a];if(o.field.isKeyField()?i=Te.comparator(Te.fromName(u.referenceValue),t.key):i=hl(u,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Rw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{}class Dt extends HC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Lk(e,t,i):t==="array-contains"?new jk(e,i):t==="in"?new Bk(e,i):t==="not-in"?new zk(e,i):t==="array-contains-any"?new Fk(e,i):new Dt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Vk(e,i):new Uk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(hl(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends HC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ei(e,t)}matches(e){return GC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function GC(n){return n.op==="and"}function $C(n){return Pk(n)&&GC(n)}function Pk(n){for(const e of n.filters)if(e instanceof Ei)return!1;return!0}function v_(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+dl(n.value);if($C(n))return n.filters.map(e=>v_(e)).join(",");{const e=n.filters.map(t=>v_(t)).join(",");return`${n.op}(${e})`}}function QC(n,e){return n instanceof Dt?function(i,a){return a instanceof Dt&&i.op===a.op&&i.field.isEqual(a.field)&&Gi(i.value,a.value)}(n,e):n instanceof Ei?function(i,a){return a instanceof Ei&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,u,h)=>o&&QC(u,a.filters[h]),!0):!1}(n,e):void Ce()}function KC(n){return n instanceof Dt?function(t){return`${t.field.canonicalString()} ${t.op} ${dl(t.value)}`}(n):n instanceof Ei?function(t){return t.op.toString()+" {"+t.getFilters().map(KC).join(" ,")+"}"}(n):"Filter"}class Lk extends Dt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vk extends Dt{constructor(e,t){super(e,"in",t),this.keys=YC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Uk extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=YC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Te.fromName(i.referenceValue))}class jk extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cy(t)&&Ec(t.arrayValue,this.value)}}class Bk extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ec(this.value.arrayValue,t)}}class zk extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ec(this.value.arrayValue,t)}}class Fk extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ec(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t=null,i=[],a=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function Iw(n,e=null,t=[],i=[],a=null,o=null,u=null){return new qk(n,e,t,i,a,o,u)}function hy(n){const e=De(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>v_(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Mf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>dl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>dl(i)).join(",")),e.le=t}return e.le}function dy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rw(n.startAt,e.startAt)&&Rw(n.endAt,e.endAt)}function E_(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t=null,i=[],a=[],o=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Hk(n,e,t,i,a,o,u,h){return new Lc(n,e,t,i,a,o,u,h)}function fy(n){return new Lc(n)}function Nw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WC(n){return n.collectionGroup!==null}function ic(n){const e=De(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new qt(an.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Xd(o,i))}),t.has(an.keyField().canonicalString())||e.he.push(new Xd(an.keyField(),i))}return e.he}function zi(n){const e=De(n);return e.Pe||(e.Pe=Gk(e,ic(n))),e.Pe}function Gk(n,e){if(n.limitType==="F")return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Xd(a.field,o)});const t=n.endAt?new Wd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Wd(n.startAt.position,n.startAt.inclusive):null;return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function T_(n,e){const t=n.filters.concat([e]);return new Lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function w_(n,e,t){return new Lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lf(n,e){return dy(zi(n),zi(e))&&n.limitType===e.limitType}function XC(n){return`${hy(zi(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>KC(a)).join(", ")}]`),Mf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>dl(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>dl(a)).join(",")),`Target(${i})`}(zi(n))}; limitType=${n.limitType})`}function Vf(n,e){return e.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Te.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,a){for(const o of ic(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,h,m){const p=xw(u,h,m);return u.inclusive?p<=0:p<0}(i.startAt,ic(i),a)||i.endAt&&!function(u,h,m){const p=xw(u,h,m);return u.inclusive?p>=0:p>0}(i.endAt,ic(i),a))}(n,e)}function $k(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JC(n){return(e,t)=>{let i=!1;for(const a of ic(n)){const o=Qk(a,e,t);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function Qk(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),p=h.data.field(o);return m!==null&&p!==null?hl(m,p):Ce()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ya(this.inner,(t,i)=>{for(const[a,o]of i)e(a,o)})}isEmpty(){return PC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new kt(Te.comparator);function Ur(){return Kk}const ZC=new kt(Te.comparator);function Ju(...n){let e=ZC;for(const t of n)e=e.insert(t.key,t);return e}function eA(n){let e=ZC;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Da(){return rc()}function tA(){return rc()}function rc(){return new Wa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Yk=new kt(Te.comparator),Wk=new qt(Te.comparator);function Fe(...n){let e=Wk;for(const t of n)e=e.add(t);return e}const Xk=new qt(He);function Jk(){return Xk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function nA(n){return{integerValue:""+n}}function Zk(n,e){return Ak(e)?nA(e):my(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function eO(n,e,t){return n instanceof Jd?function(a,o){const u={fields:{[UC]:{stringValue:VC},[BC]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&uy(o)&&(o=Pf(o)),o&&(u.fields[jC]=o),{mapValue:u}}(t,e):n instanceof Tc?rA(n,e):n instanceof wc?sA(n,e):function(a,o){const u=iA(a,o),h=Dw(u)+Dw(a.Ie);return y_(u)&&y_(a.Ie)?nA(h):my(a.serializer,h)}(n,e)}function tO(n,e,t){return n instanceof Tc?rA(n,e):n instanceof wc?sA(n,e):t}function iA(n,e){return n instanceof Zd?function(i){return y_(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Jd extends Uf{}class Tc extends Uf{constructor(e){super(),this.elements=e}}function rA(n,e){const t=aA(e);for(const i of n.elements)t.some(a=>Gi(a,i))||t.push(i);return{arrayValue:{values:t}}}class wc extends Uf{constructor(e){super(),this.elements=e}}function sA(n,e){let t=aA(e);for(const i of n.elements)t=t.filter(a=>!Gi(a,i));return{arrayValue:{values:t}}}class Zd extends Uf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Dw(n){return At(n.integerValue||n.doubleValue)}function aA(n){return cy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nO(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof Tc&&a instanceof Tc||i instanceof wc&&a instanceof wc?cl(i.elements,a.elements,Gi):i instanceof Zd&&a instanceof Zd?Gi(i.Ie,a.Ie):i instanceof Jd&&a instanceof Jd}(n.transform,e.transform)}class iO{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Md(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jf{}function oA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uA(n.key,Mr.none()):new Vc(n.key,n.data,Mr.none());{const t=n.data,i=ri.empty();let a=new qt(an.comparator);for(let o of e.fields)if(!a.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?i.delete(o):i.set(o,u),a=a.add(o)}return new Xa(n.key,i,new pi(a.toArray()),Mr.none())}}function rO(n,e,t){n instanceof Vc?function(a,o,u){const h=a.value.clone(),m=Ow(a.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Xa?function(a,o,u){if(!Md(a.precondition,o))return void o.convertToUnknownDocument(u.version);const h=Ow(a.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(lA(a)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function sc(n,e,t,i){return n instanceof Vc?function(o,u,h,m){if(!Md(o.precondition,u))return h;const p=o.value.clone(),y=Mw(o.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Xa?function(o,u,h,m){if(!Md(o.precondition,u))return h;const p=Mw(o.fieldTransforms,m,u),y=u.data;return y.setAll(lA(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(o,u,h){return Md(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function sO(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),o=iA(i.transform,a||null);o!=null&&(t===null&&(t=ri.empty()),t.set(i.field,o))}return t||null}function kw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&cl(i,a,(o,u)=>nO(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vc extends jf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Xa extends jf{constructor(e,t,i,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function lA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Ow(n,e,t){const i=new Map;nt(n.length===t.length);for(let a=0;a<t.length;a++){const o=n[a],u=o.transform,h=e.data.field(o.field);i.set(o.field,tO(u,h,t[a]))}return i}function Mw(n,e,t){const i=new Map;for(const a of n){const o=a.transform,u=t.data.field(a.field);i.set(a.field,eO(o,u,e))}return i}class uA extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aO extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&rO(o,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=sc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=sc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tA();return this.mutations.forEach(a=>{const o=e.get(a.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(a.key)?null:h;const m=oA(u,h);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(xe.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(t,i)=>kw(t,i))&&cl(this.baseMutations,e.baseMutations,(t,i)=>kw(t,i))}}class py{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){nt(e.mutations.length===i.length);let a=function(){return Yk}();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,i[u].version);return new py(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ke;function cO(n){switch(n){case re.OK:return Ce();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ce()}}function cA(n){if(n===void 0)return Vr("GRPC error has no .code"),re.UNKNOWN;switch(n){case Nt.OK:return re.OK;case Nt.CANCELLED:return re.CANCELLED;case Nt.UNKNOWN:return re.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return re.INTERNAL;case Nt.UNAVAILABLE:return re.UNAVAILABLE;case Nt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Nt.NOT_FOUND:return re.NOT_FOUND;case Nt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Nt.ABORTED:return re.ABORTED;case Nt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Nt.DATA_LOSS:return re.DATA_LOSS;default:return Ce()}}(Ke=Nt||(Nt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Ms([4294967295,4294967295],0);function Pw(n){const e=hO().encode(n),t=new AC;return t.update(e),new Uint8Array(t.digest())}function Lw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ms([t,i],0),new Ms([a,o],0)]}class gy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Zu(`Invalid padding: ${t}`);if(i<0)throw new Zu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Zu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ms.fromNumber(this.Ee)}Ae(e,t,i){let a=e.add(t.multiply(Ms.fromNumber(i)));return a.compare(dO)===1&&(a=new Ms([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Pw(e),[i,a]=Lw(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);if(!this.Re(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new gy(o,a,t);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=Pw(e),[i,a]=Lw(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Bf(xe.min(),a,new kt(He),Ur(),Fe())}}class Uc{constructor(e,t,i,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Uc(i,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t,i,a){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=a}}class hA{constructor(e,t){this.targetId=e,this.ge=t}}class dA{constructor(e,t,i=on.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Vw{constructor(){this.pe=0,this.ye=Uw(),this.we=on.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Fe(),t=Fe(),i=Fe();return this.ye.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ce()}}),new Uc(this.we,this.Se,e,t,i)}Me(){this.be=!1,this.ye=Uw()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,nt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class fO{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ur(),this.$e=bd(),this.Ke=bd(),this.Ue=new kt(He)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,i=e.ge.count,a=this.Xe(t);if(a){const o=a.target;if(E_(o))if(i===0){const u=new Te(o.path);this.ze(t,u,mn.newNoDocument(u,xe.min()))}else nt(i===1);else{const u=this.et(t);if(u!==i){const h=this.tt(e),m=h?this.nt(h,e,u):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=t;let u,h;try{u=Fs(i).toUint8Array()}catch(m){if(m instanceof LC)return ul("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new gy(u,a,o)}catch(m){return ul(m instanceof Zu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let a=0;return i.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&E_(h.target)){const m=new Te(h.target.path);this._t(m).has(u)||this.ut(u,m)||this.ze(u,m,mn.newNoDocument(m,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let i=Fe();this.Ke.forEach((o,u)=>{let h=!0;u.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const a=new Bf(e,t,this.Ue,this.Qe,i);return this.Qe=Ur(),this.$e=bd(),this.Ke=bd(),this.Ue=new kt(He),a}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Vw,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new qt(He),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new qt(He),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Vw),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function bd(){return new kt(Te.comparator)}function Uw(){return new kt(Te.comparator)}const mO={asc:"ASCENDING",desc:"DESCENDING"},pO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gO={and:"AND",or:"OR"};class _O{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function b_(n,e){return n.useProto3Json||Mf(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yO(n,e){return ef(n,e.toTimestamp())}function Fi(n){return nt(!!n),xe.fromTimestamp(function(t){const i=zs(t);return new Ft(i.seconds,i.nanos)}(n))}function _y(n,e){return S_(n,e).canonicalString()}function S_(n,e){const t=function(a){return new dt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mA(n){const e=dt.fromString(n);return nt(vA(e)),e}function C_(n,e){return _y(n.databaseId,e.path)}function wg(n,e){const t=mA(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(gA(t))}function pA(n,e){return _y(n.databaseId,e)}function vO(n){const e=mA(n);return e.length===4?dt.emptyPath():gA(e)}function A_(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gA(n){return nt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function jw(n,e,t){return{name:C_(n,e),fields:t.value.mapValue.fields}}function EO(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(nt(y===void 0||typeof y=="string"),on.fromBase64String(y||"")):(nt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),on.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=p.code===void 0?re.UNKNOWN:cA(p.code);return new ge(y,p.message||"")}(u);t=new dA(i,a,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=wg(n,i.document.name),o=Fi(i.document.updateTime),u=i.document.createTime?Fi(i.document.createTime):xe.min(),h=new ri({mapValue:{fields:i.document.fields}}),m=mn.newFoundDocument(a,o,u,h),p=i.targetIds||[],y=i.removedTargetIds||[];t=new Pd(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=wg(n,i.document),o=i.readTime?Fi(i.readTime):xe.min(),u=mn.newNoDocument(a,o),h=i.removedTargetIds||[];t=new Pd([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=wg(n,i.document),o=i.removedTargetIds||[];t=new Pd([],o,a,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,u=new uO(a,o),h=i.targetId;t=new hA(h,u)}}return t}function TO(n,e){let t;if(e instanceof Vc)t={update:jw(n,e.key,e.value)};else if(e instanceof uA)t={delete:C_(n,e.key)};else if(e instanceof Xa)t={update:jw(n,e.key,e.data),updateMask:NO(e.fieldMask)};else{if(!(e instanceof aO))return Ce();t={verify:C_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,u){const h=u.transform;if(h instanceof Jd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Tc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof wc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Zd)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Ce()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:yO(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce()}(n,e.precondition)),t}function wO(n,e){return n&&n.length>0?(nt(e!==void 0),n.map(t=>function(a,o){let u=a.updateTime?Fi(a.updateTime):Fi(o);return u.isEqual(xe.min())&&(u=Fi(o)),new iO(u,a.transformResults||[])}(t,e))):[]}function bO(n,e){return{documents:[pA(n,e.path)]}}function SO(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=pA(n,a);const o=function(p){if(p.length!==0)return yA(Ei.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:Zo(b.field),direction:xO(b.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=b_(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function CO(n){let e=vO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){nt(i===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(E){const b=_A(E);return b instanceof Ei&&$C(b)?b.getFilters():[b]}(t.where));let u=[];t.orderBy&&(u=function(E){return E.map(b=>function(O){return new Xd(el(O.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(t.orderBy));let h=null;t.limit&&(h=function(E){let b;return b=typeof E=="object"?E.value:E,Mf(b)?null:b}(t.limit));let m=null;t.startAt&&(m=function(E){const b=!!E.before,S=E.values||[];return new Wd(S,b)}(t.startAt));let p=null;return t.endAt&&(p=function(E){const b=!E.before,S=E.values||[];return new Wd(S,b)}(t.endAt)),Hk(e,a,u,o,h,"F",m,p)}function AO(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _A(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=el(t.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=el(t.unaryFilter.field);return Dt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=el(t.unaryFilter.field);return Dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=el(t.unaryFilter.field);return Dt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(n):n.fieldFilter!==void 0?function(t){return Dt.create(el(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ei.create(t.compositeFilter.filters.map(i=>_A(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce()}}(t.compositeFilter.op))}(n):Ce()}function xO(n){return mO[n]}function RO(n){return pO[n]}function IO(n){return gO[n]}function Zo(n){return{fieldPath:n.canonicalString()}}function el(n){return an.fromServerFormat(n.fieldPath)}function yA(n){return n instanceof Dt?function(t){if(t.op==="=="){if(Aw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NAN"}};if(Cw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Aw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NAN"}};if(Cw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(t.field),op:RO(t.op),value:t.value}}}(n):n instanceof Ei?function(t){const i=t.getFilters().map(a=>yA(a));return i.length===1?i[0]:{compositeFilter:{op:IO(t.op),filters:i}}}(n):Ce()}function NO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,i,a,o=xe.min(),u=xe.min(),h=on.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.Tt=e}}function kO(n){const e=CO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?w_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.Tn=new MO}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Bs.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class MO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new qt(dt.comparator),o=!a.has(i);return this.index[t]=a.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new qt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EA=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(EA,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new fl(0)}static Un(){return new fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="LruGarbageCollector",PO=1048576;function Fw([n,e],[t,i]){const a=He(n,t);return a===0?He(e,i):a}class LO{constructor(e){this.Hn=e,this.buffer=new qt(Fw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Fw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){pe(zw,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dl(t)?pe(zw,"Ignoring IndexedDB error during garbage collection: ",t):await Nl(t)}await this.er(3e5)})}}class UO{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Of.ae);const i=new LO(t);return this.tr.forEachTarget(e,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Bw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bw):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,a,o,u,h,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a))).next(E=>(i=E,h=Date.now(),this.removeTargets(e,i,t))).next(E=>(o=E,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(p=Date.now(),Xo()<=je.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:E})))}}function jO(n,e){return new UO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.changes=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&sc(i.mutation,a,pi.empty(),Ft.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Fe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Fe()){const a=Da();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(o=>{let u=Ju();return o.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=Da();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Fe()))}populateOverlays(e,t,i){const a=[];return i.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,i,a){let o=Ur();const u=rc(),h=function(){return rc()}();return t.forEach((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Xa)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),sc(y.mutation,p,y.mutation.getFieldMask(),Ft.now())):u.set(p.key,pi.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var E;return h.set(p,new zO(y,(E=u.get(p))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(e,t){const i=rc();let a=new kt((u,h)=>u-h),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||pi.empty();y=h.applyToLocalView(p,y),i.set(m,y);const E=(a.get(h.batchId)||Fe()).add(m);a=a.insert(h.batchId,E)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,y=m.value,E=tA();y.forEach(b=>{if(!o.has(b)){const S=oA(t.get(b),i.get(b));S!==null&&E.set(b,S),o=o.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ne.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-o.size):ne.resolve(Da());let h=_c,m=o;return u.next(p=>ne.forEach(p,(y,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(y)?ne.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{m=m.insert(y,b)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,m,p,Fe())).next(y=>({batchId:h,changes:eA(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(i=>{let a=Ju();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const o=t.collectionGroup;let u=Ju();return this.indexManager.getCollectionParents(e,o).next(h=>ne.forEach(h,m=>{const p=function(E,b){return new Lc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((E,b)=>{u=u.insert(E,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,a))).next(u=>{o.forEach((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,mn.newInvalidDocument(y)))});let h=Ju();return u.forEach((m,p)=>{const y=o.get(m);y!==void 0&&sc(y.mutation,p,pi.empty(),Ft.now()),Vf(t,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Fi(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:kO(a.bundledQuery),readTime:Fi(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.overlays=new kt(Te.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Da();return ne.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const a=Da(),o=t.length+1,u=new Te(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let o=new kt((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=o.get(p.largestBatchId);y===null&&(y=Da(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Da(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=a)););return ne.resolve(h)}Et(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new lO(t,i));let o=this.Rr.get(t);o===void 0&&(o=Fe(),this.Rr.set(t,o)),this.Rr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.Vr=new qt(Jt.mr),this.gr=new qt(Jt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new Jt(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new Jt(e,t))}Sr(e,t){e.forEach(i=>this.removeReference(i,t))}br(e){const t=new Te(new dt([])),i=new Jt(t,e),a=new Jt(t,e+1),o=[];return this.gr.forEachInRange([i,a],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Te(new dt([])),i=new Jt(t,e),a=new Jt(t,e+1);let o=Fe();return this.gr.forEachInRange([i,a],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Jt(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Te.comparator(e.key,t.key)||He(e.Cr,t.Cr)}static pr(e,t){return He(e.Cr,t.Cr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new qt(Jt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new oO(o,t,i,a);this.mutationQueue.push(u);for(const h of a)this.Mr=this.Mr.add(new Jt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Nr(i),o=a<0?0:a;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?ly:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,a],u=>{const h=this.Or(u.Cr);o.push(h)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qt(He);return t.forEach(a=>{const o=new Jt(a,0),u=new Jt(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{i=i.add(h.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let o=i;Te.isDocumentKey(o)||(o=o.child(""));const u=new Jt(new Te(o),0);let h=new qt(He);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Cr)),!0)},u),ne.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const a=this.Or(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){nt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(t.mutations,a=>{const o=new Jt(a.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new Jt(t,0),a=this.Mr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.kr=e,this.docs=function(){return new kt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),o=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let i=Ur();return t.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():mn.newInvalidDocument(a))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let o=Ur();const u=t.path,h=new Te(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||wk(Tk(y),i)<=0||(a.has(y.key)||Vf(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,i,a){Ce()}qr(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new KO(this)}getSize(e){return ne.resolve(this.size)}}class KO extends BO{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.persistence=e,this.Qr=new Wa(t=>hy(t),dy),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new yy,this.targetCount=0,this.Ur=fl.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new fl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let a=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),ne.waitFor(o).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Kr.Sr(t,i);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(u=>{o.push(a.markPotentiallyOrphaned(e,u))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Of(0),this.zr=!1,this.zr=!0,this.jr=new GO,this.referenceDelegate=e(this),this.Hr=new YO(this),this.indexManager=new OO,this.remoteDocumentCache=function(a){return new QO(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new DO(t),this.Yr=new qO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new $O(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const a=new WO(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(o=>this.referenceDelegate.Xr(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class WO extends Sk{constructor(e){super(),this.currentSequenceNumber=e}}class vy{constructor(e){this.persistence=e,this.ti=new yy,this.ni=null}static ri(e){return new vy(e)}get ii(){if(this.ni)return this.ni;throw Ce()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const a=Te.fromPath(i);return this.si(e,a).next(o=>{o||t.removeEntry(a,xe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.oi=new Wa(i=>xk(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=jO(this,t)}static ri(e,t){return new tf(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(i,a)=>this.ar(e,i,a).next(o=>o?ne.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(h=>{h||(i++,o.removeEntry(u,xe.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kd(e.data.value)),t}ar(e,t,i){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return ne.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=a}static Yi(e,t){let i=Fe(),a=Fe();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Ey(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return q2()?8:Ck(pn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,a){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,a,i).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new XO;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,i,a){return i.documentReadCount<this.es?(Xo()<=je.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(Xo()<=je.DEBUG&&pe("QueryEngine","Query:",Jo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(Xo()<=je.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):ne.resolve())}rs(e,t){if(Nw(t))return ne.resolve(null);let i=zi(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=w_(t,null,"F"),i=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const u=Fe(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.cs(t,h);return this.ls(t,p,u,m.readTime)?this.rs(e,w_(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,i,a){return Nw(t)||a.isEqual(xe.min())?ne.resolve(null):this.ns.getDocuments(e,i).next(o=>{const u=this.cs(t,o);return this.ls(t,u,i,a)?ne.resolve(null):(Xo()<=je.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Jo(t)),this.hs(e,u,t,Ek(a,_c)).next(h=>h))})}cs(e,t){let i=new qt(JC(e));return t.forEach((a,o)=>{Vf(e,o)&&(i=i.add(o))}),i}ls(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}_s(e,t,i){return Xo()<=je.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.ns.getDocumentsMatchingQuery(e,t,Bs.min(),i)}hs(e,t,i,a){return this.ns.getDocumentsMatchingQuery(e,i,a).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LocalStore",ZO=3e8;class eM{constructor(e,t,i,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new kt(He),this.Is=new Wa(o=>hy(o),dy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FO(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function tM(n,e,t,i){return new eM(n,e,t,i)}async function wA(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],h=[];let m=Fe();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function nM(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,m,p,y){const E=p.batch,b=E.keys();let S=ne.resolve();return b.forEach(O=>{S=S.next(()=>y.getEntry(m,O)).next(U=>{const V=p.docVersions.get(O);nt(V!==null),U.version.compareTo(V)<0&&(E.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let m=Fe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function bA(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function iM(n,e){const t=De(n),i=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const h=[];e.targetChanges.forEach((y,E)=>{const b=a.get(E);if(!b)return;h.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,E).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,E)));let S=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?S=S.withResumeToken(on.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,i)),a=a.insert(E,S),function(U,V,z){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=ZO?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(b,S,y)&&h.push(t.Hr.updateTargetData(o,S))});let m=Ur(),p=Fe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(rM(o,u,e.documentUpdates).next(y=>{m=y.Vs,p=y.fs})),!i.isEqual(xe.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(E=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return ne.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,p)).next(()=>m)}).then(o=>(t.Ts=a,o))}function rM(n,e,t){let i=Fe(),a=Fe();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let u=Ur();return t.forEach((h,m)=>{const p=o.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(xe.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):pe(Ty,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{Vs:u,fs:a}})}function sM(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ly),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function aM(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Hr.getTargetData(i,e).next(o=>o?(a=o,ne.resolve(a)):t.Hr.allocateTargetId(i).next(u=>(a=new Ns(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function x_(n,e,t){const i=De(n),a=i.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Dl(u))throw u;pe(Ty,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(a.target)}function qw(n,e,t){const i=De(n);let a=xe.min(),o=Fe();return i.persistence.runTransaction("Execute query","readwrite",u=>function(m,p,y){const E=De(m),b=E.Is.get(y);return b!==void 0?ne.resolve(E.Ts.get(b)):E.Hr.getTargetData(p,y)}(i,u,zi(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,h.targetId).next(m=>{o=m})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,t?a:xe.min(),t?o:Fe())).next(h=>(oM(i,$k(e),h),{documents:h,gs:o})))}function oM(n,e,t){let i=n.Es.get(e)||xe.min();t.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(e,i)}class Hw{constructor(){this.activeTargetIds=Jk()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lM{constructor(){this.ho=new Hw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Hw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="ConnectivityMonitor";class $w{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){pe(Gw,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){pe(Gw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd=null;function R_(){return Sd===null?Sd=function(){return 268435456+Math.round(2147483648*Math.random())}():Sd++,"0x"+Sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="RestConnection",cM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===Kd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}So(e,t,i,a,o){const u=R_(),h=this.bo(e,t.toUriEncodedString());pe(bg,`Sending RPC '${e}' ${u}:`,h,i);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,o),this.vo(e,h,m,i).then(p=>(pe(bg,`Received RPC '${e}' ${u}: `,p),p),p=>{throw ul(bg,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",i),p})}Co(e,t,i,a,o,u){return this.So(e,t,i,a,o)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Il}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),i&&i.headers.forEach((a,o)=>e[o]=a)}bo(e,t){const i=cM[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class fM extends hM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,a){const o=R_();return new Promise((u,h)=>{const m=new xC;m.setWithCredentials(!0),m.listenOnce(RC.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Dd.NO_ERROR:const y=m.getResponseJson();pe(dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case Dd.TIMEOUT:pe(dn,`RPC '${e}' ${o} timed out`),h(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const E=m.getStatus();if(pe(dn,`RPC '${e}' ${o} failed with status:`,E,"response text:",m.getResponseText()),E>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const O=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(z)>=0?z:re.UNKNOWN}(S.status);h(new ge(O,S.message))}else h(new ge(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{pe(dn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(a);pe(dn,`RPC '${e}' ${o} sending request:`,a),m.send(t,"POST",p,i,15)})}Wo(e,t,i){const a=R_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=DC(),h=NC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=o.join("");pe(dn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const E=u.createWebChannel(y,m);let b=!1,S=!1;const O=new dM({Fo:V=>{S?pe(dn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(b||(pe(dn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),b=!0),pe(dn,`RPC '${e}' stream ${a} sending:`,V),E.send(V))},Mo:()=>E.close()}),U=(V,z,G)=>{V.listen(z,H=>{try{G(H)}catch(Z){setTimeout(()=>{throw Z},0)}})};return U(E,Xu.EventType.OPEN,()=>{S||(pe(dn,`RPC '${e}' stream ${a} transport opened.`),O.Qo())}),U(E,Xu.EventType.CLOSE,()=>{S||(S=!0,pe(dn,`RPC '${e}' stream ${a} transport closed`),O.Ko())}),U(E,Xu.EventType.ERROR,V=>{S||(S=!0,ul(dn,`RPC '${e}' stream ${a} transport errored:`,V),O.Ko(new ge(re.UNAVAILABLE,"The operation could not be completed")))}),U(E,Xu.EventType.MESSAGE,V=>{var z;if(!S){const G=V.data[0];nt(!!G);const H=G,Z=(H==null?void 0:H.error)||((z=H[0])===null||z===void 0?void 0:z.error);if(Z){pe(dn,`RPC '${e}' stream ${a} received error:`,Z);const le=Z.status;let te=function(C){const R=Nt[C];if(R!==void 0)return cA(R)}(le),M=Z.message;te===void 0&&(te=re.INTERNAL,M="Unknown error status: "+le+" with message "+Z.message),S=!0,O.Ko(new ge(te,M)),E.close()}else pe(dn,`RPC '${e}' stream ${a} received:`,G),O.Uo(G)}}),U(h,IC.STAT_EVENT,V=>{V.stat===p_.PROXY?pe(dn,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===p_.NOPROXY&&pe(dn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.$o()},0),O}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n){return new _O(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t,i=1e3,a=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=a,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-i);a>0&&pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="PersistentStream";class CA{constructor(e,t,i,a,o,u,h,m){this.Ti=e,this.n_=i,this.r_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new SA(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===t&&this.V_(i,a)},i=>{e(()=>{const a=new ge(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return pe(Qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(pe(Qw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mM extends CA{constructor(e,t,i,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=EO(this.serializer,e),i=function(o){if(!("targetChange"in o))return xe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?Fi(u.readTime):xe.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=A_(this.serializer),t.addTarget=function(o,u){let h;const m=u.target;if(h=E_(m)?{documents:bO(o,m)}:{query:SO(o,m).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=fA(o,u.resumeToken);const p=b_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(xe.min())>0){h.readTime=ef(o,u.snapshotVersion.toTimestamp());const p=b_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=AO(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=A_(this.serializer),t.removeTarget=e,this.I_(t)}}class pM extends CA{constructor(e,t,i,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=wO(e.writeResults,e.commitTime),i=Fi(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=A_(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>TO(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{}class _M extends gM{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.So(e,S_(t,i),a,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())})}Co(e,t,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,S_(t,i),a,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(re.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class yM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Vr(t),this.N_=!1):pe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class vM{constructor(e,t,i,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{i.enqueueAndForget(async()=>{Ja(this)&&(pe(Va,"Restarting streams for network reachability change."),await async function(m){const p=De(m);p.W_.add(4),await jc(p),p.j_.set("Unknown"),p.W_.delete(4),await Ff(p)}(this))})}),this.j_=new yM(i,a)}}async function Ff(n){if(Ja(n))for(const e of n.G_)await e(!0)}async function jc(n){for(const e of n.G_)await e(!1)}function AA(n,e){const t=De(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Cy(t)?Sy(t):kl(t).c_()&&by(t,e))}function wy(n,e){const t=De(n),i=kl(t);t.U_.delete(e),i.c_()&&xA(t,e),t.U_.size===0&&(i.c_()?i.P_():Ja(t)&&t.j_.set("Unknown"))}function by(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}kl(n).y_(e)}function xA(n,e){n.H_.Ne(e),kl(n).w_(e)}function Sy(n){n.H_=new fO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),kl(n).start(),n.j_.B_()}function Cy(n){return Ja(n)&&!kl(n).u_()&&n.U_.size>0}function Ja(n){return De(n).W_.size===0}function RA(n){n.H_=void 0}async function EM(n){n.j_.set("Online")}async function TM(n){n.U_.forEach((e,t)=>{by(n,e)})}async function wM(n,e){RA(n),Cy(n)?(n.j_.q_(e),Sy(n)):n.j_.set("Unknown")}async function bM(n,e,t){if(n.j_.set("Online"),e instanceof dA&&e.state===2&&e.cause)try{await async function(a,o){const u=o.cause;for(const h of o.targetIds)a.U_.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.U_.delete(h),a.H_.removeTarget(h))}(n,e)}catch(i){pe(Va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await nf(n,i)}else if(e instanceof Pd?n.H_.We(e):e instanceof hA?n.H_.Ze(e):n.H_.je(e),!t.isEqual(xe.min()))try{const i=await bA(n.localStore);t.compareTo(i)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=o.U_.get(p);y&&o.U_.set(p,y.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach((m,p)=>{const y=o.U_.get(m);if(!y)return;o.U_.set(m,y.withResumeToken(on.EMPTY_BYTE_STRING,y.snapshotVersion)),xA(o,m);const E=new Ns(y.target,m,p,y.sequenceNumber);by(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){pe(Va,"Failed to raise snapshot:",i),await nf(n,i)}}async function nf(n,e,t){if(!Dl(e))throw e;n.W_.add(1),await jc(n),n.j_.set("Offline"),t||(t=()=>bA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pe(Va,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Ff(n)})}function IA(n,e){return e().catch(t=>nf(n,t,e))}async function qf(n){const e=De(n),t=Hs(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:ly;for(;SM(e);)try{const a=await sM(e.localStore,i);if(a===null){e.K_.length===0&&t.P_();break}i=a.batchId,CM(e,a)}catch(a){await nf(e,a)}NA(e)&&DA(e)}function SM(n){return Ja(n)&&n.K_.length<10}function CM(n,e){n.K_.push(e);const t=Hs(n);t.c_()&&t.S_&&t.b_(e.mutations)}function NA(n){return Ja(n)&&!Hs(n).u_()&&n.K_.length>0}function DA(n){Hs(n).start()}async function AM(n){Hs(n).C_()}async function xM(n){const e=Hs(n);for(const t of n.K_)e.b_(t.mutations)}async function RM(n,e,t){const i=n.K_.shift(),a=py.from(i,e,t);await IA(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await qf(n)}async function IM(n,e){e&&Hs(n).S_&&await async function(i,a){if(function(u){return cO(u)&&u!==re.ABORTED}(a.code)){const o=i.K_.shift();Hs(i).h_(),await IA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await qf(i)}}(n,e),NA(n)&&DA(n)}async function Kw(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),pe(Va,"RemoteStore received new credentials");const i=Ja(t);t.W_.add(3),await jc(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ff(t)}async function NM(n,e){const t=De(n);e?(t.W_.delete(2),await Ff(t)):e||(t.W_.add(2),await jc(t),t.j_.set("Unknown"))}function kl(n){return n.J_||(n.J_=function(t,i,a){const o=De(t);return o.M_(),new mM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:EM.bind(null,n),No:TM.bind(null,n),Lo:wM.bind(null,n),p_:bM.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Cy(n)?Sy(n):n.j_.set("Unknown")):(await n.J_.stop(),RA(n))})),n.J_}function Hs(n){return n.Y_||(n.Y_=function(t,i,a){const o=De(t);return o.M_(),new pM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:AM.bind(null,n),Lo:IM.bind(null,n),D_:xM.bind(null,n),v_:RM.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await qf(n)):(await n.Y_.stop(),n.K_.length>0&&(pe(Va,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,i,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,o){const u=Date.now()+i,h=new Ay(e,t,u,a,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xy(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Dl(n))return new ge(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(e){return new nl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=Ju(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new nl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.Z_=new kt(Te.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ce():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ml{constructor(e,t,i,a,o,u,h,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new ml(e,t,nl.emptySet(t),u,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kM{constructor(){this.queries=Ww(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const a=De(t),o=a.queries;a.queries=Ww(),o.forEach((u,h)=>{for(const m of h.ta)m.onError(i)})})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function Ww(){return new Wa(n=>XC(n),Lf)}async function kA(n,e){const t=De(n);let i=3;const a=e.query;let o=t.queries.get(a);o?!o.na()&&e.ra()&&(i=2):(o=new DM,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await t.onListen(a,!0);break;case 1:o.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=xy(u,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Ry(t)}async function OA(n,e){const t=De(n),i=e.query;let a=3;const o=t.queries.get(i);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?a=e.ra()?0:1:!o.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function OM(n,e){const t=De(n);let i=!1;for(const a of e){const o=a.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(a)&&(i=!0);u.ea=a}}i&&Ry(t)}function MM(n,e,t){const i=De(n),a=i.queries.get(e);if(a)for(const o of a.ta)o.onError(t);i.queries.delete(e)}function Ry(n){n.ia.forEach(e=>{e.next()})}var I_,Xw;(Xw=I_||(I_={}))._a="default",Xw.Cache="cache";class MA{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new ml(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==I_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.key=e}}class LA{constructor(e){this.key=e}}class PM{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Fe(),this.mutatedKeys=Fe(),this.ya=JC(e),this.wa=new nl(this.ya)}get Sa(){return this.fa}ba(e,t){const i=t?t.Da:new Yw,a=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,E)=>{const b=a.get(y),S=Vf(this.query,E)?E:null,O=!!b&&this.mutatedKeys.has(b.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;b&&S?b.data.isEqual(S.data)?O!==U&&(i.track({type:3,doc:S}),V=!0):this.va(b,S)||(i.track({type:2,doc:S}),V=!0,(m&&this.ya(S,m)>0||p&&this.ya(S,p)<0)&&(h=!0)):!b&&S?(i.track({type:0,doc:S}),V=!0):b&&!S&&(i.track({type:1,doc:b}),V=!0,(m||p)&&(h=!0)),V&&(S?(u=u.add(S),o=U?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{wa:u,Da:i,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,E)=>function(S,O){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return U(S)-U(O)}(y.type,E.type)||this.ya(y.doc,E.doc)),this.Ca(i),a=a!=null&&a;const h=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,u.length!==0||p?{snapshot:new ml(this.query,e.wa,o,u,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Yw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Fe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new LA(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new PA(i))}),t}Oa(e){this.fa=e.gs,this.pa=Fe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return ml.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Iy="SyncEngine";class LM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class VM{constructor(e){this.key=e,this.Ba=!1}}class UM{constructor(e,t,i,a,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Wa(h=>XC(h),Lf),this.qa=new Map,this.Qa=new Set,this.$a=new kt(Te.comparator),this.Ka=new Map,this.Ua=new yy,this.Wa={},this.Ga=new Map,this.za=fl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function jM(n,e,t=!0){const i=FA(n);let a;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na()):a=await VA(i,e,t,!0),a}async function BM(n,e){const t=FA(n);await VA(t,e,!0,!1)}async function VA(n,e,t,i){const a=await aM(n.localStore,zi(e)),o=a.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await zM(n,e,o,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&AA(n.remoteStore,a),h}async function zM(n,e,t,i,a){n.Ha=(E,b,S)=>async function(U,V,z,G){let H=V.view.ba(z);H.ls&&(H=await qw(U.localStore,V.query,!1).then(({documents:M})=>V.view.ba(M,H)));const Z=G&&G.targetChanges.get(V.targetId),le=G&&G.targetMismatches.get(V.targetId)!=null,te=V.view.applyChanges(H,U.isPrimaryClient,Z,le);return Zw(U,V.targetId,te.Ma),te.snapshot}(n,E,b,S);const o=await qw(n.localStore,e,!0),u=new PM(e,o.gs),h=u.ba(o.documents),m=Uc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=u.applyChanges(h,n.isPrimaryClient,m);Zw(n,t,p.Ma);const y=new LM(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function FM(n,e,t){const i=De(n),a=i.ka.get(e),o=i.qa.get(a.targetId);if(o.length>1)return i.qa.set(a.targetId,o.filter(u=>!Lf(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await x_(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&wy(i.remoteStore,a.targetId),N_(i,a.targetId)}).catch(Nl)):(N_(i,a.targetId),await x_(i.localStore,a.targetId,!0))}async function qM(n,e){const t=De(n),i=t.ka.get(e),a=t.qa.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wy(t.remoteStore,i.targetId))}async function HM(n,e,t){const i=XM(n);try{const a=await function(u,h){const m=De(u),p=Ft.now(),y=h.reduce((S,O)=>S.add(O.key),Fe());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",S=>{let O=Ur(),U=Fe();return m.ds.getEntries(S,y).next(V=>{O=V,O.forEach((z,G)=>{G.isValidDocument()||(U=U.add(z))})}).next(()=>m.localDocuments.getOverlayedDocuments(S,O)).next(V=>{E=V;const z=[];for(const G of h){const H=sO(G,E.get(G.key).overlayedDocument);H!=null&&z.push(new Xa(G.key,H,qC(H.value.mapValue),Mr.exists(!0)))}return m.mutationQueue.addMutationBatch(S,p,z,h)}).next(V=>{b=V;const z=V.applyToLocalDocumentSet(E,U);return m.documentOverlayCache.saveOverlays(S,V.batchId,z)})}).then(()=>({batchId:b.batchId,changes:eA(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,h,m){let p=u.Wa[u.currentUser.toKey()];p||(p=new kt(He)),p=p.insert(h,m),u.Wa[u.currentUser.toKey()]=p}(i,a.batchId,t),await Bc(i,a.changes),await qf(i.remoteStore)}catch(a){const o=xy(a,"Failed to persist write");t.reject(o)}}async function UA(n,e){const t=De(n);try{const i=await iM(t.localStore,e);e.targetChanges.forEach((a,o)=>{const u=t.Ka.get(o);u&&(nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?nt(u.Ba):a.removedDocuments.size>0&&(nt(u.Ba),u.Ba=!1))}),await Bc(t,i,e)}catch(i){await Nl(i)}}function Jw(n,e,t){const i=De(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const m=De(u);m.onlineState=h;let p=!1;m.queries.forEach((y,E)=>{for(const b of E.ta)b.sa(h)&&(p=!0)}),p&&Ry(m)}(i.eventManager,e),a.length&&i.La.p_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GM(n,e,t){const i=De(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Ka.get(e),o=a&&a.key;if(o){let u=new kt(Te.comparator);u=u.insert(o,mn.newNoDocument(o,xe.min()));const h=Fe().add(o),m=new Bf(xe.min(),new Map,new kt(He),u,h);await UA(i,m),i.$a=i.$a.remove(o),i.Ka.delete(e),Ny(i)}else await x_(i.localStore,e,!1).then(()=>N_(i,e,t)).catch(Nl)}async function $M(n,e){const t=De(n),i=e.batch.batchId;try{const a=await nM(t.localStore,e);BA(t,i,null),jA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Bc(t,a)}catch(a){await Nl(a)}}async function QM(n,e,t){const i=De(n);try{const a=await function(u,h){const m=De(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,h).next(E=>(nt(E!==null),y=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(i.localStore,e);BA(i,e,t),jA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Bc(i,a)}catch(a){await Nl(a)}}function jA(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function BA(n,e,t){const i=De(n);let a=i.Wa[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),i.Wa[i.currentUser.toKey()]=a}}function N_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.br(e).forEach(i=>{n.Ua.containsKey(i)||zA(n,i)})}function zA(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(wy(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Ny(n))}function Zw(n,e,t){for(const i of t)i instanceof PA?(n.Ua.addReference(i.key,e),KM(n,i)):i instanceof LA?(pe(Iy,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||zA(n,i.key)):Ce()}function KM(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(pe(Iy,"New document in limbo: "+t),n.Qa.add(i),Ny(n))}function Ny(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Te(dt.fromString(e)),i=n.za.next();n.Ka.set(i,new VM(t)),n.$a=n.$a.insert(t,i),AA(n.remoteStore,new Ns(zi(fy(t.path)),i,"TargetPurposeLimboResolution",Of.ae))}}async function Bc(n,e,t){const i=De(n),a=[],o=[],u=[];i.ka.isEmpty()||(i.ka.forEach((h,m)=>{u.push(i.Ha(m,e,t).then(p=>{var y;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){a.push(p);const E=Ey.Yi(m.targetId,p);o.push(E)}}))}),await Promise.all(u),i.La.p_(a),await async function(m,p){const y=De(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ne.forEach(p,b=>ne.forEach(b.Hi,S=>y.persistence.referenceDelegate.addReference(E,b.targetId,S)).next(()=>ne.forEach(b.Ji,S=>y.persistence.referenceDelegate.removeReference(E,b.targetId,S)))))}catch(E){if(!Dl(E))throw E;pe(Ty,"Failed to update sequence numbers: "+E)}for(const E of p){const b=E.targetId;if(!E.fromCache){const S=y.Ts.get(b),O=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(O);y.Ts=y.Ts.insert(b,U)}}}(i.localStore,o))}async function YM(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){pe(Iy,"User change. New user:",e.toKey());const i=await wA(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(m=>{m.reject(new ge(re.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bc(t,i.Rs)}}function WM(n,e){const t=De(n),i=t.Ka.get(e);if(i&&i.Ba)return Fe().add(i.key);{let a=Fe();const o=t.qa.get(e);if(!o)return a;for(const u of o){const h=t.ka.get(u);a=a.unionWith(h.view.Sa)}return a}}function FA(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GM.bind(null,e),e.La.p_=OM.bind(null,e.eventManager),e.La.Ja=MM.bind(null,e.eventManager),e}function XM(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$M.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QM.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return tM(this.persistence,new JO,e.initialUser,this.serializer)}Xa(e){return new TA(vy.ri,this.serializer)}Za(e){return new lM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class JM extends rf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){nt(this.persistence.referenceDelegate instanceof tf);const i=this.persistence.referenceDelegate.garbageCollector;return new VO(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new TA(i=>tf.ri(i,t),this.serializer)}}class D_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YM.bind(null,this.syncEngine),await NM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kM}()}createDatastore(e){const t=zf(e.databaseInfo.databaseId),i=function(o){return new fM(o)}(e.databaseInfo);return function(o,u,h,m){return new _M(o,u,h,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,o,u,h){return new vM(i,a,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Jw(this.syncEngine,t,0),function(){return $w.D()?new $w:new uM}())}createSyncEngine(e,t){return function(a,o,u,h,m,p,y){const E=new UM(a,o,u,h,m,p);return y&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=De(a);pe(Va,"RemoteStore shutting down."),o.W_.add(5),await jc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}D_.provider={build:()=>new D_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class ZM{constructor(e,t,i,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=OC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async u=>{pe(Gs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(pe(Gs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=xy(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Cg(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Gs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await wA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function eb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eP(n);pe(Gs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Kw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Kw(e.remoteStore,a)),n._onlineComponents=e}async function eP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Gs,"Using user provided OfflineComponentProvider");try{await Cg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;ul("Error using user provided cache. Falling back to memory cache: "+t),await Cg(n,new rf)}}else pe(Gs,"Using default OfflineComponentProvider"),await Cg(n,new JM(void 0));return n._offlineComponents}async function HA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Gs,"Using user provided OnlineComponentProvider"),await eb(n,n._uninitializedComponentsProvider._online)):(pe(Gs,"Using default OnlineComponentProvider"),await eb(n,new D_))),n._onlineComponents}function tP(n){return HA(n).then(e=>e.syncEngine)}async function GA(n){const e=await HA(n),t=e.eventManager;return t.onListen=jM.bind(null,e.syncEngine),t.onUnlisten=FM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qM.bind(null,e.syncEngine),t}function nP(n,e,t={}){const i=new Or;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,m,p){const y=new qA({next:b=>{y.su(),u.enqueueAndForget(()=>OA(o,E));const S=b.docs.has(h);!S&&b.fromCache?p.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&b.fromCache&&m&&m.source==="server"?p.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),E=new MA(fy(h.path),y,{includeMetadataChanges:!0,Ta:!0});return kA(o,E)}(await GA(n),n.asyncQueue,e,t,i)),i.promise}function iP(n,e,t={}){const i=new Or;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,m,p){const y=new qA({next:b=>{y.su(),u.enqueueAndForget(()=>OA(o,E)),b.fromCache&&m.source==="server"?p.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),E=new MA(h,y,{includeMetadataChanges:!0,Ta:!0});return kA(o,E)}(await GA(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rP(n,e,t,i){if(e===!0&&i===!0)throw new ge(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nb(n){if(!Te.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ib(n){if(Te.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce()}function Ua(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(n);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="firestore.googleapis.com",rb=!0;class sb{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KA,this.ssl=rb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:rb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PO)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$A((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sb(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new dk;switch(i.type){case"firstParty":return new gk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=tb.get(t);i&&(pe("ComponentProvider","Removing Datastore"),tb.delete(t),i.terminate())}(this),Promise.resolve()}}function sP(n,e,t,i={}){var a;const o=(n=Ua(n,Gf))._getSettings(),u=`${e}:${t}`;if(o.host!==KA&&o.host!==u&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:u,ssl:!1})),i.mockUserToken){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=fn.MOCK_USER;else{h=mC(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new fn(p)}n._authCredentials=new fk(new kC(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ol(this.firestore,e,this._query)}}class Nn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class Ls extends Ol{constructor(e,t,i){super(e,t,fy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Te(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function aP(n,e,...t){if(n=_t(n),QA("collection","path",e),n instanceof Gf){const i=dt.fromString(e,...t);return ib(i),new Ls(n,null,i)}{if(!(n instanceof Nn||n instanceof Ls))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return ib(i),new Ls(n.firestore,null,i)}}function bc(n,e,...t){if(n=_t(n),arguments.length===1&&(e=OC.newId()),QA("doc","path",e),n instanceof Gf){const i=dt.fromString(e,...t);return nb(i),new Nn(n,null,new Te(i))}{if(!(n instanceof Nn||n instanceof Ls))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return nb(i),new Nn(n.firestore,n instanceof Ls?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="AsyncQueue";class ob{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new SA(this,"async_queue_retry"),this.Su=()=>{const i=Sg();i&&pe(ab,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const t=Sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Or;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Dl(e))throw e;pe(ab,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const a=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw Vr("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=Ay.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(a),a}Du(){this.gu&&Ce()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class $f extends Gf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new ob,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ob(e),this._firestoreClient=void 0,await e}}}function zc(n,e){const t=typeof n=="object"?n:kf(),i=typeof n=="string"?n:Kd,a=Ws(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=hC("firestore");o&&sP(a,...o)}return a}function Dy(n){if(n._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oP(n),n._firestoreClient}function oP(n){var e,t,i;const a=n._freezeSettings(),o=function(h,m,p,y){return new Nk(h,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,$A(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new ZM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(on.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=/^__.*__$/;class uP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vc(e,this.data,t,this.fieldTransforms)}}function WA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class Py{constructor(e,t,i,a,o,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Py(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.$u(e),a}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return sf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(WA(this.Lu)&&lP.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class cP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zf(e)}ju(e,t,i,a=!1){return new Py({Lu:e,methodName:t,zu:i,path:an.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XA(n){const e=n._freezeSettings(),t=zf(n._databaseId);return new cP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hP(n,e,t,i,a,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,a);ex("Data must be an object, but it was:",u,i);const h=JA(i,u);let m,p;if(o.merge)m=new pi(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const E of o.mergeFields){const b=fP(e,E,t);if(!u.contains(b))throw new ge(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);pP(y,b)||y.push(b)}m=new pi(y),p=u.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=u.fieldTransforms;return new uP(new ri(h),m,p)}function dP(n,e,t,i=!1){return Ly(t,n.ju(i?4:3,e))}function Ly(n,e){if(ZA(n=_t(n)))return ex("Unsupported field value:",e,n),JA(n,e);if(n instanceof YA)return function(i,a){if(!WA(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,a){const o=[];let u=0;for(const h of i){let m=Ly(h,a.Uu(u));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(i,a){if((i=_t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Zk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ft.fromDate(i);return{timestampValue:ef(a.serializer,o)}}if(i instanceof Ft){const o=new Ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ef(a.serializer,o)}}if(i instanceof Oy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pl)return{bytesValue:fA(a.serializer,i._byteString)};if(i instanceof Nn){const o=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_y(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof My)return function(u,h){return{mapValue:{fields:{[zC]:{stringValue:FC},[Yd]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return my(h.serializer,p)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${Hf(i)}`)}(n,e)}function JA(n,e){const t={};return PC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ya(n,(i,a)=>{const o=Ly(a,e.qu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function ZA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Oy||n instanceof pl||n instanceof Nn||n instanceof YA||n instanceof My)}function ex(n,e,t){if(!ZA(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Hf(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function fP(n,e,t){if((e=_t(e))instanceof ky)return e._internalPath;if(typeof e=="string")return tx(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const mP=new RegExp("[~\\*/\\[\\]]");function tx(n,e,t){if(e.search(mP)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ky(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,i,a){const o=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new ge(re.INVALID_ARGUMENT,h+n+m)}function pP(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,i,a,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gP extends nx{data(){return super.data()}}function Vy(n,e){return typeof e=="string"?tx(n,e):e instanceof ky?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uy{}class yP extends Uy{}function vP(n,e,...t){let i=[];e instanceof Uy&&i.push(e),i=i.concat(t),function(o){const u=o.filter(m=>m instanceof jy).length,h=o.filter(m=>m instanceof Qf).length;if(u>1||u>0&&h>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Qf extends yP{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Qf(e,t,i)}_apply(e){const t=this._parse(e);return ix(e._query,t),new Ol(e.firestore,e.converter,T_(e._query,t))}_parse(e){const t=XA(e.firestore);return function(o,u,h,m,p,y,E){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ub(E,y);const O=[];for(const U of E)O.push(lb(m,o,U));b={arrayValue:{values:O}}}else b=lb(m,o,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ub(E,y),b=dP(h,u,E,y==="in"||y==="not-in");return Dt.create(p,y,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function EP(n,e,t){const i=e,a=Vy("where",n);return Qf._create(a,i,t)}class jy extends Uy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,o){let u=a;const h=o.getFlattenedFilters();for(const m of h)ix(u,m),u=T_(u,m)}(e._query,t),new Ol(e.firestore,e.converter,T_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function lb(n,e,t){if(typeof(t=_t(t))=="string"){if(t==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WC(e)&&t.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dt.fromString(t));if(!Te.isDocumentKey(i))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Sw(n,new Te(i))}if(t instanceof Nn)return Sw(n,t._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(t)}.`)}function ub(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ix(n,e){const t=function(a,o){for(const u of a)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TP{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ya(e,(a,o)=>{i[a]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,a;const o=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[Yd].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>At(u.doubleValue));return new My(o)}convertGeoPoint(e){return new Oy(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Pf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const t=zs(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);nt(vA(i));const a=new vc(i.get(1),i.get(3)),o=new Te(i.popFirst(5));return a.isEqual(t)||Vr(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rx extends nx{constructor(e,t,i,a,o,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Vy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ld extends rx{data(e={}){return super.data(e)}}class bP{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ec(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ld(this._firestore,this._userDataWriter,i.key,i,new ec(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const m=new Ld(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ec(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const m=new Ld(a._firestore,a._userDataWriter,h.doc.key,h.doc,new ec(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:SP(h.type),doc:m,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n){n=Ua(n,Nn);const e=Ua(n.firestore,$f);return nP(Dy(e),n._key).then(t=>xP(e,n,t))}class ax extends TP{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function CP(n){n=Ua(n,Ol);const e=Ua(n.firestore,$f),t=Dy(e),i=new ax(e);return _P(n._query),iP(t,n._query).then(a=>new bP(e,i,n,a))}function k_(n,e,t){n=Ua(n,Nn);const i=Ua(n.firestore,$f),a=wP(n.converter,e,t);return AP(i,[hP(XA(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Mr.none())])}function AP(n,e){return function(i,a){const o=new Or;return i.asyncQueue.enqueueAndForget(async()=>HM(await tP(i),a,o)),o.promise}(Dy(n),e)}function xP(n,e,t){const i=t.docs.get(e._key),a=new ax(n);return new rx(n,a,e._key,i,new ec(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Il=a})(Ka),vi(new ai("firestore",(i,{instanceIdentifier:a,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new $f(new mk(i.getProvider("auth-internal")),new _k(u,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(p.options.projectId,y)}(u,a),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),In(fw,mw,e),In(fw,mw,"esm2017")})();var RP="firebase",IP="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(RP,IP,"app");const ox="@firebase/installations",By="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=1e4,ux=`w:${By}`,cx="FIS_v2",NP="https://firebaseinstallations.googleapis.com/v1",DP=60*60*1e3,kP="installations",OP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ja=new Qa(kP,OP,MP);function hx(n){return n instanceof Ti&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx({projectId:n}){return`${NP}/projects/${n}/installations`}function fx(n){return{token:n.token,requestStatus:2,expiresIn:LP(n.expiresIn),creationTime:Date.now()}}async function mx(n,e){const i=(await e.json()).error;return ja.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function px({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function PP(n,{refreshToken:e}){const t=px(n);return t.append("Authorization",VP(e)),t}async function gx(n){const e=await n();return e.status>=500&&e.status<600?n():e}function LP(n){return Number(n.replace("s","000"))}function VP(n){return`${cx} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=dx(n),a=px(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:t,authVersion:cx,appId:n.appId,sdkVersion:ux},h={method:"POST",headers:a,body:JSON.stringify(u)},m=await gx(()=>fetch(i,h));if(m.ok){const p=await m.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:fx(p.authToken)}}else throw await mx("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=/^[cdef][\w-]{21}$/,O_="";function zP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=FP(n);return BP.test(t)?t:O_}catch{return O_}}function FP(n){return jP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Map;function vx(n,e){const t=Kf(n);Ex(t,e),qP(t,e)}function Ex(n,e){const t=yx.get(n);if(t)for(const i of t)i(e)}function qP(n,e){const t=HP();t&&t.postMessage({key:n,fid:e}),GP()}let ka=null;function HP(){return!ka&&"BroadcastChannel"in self&&(ka=new BroadcastChannel("[Firebase] FID Change"),ka.onmessage=n=>{Ex(n.data.key,n.data.fid)}),ka}function GP(){yx.size===0&&ka&&(ka.close(),ka=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="firebase-installations-database",QP=1,Ba="firebase-installations-store";let Ag=null;function zy(){return Ag||(Ag=wC($P,QP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ba)}}})),Ag}async function af(n,e){const t=Kf(n),a=(await zy()).transaction(Ba,"readwrite"),o=a.objectStore(Ba),u=await o.get(t);return await o.put(e,t),await a.done,(!u||u.fid!==e.fid)&&vx(n,e.fid),e}async function Tx(n){const e=Kf(n),i=(await zy()).transaction(Ba,"readwrite");await i.objectStore(Ba).delete(e),await i.done}async function Yf(n,e){const t=Kf(n),a=(await zy()).transaction(Ba,"readwrite"),o=a.objectStore(Ba),u=await o.get(t),h=e(u);return h===void 0?await o.delete(t):await o.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&vx(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(n){let e;const t=await Yf(n.appConfig,i=>{const a=KP(i),o=YP(n,a);return e=o.registrationPromise,o.installationEntry});return t.fid===O_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function KP(n){const e=n||{fid:zP(),registrationStatus:0};return wx(e)}function YP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ja.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=WP(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XP(n)}:{installationEntry:e}}async function WP(n,e){try{const t=await UP(n,e);return af(n.appConfig,t)}catch(t){throw hx(t)&&t.customData.serverCode===409?await Tx(n.appConfig):await af(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function XP(n){let e=await cb(n.appConfig);for(;e.registrationStatus===1;)await _x(100),e=await cb(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Fy(n);return i||t}return e}function cb(n){return Yf(n,e=>{if(!e)throw ja.create("installation-not-found");return wx(e)})}function wx(n){return JP(n)?{fid:n.fid,registrationStatus:0}:n}function JP(n){return n.registrationStatus===1&&n.registrationTime+lx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP({appConfig:n,heartbeatServiceProvider:e},t){const i=eL(n,t),a=PP(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:ux,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},m=await gx(()=>fetch(i,h));if(m.ok){const p=await m.json();return fx(p)}else throw await mx("Generate Auth Token",m)}function eL(n,{fid:e}){return`${dx(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qy(n,e=!1){let t;const i=await Yf(n.appConfig,o=>{if(!bx(o))throw ja.create("not-registered");const u=o.authToken;if(!e&&iL(u))return o;if(u.requestStatus===1)return t=tL(n,e),o;{if(!navigator.onLine)throw ja.create("app-offline");const h=sL(o);return t=nL(n,h),h}});return t?await t:i.authToken}async function tL(n,e){let t=await hb(n.appConfig);for(;t.authToken.requestStatus===1;)await _x(100),t=await hb(n.appConfig);const i=t.authToken;return i.requestStatus===0?qy(n,e):i}function hb(n){return Yf(n,e=>{if(!bx(e))throw ja.create("not-registered");const t=e.authToken;return aL(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function nL(n,e){try{const t=await ZP(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await af(n.appConfig,i),t}catch(t){if(hx(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Tx(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await af(n.appConfig,i)}throw t}}function bx(n){return n!==void 0&&n.registrationStatus===2}function iL(n){return n.requestStatus===2&&!rL(n)}function rL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+DP}function sL(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function aL(n){return n.requestStatus===1&&n.requestTime+lx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(n){const e=n,{installationEntry:t,registrationPromise:i}=await Fy(e);return i?i.catch(console.error):qy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(n,e=!1){const t=n;return await uL(t),(await qy(t,e)).token}async function uL(n){const{registrationPromise:e}=await Fy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(n){if(!n||!n.options)throw xg("App Configuration");if(!n.name)throw xg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw xg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function xg(n){return ja.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="installations",hL="installations-internal",dL=n=>{const e=n.getProvider("app").getImmediate(),t=cL(e),i=Ws(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},fL=n=>{const e=n.getProvider("app").getImmediate(),t=Ws(e,Sx).getImmediate();return{getId:()=>oL(t),getToken:a=>lL(t,a)}};function mL(){vi(new ai(Sx,dL,"PUBLIC")),vi(new ai(hL,fL,"PRIVATE"))}mL();In(ox,By);In(ox,By,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="analytics",pL="firebase_id",gL="origin",_L=60*1e3,yL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new Pc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new Qa("analytics","Analytics",vL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(n){if(!n.startsWith(Hy)){const e=jn.create("invalid-gtag-resource",{gtagURL:n});return Dn.warn(e.message),""}return n}function Cx(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function TL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function wL(n,e){const t=TL("firebase-js-sdk-policy",{createScriptURL:EL}),i=document.createElement("script"),a=`${Hy}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function bL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function SL(n,e,t,i,a,o){const u=i[a];try{if(u)await e[u];else{const m=(await Cx(t)).find(p=>p.measurementId===a);m&&await e[m.appId]}}catch(h){Dn.error(h)}n("config",a,o)}async function CL(n,e,t,i,a){try{let o=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await Cx(t);for(const m of u){const p=h.find(E=>E.measurementId===m),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,a||{})}catch(o){Dn.error(o)}}function AL(n,e,t,i){async function a(o,...u){try{if(o==="event"){const[h,m]=u;await CL(n,e,t,h,m)}else if(o==="config"){const[h,m]=u;await SL(n,e,t,i,h,m)}else if(o==="consent"){const[h,m]=u;n("consent",h,m)}else if(o==="get"){const[h,m,p]=u;n("get",h,m,p)}else if(o==="set"){const[h]=u;n("set",h)}else n(o,...u)}catch(h){Dn.error(h)}}return a}function xL(n,e,t,i,a){let o=function(...u){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(o=window[a]),window[a]=AL(o,n,e,t),{gtagCore:o,wrappedGtag:window[a]}}function RL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Hy)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=30,NL=1e3;class DL{constructor(e={},t=NL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ax=new DL;function kL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function OL(n){var e;const{appId:t,apiKey:i}=n,a={method:"GET",headers:kL(i)},o=yL.replace("{app-id}",t),u=await fetch(o,a);if(u.status!==200&&u.status!==304){let h="";try{const m=await u.json();!((e=m.error)===null||e===void 0)&&e.message&&(h=m.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function ML(n,e=Ax,t){const{appId:i,apiKey:a,measurementId:o}=n.options;if(!i)throw jn.create("no-app-id");if(!a){if(o)return{measurementId:o,appId:i};throw jn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new VL;return setTimeout(async()=>{h.abort()},_L),xx({appId:i,apiKey:a,measurementId:o},u,h,e)}async function xx(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=Ax){var o;const{appId:u,measurementId:h}=n;try{await PL(i,e)}catch(m){if(h)return Dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:u,measurementId:h};throw m}try{const m=await OL(n);return a.deleteThrottleMetadata(u),m}catch(m){const p=m;if(!LL(p)){if(a.deleteThrottleMetadata(u),h)return Dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:h};throw m}const y=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?iw(t,a.intervalMillis,IL):iw(t,a.intervalMillis),E={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return a.setThrottleMetadata(u,E),Dn.debug(`Calling attemptFetch again in ${y} millis`),xx(n,E,i,a)}}function PL(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),o=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(o),i(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LL(n){if(!(n instanceof Ti)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class VL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function UL(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const o=await e,u=Object.assign(Object.assign({},i),{send_to:o});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(){if(_C())try{await yC()}catch(n){return Dn.warn(jn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Dn.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BL(n,e,t,i,a,o,u){var h;const m=ML(n);m.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&Dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>Dn.error(S)),e.push(m);const p=jL().then(S=>{if(S)return i.getId()}),[y,E]=await Promise.all([m,p]);RL(o)||wL(o,y.measurementId),a("js",new Date);const b=(h=u==null?void 0:u.config)!==null&&h!==void 0?h:{};return b[gL]="firebase",b.update=!0,E!=null&&(b[pL]=E),a("config",y.measurementId,b),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.app=e}_delete(){return delete ac[this.app.options.appId],Promise.resolve()}}let ac={},db=[];const fb={};let Rg="dataLayer",FL="gtag",mb,Rx,pb=!1;function qL(){const n=[];if(pC()&&n.push("This is a browser extension environment."),H2()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=jn.create("invalid-analytics-context",{errorInfo:e});Dn.warn(t.message)}}function HL(n,e,t){qL();const i=n.options.appId;if(!i)throw jn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(ac[i]!=null)throw jn.create("already-exists",{id:i});if(!pb){bL(Rg);const{wrappedGtag:o,gtagCore:u}=xL(ac,db,fb,Rg,FL);Rx=o,mb=u,pb=!0}return ac[i]=BL(n,db,fb,e,mb,Rg,t),new zL(n)}function GL(n=kf()){n=_t(n);const e=Ws(n,of);return e.isInitialized()?e.getImmediate():$L(n)}function $L(n,e={}){const t=Ws(n,of);if(t.isInitialized()){const a=t.getImmediate();if(pc(e,t.getOptions()))return a;throw jn.create("already-initialized")}return t.initialize({options:e})}function QL(n,e,t,i){n=_t(n),UL(Rx,ac[n.app.options.appId],e,t,i).catch(a=>Dn.error(a))}const gb="@firebase/analytics",_b="0.10.11";function KL(){vi(new ai(of,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return HL(i,a,t)},"PUBLIC")),vi(new ai("analytics-internal",n,"PRIVATE")),In(gb,_b),In(gb,_b,"esm2017");function n(e){try{const t=e.getProvider(of).getImmediate();return{logEvent:(i,a,o)=>QL(t,i,a,o)}}catch(t){throw jn.create("interop-component-reg-failed",{reason:t})}}}KL();function Gy(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YL=Ix,Nx=new Qa("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Pc("@firebase/auth");function WL(n,...e){lf.logLevel<=je.WARN&&lf.warn(`Auth (${Ka}): ${n}`,...e)}function Vd(n,...e){lf.logLevel<=je.ERROR&&lf.error(`Auth (${Ka}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,...e){throw Qy(n,...e)}function _i(n,...e){return Qy(n,...e)}function $y(n,e,t){const i=Object.assign(Object.assign({},YL()),{[e]:t});return new Qa("auth","Firebase",i).create(e,{appName:n.name})}function Pa(n){return $y(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XL(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&$i(n,"argument-error"),$y(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Nx.create(n,...e)}function Ae(n,e,...t){if(!n)throw Qy(e,...t)}function Ar(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Vd(e),new Error(e)}function jr(n,e){n||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JL(){return yb()==="http:"||yb()==="https:"}function yb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JL()||pC()||"connection"in navigator)?navigator.onLine:!0}function e4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=sy()||gC()}get(){return ZL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(n,e){jr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new Fc(3e4,6e4);function Yy(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Za(n,e,t,i,a={}){return kx(n,a,async()=>{let o={},u={};i&&(e==="GET"?u=i:o={body:JSON.stringify(i)});const h=Rl(Object.assign({key:n.config.apiKey},u)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},o);return B2()||(p.referrerPolicy="no-referrer"),Dx.fetch()(Ox(n,n.config.apiHost,t,h),p)})}async function kx(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},t4),e);try{const a=new r4(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Cd(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Cd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Cd(n,"user-disabled",u);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw $y(n,y,p);$i(n,y)}}catch(a){if(a instanceof Ti)throw a;$i(n,"network-request-failed",{message:String(a)})}}async function i4(n,e,t,i,a={}){const o=await Za(n,e,t,i,a);return"mfaPendingCredential"in o&&$i(n,"multi-factor-auth-required",{_serverResponse:o}),o}function Ox(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?Ky(n.config,a):`${n.config.apiScheme}://${a}`}class r4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),n4.get())})}}function Cd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=_i(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(n,e){return Za(n,"POST","/v1/accounts:delete",e)}async function Mx(n,e){return Za(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a4(n,e=!1){const t=_t(n),i=await t.getIdToken(e),a=Wy(i);Ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:a,token:i,authTime:oc(Ig(a.auth_time)),issuedAtTime:oc(Ig(a.iat)),expirationTime:oc(Ig(a.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ig(n){return Number(n)*1e3}function Wy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Hd(t);return a?JSON.parse(a):(Vd("Failed to decode base64 JWT payload"),null)}catch(a){return Vd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function vb(n){const e=Wy(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ti&&o4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function o4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(n){var e;const t=n.auth,i=await n.getIdToken(),a=await gl(n,Mx(t,{idToken:i}));Ae(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Px(o.providerUserInfo):[],h=c4(n.providerData,u),m=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=m?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new P_(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,E)}async function u4(n){const e=_t(n);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c4(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Px(n){return n.map(e=>{var{providerId:t}=e,i=Gy(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(n,e){const t=await kx(n,{},async()=>{const i=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,u=Ox(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Dx.fetch()(u,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function d4(n,e){return Za(n,"POST","/v2/accounts:revokeToken",Yy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=vb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await h4(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,u=new il;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ae(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(Ae(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class xr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,o=Gy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new P_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await gl(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return a4(this,e)}reload(){return u4(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await uf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(Pa(this.auth));const e=await this.getIdToken();return await gl(this,s4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,o,u,h,m,p,y;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(a=t.email)!==null&&a!==void 0?a:void 0,S=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,U=(h=t.tenantId)!==null&&h!==void 0?h:void 0,V=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,z=(p=t.createdAt)!==null&&p!==void 0?p:void 0,G=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:H,emailVerified:Z,isAnonymous:le,providerData:te,stsTokenManager:M}=t;Ae(H&&M,e,"internal-error");const D=il.fromJSON(this.name,M);Ae(typeof H=="string",e,"internal-error"),Ss(E,e.name),Ss(b,e.name),Ae(typeof Z=="boolean",e,"internal-error"),Ae(typeof le=="boolean",e,"internal-error"),Ss(S,e.name),Ss(O,e.name),Ss(U,e.name),Ss(V,e.name),Ss(z,e.name),Ss(G,e.name);const C=new xr({uid:H,auth:e,email:b,emailVerified:Z,displayName:E,isAnonymous:le,photoURL:O,phoneNumber:S,tenantId:U,stsTokenManager:D,createdAt:z,lastLoginAt:G});return te&&Array.isArray(te)&&(C.providerData=te.map(R=>Object.assign({},R))),V&&(C._redirectEventId=V),C}static async _fromIdTokenResponse(e,t,i=!1){const a=new il;a.updateFromServerResponse(t);const o=new xr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await uf(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ae(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?Px(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new il;h.updateFromIdToken(i);const m=new xr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new P_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Map;function Rr(n){jr(n instanceof Function,"Expected a class definition");let e=Eb.get(n);return e?(jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Eb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Lx.type="NONE";const Tb=Lx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n,e,t){return`firebase:${n}:${e}:${t}`}class rl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=Ud(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ud("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new rl(Rr(Tb),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||Rr(Tb);const u=Ud(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(u);if(y){const E=xr._fromJSON(e,y);p!==o&&(h=E),o=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new rl(o,e,i):(o=m[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new rl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fx(e))return"Blackberry";if(qx(e))return"Webos";if(Ux(e))return"Safari";if((e.includes("chrome/")||jx(e))&&!e.includes("edge/"))return"Chrome";if(zx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Vx(n=pn()){return/firefox\//i.test(n)}function Ux(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jx(n=pn()){return/crios\//i.test(n)}function Bx(n=pn()){return/iemobile/i.test(n)}function zx(n=pn()){return/android/i.test(n)}function Fx(n=pn()){return/blackberry/i.test(n)}function qx(n=pn()){return/webos/i.test(n)}function Xy(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f4(n=pn()){var e;return Xy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m4(){return z2()&&document.documentMode===10}function Hx(n=pn()){return Xy(n)||zx(n)||qx(n)||Fx(n)||/windows phone/i.test(n)||Bx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(n,e=[]){let t;switch(n){case"Browser":t=wb(pn());break;case"Worker":t=`${wb(pn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ka}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((u,h)=>{try{const m=e(o);u(m)}catch(m){h(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(n,e={}){return Za(n,"GET","/v2/passwordPolicy",Yy(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=6;class y4{constructor(e){var t,i,a,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:_4,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,o,u,h;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(o=m.containsUppercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(h=m.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bb(this),this.idTokenSubscription=new bb(this),this.beforeStateQueue=new p4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await rl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mx(this,{idToken:e}),i=await xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ii(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&(m!=null&&m.user)&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(Pa(this));const t=e?_t(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g4(this),t=new y4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await d4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rr(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await rl.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&WL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wf(n){return _t(n)}class bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=X2(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E4(n){Jy=n}function T4(n){return Jy.loadJS(n)}function w4(){return Jy.gapiScript}function b4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n,e){const t=Ws(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(pc(o,e??{}))return a;$i(a,"already-initialized")}return t.initialize({options:e})}function C4(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Rr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function A4(n,e,t){const i=Wf(n);Ae(i._canInitEmulator,i,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=$x(e),{host:u,port:h}=x4(e),m=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${u}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),R4()}function $x(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function x4(n){const e=$x(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:Sb(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:Sb(u)}}}function Sb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function R4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n,e){return i4(n,"POST","/v1/accounts:signInWithIdp",Yy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="http://localhost";class za extends Qx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,o=Gy(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new za(i,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,sl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sl(e,t)}buildRequest(){const e={requestUri:I4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Zy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends qc{constructor(){super("facebook.com")}static credential(e){return za._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return za._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Cr.credential(t,i)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends qc{constructor(){super("github.com")}static credential(e){return za._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends qc{constructor(){super("twitter.com")}static credential(e,t){return za._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Is.credential(t,i)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await xr._fromIdTokenResponse(e,i,a),u=Cb(i);return new _l({user:o,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Cb(i);return new _l({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Cb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends Ti{constructor(e,t,i,a){var o;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,cf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new cf(e,t,i,a)}}function Kx(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cf._fromErrorAndOperation(n,o,e,i):o})}async function N4(n,e,t=!1){const i=await gl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _l._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(n,e,t=!1){const{auth:i}=n;if(ii(i.app))return Promise.reject(Pa(i));const a="reauthenticate";try{const o=await gl(n,Kx(i,a,e,n),t);Ae(o.idToken,i,"internal-error");const u=Wy(o.idToken);Ae(u,i,"internal-error");const{sub:h}=u;return Ae(n.uid===h,i,"user-mismatch"),_l._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$i(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(n,e,t=!1){if(ii(n.app))return Promise.reject(Pa(n));const i="signIn",a=await Kx(n,i,e),o=await _l._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(n,e){return Za(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=_t(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await gl(i,O4(i.auth,o));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const h=i.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function P4(n,e,t,i){return _t(n).onIdTokenChanged(e,t,i)}function L4(n,e,t){return _t(n).beforeAuthStateChanged(e,t)}function V4(n){return _t(n).signOut()}const hf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hf,"1"),this.storage.removeItem(hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=1e3,j4=10;class Wx extends Yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);m4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,j4):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},U4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wx.type="LOCAL";const B4=Wx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends Yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xx.type="SESSION";const Jx=Xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Xf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async p=>p(t.origin,o)),m=await z4(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((h,m)=>{const p=ev("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(y),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function q4(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function H4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $4(){return Zx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="firebaseLocalStorageDb",Q4=1,df="firebaseLocalStorage",tR="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jf(n,e){return n.transaction([df],e?"readwrite":"readonly").objectStore(df)}function K4(){const n=indexedDB.deleteDatabase(eR);return new Hc(n).toPromise()}function L_(){const n=indexedDB.open(eR,Q4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(df,{keyPath:tR})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(df)?e(i):(i.close(),await K4(),e(await L_()))})})}async function Ab(n,e,t){const i=Jf(n,!0).put({[tR]:e,value:t});return new Hc(i).toPromise()}async function Y4(n,e){const t=Jf(n,!1).get(e),i=await new Hc(t).toPromise();return i===void 0?null:i.value}function xb(n,e){const t=Jf(n,!0).delete(e);return new Hc(t).toPromise()}const W4=800,X4=3;class nR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await L_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>X4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance($4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await H4(),!this.activeServiceWorker)return;this.sender=new F4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await L_();return await Ab(e,hf,"1"),await xb(e,hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ab(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Y4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Jf(a,!1).getAll();return new Hc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nR.type="LOCAL";const J4=nR;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(n,e){return e?Rr(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends Qx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Z4(n){return k4(n.auth,new tv(n),n.bypassAuthState)}function eV(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),D4(t,new tv(n),n.bypassAuthState)}async function tV(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),N4(t,new tv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z4;case"linkViaPopup":case"linkViaRedirect":return tV;case"reauthViaPopup":case"reauthViaRedirect":return eV;default:$i(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new Fc(2e3,1e4);async function iV(n,e,t){if(ii(n.app))return Promise.reject(_i(n,"operation-not-supported-in-this-environment"));const i=Wf(n);XL(n,e,Zy);const a=iR(i,t);return new Oa(i,"signInViaPopup",e,a).executeNotNull()}class Oa extends rR{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Oa.currentPopupAction&&Oa.currentPopupAction.cancel(),Oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nV.get())};e()}}Oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="pendingRedirect",jd=new Map;class sV extends rR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=jd.get(this.auth._key());if(!e){try{const i=await aV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}jd.set(this.auth._key(),e)}return this.bypassAuthState||jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aV(n,e){const t=uV(e),i=lV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function oV(n,e){jd.set(n._key(),e)}function lV(n){return Rr(n._redirectPersistence)}function uV(n){return Ud(rV,n.config.apiKey,n.name)}async function cV(n,e,t=!1){if(ii(n.app))return Promise.reject(Pa(n));const i=Wf(n),a=iR(i,e),u=await new sV(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=10*60*1e3;class dV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sR(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(_i(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rb(e))}saveEventToCache(e){this.cachedEventUids.add(Rb(e)),this.lastProcessedEventTime=Date.now()}}function Rb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(n,e={}){return Za(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gV=/^https?/;async function _V(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mV(n);for(const t of e)try{if(yV(t))return}catch{}$i(n,"unauthorized-domain")}function yV(n){const e=M_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!gV.test(t))return!1;if(pV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=new Fc(3e4,6e4);function Ib(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EV(n){return new Promise((e,t)=>{var i,a,o;function u(){Ib(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ib(),t(_i(n,"network-request-failed"))},timeout:vV.get()})}if(!((a=(i=qi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=qi().gapi)===null||o===void 0)&&o.load)u();else{const h=b4("iframefcb");return qi()[h]=()=>{gapi.load?u():t(_i(n,"network-request-failed"))},T4(`${w4()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw Bd=null,e})}let Bd=null;function TV(n){return Bd=Bd||EV(n),Bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=new Fc(5e3,15e3),bV="__/auth/iframe",SV="emulator/auth/iframe",CV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xV(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ky(e,SV):`https://${n.config.authDomain}/${bV}`,i={apiKey:e.apiKey,appName:n.name,v:Ka},a=AV.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Rl(i).slice(1)}`}async function RV(n){const e=await TV(n),t=qi().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:xV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CV,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const u=_i(n,"network-request-failed"),h=qi().setTimeout(()=>{o(u)},wV.get());function m(){qi().clearTimeout(h),a(i)}i.ping(m).then(m,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NV=500,DV=600,kV="_blank",OV="http://localhost";class Nb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MV(n,e,t,i=NV,a=DV){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const m=Object.assign(Object.assign({},IV),{width:i.toString(),height:a.toString(),top:o,left:u}),p=pn().toLowerCase();t&&(h=jx(p)?kV:t),Vx(p)&&(e=e||OV,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[S,O])=>`${b}${S}=${O},`,"");if(f4(p)&&h!=="_self")return PV(e||"",h),new Nb(null);const E=window.open(e||"",h,y);Ae(E,n,"popup-blocked");try{E.focus()}catch{}return new Nb(E)}function PV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="__/auth/handler",VV="emulator/auth/handler",UV=encodeURIComponent("fac");async function Db(n,e,t,i,a,o){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ka,eventId:a};if(e instanceof Zy){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",u_(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))u[y]=E}if(e instanceof qc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await n._getAppCheckToken(),p=m?`#${UV}=${encodeURIComponent(m)}`:"";return`${jV(n)}?${Rl(h).slice(1)}${p}`}function jV({config:n}){return n.emulator?Ky(n,VV):`https://${n.authDomain}/${LV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class BV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jx,this._completeRedirectFn=cV,this._overrideRedirectResult=oV}async _openPopup(e,t,i,a){var o;jr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await Db(e,t,i,M_(),a);return MV(e,u,ev())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await Db(e,t,i,M_(),a);return q4(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(jr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RV(e),i=new dV(e);return t.register("authEvent",a=>(Ae(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ng,{type:Ng},a=>{var o;const u=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Ng];u!==void 0&&t(!!u),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_V(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hx()||Ux()||Xy()}}const zV=BV;var kb="@firebase/auth",Ob="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HV(n){vi(new ai("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gx(n)},p=new v4(i,a,o,m);return C4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),vi(new ai("auth-internal",e=>{const t=Wf(e.getProvider("auth").getImmediate());return(i=>new FV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),In(kb,Ob,qV(n)),In(kb,Ob,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=5*60,$V=fC("authIdTokenMaxAge")||GV;let Mb=null;const QV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$V)return;const a=t==null?void 0:t.token;Mb!==a&&(Mb=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Zf(n=kf()){const e=Ws(n,"auth");if(e.isInitialized())return e.getImmediate();const t=S4(n,{popupRedirectResolver:zV,persistence:[J4,B4,Jx]}),i=fC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=QV(o.toString());L4(t,u,()=>u(t.currentUser)),P4(t,h=>u(h))}}const a=cC("auth");return a&&A4(t,`http://${a}`),t}function KV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}E4({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const o=_i("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",KV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HV("Browser");var Pb={};const Lb="@firebase/database",Vb="1.0.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aR="";function YV(n){aR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:mc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Yi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new WV(e)}}catch{}return new XV},Ma=oR("localStorage"),JV=oR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=new Pc("@firebase/database"),ZV=function(){let n=1;return function(){return n++}}(),lR=function(n){const e=eD(n),t=new W2;t.update(e);const i=t.digest();return ry.encodeByteArray(i)},Gc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Gc.apply(null,i):typeof i=="object"?e+=zt(i):e+=i,e+=" "}return e};let lc=null,Ub=!0;const e6=function(n,e){ce(!0,"Can't turn on custom loggers persistently."),al.logLevel=je.VERBOSE,lc=al.log.bind(al)},sn=function(...n){if(Ub===!0&&(Ub=!1,lc===null&&JV.get("logging_enabled")===!0&&e6()),lc){const e=Gc.apply(null,n);lc(e)}},$c=function(n){return function(...e){sn(n,...e)}},V_=function(...n){const e="FIREBASE INTERNAL ERROR: "+Gc(...n);al.error(e)},Br=function(...n){const e=`FIREBASE FATAL ERROR: ${Gc(...n)}`;throw al.error(e),new Error(e)},bn=function(...n){const e="FIREBASE WARNING: "+Gc(...n);al.warn(e)},t6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},n6=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},yl="[MIN_NAME]",Fa="[MAX_NAME]",eo=function(n,e){if(n===e)return 0;if(n===yl||e===Fa)return-1;if(e===yl||n===Fa)return 1;{const t=jb(n),i=jb(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},i6=function(n,e){return n===e?0:n<e?-1:1},$u=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zt(e))},iv=function(n){if(typeof n!="object"||n===null)return zt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=zt(e[i]),t+=":",t+=iv(n[e[i]]);return t+="}",t},uR=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function ln(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cR=function(n){ce(!nv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,o,u,h,m;n===0?(o=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,u=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,u=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(m=t;m;m-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(a?1:0),p.reverse();const y=p.join("");let E="";for(m=0;m<64;m+=8){let b=parseInt(y.substr(m,8),2).toString(16);b.length===1&&(b="0"+b),E=E+b}return E.toLowerCase()},r6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},s6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function a6(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const o6=new RegExp("^-?(0*)\\d{1,10}$"),l6=-2147483648,u6=2147483647,jb=function(n){if(o6.test(n)){const e=Number(n);if(e>=l6&&e<=u6)return e}return null},Ml=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw bn("Exception was thrown by user callback.",t),e},Math.floor(0))}},c6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},uc=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,ii(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){bn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bn(e)}}class zd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="5",hR="v",dR="s",fR="r",mR="f",pR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gR="ls",_R="p",U_="ac",yR="websocket",vR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t,i,a,o=!1,u="",h=!1,m=!1){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ma.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ma.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function f6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function TR(n,e,t){ce(typeof e=="string","typeof type must == string"),ce(typeof t=="object","typeof params must == object");let i;if(e===yR)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===vR)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);f6(n)&&(t.ns=n.namespace);const a=[];return ln(t,(o,u)=>{a.push(o+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.counters_={}}incrementCounter(e,t=1){Yi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return O2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg={},kg={};function sv(n){const e=n.toString();return Dg[e]||(Dg[e]=new m6),Dg[e]}function p6(n,e){const t=n.toString();return kg[t]||(kg[t]=e()),kg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Ml(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="start",_6="close",y6="pLPCommand",v6="pRTLPCB",wR="id",bR="pw",SR="ser",E6="cb",T6="seg",w6="ts",b6="d",S6="dframe",CR=1870,AR=30,C6=CR-AR,A6=25e3,x6=3e4;class tl{constructor(e,t,i,a,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$c(e),this.stats_=sv(t),this.urlFn=m=>(this.appCheckToken&&(m[U_]=this.appCheckToken),TR(t,vR,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new g6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(x6)),n6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new av((...o)=>{const[u,h,m,p,y]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Bb)this.id=h,this.password=m;else if(u===_6)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[Bb]="t",i[SR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[E6]=this.scriptTagHolder.uniqueCallbackIdentifier),i[hR]=rv,this.transportSessionId&&(i[dR]=this.transportSessionId),this.lastSessionId&&(i[gR]=this.lastSessionId),this.applicationId&&(i[_R]=this.applicationId),this.appCheckToken&&(i[U_]=this.appCheckToken),typeof location<"u"&&location.hostname&&pR.test(location.hostname)&&(i[fR]=mR);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tl.forceAllow_=!0}static forceDisallow(){tl.forceDisallow_=!0}static isAvailable(){return tl.forceAllow_?!0:!tl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!r6()&&!s6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=lC(t),a=uR(i,C6);for(let o=0;o<a.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[S6]="t",i[wR]=e,i[bR]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class av{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ZV(),window[y6+this.uniqueCallbackIdentifier]=e,window[v6+this.uniqueCallbackIdentifier]=t,this.myIFrame=av.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){sn("frame writing exception"),h.stack&&sn(h.stack),sn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||sn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wR]=this.myID,e[bR]=this.myPW,e[SR]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AR+i.length<=CR;){const u=this.pendingSegs.shift();i=i+"&"+T6+a+"="+u.seg+"&"+w6+a+"="+u.ts+"&"+b6+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(A6)),o=()=>{clearTimeout(a),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=16384,I6=45e3;let ff=null;typeof MozWebSocket<"u"?ff=MozWebSocket:typeof WebSocket<"u"&&(ff=WebSocket);class mi{constructor(e,t,i,a,o,u,h){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$c(this.connId),this.stats_=sv(t),this.connURL=mi.connectionURL_(t,u,h,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,o){const u={};return u[hR]=rv,typeof location<"u"&&location.hostname&&pR.test(location.hostname)&&(u[fR]=mR),t&&(u[dR]=t),i&&(u[gR]=i),a&&(u[U_]=a),o&&(u[_R]=o),TR(e,yR,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ma.set("previous_websocket_failure",!0);try{let i;F2(),this.mySock=new ff(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){mi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ff!==null&&!mi.forceDisallow_}static previouslyFailed(){return Ma.isInMemoryStorage||Ma.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ma.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=mc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=uR(t,R6);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(I6))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}mi.responsesRequiredToBeHealthy=2;mi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{static get ALL_TRANSPORTS(){return[tl,mi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=mi&&mi.isAvailable();let i=t&&!mi.previouslyFailed();if(e.webSocketOnly&&(t||bn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mi];else{const a=this.transports_=[];for(const o of Sc.ALL_TRANSPORTS)o&&o.isAvailable()&&a.push(o);Sc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Sc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=6e4,D6=5e3,k6=10*1024,O6=100*1024,Og="t",zb="d",M6="s",Fb="r",P6="e",qb="o",Hb="a",Gb="n",$b="p",L6="h";class V6{constructor(e,t,i,a,o,u,h,m,p,y){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=p,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$c("c:"+this.id+":"),this.transportManager_=new Sc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=uc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>O6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>k6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Og in e){const t=e[Og];t===Hb?this.upgradeIfSecondaryHealthy_():t===Fb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===qb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=$u("t",e),i=$u("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$b,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Hb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=$u("t",e),i=$u("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=$u(Og,e);if(zb in e){const i=e[zb];if(t===L6){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===Gb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===M6?this.onConnectionShutdown_(i):t===Fb?this.onReset_(i):t===P6?V_("Server Error: "+i):t===qb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):V_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),rv!==i&&bn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),uc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(N6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(D6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$b,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ma.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let o=0;o<a.length;o++)if(a[o].callback===t&&(!i||i===a[o].context)){a.splice(o,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends RR{static getInstance(){return new mf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=32,Kb=768;class at{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ze(){return new at("")}function Le(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $s(n){return n.pieces_.length-n.pieceNum_}function ht(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new at(n.pieces_,e)}function ov(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function U6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Cc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function IR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new at(e,0)}function wt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof at)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new at(t,0)}function Be(n){return n.pieceNum_>=n.pieces_.length}function wn(n,e){const t=Le(n),i=Le(e);if(t===null)return e;if(t===i)return wn(ht(n),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function j6(n,e){const t=Cc(n,0),i=Cc(e,0);for(let a=0;a<t.length&&a<i.length;a++){const o=eo(t[a],i[a]);if(o!==0)return o}return t.length===i.length?0:t.length<i.length?-1:1}function lv(n,e){if($s(n)!==$s(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function si(n,e){let t=n.pieceNum_,i=e.pieceNum_;if($s(n)>$s(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class B6{constructor(e,t){this.errorPrefix_=t,this.parts_=Cc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Df(this.parts_[i]);NR(this)}}function z6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Df(e),NR(n)}function F6(n){const e=n.parts_.pop();n.byteLength_-=Df(e),n.parts_.length>0&&(n.byteLength_-=1)}function NR(n){if(n.byteLength_>Kb)throw new Error(n.errorPrefix_+"has a key path longer than "+Kb+" bytes ("+n.byteLength_+").");if(n.parts_.length>Qb)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qb+") or object contains a cycle "+Na(n))}function Na(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends RR{static getInstance(){return new uv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=1e3,q6=60*5*1e3,Yb=30*1e3,H6=1.3,G6=3e4,$6="server_kill",Wb=3;class Pr extends xR{constructor(e,t,i,a,o,u,h,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=m,this.id=Pr.nextPersistentConnectionId_++,this.log_=$c("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qu,this.maxReconnectDelay_=q6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,o={r:a,a:e,b:t};this.log_(zt(o)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new Mc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,a){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const o={p:i},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,h=>{const m=h.d,p=h.s;Pr.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(p,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Yi(e,"w")){const i=ll(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();bn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Y2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=K2(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const o=a.s,u=a.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";a&&(o.q=i,o.t=a),this.sendRequest(u,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,o){this.initConnection_();const u={p:t,d:i};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+zt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):V_("Unrecognized action received from server: "+zt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>G6&&(this.reconnectDelay_=Qu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*H6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Pr.nextConnectionId_++,o=this.lastSessionId;let u=!1,h=null;const m=function(){h?h.close():(u=!0,i())},p=function(E){ce(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(E)};this.realtime_={close:m,sendRequest:p};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,b]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=b&&b.token,h=new V6(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,S=>{bn(S+" ("+this.repoInfo_.toString()+")"),this.interrupt($6)},o))}catch(E){this.log_("Failed to get token: "+E),u||(this.repoInfo_.nodeAdmin&&bn(E),m())}}}interrupt(e){sn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){sn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],u_(this.interruptReasons_)&&(this.reconnectDelay_=Qu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>iv(o)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new at(e).toString();let a;if(this.listens.has(i)){const o=this.listens.get(i);a=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){sn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Wb&&(this.reconnectDelay_=Yb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){sn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Wb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+aR.replace(/\./g,"-")]=1,sy()?e["framework.cordova"]=1:gC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mf.getInstance().currentlyOnline();return u_(this.interruptReasons_)&&e}}Pr.nextPersistentConnectionId_=0;Pr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ve(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ve(yl,e),a=new Ve(yl,t);return this.compare(i,a)!==0}minPost(){return Ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad;class DR extends em{static get __EMPTY_NODE(){return Ad}static set __EMPTY_NODE(e){Ad=e}compare(e,t){return eo(e.name,t.name)}isDefinedOn(e){throw xl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ve.MIN}maxPost(){return new Ve(Fa,Ad)}makePost(e,t){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new Ve(e,Ad)}toString(){return".key"}}const ol=new DR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,i,a,o=null){this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=a??Rn.EMPTY_NODE,this.right=o??Rn.EMPTY_NODE}copy(e,t,i,a,o){return new Zt(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return o<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Rn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Zt.RED=!0;Zt.BLACK=!1;class Q6{copy(e,t,i,a,o){return this}insert(e,t,i){return new Zt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Rn{constructor(e,t=Rn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Rn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Rn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xd(this.root_,null,this.comparator_,!0,e)}}Rn.EMPTY_NODE=new Q6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(n,e){return eo(n.name,e.name)}function cv(n,e){return eo(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j_;function Y6(n){j_=n}const kR=function(n){return typeof n=="number"?"number:"+cR(n):"string:"+n},OR=function(n){if(n.isLeafNode()){const e=n.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yi(e,".sv"),"Priority must be a string or number.")}else ce(n===j_||n.isEmpty(),"priority of unexpected type.");ce(n===j_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xb;class Xt{static set __childrenNodeConstructor(e){Xb=e}static get __childrenNodeConstructor(){return Xb}constructor(e,t=Xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Be(e)?this:Le(e)===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Le(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ce(i!==".priority"||$s(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+kR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=cR(this.value_):e+=this.value_,this.lazyHash_=lR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xt.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=Xt.VALUE_TYPE_ORDER.indexOf(t),o=Xt.VALUE_TYPE_ORDER.indexOf(i);return ce(a>=0,"Unknown leaf type: "+t),ce(o>=0,"Unknown leaf type: "+i),a===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MR,PR;function W6(n){MR=n}function X6(n){PR=n}class J6 extends em{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),o=i.compareTo(a);return o===0?eo(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ve.MIN}maxPost(){return new Ve(Fa,new Xt("[PRIORITY-POST]",PR))}makePost(e,t){const i=MR(e);return new Ve(t,new Xt("[PRIORITY-POST]",i))}toString(){return".priority"}}const bt=new J6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=Math.log(2);class eU{constructor(e){const t=o=>parseInt(Math.log(o)/Z6,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pf=function(n,e,t,i){n.sort(e);const a=function(m,p){const y=p-m;let E,b;if(y===0)return null;if(y===1)return E=n[m],b=t?t(E):E,new Zt(b,E.node,Zt.BLACK,null,null);{const S=parseInt(y/2,10)+m,O=a(m,S),U=a(S+1,p);return E=n[S],b=t?t(E):E,new Zt(b,E.node,Zt.BLACK,O,U)}},o=function(m){let p=null,y=null,E=n.length;const b=function(O,U){const V=E-O,z=E;E-=O;const G=a(V+1,z),H=n[V],Z=t?t(H):H;S(new Zt(Z,H.node,U,null,G))},S=function(O){p?(p.left=O,p=O):(y=O,p=O)};for(let O=0;O<m.count;++O){const U=m.nextBitIsOne(),V=Math.pow(2,m.count-(O+1));U?b(V,Zt.BLACK):(b(V,Zt.BLACK),b(V,Zt.RED))}return y},u=new eU(n.length),h=o(u);return new Rn(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg;const Yo={};class Ir{static get Default(){return ce(Yo&&bt,"ChildrenNode.ts has not been loaded"),Mg=Mg||new Ir({".priority":Yo},{".priority":bt}),Mg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ll(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Rn?t:null}hasIndex(e){return Yi(this.indexSet_,e.toString())}addIndex(e,t){ce(e!==ol,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const o=t.getIterator(Ve.Wrap);let u=o.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=o.getNext();let h;a?h=pf(i,e.getCompare()):h=Yo;const m=e.toString(),p=Object.assign({},this.indexSet_);p[m]=e;const y=Object.assign({},this.indexes_);return y[m]=h,new Ir(y,p)}addToIndexes(e,t){const i=Gd(this.indexes_,(a,o)=>{const u=ll(this.indexSet_,o);if(ce(u,"Missing index implementation for "+o),a===Yo)if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(Ve.Wrap);let p=m.getNext();for(;p;)p.name!==e.name&&h.push(p),p=m.getNext();return h.push(e),pf(h,u.getCompare())}else return Yo;else{const h=t.get(e.name);let m=a;return h&&(m=m.remove(new Ve(e.name,h))),m.insert(e,e.node)}});return new Ir(i,this.indexSet_)}removeFromIndexes(e,t){const i=Gd(this.indexes_,a=>{if(a===Yo)return a;{const o=t.get(e.name);return o?a.remove(new Ve(e.name,o)):a}});return new Ir(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku;class Se{static get EMPTY_NODE(){return Ku||(Ku=new Se(new Rn(cv),null,Ir.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&OR(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ku}updatePriority(e){return this.children_.isEmpty()?this:new Se(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Ku:t}}getChild(e){const t=Le(e);return t===null?this:this.getImmediateChild(t).getChild(ht(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ce(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ve(e,t);let a,o;t.isEmpty()?(a=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?Ku:this.priorityNode_;return new Se(a,u,o)}}updateChild(e,t){const i=Le(e);if(i===null)return t;{ce(Le(e)!==".priority"||$s(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ht(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,o=!0;if(this.forEachChild(bt,(u,h)=>{t[u]=h.val(e),i++,o&&Se.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):o=!1}),!e&&o&&a<2*i){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+kR(this.getPriority().val())+":"),this.forEachChild(bt,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":lR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const o=a.getPredecessorKey(new Ve(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ve(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ve(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Ve.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)<0;)a.getNext(),o=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Ve.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)>0;)a.getNext(),o=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qc?-1:0}withIndex(e){if(e===ol||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Se(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ol||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(bt),a=t.getIterator(bt);let o=i.getNext(),u=a.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=a.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===ol?null:this.indexMap_.get(e.toString())}}Se.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class tU extends Se{constructor(){super(new Rn(cv),Se.EMPTY_NODE,Ir.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Se.EMPTY_NODE}isEmpty(){return!1}}const Qc=new tU;Object.defineProperties(Ve,{MIN:{value:new Ve(yl,Se.EMPTY_NODE)},MAX:{value:new Ve(Fa,Qc)}});DR.__EMPTY_NODE=Se.EMPTY_NODE;Xt.__childrenNodeConstructor=Se;Y6(Qc);X6(Qc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=!0;function Bt(n,e=null){if(n===null)return Se.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Xt(t,Bt(e))}if(!(n instanceof Array)&&nU){const t=[];let i=!1;if(ln(n,(u,h)=>{if(u.substring(0,1)!=="."){const m=Bt(h);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Ve(u,m)))}}),t.length===0)return Se.EMPTY_NODE;const o=pf(t,K6,u=>u.name,cv);if(i){const u=pf(t,bt.getCompare());return new Se(o,Bt(e),new Ir({".priority":u},{".priority":bt}))}else return new Se(o,Bt(e),Ir.Default)}else{let t=Se.EMPTY_NODE;return ln(n,(i,a)=>{if(Yi(n,i)&&i.substring(0,1)!=="."){const o=Bt(a);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Bt(e))}}W6(Bt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU extends em{constructor(e){super(),this.indexPath_=e,ce(!Be(e)&&Le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),o=i.compareTo(a);return o===0?eo(e.name,t.name):o}makePost(e,t){const i=Bt(e),a=Se.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ve(t,a)}maxPost(){const e=Se.EMPTY_NODE.updateChild(this.indexPath_,Qc);return new Ve(Fa,e)}toString(){return Cc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU extends em{compare(e,t){const i=e.node.compareTo(t.node);return i===0?eo(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ve.MIN}maxPost(){return Ve.MAX}makePost(e,t){const i=Bt(e);return new Ve(t,i)}toString(){return".value"}}const sU=new rU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(n){return{type:"value",snapshotNode:n}}function vl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ac(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function xc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function aU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.index_=e}updateChild(e,t,i,a,o,u){ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Ac(t,h)):ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(vl(t,i)):u.trackChildChange(xc(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(bt,(a,o)=>{t.hasChild(a)||i.trackChildChange(Ac(a,o))}),t.isLeafNode()||t.forEachChild(bt,(a,o)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(o)||i.trackChildChange(xc(a,o,u))}else i.trackChildChange(vl(a,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Se.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.indexedFilter_=new hv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rc.getStartPost_(e),this.endPost_=Rc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,o,u){return this.matches(new Ve(t,i))||(i=Se.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,o,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Se.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Se.EMPTY_NODE);const o=this;return t.forEachChild(bt,(u,h)=>{o.matches(new Ve(u,h))||(a=a.updateImmediateChild(u,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Rc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,o,u){return this.rangedFilter_.matches(new Ve(t,i))||(i=Se.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,o,u):this.fullLimitUpdateChild_(e,t,i,o,u)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=Se.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(Se.EMPTY_NODE);let o;this.reverse_?o=a.getReverseIterator(this.index_):o=a.getIterator(this.index_);let u=0;for(;o.hasNext();){const h=o.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:a=a.updateImmediateChild(h.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,o){let u;if(this.reverse_){const E=this.index_.getCompare();u=(b,S)=>E(S,b)}else u=this.index_.getCompare();const h=e;ce(h.numChildren()===this.limit_,"");const m=new Ve(t,i),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(h.hasChild(t)){const E=h.getImmediateChild(t);let b=a.getChildAfterChild(this.index_,p,this.reverse_);for(;b!=null&&(b.name===t||h.hasChild(b.name));)b=a.getChildAfterChild(this.index_,b,this.reverse_);const S=b==null?1:u(b,m);if(y&&!i.isEmpty()&&S>=0)return o!=null&&o.trackChildChange(xc(t,i,E)),h.updateImmediateChild(t,i);{o!=null&&o.trackChildChange(Ac(t,E));const U=h.updateImmediateChild(t,Se.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(o!=null&&o.trackChildChange(vl(b.name,b.node)),U.updateImmediateChild(b.name,b.node)):U}}else return i.isEmpty()?e:y&&u(p,m)>=0?(o!=null&&(o.trackChildChange(Ac(p.name,p.node)),o.trackChildChange(vl(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(p.name,Se.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yl}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bt}copy(){const e=new dv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lU(n){return n.loadsAllData()?new hv(n.getIndex()):n.hasLimit()?new oU(n):new Rc(n)}function Jb(n){const e={};if(n.isDefault())return e;let t;if(n.index_===bt?t="$priority":n.index_===sU?t="$value":n.index_===ol?t="$key":(ce(n.index_ instanceof iU,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=zt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+zt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=zt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Zb(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==bt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends xR{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=$c("p:rest:"),this.listens_={}}listen(e,t,i,a){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=gf.getListenId_(e,i),h={};this.listens_[u]=h;const m=Jb(e._queryParams);this.restRequest_(o+".json",m,(p,y)=>{let E=y;if(p===404&&(E=null,p=null),p===null&&this.onDataUpdate_(o,E,!1,i),ll(this.listens_,u)===h){let b;p?p===401?b="permission_denied":b="rest_error:"+p:b="ok",a(b,null)}})}unlisten(e,t){const i=gf.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Jb(e._queryParams),i=e._path.toString(),a=new Mc;return this.restRequest_(i+".json",t,(o,u)=>{let h=u;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,o])=>{a&&a.accessToken&&(t.auth=a.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Rl(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=mc(h.responseText)}catch{bn("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,m)}else h.status!==401&&h.status!==404&&bn("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(){this.rootNode_=Se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){return{value:null,children:new Map}}function VR(n,e,t){if(Be(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Le(e);n.children.has(i)||n.children.set(i,_f());const a=n.children.get(i);e=ht(e),VR(a,e,t)}}function B_(n,e,t){n.value!==null?t(e,n.value):cU(n,(i,a)=>{const o=new at(e.toString()+"/"+i);B_(a,o,t)})}function cU(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ln(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=10*1e3,dU=30*1e3,fU=5*60*1e3;class mU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hU(e);const i=eS+(dU-eS)*Math.random();uc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ln(e,(a,o)=>{o>0&&Yi(this.statsToReport_,a)&&(t[a]=o,i=!0)}),i&&this.server_.reportStats(t),uc(this.reportStats_.bind(this),Math.floor(Math.random()*2*fU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gi||(gi={}));function fv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=gi.ACK_USER_WRITE,this.source=fv()}operationForChild(e){if(Be(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new at(e));return new yf(Ze(),t,this.revert)}}else return ce(Le(this.path)===e,"operationForChild called for unrelated child."),new yf(ht(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.source=e,this.path=t,this.type=gi.LISTEN_COMPLETE}operationForChild(e){return Be(this.path)?new Ic(this.source,Ze()):new Ic(this.source,ht(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=gi.OVERWRITE}operationForChild(e){return Be(this.path)?new qa(this.source,Ze(),this.snap.getImmediateChild(e)):new qa(this.source,ht(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=gi.MERGE}operationForChild(e){if(Be(this.path)){const t=this.children.subtree(new at(e));return t.isEmpty()?null:t.value?new qa(this.source,Ze(),t.value):new El(this.source,Ze(),t)}else return ce(Le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new El(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Be(e))return this.isFullyInitialized()&&!this.filtered_;const t=Le(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gU(n,e,t,i){const a=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(aU(u.childName,u.snapshotNode))}),Yu(n,a,"child_removed",e,i,t),Yu(n,a,"child_added",e,i,t),Yu(n,a,"child_moved",o,i,t),Yu(n,a,"child_changed",e,i,t),Yu(n,a,"value",e,i,t),a}function Yu(n,e,t,i,a,o){const u=i.filter(h=>h.type===t);u.sort((h,m)=>yU(n,h,m)),u.forEach(h=>{const m=_U(n,h,o);a.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(m,n.query_))})})}function _U(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function yU(n,e,t){if(e.childName==null||t.childName==null)throw xl("Should only compare child_ events.");const i=new Ve(e.childName,e.snapshotNode),a=new Ve(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(n,e){return{eventCache:n,serverCache:e}}function cc(n,e,t,i){return tm(new Qs(e,t,i),n.serverCache)}function UR(n,e,t,i){return tm(n.eventCache,new Qs(e,t,i))}function vf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ha(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg;const vU=()=>(Pg||(Pg=new Rn(i6)),Pg);class ct{static fromObject(e){let t=new ct(null);return ln(e,(i,a)=>{t=t.set(new at(i),a)}),t}constructor(e,t=vU()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ze(),value:this.value};if(Be(e))return null;{const i=Le(e),a=this.children.get(i);if(a!==null){const o=a.findRootMostMatchingPathAndValue(ht(e),t);return o!=null?{path:wt(new at(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Be(e))return this;{const t=Le(e),i=this.children.get(t);return i!==null?i.subtree(ht(e)):new ct(null)}}set(e,t){if(Be(e))return new ct(t,this.children);{const i=Le(e),o=(this.children.get(i)||new ct(null)).set(ht(e),t),u=this.children.insert(i,o);return new ct(this.value,u)}}remove(e){if(Be(e))return this.children.isEmpty()?new ct(null):new ct(null,this.children);{const t=Le(e),i=this.children.get(t);if(i){const a=i.remove(ht(e));let o;return a.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,a),this.value===null&&o.isEmpty()?new ct(null):new ct(this.value,o)}else return this}}get(e){if(Be(e))return this.value;{const t=Le(e),i=this.children.get(t);return i?i.get(ht(e)):null}}setTree(e,t){if(Be(e))return t;{const i=Le(e),o=(this.children.get(i)||new ct(null)).setTree(ht(e),t);let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),new ct(this.value,u)}}fold(e){return this.fold_(Ze(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,o)=>{i[a]=o.fold_(wt(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Ze(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(Be(e))return null;{const o=Le(e),u=this.children.get(o);return u?u.findOnPath_(ht(e),wt(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ze(),t)}foreachOnPath_(e,t,i){if(Be(e))return this;{this.value&&i(t,this.value);const a=Le(e),o=this.children.get(a);return o?o.foreachOnPath_(ht(e),wt(t,a),i):new ct(null)}}foreach(e){this.foreach_(Ze(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(wt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.writeTree_=e}static empty(){return new yi(new ct(null))}}function hc(n,e,t){if(Be(e))return new yi(new ct(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let o=i.value;const u=wn(a,e);return o=o.updateChild(u,t),new yi(n.writeTree_.set(a,o))}else{const a=new ct(t),o=n.writeTree_.setTree(e,a);return new yi(o)}}}function z_(n,e,t){let i=n;return ln(t,(a,o)=>{i=hc(i,wt(e,a),o)}),i}function tS(n,e){if(Be(e))return yi.empty();{const t=n.writeTree_.setTree(e,new ct(null));return new yi(t)}}function F_(n,e){return to(n,e)!=null}function to(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(wn(t.path,e)):null}function nS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(bt,(i,a)=>{e.push(new Ve(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Ve(i,a.value))}),e}function Vs(n,e){if(Be(e))return n;{const t=to(n,e);return t!=null?new yi(new ct(t)):new yi(n.writeTree_.subtree(e))}}function q_(n){return n.writeTree_.isEmpty()}function Tl(n,e){return jR(Ze(),n.writeTree_,e)}function jR(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,o)=>{a===".priority"?(ce(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=jR(wt(n,a),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(wt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n,e){return qR(e,n)}function EU(n,e,t,i,a){ce(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=hc(n.visibleWrites,e,t)),n.lastWriteId=i}function TU(n,e,t,i){ce(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=z_(n.visibleWrites,e,t),n.lastWriteId=i}function wU(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function bU(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);ce(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,o=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&SU(h,i.path)?a=!1:si(i.path,h.path)&&(o=!0)),u--}if(a){if(o)return CU(n),!0;if(i.snap)n.visibleWrites=tS(n.visibleWrites,i.path);else{const h=i.children;ln(h,m=>{n.visibleWrites=tS(n.visibleWrites,wt(i.path,m))})}return!0}else return!1}function SU(n,e){if(n.snap)return si(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&si(wt(n.path,t),e))return!0;return!1}function CU(n){n.visibleWrites=BR(n.allWrites,AU,Ze()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function AU(n){return n.visible}function BR(n,e,t){let i=yi.empty();for(let a=0;a<n.length;++a){const o=n[a];if(e(o)){const u=o.path;let h;if(o.snap)si(t,u)?(h=wn(t,u),i=hc(i,h,o.snap)):si(u,t)&&(h=wn(u,t),i=hc(i,Ze(),o.snap.getChild(h)));else if(o.children){if(si(t,u))h=wn(t,u),i=z_(i,h,o.children);else if(si(u,t))if(h=wn(u,t),Be(h))i=z_(i,Ze(),o.children);else{const m=ll(o.children,Le(h));if(m){const p=m.getChild(ht(h));i=hc(i,Ze(),p)}}}else throw xl("WriteRecord should have .snap or .children")}}return i}function zR(n,e,t,i,a){if(!i&&!a){const o=to(n.visibleWrites,e);if(o!=null)return o;{const u=Vs(n.visibleWrites,e);if(q_(u))return t;if(t==null&&!F_(u,Ze()))return null;{const h=t||Se.EMPTY_NODE;return Tl(u,h)}}}else{const o=Vs(n.visibleWrites,e);if(!a&&q_(o))return t;if(!a&&t==null&&!F_(o,Ze()))return null;{const u=function(p){return(p.visible||a)&&(!i||!~i.indexOf(p.writeId))&&(si(p.path,e)||si(e,p.path))},h=BR(n.allWrites,u,e),m=t||Se.EMPTY_NODE;return Tl(h,m)}}}function xU(n,e,t){let i=Se.EMPTY_NODE;const a=to(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(bt,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=Vs(n.visibleWrites,e);return t.forEachChild(bt,(u,h)=>{const m=Tl(Vs(o,new at(u)),h);i=i.updateImmediateChild(u,m)}),nS(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const o=Vs(n.visibleWrites,e);return nS(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function RU(n,e,t,i,a){ce(i||a,"Either existingEventSnap or existingServerSnap must exist");const o=wt(e,t);if(F_(n.visibleWrites,o))return null;{const u=Vs(n.visibleWrites,o);return q_(u)?a.getChild(t):Tl(u,a.getChild(t))}}function IU(n,e,t,i){const a=wt(e,t),o=to(n.visibleWrites,a);if(o!=null)return o;if(i.isCompleteForChild(t)){const u=Vs(n.visibleWrites,a);return Tl(u,i.getNode().getImmediateChild(t))}else return null}function NU(n,e){return to(n.visibleWrites,e)}function DU(n,e,t,i,a,o,u){let h;const m=Vs(n.visibleWrites,e),p=to(m,Ze());if(p!=null)h=p;else if(t!=null)h=Tl(m,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const y=[],E=u.getCompare(),b=o?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let S=b.getNext();for(;S&&y.length<a;)E(S,i)!==0&&y.push(S),S=b.getNext();return y}else return[]}function kU(){return{visibleWrites:yi.empty(),allWrites:[],lastWriteId:-1}}function Ef(n,e,t,i){return zR(n.writeTree,n.treePath,e,t,i)}function gv(n,e){return xU(n.writeTree,n.treePath,e)}function iS(n,e,t,i){return RU(n.writeTree,n.treePath,e,t,i)}function Tf(n,e){return NU(n.writeTree,wt(n.treePath,e))}function OU(n,e,t,i,a,o){return DU(n.writeTree,n.treePath,e,t,i,a,o)}function _v(n,e,t){return IU(n.writeTree,n.treePath,e,t)}function FR(n,e){return qR(wt(n.treePath,e),n.writeTree)}function qR(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ce(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ce(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const o=a.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,xc(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,Ac(i,a.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,vl(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,xc(i,e.snapshotNode,a.oldSnap));else throw xl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const HR=new PU;class yv{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _v(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ha(this.viewCache_),o=OU(this.writes_,a,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n){return{filter:n}}function VU(n,e){ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function UU(n,e,t,i,a){const o=new MU;let u,h;if(t.type===gi.OVERWRITE){const p=t;p.source.fromUser?u=H_(n,e,p.path,p.snap,i,a,o):(ce(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!Be(p.path),u=wf(n,e,p.path,p.snap,i,a,h,o))}else if(t.type===gi.MERGE){const p=t;p.source.fromUser?u=BU(n,e,p.path,p.children,i,a,o):(ce(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),u=G_(n,e,p.path,p.children,i,a,h,o))}else if(t.type===gi.ACK_USER_WRITE){const p=t;p.revert?u=qU(n,e,p.path,i,a,o):u=zU(n,e,p.path,p.affectedTree,i,a,o)}else if(t.type===gi.LISTEN_COMPLETE)u=FU(n,e,t.path,i,o);else throw xl("Unknown operation type: "+t.type);const m=o.getChanges();return jU(e,u,m),{viewCache:u,changes:m}}function jU(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=vf(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(LR(vf(e)))}}function GR(n,e,t,i,a,o){const u=e.eventCache;if(Tf(i,t)!=null)return e;{let h,m;if(Be(t))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Ha(e),y=p instanceof Se?p:Se.EMPTY_NODE,E=gv(i,y);h=n.filter.updateFullNode(e.eventCache.getNode(),E,o)}else{const p=Ef(i,Ha(e));h=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=Le(t);if(p===".priority"){ce($s(t)===1,"Can't have a priority with additional path components");const y=u.getNode();m=e.serverCache.getNode();const E=iS(i,t,y,m);E!=null?h=n.filter.updatePriority(y,E):h=u.getNode()}else{const y=ht(t);let E;if(u.isCompleteForChild(p)){m=e.serverCache.getNode();const b=iS(i,t,u.getNode(),m);b!=null?E=u.getNode().getImmediateChild(p).updateChild(y,b):E=u.getNode().getImmediateChild(p)}else E=_v(i,p,e.serverCache);E!=null?h=n.filter.updateChild(u.getNode(),p,E,y,a,o):h=u.getNode()}}return cc(e,h,u.isFullyInitialized()||Be(t),n.filter.filtersNodes())}}function wf(n,e,t,i,a,o,u,h){const m=e.serverCache;let p;const y=u?n.filter:n.filter.getIndexedFilter();if(Be(t))p=y.updateFullNode(m.getNode(),i,null);else if(y.filtersNodes()&&!m.isFiltered()){const S=m.getNode().updateChild(t,i);p=y.updateFullNode(m.getNode(),S,null)}else{const S=Le(t);if(!m.isCompleteForPath(t)&&$s(t)>1)return e;const O=ht(t),V=m.getNode().getImmediateChild(S).updateChild(O,i);S===".priority"?p=y.updatePriority(m.getNode(),V):p=y.updateChild(m.getNode(),S,V,O,HR,null)}const E=UR(e,p,m.isFullyInitialized()||Be(t),y.filtersNodes()),b=new yv(a,E,o);return GR(n,E,t,a,b,h)}function H_(n,e,t,i,a,o,u){const h=e.eventCache;let m,p;const y=new yv(a,e,o);if(Be(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,u),m=cc(e,p,!0,n.filter.filtersNodes());else{const E=Le(t);if(E===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),m=cc(e,p,h.isFullyInitialized(),h.isFiltered());else{const b=ht(t),S=h.getNode().getImmediateChild(E);let O;if(Be(b))O=i;else{const U=y.getCompleteChild(E);U!=null?ov(b)===".priority"&&U.getChild(IR(b)).isEmpty()?O=U:O=U.updateChild(b,i):O=Se.EMPTY_NODE}if(S.equals(O))m=e;else{const U=n.filter.updateChild(h.getNode(),E,O,b,y,u);m=cc(e,U,h.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function rS(n,e){return n.eventCache.isCompleteForChild(e)}function BU(n,e,t,i,a,o,u){let h=e;return i.foreach((m,p)=>{const y=wt(t,m);rS(e,Le(y))&&(h=H_(n,h,y,p,a,o,u))}),i.foreach((m,p)=>{const y=wt(t,m);rS(e,Le(y))||(h=H_(n,h,y,p,a,o,u))}),h}function sS(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function G_(n,e,t,i,a,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,p;Be(t)?p=i:p=new ct(null).setTree(t,i);const y=e.serverCache.getNode();return p.children.inorderTraversal((E,b)=>{if(y.hasChild(E)){const S=e.serverCache.getNode().getImmediateChild(E),O=sS(n,S,b);m=wf(n,m,new at(E),O,a,o,u,h)}}),p.children.inorderTraversal((E,b)=>{const S=!e.serverCache.isCompleteForChild(E)&&b.value===null;if(!y.hasChild(E)&&!S){const O=e.serverCache.getNode().getImmediateChild(E),U=sS(n,O,b);m=wf(n,m,new at(E),U,a,o,u,h)}}),m}function zU(n,e,t,i,a,o,u){if(Tf(a,t)!=null)return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Be(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return wf(n,e,t,m.getNode().getChild(t),a,o,h,u);if(Be(t)){let p=new ct(null);return m.getNode().forEachChild(ol,(y,E)=>{p=p.set(new at(y),E)}),G_(n,e,t,p,a,o,h,u)}else return e}else{let p=new ct(null);return i.foreach((y,E)=>{const b=wt(t,y);m.isCompleteForPath(b)&&(p=p.set(y,m.getNode().getChild(b)))}),G_(n,e,t,p,a,o,h,u)}}function FU(n,e,t,i,a){const o=e.serverCache,u=UR(e,o.getNode(),o.isFullyInitialized()||Be(t),o.isFiltered());return GR(n,u,t,i,HR,a)}function qU(n,e,t,i,a,o){let u;if(Tf(i,t)!=null)return e;{const h=new yv(i,e,a),m=e.eventCache.getNode();let p;if(Be(t)||Le(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Ef(i,Ha(e));else{const E=e.serverCache.getNode();ce(E instanceof Se,"serverChildren would be complete if leaf node"),y=gv(i,E)}y=y,p=n.filter.updateFullNode(m,y,o)}else{const y=Le(t);let E=_v(i,y,e.serverCache);E==null&&e.serverCache.isCompleteForChild(y)&&(E=m.getImmediateChild(y)),E!=null?p=n.filter.updateChild(m,y,E,ht(t),h,o):e.eventCache.getNode().hasChild(y)?p=n.filter.updateChild(m,y,Se.EMPTY_NODE,ht(t),h,o):p=m,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Ef(i,Ha(e)),u.isLeafNode()&&(p=n.filter.updateFullNode(p,u,o)))}return u=e.serverCache.isFullyInitialized()||Tf(i,Ze())!=null,cc(e,p,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new hv(i.getIndex()),o=lU(i);this.processor_=LU(o);const u=t.serverCache,h=t.eventCache,m=a.updateFullNode(Se.EMPTY_NODE,u.getNode(),null),p=o.updateFullNode(Se.EMPTY_NODE,h.getNode(),null),y=new Qs(m,u.isFullyInitialized(),a.filtersNodes()),E=new Qs(p,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=tm(E,y),this.eventGenerator_=new pU(this.query_)}get query(){return this.query_}}function GU(n){return n.viewCache_.serverCache.getNode()}function $U(n){return vf(n.viewCache_)}function QU(n,e){const t=Ha(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Be(e)&&!t.getImmediateChild(Le(e)).isEmpty())?t.getChild(e):null}function aS(n){return n.eventRegistrations_.length===0}function KU(n,e){n.eventRegistrations_.push(e)}function oS(n,e,t){const i=[];if(t){ce(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,a);u&&i.push(u)})}if(e){let a=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function lS(n,e,t,i){e.type===gi.MERGE&&e.source.queryId!==null&&(ce(Ha(n.viewCache_),"We should always have a full cache before handling merges"),ce(vf(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,o=UU(n.processor_,a,e,t,i);return VU(n.processor_,o.viewCache),ce(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,$R(n,o.changes,o.viewCache.eventCache.getNode(),null)}function YU(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(bt,(o,u)=>{i.push(vl(o,u))}),t.isFullyInitialized()&&i.push(LR(t.getNode())),$R(n,i,t.getNode(),e)}function $R(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return gU(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf;class QR{constructor(){this.views=new Map}}function WU(n){ce(!bf,"__referenceConstructor has already been defined"),bf=n}function XU(){return ce(bf,"Reference.ts has not been loaded"),bf}function JU(n){return n.views.size===0}function vv(n,e,t,i){const a=e.source.queryId;if(a!==null){const o=n.views.get(a);return ce(o!=null,"SyncTree gave us an op for an invalid query."),lS(o,e,t,i)}else{let o=[];for(const u of n.views.values())o=o.concat(lS(u,e,t,i));return o}}function KR(n,e,t,i,a){const o=e._queryIdentifier,u=n.views.get(o);if(!u){let h=Ef(t,a?i:null),m=!1;h?m=!0:i instanceof Se?(h=gv(t,i),m=!1):(h=Se.EMPTY_NODE,m=!1);const p=tm(new Qs(h,m,!1),new Qs(i,a,!1));return new HU(e,p)}return u}function ZU(n,e,t,i,a,o){const u=KR(n,e,i,a,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),KU(u,t),YU(u,t)}function ej(n,e,t,i){const a=e._queryIdentifier,o=[];let u=[];const h=Ks(n);if(a==="default")for(const[m,p]of n.views.entries())u=u.concat(oS(p,t,i)),aS(p)&&(n.views.delete(m),p.query._queryParams.loadsAllData()||o.push(p.query));else{const m=n.views.get(a);m&&(u=u.concat(oS(m,t,i)),aS(m)&&(n.views.delete(a),m.query._queryParams.loadsAllData()||o.push(m.query)))}return h&&!Ks(n)&&o.push(new(XU())(e._repo,e._path)),{removed:o,events:u}}function YR(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Us(n,e){let t=null;for(const i of n.views.values())t=t||QU(i,e);return t}function WR(n,e){if(e._queryParams.loadsAllData())return im(n);{const i=e._queryIdentifier;return n.views.get(i)}}function XR(n,e){return WR(n,e)!=null}function Ks(n){return im(n)!=null}function im(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf;function tj(n){ce(!Sf,"__referenceConstructor has already been defined"),Sf=n}function nj(){return ce(Sf,"Reference.ts has not been loaded"),Sf}let ij=1;class uS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ct(null),this.pendingWriteTree_=kU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JR(n,e,t,i,a){return EU(n.pendingWriteTree_,e,t,i,a),a?Pl(n,new qa(fv(),e,t)):[]}function rj(n,e,t,i){TU(n.pendingWriteTree_,e,t,i);const a=ct.fromObject(t);return Pl(n,new El(fv(),e,a))}function Ds(n,e,t=!1){const i=wU(n.pendingWriteTree_,e);if(bU(n.pendingWriteTree_,e)){let o=new ct(null);return i.snap!=null?o=o.set(Ze(),!0):ln(i.children,u=>{o=o.set(new at(u),!0)}),Pl(n,new yf(i.path,o,t))}else return[]}function Kc(n,e,t){return Pl(n,new qa(mv(),e,t))}function sj(n,e,t){const i=ct.fromObject(t);return Pl(n,new El(mv(),e,i))}function aj(n,e){return Pl(n,new Ic(mv(),e))}function oj(n,e,t){const i=Tv(n,t);if(i){const a=wv(i),o=a.path,u=a.queryId,h=wn(o,e),m=new Ic(pv(u),h);return bv(n,o,m)}else return[]}function Cf(n,e,t,i,a=!1){const o=e._path,u=n.syncPointTree_.get(o);let h=[];if(u&&(e._queryIdentifier==="default"||XR(u,e))){const m=ej(u,e,t,i);JU(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const p=m.removed;if(h=m.events,!a){const y=p.findIndex(b=>b._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(o,(b,S)=>Ks(S));if(y&&!E){const b=n.syncPointTree_.subtree(o);if(!b.isEmpty()){const S=cj(b);for(let O=0;O<S.length;++O){const U=S[O],V=U.query,z=n1(n,U);n.listenProvider_.startListening(dc(V),Nc(n,V),z.hashFn,z.onComplete)}}}!E&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(dc(e),null):p.forEach(b=>{const S=n.queryToTagMap.get(rm(b));n.listenProvider_.stopListening(dc(b),S)}))}hj(n,p)}return h}function ZR(n,e,t,i){const a=Tv(n,i);if(a!=null){const o=wv(a),u=o.path,h=o.queryId,m=wn(u,e),p=new qa(pv(h),m,t);return bv(n,u,p)}else return[]}function lj(n,e,t,i){const a=Tv(n,i);if(a){const o=wv(a),u=o.path,h=o.queryId,m=wn(u,e),p=ct.fromObject(t),y=new El(pv(h),m,p);return bv(n,u,y)}else return[]}function $_(n,e,t,i=!1){const a=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(a,(b,S)=>{const O=wn(b,a);o=o||Us(S,O),u=u||Ks(S)});let h=n.syncPointTree_.get(a);h?(u=u||Ks(h),o=o||Us(h,Ze())):(h=new QR,n.syncPointTree_=n.syncPointTree_.set(a,h));let m;o!=null?m=!0:(m=!1,o=Se.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((S,O)=>{const U=Us(O,Ze());U&&(o=o.updateImmediateChild(S,U))}));const p=XR(h,e);if(!p&&!e._queryParams.loadsAllData()){const b=rm(e);ce(!n.queryToTagMap.has(b),"View does not exist, but we have a tag");const S=dj();n.queryToTagMap.set(b,S),n.tagToQueryMap.set(S,b)}const y=nm(n.pendingWriteTree_,a);let E=ZU(h,e,t,y,o,m);if(!p&&!u&&!i){const b=WR(h,e);E=E.concat(fj(n,e,b))}return E}function Ev(n,e,t){const a=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const m=wn(u,e),p=Us(h,m);if(p)return p});return zR(a,e,o,t,!0)}function uj(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,y)=>{const E=wn(p,t);i=i||Us(y,E)});let a=n.syncPointTree_.get(t);a?i=i||Us(a,Ze()):(a=new QR,n.syncPointTree_=n.syncPointTree_.set(t,a));const o=i!=null,u=o?new Qs(i,!0,!1):null,h=nm(n.pendingWriteTree_,e._path),m=KR(a,e,h,o?u.getNode():Se.EMPTY_NODE,o);return $U(m)}function Pl(n,e){return e1(e,n.syncPointTree_,null,nm(n.pendingWriteTree_,Ze()))}function e1(n,e,t,i){if(Be(n.path))return t1(n,e,t,i);{const a=e.get(Ze());t==null&&a!=null&&(t=Us(a,Ze()));let o=[];const u=Le(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const p=t?t.getImmediateChild(u):null,y=FR(i,u);o=o.concat(e1(h,m,p,y))}return a&&(o=o.concat(vv(a,n,i,t))),o}}function t1(n,e,t,i){const a=e.get(Ze());t==null&&a!=null&&(t=Us(a,Ze()));let o=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,p=FR(i,u),y=n.operationForChild(u);y&&(o=o.concat(t1(y,h,m,p)))}),a&&(o=o.concat(vv(a,n,i,t))),o}function n1(n,e){const t=e.query,i=Nc(n,t);return{hashFn:()=>(GU(e)||Se.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?oj(n,t._path,i):aj(n,t._path);{const o=a6(a,t);return Cf(n,t,null,o)}}}}function Nc(n,e){const t=rm(e);return n.queryToTagMap.get(t)}function rm(n){return n._path.toString()+"$"+n._queryIdentifier}function Tv(n,e){return n.tagToQueryMap.get(e)}function wv(n){const e=n.indexOf("$");return ce(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new at(n.substr(0,e))}}function bv(n,e,t){const i=n.syncPointTree_.get(e);ce(i,"Missing sync point for query tag that we're tracking");const a=nm(n.pendingWriteTree_,e);return vv(i,t,a,null)}function cj(n){return n.fold((e,t,i)=>{if(t&&Ks(t))return[im(t)];{let a=[];return t&&(a=YR(t)),ln(i,(o,u)=>{a=a.concat(u)}),a}})}function dc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(nj())(n._repo,n._path):n}function hj(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=rm(i),o=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(o)}}}function dj(){return ij++}function fj(n,e,t){const i=e._path,a=Nc(n,e),o=n1(n,t),u=n.listenProvider_.startListening(dc(e),a,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(a)ce(!Ks(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((p,y,E)=>{if(!Be(p)&&y&&Ks(y))return[im(y).query];{let b=[];return y&&(b=b.concat(YR(y).map(S=>S.query))),ln(E,(S,O)=>{b=b.concat(O)}),b}});for(let p=0;p<m.length;++p){const y=m[p];n.listenProvider_.stopListening(dc(y),Nc(n,y))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Sv(t)}node(){return this.node_}}class Cv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wt(this.path_,e);return new Cv(this.syncTree_,t)}node(){return Ev(this.syncTree_,this.path_)}}const mj=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},cS=function(n,e,t){if(!n||typeof n!="object")return n;if(ce(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return pj(n[".sv"],e,t);if(typeof n[".sv"]=="object")return gj(n[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},pj=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ce(!1,"Unexpected server value: "+n)}},gj=function(n,e,t){n.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ce(!1,"Unexpected increment value: "+i);const a=e.node();if(ce(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},i1=function(n,e,t,i){return Av(e,new Cv(t,n),i)},r1=function(n,e,t){return Av(n,new Sv(e),t)};function Av(n,e,t){const i=n.getPriority().val(),a=cS(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=cS(u.getValue(),e,t);return h!==u.getValue()||a!==u.getPriority().val()?new Xt(h,Bt(a)):n}else{const u=n;return o=u,a!==u.getPriority().val()&&(o=o.updatePriority(new Xt(a))),u.forEachChild(bt,(h,m)=>{const p=Av(m,e.getImmediateChild(h),t);p!==m&&(o=o.updateImmediateChild(h,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Rv(n,e){let t=e instanceof at?e:new at(e),i=n,a=Le(t);for(;a!==null;){const o=ll(i.node.children,a)||{children:{},childCount:0};i=new xv(a,i,o),t=ht(t),a=Le(t)}return i}function Ll(n){return n.node.value}function s1(n,e){n.node.value=e,Q_(n)}function a1(n){return n.node.childCount>0}function _j(n){return Ll(n)===void 0&&!a1(n)}function sm(n,e){ln(n.node.children,(t,i)=>{e(new xv(t,n,i))})}function o1(n,e,t,i){t&&e(n),sm(n,a=>{o1(a,e,!0)})}function yj(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Yc(n){return new at(n.parent===null?n.name:Yc(n.parent)+"/"+n.name)}function Q_(n){n.parent!==null&&vj(n.parent,n.name,n)}function vj(n,e,t){const i=_j(t),a=Yi(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,Q_(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,Q_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/[\[\].#$\/\u0000-\u001F\u007F]/,Tj=/[\[\].#$\u0000-\u001F\u007F]/,Lg=10*1024*1024,Iv=function(n){return typeof n=="string"&&n.length!==0&&!Ej.test(n)},l1=function(n){return typeof n=="string"&&n.length!==0&&!Tj.test(n)},wj=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),l1(n)},bj=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!nv(n)||n&&typeof n=="object"&&Yi(n,".sv")},u1=function(n,e,t,i){i&&e===void 0||am(Nf(n,"value"),e,t)},am=function(n,e,t){const i=t instanceof at?new B6(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Na(i));if(typeof e=="function")throw new Error(n+"contains a function "+Na(i)+" with contents = "+e.toString());if(nv(e))throw new Error(n+"contains "+e.toString()+" "+Na(i));if(typeof e=="string"&&e.length>Lg/3&&Df(e)>Lg)throw new Error(n+"contains a string greater than "+Lg+" utf8 bytes "+Na(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,o=!1;if(ln(e,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!Iv(u)))throw new Error(n+" contains an invalid key ("+u+") "+Na(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);z6(i,u),am(n,h,i),F6(i)}),a&&o)throw new Error(n+' contains ".value" child '+Na(i)+" in addition to actual children.")}},Sj=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=Cc(i);for(let u=0;u<o.length;u++)if(!(o[u]===".priority"&&u===o.length-1)){if(!Iv(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(j6);let a=null;for(t=0;t<e.length;t++){if(i=e[t],a!==null&&si(a,i))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}},Cj=function(n,e,t,i){const a=Nf(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const o=[];ln(e,(u,h)=>{const m=new at(u);if(am(a,h,wt(t,m)),ov(m)===".priority"&&!bj(h))throw new Error(a+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),Sj(a,o)},c1=function(n,e,t,i){if(!l1(t))throw new Error(Nf(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Aj=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),c1(n,e,t)},Nv=function(n,e){if(Le(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},xj=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Iv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!wj(t))throw new Error(Nf(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function om(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],o=a.getPath();t!==null&&!lv(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(a)}t&&n.eventLists_.push(t)}function h1(n,e,t){om(n,t),d1(n,i=>lv(i,e))}function oi(n,e,t){om(n,t),d1(n,i=>si(i,e)||si(e,i))}function d1(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const o=a.path;e(o)?(Ij(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Ij(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();lc&&sn("event: "+t.toString()),Ml(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="repo_interrupt",Dj=25;class kj{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_f(),this.transactionQueueTree_=new xv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Oj(n,e,t){if(n.stats_=sv(n.repoInfo_),n.forceRestClient_||c6())n.server_=new gf(n.repoInfo_,(i,a,o,u)=>{hS(n,i,a,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Pr(n.repoInfo_,e,(i,a,o,u)=>{hS(n,i,a,o,u)},i=>{dS(n,i)},i=>{Mj(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=p6(n.repoInfo_,()=>new mU(n.stats_,n.server_)),n.infoData_=new uU,n.infoSyncTree_=new uS({startListening:(i,a,o,u)=>{let h=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(h=Kc(n.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),Dv(n,"connected",!1),n.serverSyncTree_=new uS({startListening:(i,a,o,u)=>(n.server_.listen(i,o,a,(h,m)=>{const p=u(h,m);oi(n.eventQueue_,i._path,p)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function f1(n){const t=n.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function lm(n){return mj({timestamp:f1(n)})}function hS(n,e,t,i,a){n.dataUpdateCount++;const o=new at(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const m=Gd(t,p=>Bt(p));u=lj(n.serverSyncTree_,o,m,a)}else{const m=Bt(t);u=ZR(n.serverSyncTree_,o,m,a)}else if(i){const m=Gd(t,p=>Bt(p));u=sj(n.serverSyncTree_,o,m)}else{const m=Bt(t);u=Kc(n.serverSyncTree_,o,m)}let h=o;u.length>0&&(h=wl(n,o)),oi(n.eventQueue_,h,u)}function dS(n,e){Dv(n,"connected",e),e===!1&&Uj(n)}function Mj(n,e){ln(e,(t,i)=>{Dv(n,t,i)})}function Dv(n,e,t){const i=new at("/.info/"+e),a=Bt(t);n.infoData_.updateSnapshot(i,a);const o=Kc(n.infoSyncTree_,i,a);oi(n.eventQueue_,i,o)}function kv(n){return n.nextWriteId_++}function Pj(n,e,t){const i=uj(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const o=Bt(a).withIndex(e._queryParams.getIndex());$_(n.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=Kc(n.serverSyncTree_,e._path,o);else{const h=Nc(n.serverSyncTree_,e);u=ZR(n.serverSyncTree_,e._path,o,h)}return oi(n.eventQueue_,e._path,u),Cf(n.serverSyncTree_,e,t,null,!0),o},a=>(Wc(n,"get for query "+zt(e)+" failed: "+a),Promise.reject(new Error(a))))}function Lj(n,e,t,i,a){Wc(n,"set",{path:e.toString(),value:t,priority:i});const o=lm(n),u=Bt(t,i),h=Ev(n.serverSyncTree_,e),m=r1(u,h,o),p=kv(n),y=JR(n.serverSyncTree_,e,m,p,!0);om(n.eventQueue_,y),n.server_.put(e.toString(),u.val(!0),(b,S)=>{const O=b==="ok";O||bn("set at "+e+" failed: "+b);const U=Ds(n.serverSyncTree_,p,!O);oi(n.eventQueue_,e,U),K_(n,a,b,S)});const E=Mv(n,e);wl(n,E),oi(n.eventQueue_,E,[])}function Vj(n,e,t,i){Wc(n,"update",{path:e.toString(),value:t});let a=!0;const o=lm(n),u={};if(ln(t,(h,m)=>{a=!1,u[h]=i1(wt(e,h),Bt(m),n.serverSyncTree_,o)}),a)sn("update() called with empty data.  Don't do anything."),K_(n,i,"ok",void 0);else{const h=kv(n),m=rj(n.serverSyncTree_,e,u,h);om(n.eventQueue_,m),n.server_.merge(e.toString(),t,(p,y)=>{const E=p==="ok";E||bn("update at "+e+" failed: "+p);const b=Ds(n.serverSyncTree_,h,!E),S=b.length>0?wl(n,e):e;oi(n.eventQueue_,S,b),K_(n,i,p,y)}),ln(t,p=>{const y=Mv(n,wt(e,p));wl(n,y)}),oi(n.eventQueue_,e,[])}}function Uj(n){Wc(n,"onDisconnectEvents");const e=lm(n),t=_f();B_(n.onDisconnect_,Ze(),(a,o)=>{const u=i1(a,o,n.serverSyncTree_,e);VR(t,a,u)});let i=[];B_(t,Ze(),(a,o)=>{i=i.concat(Kc(n.serverSyncTree_,a,o));const u=Mv(n,a);wl(n,u)}),n.onDisconnect_=_f(),oi(n.eventQueue_,Ze(),i)}function jj(n,e,t){let i;Le(e._path)===".info"?i=$_(n.infoSyncTree_,e,t):i=$_(n.serverSyncTree_,e,t),h1(n.eventQueue_,e._path,i)}function m1(n,e,t){let i;Le(e._path)===".info"?i=Cf(n.infoSyncTree_,e,t):i=Cf(n.serverSyncTree_,e,t),h1(n.eventQueue_,e._path,i)}function Bj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Nj)}function Wc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),sn(t,...e)}function K_(n,e,t,i){e&&Ml(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let o=a;i&&(o+=": "+i);const u=new Error(o);u.code=a,e(u)}})}function p1(n,e,t){return Ev(n.serverSyncTree_,e,t)||Se.EMPTY_NODE}function Ov(n,e=n.transactionQueueTree_){if(e||um(n,e),Ll(e)){const t=_1(n,e);ce(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&zj(n,Yc(e),t)}else a1(e)&&sm(e,t=>{Ov(n,t)})}function zj(n,e,t){const i=t.map(p=>p.currentWriteId),a=p1(n,e,i);let o=a;const u=a.hash();for(let p=0;p<t.length;p++){const y=t[p];ce(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=wn(e,y.path);o=o.updateChild(E,y.currentOutputSnapshotRaw)}const h=o.val(!0),m=e;n.server_.put(m.toString(),h,p=>{Wc(n,"transaction put response",{path:m.toString(),status:p});let y=[];if(p==="ok"){const E=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(Ds(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&E.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();um(n,Rv(n.transactionQueueTree_,e)),Ov(n,n.transactionQueueTree_),oi(n.eventQueue_,e,y);for(let b=0;b<E.length;b++)Ml(E[b])}else{if(p==="datastale")for(let E=0;E<t.length;E++)t[E].status===3?t[E].status=4:t[E].status=0;else{bn("transaction at "+m.toString()+" failed: "+p);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=p}wl(n,e)}},u)}function wl(n,e){const t=g1(n,e),i=Yc(t),a=_1(n,t);return Fj(n,a,i),i}function Fj(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],p=wn(t,m.path);let y=!1,E;if(ce(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,E=m.abortReason,a=a.concat(Ds(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=Dj)y=!0,E="maxretry",a=a.concat(Ds(n.serverSyncTree_,m.currentWriteId,!0));else{const b=p1(n,m.path,u);m.currentInputSnapshot=b;const S=e[h].update(b.val());if(S!==void 0){am("transaction failed: Data returned ",S,m.path);let O=Bt(S);typeof S=="object"&&S!=null&&Yi(S,".priority")||(O=O.updatePriority(b.getPriority()));const V=m.currentWriteId,z=lm(n),G=r1(O,b,z);m.currentOutputSnapshotRaw=O,m.currentOutputSnapshotResolved=G,m.currentWriteId=kv(n),u.splice(u.indexOf(V),1),a=a.concat(JR(n.serverSyncTree_,m.path,G,m.currentWriteId,m.applyLocally)),a=a.concat(Ds(n.serverSyncTree_,V,!0))}else y=!0,E="nodata",a=a.concat(Ds(n.serverSyncTree_,m.currentWriteId,!0))}oi(n.eventQueue_,t,a),a=[],y&&(e[h].status=2,function(b){setTimeout(b,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(E==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(E),!1,null))))}um(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Ml(i[h]);Ov(n,n.transactionQueueTree_)}function g1(n,e){let t,i=n.transactionQueueTree_;for(t=Le(e);t!==null&&Ll(i)===void 0;)i=Rv(i,t),e=ht(e),t=Le(e);return i}function _1(n,e){const t=[];return y1(n,e,t),t.sort((i,a)=>i.order-a.order),t}function y1(n,e,t){const i=Ll(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);sm(e,a=>{y1(n,a,t)})}function um(n,e){const t=Ll(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,s1(e,t.length>0?t:void 0)}sm(e,i=>{um(n,i)})}function Mv(n,e){const t=Yc(g1(n,e)),i=Rv(n.transactionQueueTree_,e);return yj(i,a=>{Vg(n,a)}),Vg(n,i),o1(i,a=>{Vg(n,a)}),t}function Vg(n,e){const t=Ll(e);if(t){const i=[];let a=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(ce(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(ce(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(Ds(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?s1(e,void 0):t.length=o+1,oi(n.eventQueue_,Yc(e),a);for(let u=0;u<i.length;u++)Ml(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function Hj(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bn(`Invalid query segment '${t}' in query '${n}'`)}return e}const fS=function(n,e){const t=Gj(n),i=t.namespace;t.domain==="firebase.com"&&Br(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Br("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||t6();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new ER(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new at(t.pathString)}},Gj=function(n){let e="",t="",i="",a="",o="",u=!0,h="https",m=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(h=n.substring(0,p-1),n=n.substring(p+2));let y=n.indexOf("/");y===-1&&(y=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),e=n.substring(0,Math.min(y,E)),y<E&&(a=qj(n.substring(y,E)));const b=Hj(n.substring(Math.min(n.length,E)));p=e.indexOf(":"),p>=0?(u=h==="https"||h==="wss",m=parseInt(e.substring(p+1),10)):p=e.length;const S=e.slice(0,p);if(S.toLowerCase()==="localhost")t="localhost";else if(S.split(".").length<=2)t=S;else{const O=e.indexOf(".");i=e.substring(0,O).toLowerCase(),t=e.substring(O+1),o=i}"ns"in b&&(o=b.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:u,scheme:h,pathString:a,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$j=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let a;const o=new Array(8);for(a=7;a>=0;a--)o[a]=mS.charAt(t%64),t=Math.floor(t/64);ce(t===0,"Cannot push at time == 0");let u=o.join("");if(i){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)u+=mS.charAt(e[a]);return ce(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+zt(this.snapshot.exportVal())}}class E1{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return Be(this._path)?null:ov(this._path)}get ref(){return new Wi(this._repo,this._path)}get _queryIdentifier(){const e=Zb(this._queryParams),t=iv(e);return t==="{}"?"default":t}get _queryObject(){return Zb(this._queryParams)}isEqual(e){if(e=_t(e),!(e instanceof Pv))return!1;const t=this._repo===e._repo,i=lv(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+U6(this._path)}}class Wi extends Pv{constructor(e,t){super(e,t,new dv,!1)}get parent(){const e=IR(this._path);return e===null?null:new Wi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class bl{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new at(e),i=Sl(this.ref,e);return new bl(this._node.getChild(t),i,bt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new bl(a,Sl(this.ref,i),bt)))}hasChild(e){const t=new at(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ze(n,e){return n=_t(n),n._checkNotDeleted("ref"),e!==void 0?Sl(n._root,e):n._root}function Sl(n,e){return n=_t(n),Le(n._path)===null?Aj("child","path",e):c1("child","path",e),new Wi(n._repo,wt(n._path,e))}function Qj(n,e){n=_t(n),Nv("push",n._path),u1("push",e,n._path,!0);const t=f1(n._repo),i=$j(t),a=Sl(n,i),o=Sl(n,i);let u;return u=Promise.resolve(o),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function Y_(n){return Nv("remove",n._path),Ga(n,null)}function Ga(n,e){n=_t(n),Nv("set",n._path),u1("set",e,n._path,!1);const t=new Mc;return Lj(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Bi(n,e){Cj("update",e,n._path);const t=new Mc;return Vj(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Af(n){n=_t(n);const e=new T1(()=>{}),t=new Xc(e);return Pj(n._repo,n,t).then(i=>new bl(i,new Wi(n._repo,n._path),n._queryParams.getIndex()))}class Xc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new v1("value",this,new bl(e.snapshotNode,new Wi(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E1(this,e,t):null}matches(e){return e instanceof Xc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Lv{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E1(this,e,t):null}createEvent(e,t){ce(e.childName!=null,"Child events should have a childName.");const i=Sl(new Wi(t._repo,t._path),e.childName),a=t._queryParams.getIndex();return new v1(e.type,this,new bl(e.snapshotNode,i,a),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Lv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Kj(n,e,t,i,a){const o=new T1(t,void 0),u=new Xc(o);return jj(n._repo,n,u),()=>m1(n._repo,n,u)}function Nr(n,e,t,i){return Kj(n,"value",e)}function Dr(n,e,t){let i=null;const a=null;e==="value"?i=new Xc(a):e&&(i=new Lv(e,a)),m1(n._repo,n,i)}WU(Wi);tj(Wi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="FIREBASE_DATABASE_EMULATOR_HOST",W_={};let Wj=!1;function Xj(n,e,t,i){n.repoInfo_=new ER(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function Jj(n,e,t,i,a){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Br("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=fS(o,a),h=u.repoInfo,m;typeof process<"u"&&Pb&&(m=Pb[Yj]),m?(o=`http://${m}?ns=${h.namespace}`,u=fS(o,a),h=u.repoInfo):u.repoInfo.secure;const p=new d6(n.name,n.options,e);xj("Invalid Firebase Database URL",u),Be(u.path)||Br("Database URL must point to the root of a Firebase Database (not including a child path).");const y=e5(h,n,p,new h6(n,t));return new t5(y,n)}function Zj(n,e){const t=W_[e];(!t||t[n.key]!==n)&&Br(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Bj(n),delete t[n.key]}function e5(n,e,t,i){let a=W_[e.name];a||(a={},W_[e.name]=a);let o=a[n.toURLString()];return o&&Br("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new kj(n,Wj,t,i),a[n.toURLString()]=o,o}class t5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Oj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wi(this._repo,Ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Zj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Br("Cannot call "+e+" on a deleted database.")}}function jt(n=kf(),e){const t=Ws(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=hC("database");i&&n5(t,...i)}return t}function n5(n,e,t,i={}){n=_t(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Br("Cannot call useEmulator() after instance has already been initialized.");const a=n._repoInternal;let o;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Br('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new zd(zd.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:mC(i.mockUserToken,n.app.options.projectId);o=new zd(u)}Xj(a,e,t,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(n){YV(Ka),vi(new ai("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Jj(i,a,o,t)},"PUBLIC").setMultipleInstances(!0)),In(Lb,Vb,n),In(Lb,Vb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5={".sv":"timestamp"};function s5(){return r5}Pr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Pr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};i5();const a5={apiKey:"AIzaSyDk7mEkayeHxrKerk0hOOCsxmztdYh9uck",authDomain:"final-web-app-5880c.firebaseapp.com",projectId:"final-web-app-5880c",storageBucket:"final-web-app-5880c.firebasestorage.app",messagingSenderId:"725331159486",appId:"1:725331159486:web:3ac104befd96704203b1ef",measurementId:"G-P0380Q8BWN",databaseURL:"https://final-web-app-5880c-default-rtdb.asia-southeast1.firebasedatabase.app"},cm=bC(a5),o5=zc(cm);GL(cm);const l5=Zf(cm);jt(cm);const u5=async()=>{const n=new Cr;try{const e=await iV(l5,n),t=e.user;if(console.log("User Logged In:",t),t){const{uid:i,displayName:a,email:o,photoURL:u}=t;console.log("Saving to Firestore:",i,a,o);const h=bc(o5,"users",i);return await k_(h,{uid:i,name:a,email:o,photoURL:u},{merge:!0}),console.log("Firestore Saved Successfully!"),e}}catch(e){throw console.error("Error signing in with Google:",e),e}},c5=()=>{const n=Ys(),[e,t]=$.useState(!1);$.useEffect(()=>{JSON.parse(localStorage.getItem("user"))&&n("/home")},[n]);const i=()=>{t(!0),u5().then(a=>{const o=a.user;localStorage.setItem("user",JSON.stringify(o)),n("/home")}).catch(a=>{console.error("Error during sign in: ",a.message),alert("เกิดข้อผิดพลาดในการเข้าสู่ระบบ: "+a.message)}).finally(()=>{t(!1)})};return e?v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:v.jsxs("div",{className:"p-8 bg-white rounded-xl shadow-xl",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),v.jsx("p",{className:"mt-4 text-gray-600 font-medium text-center",children:"กำลังเข้าสู่ระบบ..."})]})}):v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:v.jsxs("div",{className:"max-w-md w-full space-y-8 p-10 bg-white rounded-2xl shadow-xl transform transition-all hover:scale-[1.01]",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"flex justify-center mb-8",children:v.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full shadow-inner",children:v.jsxs("svg",{className:"w-14 h-14 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[v.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),v.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})})}),v.jsx("h1",{className:"text-4xl font-bold mb-3 text-gray-800 tracking-tight",children:"ระบบจัดการห้องเรียน"}),v.jsx("h2",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"สำหรับอาจารย์"}),v.jsx("p",{className:"text-gray-600 text-lg",children:"กรุณาเข้าสู่ระบบด้วยบัญชี Google ของท่าน"})]}),v.jsx("button",{onClick:i,disabled:e,className:`w-full flex items-center justify-center px-6 py-4 
            text-gray-700 bg-white rounded-xl 
            border-2 border-gray-200
            hover:bg-gray-50 hover:border-blue-300 
            focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
            transform transition-all duration-200 active:scale-95
            shadow-sm hover:shadow-md
            ${e?"opacity-50 cursor-not-allowed":""}`,children:e?v.jsx("div",{className:"w-6 h-6 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}):v.jsxs(v.Fragment,{children:[v.jsx("svg",{className:"w-6 h-6 mr-3",viewBox:"0 0 24 24"}),v.jsx("span",{className:"text-lg font-medium cursor-pointer",children:"เข้าสู่ระบบด้วย Google"})]})}),v.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:v.jsx("span",{className:"bg-yellow-50 px-3 py-1 rounded-full",children:"ระบบนี้รองรับการใช้งานผ่านบัญชี Google เท่านั้น"})})]})})},h5=()=>{const n=Ys(),e=Zf(),t=zc(),[i,a]=$.useState([]),[o,u]=$.useState(null),[h,m]=$.useState(!1);$.useEffect(()=>{const b=e.currentUser;if(b){u(b);const S=aP(t,"classroom"),O=vP(S,EP("owner","==",b.uid));(async()=>{const z=(await CP(O)).docs.map(G=>{var Z,le,te,M;const H=G.data();return{id:G.id,name:((Z=H.info)==null?void 0:Z.name)||"ไม่มีชื่อวิชา",code:((le=H.info)==null?void 0:le.code)||"ไม่มีรหัสวิชา",room:((te=H.info)==null?void 0:te.room)||"ไม่มีห้องเรียน",photo:((M=H.info)==null?void 0:M.photo)||"https://via.placeholder.com/400x200?text=No+Image"}});a(z)})()}else n("/")},[e,t,n]);const p=()=>{m(!0)},y=async()=>{try{await V4(e),localStorage.removeItem("user"),n("/",{replace:!0})}catch(b){console.error("Logout error:",b)}},E=()=>{m(!1)};return v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:[v.jsx("header",{className:"bg-white shadow-md",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"flex items-center space-x-3",children:v.jsx("h1",{className:"text-3xl font-bold text-indigo-600",children:"ระบบจัดการห้องเรียน"})}),v.jsxs("div",{className:"flex items-center space-x-6",children:[o&&v.jsxs("div",{className:"flex items-center bg-gray-50 rounded-full px-4 py-2",children:[v.jsx("img",{src:o.photoURL,alt:o.displayName,className:"w-10 h-10 rounded-full border-2 border-indigo-200"}),v.jsxs("div",{className:"ml-3",children:[v.jsx("p",{className:"text-sm font-semibold text-gray-800",children:o.displayName}),v.jsx("p",{className:"text-xs text-gray-500",children:o.email})]})]}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(tc,{to:"/edit-profile",className:"px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-full hover:bg-indigo-100 transition-colors duration-200",children:"แก้ไขข้อมูลส่วนตัว"}),v.jsx(tc,{to:"/add-course",className:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded-full hover:bg-green-600 transition-colors duration-200",children:"เพิ่มวิชา"}),v.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-full hover:bg-red-600 transition-colors duration-200",children:"ออกจากระบบ"})]})]})]})})}),v.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsx("div",{className:"flex justify-between items-center mb-8",children:v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"รายวิชาที่สอน"})}),i.length===0?v.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:v.jsx("p",{className:"text-gray-500 text-lg",children:"ยังไม่มีรายวิชาที่สอน กรุณาเพิ่มวิชาใหม่"})}):v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map(b=>v.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transform hover:scale-105 transition-transform duration-200",children:[v.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:`url(${b.photo})`}}),v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:b.name}),v.jsxs("div",{className:"space-y-2 mb-6",children:[v.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[v.jsx("span",{className:"font-medium mr-2",children:"รหัสวิชา:"}),b.code]}),v.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[v.jsx("span",{className:"font-medium mr-2",children:"ห้องเรียน:"}),b.room]})]}),v.jsx(tc,{to:`/manage-classroom/${b.id}`,className:"block w-full text-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium",children:"จัดการห้องเรียน"})]})]},b.id))})]}),h&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 popup-logout",children:v.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-sm w-full mx-4 shadow-2xl",children:[v.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"ยืนยันการออกจากระบบ"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"คุณต้องการออกจากระบบใช่หรือไม่?"}),v.jsxs("div",{className:"flex justify-end space-x-4",children:[v.jsx("button",{onClick:E,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-medium",children:"ยกเลิก"}),v.jsx("button",{onClick:y,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200 font-medium",children:"ยืนยัน"})]})]})})]})},d5=()=>{const n=Ys(),e=Zf(),t=jt(),[i,a]=$.useState(""),[o,u]=$.useState(""),[h,m]=$.useState(""),[p,y]=$.useState(""),[E,b]=$.useState(!1),[S,O]=$.useState(""),[U,V]=$.useState("");$.useEffect(()=>{const G=e.currentUser;if(!G){n("/");return}a(G.displayName||""),u(G.email||""),m(G.photoURL||"");const H=ze(t,`users/${G.uid}/profile`);Af(H).then(Z=>{if(Z.exists()){const le=Z.val();le.displayName&&a(le.displayName),le.photoURL&&m(le.photoURL)}})},[e,t,n]);const z=async G=>{G.preventDefault(),b(!0),O(""),V("");try{const H=e.currentUser;if(!H)throw new Error("ไม่พบข้อมูลผู้ใช้");let Z=p||h;await M4(H,{displayName:i,photoURL:Z}),V("อัปเดตข้อมูลผู้ใช้ในระบบแล้ว"),b(!1),n("/home"),await Bi(ze(t,`users/${H.uid}/profile`),{displayName:i,email:o,photoURL:Z});const le=ze(t,`users/${H.uid}/profile`),te=await Af(le);if(te.exists()){const M=te.val();a(M.displayName),m(M.photoURL)}y("")}catch(H){console.error("Error updating profile:",H),O("เกิดข้อผิดพลาดในการอัปเดตข้อมูล: "+H.message),b(!1)}};return v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-white to-purple-100",children:v.jsx("div",{className:"container mx-auto px-4 py-12 sm:px-6 lg:px-8",children:v.jsx("div",{className:"max-w-3xl mx-auto",children:v.jsxs("div",{className:" bg-white/80 rounded-3xl shadow-2xl overflow-hidden border border-white/50",children:[v.jsxs("div",{className:"px-8 py-8 bg-gradient-to-r from-indigo-600 to-purple-600 relative",children:[v.jsx("div",{className:"absolute inset-0 bg-pattern opacity-10"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h1",{className:"text-3xl font-bold text-white text-center mb-2",children:"แก้ไขข้อมูลส่วนตัว"}),v.jsx("p",{className:"text-indigo-100 text-center text-sm",children:"ปรับแต่งโปรไฟล์ของคุณให้ตรงกับตัวตน"})]})]}),v.jsxs("form",{onSubmit:z,className:"p-8 sm:p-10",children:[v.jsx("div",{className:"mb-12",children:v.jsxs("div",{className:"relative w-36 h-36 mx-auto",children:[v.jsx("div",{className:"w-full h-full rounded-full border-4 border-white shadow-xl overflow-hidden bg-gradient-to-br from-indigo-50 to-purple-50 ring-4 ring-indigo-100/50",children:h||p?v.jsx("img",{src:p||h,alt:"Profile",className:"w-full h-full object-cover transition-all duration-300",onError:G=>{G.target.onerror=null,G.target.src="",G.target.className="hidden",G.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center text-sm text-red-500 bg-red-50">ไม่สามารถโหลดรูปได้</div>'}}):v.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-50",children:v.jsx("span",{className:"text-5xl",children:"👤"})})}),v.jsx("div",{className:"absolute -bottom-2 -right-2 p-2.5 bg-white rounded-full shadow-lg ring-2 ring-indigo-100/50",children:v.jsxs("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),S&&v.jsx("div",{className:"mb-8 p-4 bg-red-50/80  border border-red-200 rounded-2xl animate-fadeIn",children:v.jsxs("div",{className:"flex items-center text-red-700",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),v.jsx("p",{className:"text-sm font-medium",children:S})]})}),U&&v.jsx("div",{className:"mb-8 p-4 bg-green-50/80  border border-green-200 rounded-2xl animate-fadeIn",children:v.jsxs("div",{className:"flex items-center text-green-700",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),v.jsx("p",{className:"text-sm font-medium",children:U})]})}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"display-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อผู้ใช้"}),v.jsx("input",{type:"text",id:"display-name",value:i,onChange:G=>a(G.target.value),className:"w-full px-4 py-3.5 bg-white/50  border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"อีเมล"}),v.jsx("input",{type:"email",id:"email",value:o,onChange:G=>u(G.target.value),disabled:!0,className:"w-full px-4 py-3.5 bg-gray-100/80  border border-gray-200 rounded-xl text-gray-500 cursor-not-allowed"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"photo-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"ใส่ลิงก์รูปภาพใหม่"}),v.jsx("input",{type:"text",id:"photo-url",value:p,onChange:G=>y(G.target.value),placeholder:"ใส่ URL รูปภาพ",className:"w-full px-4 py-3.5 bg-white/50  border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})]})]}),v.jsxs("div",{className:"mt-12 flex justify-end space-x-4",children:[v.jsx("button",{type:"button",onClick:()=>n("/home"),className:"px-6 py-3 border border-gray-200 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-medium focus:ring-2 focus:ring-gray-200",children:"ยกเลิก"}),v.jsx("button",{type:"submit",disabled:E,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed font-medium focus:ring-2 focus:ring-indigo-500 shadow-lg shadow-indigo-500/20",children:E?v.jsxs("span",{className:"flex items-center",children:[v.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"กำลังบันทึก..."]}):"บันทึก"})]})]})]})})})})},f5=()=>{const n=Ys(),e=Zf(),t=zc(),[i,a]=$.useState({courseCode:"",courseName:"",className:"",imageUrl:""}),[o,u]=$.useState(""),[h,m]=$.useState(!1),[p,y]=$.useState(null),[E,b]=$.useState(!1);$.useEffect(()=>{if(i.imageUrl){const V=new Image;V.onload=()=>{y(i.imageUrl),b(!1)},V.onerror=()=>{y(null),b(!0)},V.src=i.imageUrl}else y(null),b(!1)},[i.imageUrl]);const S=V=>{a({...i,[V.target.name]:V.target.value})},O=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),U=async V=>{V.preventDefault(),m(!0),u("");try{const z=e.currentUser;if(!z)throw new Error("ไม่พบข้อมูลผู้ใช้ กรุณาเข้าสู่ระบบใหม่");if(!i.courseCode||!i.courseName||!i.className)throw new Error("กรุณากรอกข้อมูลให้ครบถ้วน");let G=i.imageUrl;(!G||!G.startsWith("http")||E)&&(G="https://via.placeholder.com/400x200?text=No+Image");const H=O();await k_(bc(t,"classroom",H),{owner:z.uid,info:{code:i.courseCode,name:i.courseName,room:i.className,photo:G}}),await k_(bc(t,"users",z.uid,"classroom",H),{status:1,info:{code:i.courseCode,name:i.courseName,room:i.className,photo:G}}),n("/home")}catch(z){console.error("Error adding course:",z),u(z.message)}finally{m(!1)}};return v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-white to-purple-100 py-16",children:v.jsx("div",{className:"container mx-auto px-4",children:v.jsx("div",{className:"max-w-4xl mx-auto",children:v.jsxs("div",{className:" bg-white/90 rounded-3xl shadow-2xl overflow-hidden border border-white/50 transform hover:scale-[1.01] transition-all duration-300",children:[v.jsxs("div",{className:"px-8 py-12 bg-gradient-to-r from-indigo-600 to-purple-600 relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_100%_100%,rgba(255,255,255,0.2)_0%,transparent_50%)] opacity-70"}),v.jsx("div",{className:"absolute -right-20 -top-20 w-64 h-64 bg-purple-500/30 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute -left-20 -bottom-20 w-64 h-64 bg-indigo-500/30 rounded-full blur-3xl"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-3 tracking-tight",children:"เพิ่มวิชาใหม่"}),v.jsx("p",{className:"text-indigo-100 text-center text-lg font-light",children:"สร้างรายวิชาใหม่สำหรับการเรียนการสอน"})]})]}),v.jsxs("form",{onSubmit:U,className:"p-10 space-y-8",children:[v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"group",children:[v.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"รหัสวิชา"}),v.jsx("input",{type:"text",name:"courseCode",value:i.courseCode,onChange:S,placeholder:"เช่น SC310001",required:!0,className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"})]}),v.jsxs("div",{className:"group",children:[v.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"ชื่อวิชา"}),v.jsx("input",{type:"text",name:"courseName",value:i.courseName,onChange:S,placeholder:"เช่น Computer Programming",required:!0,className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"})]}),v.jsxs("div",{className:"group",children:[v.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"ห้องเรียน"}),v.jsx("input",{type:"text",name:"className",value:i.className,onChange:S,placeholder:"เช่น SC5101",required:!0,className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"})]})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"group",children:[v.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"รูปภาพปก"}),v.jsx("input",{type:"url",name:"imageUrl",value:i.imageUrl,onChange:S,placeholder:"https://example.com/image.jpg",className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"}),E&&v.jsx("div",{className:"mt-3 p-4 bg-red-50/90  border-2 border-red-100 rounded-2xl animate-pulse",children:v.jsxs("div",{className:"flex items-center text-red-700",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),v.jsx("p",{className:"text-sm font-medium",children:"ไม่สามารถโหลดรูปภาพได้ กรุณาตรวจสอบ URL อีกครั้ง"})]})})]}),v.jsxs("div",{className:"mt-6",children:[v.jsx("p",{className:"text-base font-medium text-gray-700 mb-2",children:"ตัวอย่างรูปภาพ"}),v.jsx("div",{className:"border-2 border-gray-100 rounded-2xl overflow-hidden aspect-video bg-white/80  group hover:border-indigo-200 transition-all duration-300",children:p?v.jsx("img",{src:p,alt:"Course preview",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-lg",children:E?"ไม่สามารถโหลดรูปภาพได้":"ไม่มีรูปภาพ"})})]})]})]}),o&&v.jsx("div",{className:"p-4 bg-red-50/90  border-2 border-red-100 rounded-2xl animate-pulse",children:v.jsxs("div",{className:"flex items-center text-red-700",children:[v.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),v.jsx("p",{className:"text-sm font-medium",children:o})]})}),v.jsxs("div",{className:"flex justify-end space-x-4 pt-8 border-t border-gray-100",children:[v.jsx("button",{type:"button",onClick:()=>n("/home"),className:"px-8 py-4 border-2 border-gray-200 rounded-2xl text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 font-medium focus:ring-4 focus:ring-gray-200/50  text-base",children:"ยกเลิก"}),v.jsxs("button",{type:"submit",disabled:h,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed font-medium focus:ring-4 focus:ring-indigo-500/50 shadow-xl shadow-indigo-500/20 text-base relative overflow-hidden group",children:[v.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_100%_100%,rgba(255,255,255,0.2)_0%,transparent_50%)] opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),h?v.jsxs("span",{className:"flex items-center",children:[v.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"กำลังบันทึก..."]}):"บันทึก"]})]})]})]})})})})};var Wo={},Ug,pS;function m5(){return pS||(pS=1,Ug=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ug}var jg={},Cs={},gS;function no(){if(gS)return Cs;gS=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Cs.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Cs.getSymbolTotalCodewords=function(i){return e[i]},Cs.getBCHDigit=function(t){let i=0;for(;t!==0;)i++,t>>>=1;return i},Cs.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');n=i},Cs.isKanjiModeEnabled=function(){return typeof n<"u"},Cs.toSJIS=function(i){return n(i)},Cs}var Bg={},_S;function Vv(){return _S||(_S=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,a){if(n.isValid(i))return i;try{return e(i)}catch{return a}}}(Bg)),Bg}var zg,yS;function p5(){if(yS)return zg;yS=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},zg=n,zg}var Fg,vS;function g5(){if(vS)return Fg;vS=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,i,a){const o=e*this.size+t;this.data[o]=i,a&&(this.reservedBit[o]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},Fg=n,Fg}var qg={},ES;function _5(){return ES||(ES=1,function(n){const e=no().getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,o=e(i),u=o===145?26:Math.ceil((o-13)/(2*a-2))*2,h=[o-7];for(let m=1;m<a-1;m++)h[m]=h[m-1]-u;return h.push(6),h.reverse()},n.getPositions=function(i){const a=[],o=n.getRowColCoords(i),u=o.length;for(let h=0;h<u;h++)for(let m=0;m<u;m++)h===0&&m===0||h===0&&m===u-1||h===u-1&&m===0||a.push([o[h],o[m]]);return a}}(qg)),qg}var Hg={},TS;function y5(){if(TS)return Hg;TS=1;const n=no().getSymbolSize,e=7;return Hg.getPositions=function(i){const a=n(i);return[[0,0],[a-e,0],[0,a-e]]},Hg}var Gg={},wS;function v5(){return wS||(wS=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},n.from=function(a){return n.isValid(a)?parseInt(a,10):void 0},n.getPenaltyN1=function(a){const o=a.size;let u=0,h=0,m=0,p=null,y=null;for(let E=0;E<o;E++){h=m=0,p=y=null;for(let b=0;b<o;b++){let S=a.get(E,b);S===p?h++:(h>=5&&(u+=e.N1+(h-5)),p=S,h=1),S=a.get(b,E),S===y?m++:(m>=5&&(u+=e.N1+(m-5)),y=S,m=1)}h>=5&&(u+=e.N1+(h-5)),m>=5&&(u+=e.N1+(m-5))}return u},n.getPenaltyN2=function(a){const o=a.size;let u=0;for(let h=0;h<o-1;h++)for(let m=0;m<o-1;m++){const p=a.get(h,m)+a.get(h,m+1)+a.get(h+1,m)+a.get(h+1,m+1);(p===4||p===0)&&u++}return u*e.N2},n.getPenaltyN3=function(a){const o=a.size;let u=0,h=0,m=0;for(let p=0;p<o;p++){h=m=0;for(let y=0;y<o;y++)h=h<<1&2047|a.get(p,y),y>=10&&(h===1488||h===93)&&u++,m=m<<1&2047|a.get(y,p),y>=10&&(m===1488||m===93)&&u++}return u*e.N3},n.getPenaltyN4=function(a){let o=0;const u=a.data.length;for(let m=0;m<u;m++)o+=a.data[m];return Math.abs(Math.ceil(o*100/u/5)-10)*e.N4};function t(i,a,o){switch(i){case n.Patterns.PATTERN000:return(a+o)%2===0;case n.Patterns.PATTERN001:return a%2===0;case n.Patterns.PATTERN010:return o%3===0;case n.Patterns.PATTERN011:return(a+o)%3===0;case n.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(o/3))%2===0;case n.Patterns.PATTERN101:return a*o%2+a*o%3===0;case n.Patterns.PATTERN110:return(a*o%2+a*o%3)%2===0;case n.Patterns.PATTERN111:return(a*o%3+(a+o)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(a,o){const u=o.size;for(let h=0;h<u;h++)for(let m=0;m<u;m++)o.isReserved(m,h)||o.xor(m,h,t(a,m,h))},n.getBestMask=function(a,o){const u=Object.keys(n.Patterns).length;let h=0,m=1/0;for(let p=0;p<u;p++){o(p),n.applyMask(p,a);const y=n.getPenaltyN1(a)+n.getPenaltyN2(a)+n.getPenaltyN3(a)+n.getPenaltyN4(a);n.applyMask(p,a),y<m&&(m=y,h=p)}return h}}(Gg)),Gg}var Rd={},bS;function w1(){if(bS)return Rd;bS=1;const n=Vv(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Rd.getBlocksCount=function(a,o){switch(o){case n.L:return e[(a-1)*4+0];case n.M:return e[(a-1)*4+1];case n.Q:return e[(a-1)*4+2];case n.H:return e[(a-1)*4+3];default:return}},Rd.getTotalCodewordsCount=function(a,o){switch(o){case n.L:return t[(a-1)*4+0];case n.M:return t[(a-1)*4+1];case n.Q:return t[(a-1)*4+2];case n.H:return t[(a-1)*4+3];default:return}},Rd}var $g={},Wu={},SS;function E5(){if(SS)return Wu;SS=1;const n=new Uint8Array(512),e=new Uint8Array(256);return function(){let i=1;for(let a=0;a<255;a++)n[a]=i,e[i]=a,i<<=1,i&256&&(i^=285);for(let a=255;a<512;a++)n[a]=n[a-255]}(),Wu.log=function(i){if(i<1)throw new Error("log("+i+")");return e[i]},Wu.exp=function(i){return n[i]},Wu.mul=function(i,a){return i===0||a===0?0:n[e[i]+e[a]]},Wu}var CS;function T5(){return CS||(CS=1,function(n){const e=E5();n.mul=function(i,a){const o=new Uint8Array(i.length+a.length-1);for(let u=0;u<i.length;u++)for(let h=0;h<a.length;h++)o[u+h]^=e.mul(i[u],a[h]);return o},n.mod=function(i,a){let o=new Uint8Array(i);for(;o.length-a.length>=0;){const u=o[0];for(let m=0;m<a.length;m++)o[m]^=e.mul(a[m],u);let h=0;for(;h<o.length&&o[h]===0;)h++;o=o.slice(h)}return o},n.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let o=0;o<i;o++)a=n.mul(a,new Uint8Array([1,e.exp(o)]));return a}}($g)),$g}var Qg,AS;function w5(){if(AS)return Qg;AS=1;const n=T5();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(i){this.degree=i,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(i.length+this.degree);a.set(i);const o=n.mod(a,this.genPoly),u=this.degree-o.length;if(u>0){const h=new Uint8Array(this.degree);return h.set(o,u),h}return o},Qg=e,Qg}var Kg={},Yg={},Wg={},xS;function b1(){return xS||(xS=1,Wg.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Wg}var Ui={},RS;function S1(){if(RS)return Ui;RS=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Ui.KANJI=new RegExp(t,"g"),Ui.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ui.BYTE=new RegExp(i,"g"),Ui.NUMERIC=new RegExp(n,"g"),Ui.ALPHANUMERIC=new RegExp(e,"g");const a=new RegExp("^"+t+"$"),o=new RegExp("^"+n+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ui.testKanji=function(m){return a.test(m)},Ui.testNumeric=function(m){return o.test(m)},Ui.testAlphanumeric=function(m){return u.test(m)},Ui}var IS;function io(){return IS||(IS=1,function(n){const e=b1(),t=S1();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(o,u){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?o.ccBits[0]:u<27?o.ccBits[1]:o.ccBits[2]},n.getBestModeForData=function(o){return t.testNumeric(o)?n.NUMERIC:t.testAlphanumeric(o)?n.ALPHANUMERIC:t.testKanji(o)?n.KANJI:n.BYTE},n.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},n.isValid=function(o){return o&&o.bit&&o.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+a)}}n.from=function(o,u){if(n.isValid(o))return o;try{return i(o)}catch{return u}}}(Yg)),Yg}var NS;function b5(){return NS||(NS=1,function(n){const e=no(),t=w1(),i=Vv(),a=io(),o=b1(),u=7973,h=e.getBCHDigit(u);function m(b,S,O){for(let U=1;U<=40;U++)if(S<=n.getCapacity(U,O,b))return U}function p(b,S){return a.getCharCountIndicator(b,S)+4}function y(b,S){let O=0;return b.forEach(function(U){const V=p(U.mode,S);O+=V+U.getBitsLength()}),O}function E(b,S){for(let O=1;O<=40;O++)if(y(b,O)<=n.getCapacity(O,S,a.MIXED))return O}n.from=function(S,O){return o.isValid(S)?parseInt(S,10):O},n.getCapacity=function(S,O,U){if(!o.isValid(S))throw new Error("Invalid QR Code version");typeof U>"u"&&(U=a.BYTE);const V=e.getSymbolTotalCodewords(S),z=t.getTotalCodewordsCount(S,O),G=(V-z)*8;if(U===a.MIXED)return G;const H=G-p(U,S);switch(U){case a.NUMERIC:return Math.floor(H/10*3);case a.ALPHANUMERIC:return Math.floor(H/11*2);case a.KANJI:return Math.floor(H/13);case a.BYTE:default:return Math.floor(H/8)}},n.getBestVersionForData=function(S,O){let U;const V=i.from(O,i.M);if(Array.isArray(S)){if(S.length>1)return E(S,V);if(S.length===0)return 1;U=S[0]}else U=S;return m(U.mode,U.getLength(),V)},n.getEncodedBits=function(S){if(!o.isValid(S)||S<7)throw new Error("Invalid QR Code version");let O=S<<12;for(;e.getBCHDigit(O)-h>=0;)O^=u<<e.getBCHDigit(O)-h;return S<<12|O}}(Kg)),Kg}var Xg={},DS;function S5(){if(DS)return Xg;DS=1;const n=no(),e=1335,t=21522,i=n.getBCHDigit(e);return Xg.getEncodedBits=function(o,u){const h=o.bit<<3|u;let m=h<<10;for(;n.getBCHDigit(m)-i>=0;)m^=e<<n.getBCHDigit(m)-i;return(h<<10|m)^t},Xg}var Jg={},Zg,kS;function C5(){if(kS)return Zg;kS=1;const n=io();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let a,o,u;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),u=parseInt(o,10),i.put(u,10);const h=this.data.length-a;h>0&&(o=this.data.substr(a),u=parseInt(o,10),i.put(u,h*3+1))},Zg=e,Zg}var e_,OS;function A5(){if(OS)return e_;OS=1;const n=io(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(i){this.mode=n.ALPHANUMERIC,this.data=i}return t.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(a){let o;for(o=0;o+2<=this.data.length;o+=2){let u=e.indexOf(this.data[o])*45;u+=e.indexOf(this.data[o+1]),a.put(u,11)}this.data.length%2&&a.put(e.indexOf(this.data[o]),6)},e_=t,e_}var t_,MS;function x5(){if(MS)return t_;MS=1;const n=io();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(i){return i*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let i=0,a=this.data.length;i<a;i++)t.put(this.data[i],8)},t_=e,t_}var n_,PS;function R5(){if(PS)return n_;PS=1;const n=io(),e=no();function t(i){this.mode=n.KANJI,this.data=i}return t.getBitsLength=function(a){return a*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a<this.data.length;a++){let o=e.toSJIS(this.data[a]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),i.put(o,13)}},n_=t,n_}var i_={exports:{}},LS;function I5(){return LS||(LS=1,function(n){var e={single_source_shortest_paths:function(t,i,a){var o={},u={};u[i]=0;var h=e.PriorityQueue.make();h.push(i,0);for(var m,p,y,E,b,S,O,U,V;!h.empty();){m=h.pop(),p=m.value,E=m.cost,b=t[p]||{};for(y in b)b.hasOwnProperty(y)&&(S=b[y],O=E+S,U=u[y],V=typeof u[y]>"u",(V||U>O)&&(u[y]=O,h.push(y,O),o[y]=p))}if(typeof a<"u"&&typeof u[a]>"u"){var z=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(z)}return o},extract_shortest_path_from_predecessor_list:function(t,i){for(var a=[],o=i;o;)a.push(o),t[o],o=t[o];return a.reverse(),a},find_path:function(t,i,a){var o=e.single_source_shortest_paths(t,i,a);return e.extract_shortest_path_from_predecessor_list(o,a)},PriorityQueue:{make:function(t){var i=e.PriorityQueue,a={},o;t=t||{};for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);return a.queue=[],a.sorter=t.sorter||i.default_sorter,a},default_sorter:function(t,i){return t.cost-i.cost},push:function(t,i){var a={value:t,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e}(i_)),i_.exports}var VS;function N5(){return VS||(VS=1,function(n){const e=io(),t=C5(),i=A5(),a=x5(),o=R5(),u=S1(),h=no(),m=I5();function p(z){return unescape(encodeURIComponent(z)).length}function y(z,G,H){const Z=[];let le;for(;(le=z.exec(H))!==null;)Z.push({data:le[0],index:le.index,mode:G,length:le[0].length});return Z}function E(z){const G=y(u.NUMERIC,e.NUMERIC,z),H=y(u.ALPHANUMERIC,e.ALPHANUMERIC,z);let Z,le;return h.isKanjiModeEnabled()?(Z=y(u.BYTE,e.BYTE,z),le=y(u.KANJI,e.KANJI,z)):(Z=y(u.BYTE_KANJI,e.BYTE,z),le=[]),G.concat(H,Z,le).sort(function(M,D){return M.index-D.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function b(z,G){switch(G){case e.NUMERIC:return t.getBitsLength(z);case e.ALPHANUMERIC:return i.getBitsLength(z);case e.KANJI:return o.getBitsLength(z);case e.BYTE:return a.getBitsLength(z)}}function S(z){return z.reduce(function(G,H){const Z=G.length-1>=0?G[G.length-1]:null;return Z&&Z.mode===H.mode?(G[G.length-1].data+=H.data,G):(G.push(H),G)},[])}function O(z){const G=[];for(let H=0;H<z.length;H++){const Z=z[H];switch(Z.mode){case e.NUMERIC:G.push([Z,{data:Z.data,mode:e.ALPHANUMERIC,length:Z.length},{data:Z.data,mode:e.BYTE,length:Z.length}]);break;case e.ALPHANUMERIC:G.push([Z,{data:Z.data,mode:e.BYTE,length:Z.length}]);break;case e.KANJI:G.push([Z,{data:Z.data,mode:e.BYTE,length:p(Z.data)}]);break;case e.BYTE:G.push([{data:Z.data,mode:e.BYTE,length:p(Z.data)}])}}return G}function U(z,G){const H={},Z={start:{}};let le=["start"];for(let te=0;te<z.length;te++){const M=z[te],D=[];for(let C=0;C<M.length;C++){const R=M[C],A=""+te+C;D.push(A),H[A]={node:R,lastCount:0},Z[A]={};for(let k=0;k<le.length;k++){const I=le[k];H[I]&&H[I].node.mode===R.mode?(Z[I][A]=b(H[I].lastCount+R.length,R.mode)-b(H[I].lastCount,R.mode),H[I].lastCount+=R.length):(H[I]&&(H[I].lastCount=R.length),Z[I][A]=b(R.length,R.mode)+4+e.getCharCountIndicator(R.mode,G))}}le=D}for(let te=0;te<le.length;te++)Z[le[te]].end=0;return{map:Z,table:H}}function V(z,G){let H;const Z=e.getBestModeForData(z);if(H=e.from(G,Z),H!==e.BYTE&&H.bit<Z.bit)throw new Error('"'+z+'" cannot be encoded with mode '+e.toString(H)+`.
 Suggested mode is: `+e.toString(Z));switch(H===e.KANJI&&!h.isKanjiModeEnabled()&&(H=e.BYTE),H){case e.NUMERIC:return new t(z);case e.ALPHANUMERIC:return new i(z);case e.KANJI:return new o(z);case e.BYTE:return new a(z)}}n.fromArray=function(G){return G.reduce(function(H,Z){return typeof Z=="string"?H.push(V(Z,null)):Z.data&&H.push(V(Z.data,Z.mode)),H},[])},n.fromString=function(G,H){const Z=E(G,h.isKanjiModeEnabled()),le=O(Z),te=U(le,H),M=m.find_path(te.map,"start","end"),D=[];for(let C=1;C<M.length-1;C++)D.push(te.table[M[C]].node);return n.fromArray(S(D))},n.rawSplit=function(G){return n.fromArray(E(G,h.isKanjiModeEnabled()))}}(Jg)),Jg}var US;function D5(){if(US)return jg;US=1;const n=no(),e=Vv(),t=p5(),i=g5(),a=_5(),o=y5(),u=v5(),h=w1(),m=w5(),p=b5(),y=S5(),E=io(),b=N5();function S(te,M){const D=te.size,C=o.getPositions(M);for(let R=0;R<C.length;R++){const A=C[R][0],k=C[R][1];for(let I=-1;I<=7;I++)if(!(A+I<=-1||D<=A+I))for(let se=-1;se<=7;se++)k+se<=-1||D<=k+se||(I>=0&&I<=6&&(se===0||se===6)||se>=0&&se<=6&&(I===0||I===6)||I>=2&&I<=4&&se>=2&&se<=4?te.set(A+I,k+se,!0,!0):te.set(A+I,k+se,!1,!0))}}function O(te){const M=te.size;for(let D=8;D<M-8;D++){const C=D%2===0;te.set(D,6,C,!0),te.set(6,D,C,!0)}}function U(te,M){const D=a.getPositions(M);for(let C=0;C<D.length;C++){const R=D[C][0],A=D[C][1];for(let k=-2;k<=2;k++)for(let I=-2;I<=2;I++)k===-2||k===2||I===-2||I===2||k===0&&I===0?te.set(R+k,A+I,!0,!0):te.set(R+k,A+I,!1,!0)}}function V(te,M){const D=te.size,C=p.getEncodedBits(M);let R,A,k;for(let I=0;I<18;I++)R=Math.floor(I/3),A=I%3+D-8-3,k=(C>>I&1)===1,te.set(R,A,k,!0),te.set(A,R,k,!0)}function z(te,M,D){const C=te.size,R=y.getEncodedBits(M,D);let A,k;for(A=0;A<15;A++)k=(R>>A&1)===1,A<6?te.set(A,8,k,!0):A<8?te.set(A+1,8,k,!0):te.set(C-15+A,8,k,!0),A<8?te.set(8,C-A-1,k,!0):A<9?te.set(8,15-A-1+1,k,!0):te.set(8,15-A-1,k,!0);te.set(C-8,8,1,!0)}function G(te,M){const D=te.size;let C=-1,R=D-1,A=7,k=0;for(let I=D-1;I>0;I-=2)for(I===6&&I--;;){for(let se=0;se<2;se++)if(!te.isReserved(R,I-se)){let fe=!1;k<M.length&&(fe=(M[k]>>>A&1)===1),te.set(R,I-se,fe),A--,A===-1&&(k++,A=7)}if(R+=C,R<0||D<=R){R-=C,C=-C;break}}}function H(te,M,D){const C=new t;D.forEach(function(se){C.put(se.mode.bit,4),C.put(se.getLength(),E.getCharCountIndicator(se.mode,te)),se.write(C)});const R=n.getSymbolTotalCodewords(te),A=h.getTotalCodewordsCount(te,M),k=(R-A)*8;for(C.getLengthInBits()+4<=k&&C.put(0,4);C.getLengthInBits()%8!==0;)C.putBit(0);const I=(k-C.getLengthInBits())/8;for(let se=0;se<I;se++)C.put(se%2?17:236,8);return Z(C,te,M)}function Z(te,M,D){const C=n.getSymbolTotalCodewords(M),R=h.getTotalCodewordsCount(M,D),A=C-R,k=h.getBlocksCount(M,D),I=C%k,se=k-I,fe=Math.floor(C/k),J=Math.floor(A/k),oe=J+1,ue=fe-J,we=new m(ue);let L=0;const ie=new Array(k),ye=new Array(k);let de=0;const me=new Uint8Array(te.buffer);for(let it=0;it<k;it++){const Ye=it<se?J:oe;ie[it]=me.slice(L,L+Ye),ye[it]=we.encode(ie[it]),L+=Ye,de=Math.max(de,Ye)}const Re=new Uint8Array(C);let Ie=0,et,ke;for(et=0;et<de;et++)for(ke=0;ke<k;ke++)et<ie[ke].length&&(Re[Ie++]=ie[ke][et]);for(et=0;et<ue;et++)for(ke=0;ke<k;ke++)Re[Ie++]=ye[ke][et];return Re}function le(te,M,D,C){let R;if(Array.isArray(te))R=b.fromArray(te);else if(typeof te=="string"){let fe=M;if(!fe){const J=b.rawSplit(te);fe=p.getBestVersionForData(J,D)}R=b.fromString(te,fe||40)}else throw new Error("Invalid data");const A=p.getBestVersionForData(R,D);if(!A)throw new Error("The amount of data is too big to be stored in a QR Code");if(!M)M=A;else if(M<A)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+A+`.
`);const k=H(M,D,R),I=n.getSymbolSize(M),se=new i(I);return S(se,M),O(se),U(se,M),z(se,D,0),M>=7&&V(se,M),G(se,k),isNaN(C)&&(C=u.getBestMask(se,z.bind(null,se,D))),u.applyMask(C,se),z(se,D,C),{modules:se,version:M,errorCorrectionLevel:D,maskPattern:C,segments:R}}return jg.create=function(M,D){if(typeof M>"u"||M==="")throw new Error("No input text");let C=e.M,R,A;return typeof D<"u"&&(C=e.from(D.errorCorrectionLevel,e.M),R=p.from(D.version),A=u.from(D.maskPattern),D.toSJISFunc&&n.setToSJISFunction(D.toSJISFunc)),le(M,R,C,A)},jg}var r_={},s_={},jS;function C1(){return jS||(jS=1,function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let i=t.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+t);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(o){return[o,o]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,o=i.width&&i.width>=21?i.width:void 0,u=i.scale||4;return{width:o,scale:o?4:u,margin:a,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},n.getImageWidth=function(i,a){const o=n.getScale(i,a);return Math.floor((i+a.margin*2)*o)},n.qrToImageData=function(i,a,o){const u=a.modules.size,h=a.modules.data,m=n.getScale(u,o),p=Math.floor((u+o.margin*2)*m),y=o.margin*m,E=[o.color.light,o.color.dark];for(let b=0;b<p;b++)for(let S=0;S<p;S++){let O=(b*p+S)*4,U=o.color.light;if(b>=y&&S>=y&&b<p-y&&S<p-y){const V=Math.floor((b-y)/m),z=Math.floor((S-y)/m);U=E[h[V*u+z]?1:0]}i[O++]=U.r,i[O++]=U.g,i[O++]=U.b,i[O]=U.a}}}(s_)),s_}var BS;function k5(){return BS||(BS=1,function(n){const e=C1();function t(a,o,u){a.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=u,o.width=u,o.style.height=u+"px",o.style.width=u+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(o,u,h){let m=h,p=u;typeof m>"u"&&(!u||!u.getContext)&&(m=u,u=void 0),u||(p=i()),m=e.getOptions(m);const y=e.getImageWidth(o.modules.size,m),E=p.getContext("2d"),b=E.createImageData(y,y);return e.qrToImageData(b.data,o,m),t(E,p,y),E.putImageData(b,0,0),p},n.renderToDataURL=function(o,u,h){let m=h;typeof m>"u"&&(!u||!u.getContext)&&(m=u,u=void 0),m||(m={});const p=n.render(o,u,m),y=m.type||"image/png",E=m.rendererOpts||{};return p.toDataURL(y,E.quality)}}(r_)),r_}var a_={},zS;function O5(){if(zS)return a_;zS=1;const n=C1();function e(a,o){const u=a.a/255,h=o+'="'+a.hex+'"';return u<1?h+" "+o+'-opacity="'+u.toFixed(2).slice(1)+'"':h}function t(a,o,u){let h=a+o;return typeof u<"u"&&(h+=" "+u),h}function i(a,o,u){let h="",m=0,p=!1,y=0;for(let E=0;E<a.length;E++){const b=Math.floor(E%o),S=Math.floor(E/o);!b&&!p&&(p=!0),a[E]?(y++,E>0&&b>0&&a[E-1]||(h+=p?t("M",b+u,.5+S+u):t("m",m,0),m=0,p=!1),b+1<o&&a[E+1]||(h+=t("h",y),y=0)):m++}return h}return a_.render=function(o,u,h){const m=n.getOptions(u),p=o.modules.size,y=o.modules.data,E=p+m.margin*2,b=m.color.light.a?"<path "+e(m.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",S="<path "+e(m.color.dark,"stroke")+' d="'+i(y,p,m.margin)+'"/>',O='viewBox="0 0 '+E+" "+E+'"',V='<svg xmlns="http://www.w3.org/2000/svg" '+(m.width?'width="'+m.width+'" height="'+m.width+'" ':"")+O+' shape-rendering="crispEdges">'+b+S+`</svg>
`;return typeof h=="function"&&h(null,V),V},a_}var FS;function M5(){if(FS)return Wo;FS=1;const n=m5(),e=D5(),t=k5(),i=O5();function a(o,u,h,m,p){const y=[].slice.call(arguments,1),E=y.length,b=typeof y[E-1]=="function";if(!b&&!n())throw new Error("Callback required as last argument");if(b){if(E<2)throw new Error("Too few arguments provided");E===2?(p=h,h=u,u=m=void 0):E===3&&(u.getContext&&typeof p>"u"?(p=m,m=void 0):(p=m,m=h,h=u,u=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(h=u,u=m=void 0):E===2&&!u.getContext&&(m=h,h=u,u=void 0),new Promise(function(S,O){try{const U=e.create(h,m);S(o(U,u,m))}catch(U){O(U)}})}try{const S=e.create(h,m);p(null,o(S,u,m))}catch(S){p(S)}}return Wo.create=e.create,Wo.toCanvas=a.bind(null,t.render),Wo.toDataURL=a.bind(null,t.renderToDataURL),Wo.toString=a.bind(null,function(o,u,h){return i.render(o,h)}),Wo}var P5=M5();const A1=XI(P5),L5=Object.freeze(Object.defineProperty({__proto__:null,default:A1},Symbol.toStringTag,{value:"Module"})),V5=()=>{var te,M,D,C,R;const{id:n}=Z_(),e=zc(),[t,i]=$.useState(null),[a,o]=$.useState([]),[u,h]=$.useState([]),[m,p]=$.useState(!0),[y,E]=$.useState(!1),[b,S]=$.useState(new Date().toISOString().split("T")[0]),O=$.useRef(null),U=Ys(),V=A=>{if(!A)return"ไม่ระบุ";const k=new Date(A),I={day:"2-digit",month:"2-digit",year:"numeric"};return k.toLocaleDateString("th-TH",I)};$.useEffect(()=>{(async()=>{try{const k=bc(e,"classroom",n),I=await sx(k);I.exists()&&i(I.data())}catch(k){console.error("Error fetching classroom data from Firestore:",k)}})()},[n,e]),$.useEffect(()=>{const A=jt(),k=ze(A,`classroom/${n}/students`),I=Nr(k,se=>{if(console.log("🔥 Student Data from Firebase:",se.val()),se.exists()){const fe=se.val(),J=Object.entries(fe).map(([oe,ue])=>({id:oe,name:ue.name||"",stdid:ue.stdid||""}));console.log("📌 Students List:",J),o(J)}else console.log("❌ No student data found!"),o([]);p(!1)});return()=>{Dr(k,I)}},[n]),$.useEffect(()=>{const A=jt(),k=ze(A,`classroom/${n}/checkin`),I=Nr(k,se=>{if(se.exists()){const fe=se.val(),J=Object.entries(fe).map(([oe,ue])=>{let we;ue.createdAt?we=new Date(ue.createdAt):we=new Date;let L=0;return ue.scores&&(L=Object.values(ue.scores).filter(ie=>ie.status===1).length),{id:oe,date:we,dateStr:V(we),createdAt:ue.createdAt,status:ue.status||0,attendanceCount:L,scores:ue.scores||{}}});J.sort((oe,ue)=>oe.createdAt&&ue.createdAt?ue.createdAt-oe.createdAt:0),h(J)}else h([]);p(!1)});return()=>{Dr(k,I)}},[n]);const z=b?u.filter(A=>{if(!A.date)return!1;const k=new Date(b);return A.date.getDate()===k.getDate()&&A.date.getMonth()===k.getMonth()&&A.date.getFullYear()===k.getFullYear()}):u,G=async()=>{if(O.current)try{const A=document.createElement("canvas");await A1.toCanvas(A,String(n),{width:256,margin:2,color:{dark:"#000000",light:"#ffffff"}}),O.current.innerHTML="",O.current.appendChild(A)}catch(A){console.error("Error generating QR Code:",A)}},H=async()=>{try{const A=jt(),k=ze(A,`classroom/${n}/checkin`),I=Qj(k),se=I.key;await Ga(I,{createdAt:s5(),date:new Date().toLocaleString("th-TH"),status:1,code:Z(6)});const fe=ze(A,`classroom/${n}/students`),J=await Af(fe);if(J.exists()){const oe=J.val(),ue=ze(A,`classroom/${n}/checkin/${se}/scores`),we={};Object.entries(oe).forEach(([L,ie])=>{we[L]={uid:L,stdid:ie.stdid||"",name:ie.name||"",status:0,score:0,remark:"",date:""}}),await Ga(ue,we)}U(`/checkin/${n}/${se}`)}catch(A){console.error("Error creating check-in:",A)}},Z=A=>{const k="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let I="";for(let se=0;se<A;se++)I+=k.charAt(Math.floor(Math.random()*k.length));return I},le=A=>{U(`/checkin/${n}/${A}`)};return m?v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:v.jsxs("div",{className:"p-8 bg-white rounded-xl shadow-xl",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),v.jsx("p",{className:"mt-4 text-gray-600 font-medium text-center",children:"กำลังโหลดข้อมูล"})]})}):t?v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("button",{onClick:()=>U("/home"),className:"group flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-white transition duration-200 mb-6",children:[v.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),v.jsx("span",{className:"font-medium",children:"กลับสู่หน้าหลัก"})]}),v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:[v.jsxs("div",{className:"relative z-10 p-8",children:[v.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:(te=t.info)==null?void 0:te.name}),v.jsxs("div",{className:"space-y-2 text-white/90",children:[v.jsxs("p",{className:"text-lg",children:["รหัสวิชา: ",(M=t.info)==null?void 0:M.code]}),v.jsxs("p",{className:"text-lg",children:["ห้องเรียน: ",(D=t.info)==null?void 0:D.room]})]}),v.jsx("button",{onClick:()=>{E(!0),setTimeout(G,100)},className:"mt-6 px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-xl font-medium backdrop-blur-sm transition duration-200 transform hover:scale-105",children:"แสดง QR Code ลงทะเบียน"})]}),v.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20",children:v.jsx("div",{className:"w-40 h-40 bg-white/10 rounded-full blur-2xl"})})]}),y&&v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full mx-4",children:[v.jsxs("div",{className:"flex justify-between items-start mb-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"QR Code สำหรับลงทะเบียน"}),v.jsx("p",{className:"text-xl font-semibold text-gray-800",children:(C=t.info)==null?void 0:C.name}),v.jsxs("p",{className:"text-lg text-gray-700 font-medium",children:["รหัสวิชา: ",(R=t.info)==null?void 0:R.code]})]}),v.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors duration-200",children:v.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{ref:O,className:"bg-gradient-to-br from-gray-50 to-gray-100 p-8 rounded-2xl flex justify-center items-center min-h-[320px] shadow-inner"}),v.jsx("p",{className:"text-center text-gray-500 text-sm mt-4",children:"สแกน QR Code เพื่อเข้าร่วมห้องเรียน"})]})}),v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-8",children:[v.jsx("div",{className:"p-6 border-b border-gray-100",children:v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"รายชื่อนักเรียนที่ลงทะเบียน"})}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-50",children:[v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"รหัสนักเรียน"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ชื่อนักเรียน"})]})}),v.jsx("tbody",{className:"divide-y divide-gray-100",children:a.length>0?a.map((A,k)=>v.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[v.jsx("td",{className:"px-6 py-4 text-gray-600",children:k+1}),v.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:A.stdid}),v.jsx("td",{className:"px-6 py-4 text-gray-800",children:A.name})]},A.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:"3",className:"text-center py-4 text-gray-600",children:"ไม่พบข้อมูลนักเรียน"})})})]})})]}),v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[v.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center flex-wrap",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ประวัติการเช็คชื่อ"}),v.jsxs("div",{className:"flex items-center space-x-4 mt-2 sm:mt-0",children:[v.jsxs("div",{className:"flex flex-col",children:[v.jsx("label",{htmlFor:"dateFilter",className:"text-sm text-gray-600 mb-1",children:"กรองตามวันที่"}),v.jsx("input",{id:"dateFilter",type:"date",value:b,onChange:A=>S(A.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["วันที่แสดง: ",V(b)]})]}),v.jsx("button",{onClick:H,className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium shadow-lg shadow-blue-500/20 hover:bg-blue-600 transition duration-200 transform hover:scale-105",children:"เพิ่มการเช็คชื่อ"})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-50",children:[v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"วัน-เวลา"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"จำนวนคนเข้าเรียน"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"สถานะ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"จัดการ"})]})}),v.jsx("tbody",{className:"divide-y divide-gray-100",children:z.length>0?z.map((A,k)=>v.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[v.jsx("td",{className:"px-6 py-4 text-gray-600",children:k+1}),v.jsx("td",{className:"px-6 py-4 text-gray-800",children:V(A.date)}),v.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[A.attendanceCount||0," คน"]}),v.jsx("td",{className:"px-6 py-4",children:v.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${A.status===2?"bg-green-50 text-green-700 ring-1 ring-green-600/20":A.status===1?"bg-yellow-50 text-yellow-700 ring-1 ring-yellow-600/20":"bg-gray-50 text-gray-700 ring-1 ring-gray-600/20"}`,children:A.status===2?"เสร็จสิ้น":A.status===1?"กำลังเช็คชื่อ":"ยังไม่เริ่ม"})}),v.jsx("td",{className:"px-6 py-4",children:v.jsx("button",{onClick:()=>le(A.id),className:"text-blue-500 hover:text-blue-700 font-medium transition-colors",children:"เช็คชื่อ"})})]},A.id)):v.jsx("tr",{children:v.jsx("td",{colSpan:"5",className:"text-center py-4 text-gray-600",children:"ไม่พบข้อมูลการเช็คชื่อ"})})})]})})]})]})}):v.jsx("div",{children:"ไม่พบข้อมูลห้องเรียน"})},U5=()=>{const n=Ys(),[e,t]=$.useState([]),[i,a]=$.useState([]),[o,u]=$.useState(""),[h,m]=$.useState(!1),[p,y]=$.useState(!1),[E,b]=$.useState(!1),{classroomId:S,checkinId:O}=Z_(),[U,V]=$.useState(!0),[z,G]=$.useState({});$.useEffect(()=>((async()=>{try{const A=jt(),k=ze(A,`classroom/${S}/students`);Nr(k,I=>{I.exists()&&G(I.val())})}catch(A){console.error("Error fetching students data:",A)}})(),()=>{const A=jt(),k=ze(A,`classroom/${S}/students`);Dr(k)}),[S]),$.useEffect(()=>((async()=>{try{const A=jt(),k=ze(A,`classroom/${S}/checkin/${O}/question_show`);Nr(k,se=>{se.exists()?m(se.val()):m(!1)});const I=ze(A,`classroom/${S}/checkin/${O}/questions`);if(Nr(I,se=>{if(se.exists()){const fe=se.val();if(Array.isArray(fe)&&fe.some(J=>J!==null)){const J=fe.filter(oe=>oe!==null).map((oe,ue)=>({id:ue,questionNo:oe.question_no||"",questionText:oe.question_text||"",type:oe.type||"text",choices:oe.choices||[],isEditing:!1}));if(t(J),b(!0),J.length>0&&h){const oe=J[J.length-1];u(oe.questionNo)}}else if(Array.isArray(fe))t([]);else{const J=Object.entries(fe).filter(([oe,ue])=>ue!==null).map(([oe,ue])=>({id:parseInt(oe),questionNo:ue.question_no||"",questionText:ue.question_text||"",type:ue.type||"text",choices:ue.choices||[],isEditing:!1}));if(t(J),b(!0),J.length>0&&h){const oe=J[J.length-1];u(oe.questionNo)}}}else t([]);V(!1)}),o){const se=ze(A,`classroom/${S}/checkin/${O}/answers/${o}`);Nr(se,fe=>{if(fe.exists()){const J=fe.val();if(J.students){const oe=Object.entries(J.students).map(([ue,we])=>{const L=Object.entries(z).find(([ye,de])=>de.stdid===ue||ye===ue);let ie=we.name||"";return!ie&&L&&(ie=L[1].name),{id:ue,text:we.text||"",time:we.time?new Date(we.time).toLocaleString("th-TH"):new Date().toLocaleString("th-TH"),studentId:ue,studentName:ie||`นักเรียน (${ue})`}});a(oe)}else a([])}else a([])})}}catch(A){console.error("Error fetching question data:",A),V(!1)}})(),()=>{const A=jt(),k=ze(A,`classroom/${S}/checkin/${O}/question_show`),I=ze(A,`classroom/${S}/checkin/${O}/questions`);if(o){const se=ze(A,`classroom/${S}/checkin/${O}/answers/${o}`);Dr(se)}Dr(k),Dr(I)}),[S,O,o,h,z]);const H=R=>{const A={id:e.length+1,type:R,questionNo:"",questionText:"",choices:R==="choice"?["",""]:[],isEditing:!0};t([...e,A]),b(!0)},Z=(R,A,k)=>{const I=e.map(se=>se.id===R?{...se,[A]:k}:se);t(I)},le=R=>{const A=e.map(k=>k.id===R?{...k,choices:[...k.choices,""]}:k);t(A)},te=R=>{const A=e.filter(k=>k.id!==R);t(A),A.length===0&&b(!1)},M=async()=>{if(e.length===0){alert("กรุณาเพิ่มคำถามก่อน");return}try{const R=jt(),A=ze(R,`classroom/${S}/checkin/${O}/questions`),k={};e.forEach(fe=>{k[fe.id]={question_no:fe.questionNo,question_text:fe.questionText,type:fe.type,choices:fe.type==="choice"?fe.choices:null}}),await Ga(A,k);const I=e[e.length-1];await Bi(ze(R,`classroom/${S}/checkin/${O}`),{question_no:I.questionNo,question_text:I.questionText,question_show:!0});const se=ze(R,`classroom/${S}/checkin/${O}/answers/${I.questionNo}`);await Ga(se,{text:I.questionText,students:{}}),m(!0),u(I.questionNo),y(!0),alert("เริ่มถามคำถามเรียบร้อย")}catch(R){console.error("Error starting questions:",R),alert("เกิดข้อผิดพลาดในการเริ่มคำถาม")}},D=async()=>{try{const R=jt();await Bi(ze(R,`classroom/${S}/checkin/${O}`),{question_show:!1}),m(!1),alert("ปิดคำถามเรียบร้อย")}catch(R){console.error("Error ending question:",R),alert("เกิดข้อผิดพลาดในการปิดคำถาม")}},C=async()=>{if(window.confirm("คุณต้องการจบคำถามทั้งหมดสำหรับคลาสครั้งนี้ใช่หรือไม่? ข้อมูลคำถามและคำตอบทั้งหมดจะถูกลบ"))try{const R=jt();await Bi(ze(R,`classroom/${S}/checkin/${O}`),{question_show:!1,question_no:"",question_text:""}),await Y_(ze(R,`classroom/${S}/checkin/${O}/questions`)),await Y_(ze(R,`classroom/${S}/checkin/${O}/answers`)),m(!1),u(""),t([]),a([]),b(!1),alert("จบคำถามทั้งหมดเรียบร้อย ข้อมูลคำถามและคำตอบทั้งหมดถูกลบแล้ว"),n(`/checkin/${S}/${O}`)}catch(R){console.error("Error ending all questions:",R),alert("เกิดข้อผิดพลาดในการจบคำถามทั้งหมด")}};return U?v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-indigo-50 to-blue-50 flex items-center justify-center",children:v.jsxs("div",{className:"p-8 bg-white rounded-xl shadow-xl",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"}),v.jsx("p",{className:"mt-4 text-gray-600 font-medium text-center",children:"กำลังโหลดข้อมูล"})]})}):v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("button",{onClick:()=>n(-1),className:"group flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-white transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),v.jsx("span",{className:"font-medium",children:"กลับสู่หน้าเช็คชื่อ"})]}),v.jsx("button",{onClick:C,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-xl font-medium shadow-lg shadow-red-500/20 hover:from-red-600 hover:to-rose-700 transition duration-200 transform hover:scale-105",children:"🚫 จบคำถามทั้งหมดสำหรับคลาสนี้"})]}),v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:[v.jsxs("div",{className:"relative z-10 p-8",children:[v.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"ถาม-ตอบในห้องเรียน"}),v.jsx("p",{className:"text-white/90",children:"สร้างคำถามและดูคำตอบจากนักเรียนแบบเรียลไทม์"}),h&&v.jsxs("div",{className:"mt-4 px-4 py-2 bg-white/20 rounded-xl backdrop-blur-sm inline-block",children:[v.jsxs("p",{className:"text-white",children:["สถานะ: ",v.jsx("span",{className:"font-semibold",children:"กำลังถามคำถาม"})]}),o&&v.jsxs("p",{className:"text-white",children:["คำถามที่กำลังถาม: ",o]})]})]}),v.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20",children:v.jsx("div",{className:"w-40 h-40 bg-white/10 rounded-full blur-2xl"})})]}),v.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden mb-8 border border-gray-100",children:[v.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-8",children:v.jsx("h2",{className:"text-3xl font-bold text-white",children:"ตั้งคำถาม"})}),v.jsxs("div",{className:"p-8 space-y-8",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:()=>H("text"),className:"flex-1 px-6 py-4 bg-gradient-to-r from-emerald-400 to-green-500 text-white rounded-2xl font-medium shadow-lg hover:from-emerald-500 hover:to-green-600 transition-all duration-300 transform hover:-translate-y-1",children:"✏️ เพิ่มคำถามแบบข้อความ"}),v.jsx("button",{onClick:()=>H("choice"),className:"flex-1 px-6 py-4 bg-gradient-to-r from-blue-400 to-indigo-500 text-white rounded-2xl font-medium shadow-lg hover:from-blue-500 hover:to-indigo-600 transition-all duration-300 transform hover:-translate-y-1",children:"🎯 เพิ่มคำถามแบบตัวเลือก"})]}),e.map(R=>v.jsxs("div",{className:"space-y-6 bg-gray-50 p-8 rounded-2xl border border-gray-200 hover:border-purple-200 transition-all duration-300",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"w-10 h-10 flex items-center justify-center bg-purple-100 text-purple-600 rounded-full font-bold",children:R.id}),v.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["คำถาม ",R.type==="text"?"ข้อความ":"ตัวเลือก"]})]}),v.jsx("button",{onClick:()=>te(R.id),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition duration-300 transform hover:-translate-y-1 shadow-lg shadow-red-500/20",children:"ยกเลิก"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ข้อที่"}),v.jsx("input",{type:"text",value:R.questionNo,onChange:A=>Z(R.id,"questionNo",A.target.value),placeholder:"กรอกข้อที่ของคำถาม",className:"w-full px-6 py-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-300 hover:border-purple-300"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"คำถาม"}),v.jsx("textarea",{value:R.questionText,onChange:A=>Z(R.id,"questionText",A.target.value),placeholder:"พิมพ์คำถามที่ต้องการถาม...",rows:"4",className:"w-full px-6 py-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-300 hover:border-purple-300"})]}),R.type==="choice"&&v.jsxs("div",{className:"space-y-4",children:[v.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ตัวเลือก"}),R.choices.map((A,k)=>v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:A,onChange:I=>{const se=[...R.choices];se[k]=I.target.value,Z(R.id,"choices",se)},placeholder:`ตัวเลือก ${k+1}`,className:"w-full px-6 py-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-300 hover:border-purple-300"}),k>=2&&v.jsx("button",{onClick:()=>{const I=R.choices.filter((se,fe)=>fe!==k);Z(R.id,"choices",I)},className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition duration-300 transform hover:-translate-y-1 shadow-lg shadow-red-500/20",children:"ลบ"})]},k)),v.jsx("button",{onClick:()=>le(R.id),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition duration-300 transform hover:-translate-y-1 shadow-md",children:"➕ เพิ่มตัวเลือก"})]})]},R.id)),E&&v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:M,disabled:h,className:`flex-1 px-6 py-4 rounded-2xl font-medium shadow-lg transition-all duration-300 transform hover:-translate-y-1
                  ${h?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-blue-400 to-blue-600 text-white shadow-blue-500/20 hover:from-blue-500 hover:to-blue-700"}`,children:"🚀 เริ่มถามคำถามทั้งหมด"}),v.jsx("button",{onClick:D,disabled:!h,className:`flex-1 px-6 py-4 rounded-2xl font-medium shadow-lg transition-all duration-300 transform hover:-translate-y-1
                  ${h?"bg-gradient-to-r from-red-400 to-red-600 text-white shadow-red-500/20 hover:from-red-500 hover:to-red-700":"bg-gray-300 cursor-not-allowed"}`,children:"🛑 ปิดคำถาม"}),v.jsx("button",{onClick:()=>y(!0),className:"flex-1 px-6 py-4 bg-gradient-to-r from-purple-400 to-purple-600 text-white rounded-2xl font-medium shadow-lg hover:from-purple-500 hover:to-purple-700 transition-all duration-300 transform hover:-translate-y-1 shadow-purple-500/20",children:"👁️ แสดงคำถาม"})]})]})]}),v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[v.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"คำตอบจากนักเรียน"}),o&&v.jsxs("div",{className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl",children:["กำลังแสดงคำตอบจากคำถามข้อที่: ",o]})]}),v.jsx("div",{className:"p-6",children:i.length>0?v.jsx("div",{className:"grid gap-4",children:i.map(R=>v.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100 hover:border-purple-200 transition duration-200",children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold mr-3",children:R.studentName?R.studentName.charAt(0):"?"}),v.jsx("p",{className:"text-gray-800 text-lg font-medium",children:R.studentName})]}),v.jsx("span",{className:"text-sm text-gray-500",children:R.time})]}),v.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:v.jsx("p",{className:"text-gray-800 text-lg",children:R.text})})]},R.id))}):v.jsxs("div",{className:"text-center py-12",children:[v.jsx("p",{className:"text-gray-500 text-lg",children:"ยังไม่มีคำตอบจากนักเรียน"}),h&&o&&v.jsx("p",{className:"text-gray-400 mt-2",children:"รอคำตอบจากนักเรียน..."})]})})]}),p&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 popup-ques",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-2xl p-6 space-y-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"คำถามที่ถามไป"}),v.jsx("div",{className:"space-y-4",children:e.map(R=>v.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl space-y-6",children:[v.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["คำถาม  (",R.type==="text"?"ข้อความ":"ตัวเลือก",")"]}),v.jsx("p",{className:"text-2xl text-gray-800 leading-relaxed",children:R.questionText}),R.type==="choice"&&v.jsx("ol",{className:"list-decimal space-y-3",children:R.choices.map((A,k)=>v.jsx("li",{className:"text-xl text-gray-700",children:A},k))})]},R.id))}),v.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium shadow-lg hover:bg-blue-600 transition duration-200",children:"ปิด"})]})})]})})},j5="modulepreload",B5=function(n){return"/final-web-app-SC310006/"+n},qS={},z5=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(t.map(m=>{if(m=B5(m),m in qS)return;qS[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const E=document.createElement("link");if(E.rel=p?"stylesheet":j5,p||(E.as="script"),E.crossOrigin="",E.href=m,h&&E.setAttribute("nonce",h),document.head.appendChild(E),p)return new Promise((b,S)=>{E.addEventListener("load",b),E.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},F5=()=>v.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:v.jsxs("div",{className:"p-8 bg-white rounded-xl shadow-xl",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),v.jsx("p",{className:"mt-4 text-gray-600 font-medium text-center",children:"กำลังโหลดข้อมูล"})]})}),q5=({classroom:n,currentCheckin:e,checkinDate:t,checkInCode:i})=>{var h,m,p;const a=((h=n==null?void 0:n.info)==null?void 0:h.name)||"ไม่พบข้อมูลห้องเรียน",o=((m=n==null?void 0:n.info)==null?void 0:m.code)||"กรุณาตรวจสอบการเชื่อมต่อ",u=((p=n==null?void 0:n.info)==null?void 0:p.room)||"กรุณาตรวจสอบการเชื่อมต่อ";return v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:[v.jsx("div",{className:"relative z-10 p-8",children:v.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:a}),v.jsxs("p",{className:"text-white/90 text-lg mb-1",children:["รหัสวิชา: ",o]}),v.jsxs("p",{className:"text-white/90 text-lg mb-3",children:["ห้องเรียน: ",u]})]}),v.jsxs("div",{className:"mt-4 md:mt-0 bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[v.jsx("h2",{className:"text-white text-xl font-bold",children:"การเช็คชื่อครั้งนี้"}),v.jsxs("p",{className:"text-white text-base mt-1",children:[v.jsx("span",{className:"opacity-80",children:"วันที่: "}),v.jsx("span",{className:"font-medium",children:t})]}),e&&v.jsxs("div",{className:"flex items-center mt-2",children:[v.jsx("p",{className:"text-white mr-2",children:"สถานะ:"}),v.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.status===2?"bg-green-500 text-white":e.status===1?"bg-yellow-500 text-white":"bg-gray-500 text-white"}`,children:e.status===2?"เสร็จสิ้น":e.status===1?"กำลังเช็คชื่อ":"ยังไม่เริ่ม"})]}),i&&v.jsxs("p",{className:"text-white text-base mt-2",children:[v.jsx("span",{className:"opacity-80",children:"รหัสเช็คชื่อ: "}),v.jsx("span",{className:"font-mono font-bold bg-white/20 px-2 py-1 rounded",children:i})]})]})]})}),v.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20",children:v.jsx("div",{className:"w-40 h-40 bg-white/10 rounded-full blur-2xl"})})]})},H5=({generateQRCode:n,navigateToQuestion:e})=>v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[v.jsxs("button",{onClick:n,className:"px-6 py-4 bg-blue-500 text-white rounded-xl font-medium shadow-lg shadow-blue-500/20 hover:bg-blue-600 transition duration-200 transform hover:scale-105 flex items-center justify-center",children:[v.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"แสดง QR Code สำหรับเช็คชื่อ"]}),v.jsxs("button",{onClick:e,className:"px-6 py-4 bg-purple-500 text-white rounded-xl font-medium shadow-lg shadow-purple-500/20 hover:bg-purple-600 transition duration-200 transform hover:scale-105 flex items-center justify-center",children:[v.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"สร้างคำถามในห้องเรียน"]})]}),G5=({activeTab:n,setActiveTab:e,studentCount:t,scoreCount:i})=>v.jsxs("div",{className:"mb-6",children:[v.jsxs("div",{className:"flex border-b border-gray-200",children:[v.jsxs("button",{onClick:()=>e("studentList"),className:`px-6 py-3 font-medium text-lg transition-colors ${n==="studentList"?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-900"}`,children:["รายชื่อผู้เช็คชื่อ (",t,")"]}),v.jsxs("button",{onClick:()=>e("scoreList"),className:`px-6 py-3 font-medium text-lg transition-colors ${n==="scoreList"?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-900"}`,children:["การให้คะแนน (",i,")"]})]}),v.jsxs("div",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 mr-1 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsxs("span",{children:["หมายเหตุ: ไปที่แท็บ ",v.jsx("span",{className:"font-medium text-blue-600",children:'"การให้คะแนน"'})," เพื่อบันทึกคะแนนและปิดการเช็คชื่อ"]})]})]}),$5=({students:n,classroomId:e,checkinId:t})=>{const i=async a=>{try{const o=jt(),u=ze(o,`classroom/${e}/checkin/${t}/students/${a}`);await Y_(u);const h=ze(o,`classroom/${e}/checkin/${t}/scores/${a}`);await Bi(h,{status:0})}catch(o){console.error("Error deleting student:",o)}};return v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-8",children:[v.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"รายชื่อผู้ที่เช็คชื่อ"}),v.jsxs("p",{className:"text-gray-500",children:["จำนวน ",n.length," คน"]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-50",children:[v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"รหัส"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ชื่อ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"หมายเหตุ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"เวลาเช็คชื่อ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"จัดการ"})]})}),v.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length>0?n.map((a,o)=>v.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[v.jsx("td",{className:"px-6 py-4 text-gray-600",children:o+1}),v.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:a.stdid}),v.jsx("td",{className:"px-6 py-4 text-gray-800",children:a.name}),v.jsx("td",{className:"px-6 py-4 text-gray-600",children:a.remark}),v.jsx("td",{className:"px-6 py-4 text-gray-600",children:a.date}),v.jsx("td",{className:"px-6 py-4",children:v.jsx("button",{onClick:()=>i(a.id),className:"text-red-500 hover:text-red-700 font-medium transition-colors",children:"ลบ"})})]},a.id)):v.jsx("tr",{children:v.jsxs("td",{colSpan:"6",className:"text-center py-8 text-gray-500",children:[v.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),v.jsx("p",{className:"text-lg",children:"ยังไม่มีนักเรียนเช็คชื่อ"}),v.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"ให้นักเรียนสแกน QR Code เพื่อเช็คชื่อ"})]})})})]})})]})},Q5=({scores:n,setScores:e,saveAllScores:t,classroomId:i,checkinId:a})=>{const o=async(u,h,m)=>{try{const p=jt(),y=ze(p,`classroom/${i}/checkin/${a}/scores/${u}`);await Bi(y,{[h]:m})}catch(p){console.error(`Error updating student ${h}:`,p)}};return v.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[v.jsxs("div",{className:"p-6 border-b border-gray-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"คะแนนการเข้าเรียน"}),v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsxs("button",{onClick:t,className:"px-6 py-3 bg-green-500 text-white rounded-xl font-medium shadow-lg shadow-green-500/20 hover:bg-green-600 transition duration-200 flex items-center",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"บันทึกคะแนนและปิดการเช็คชื่อ"]}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"หมายเหตุ: การกดปุ่มนี้จะบันทึกคะแนนและปิดการเช็คชื่อ และนำคุณกลับสู่หน้าจัดการห้องเรียน"})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-50",children:[v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"รหัส"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ชื่อ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"หมายเหตุ"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"วันเวลา"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"คะแนน"}),v.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"สถานะ"})]})}),v.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length>0?n.map((u,h)=>v.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[v.jsx("td",{className:"px-6 py-4 text-gray-600",children:h+1}),v.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:u.stdid}),v.jsx("td",{className:"px-6 py-4 text-gray-800",children:u.name}),v.jsx("td",{className:"px-6 py-4",children:v.jsx("input",{type:"text",value:u.remark||"",onChange:m=>{const p=[...n];p[h].remark=m.target.value,e(p)},onBlur:()=>o(u.id,"remark",u.remark),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),v.jsx("td",{className:"px-6 py-4 text-gray-600",children:u.date}),v.jsx("td",{className:"px-6 py-4",children:v.jsx("input",{type:"number",value:u.score,onChange:m=>{const p=[...n];p[h].score=m.target.value,e(p)},onBlur:()=>o(u.id,"score",u.score),className:"w-16 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),v.jsx("td",{className:"px-6 py-4",children:v.jsxs("select",{value:u.status!==void 0?u.status:"0",onChange:m=>{const p=[...n];p[h].status=m.target.value,e(p)},onBlur:()=>o(u.id,"status",parseInt(u.status)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"0",children:"ไม่มา"}),v.jsx("option",{value:"1",children:"มาเรียน"}),v.jsx("option",{value:"2",children:"มาสาย"})]})})]},u.id)):v.jsx("tr",{children:v.jsxs("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:[v.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),v.jsx("p",{className:"text-lg",children:"ไม่พบข้อมูลคะแนน"}),v.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"รอให้นักเรียนเช็คชื่อก่อน"})]})})})]})}),n.length>0&&v.jsx("div",{className:"p-4 bg-yellow-50 border-t border-yellow-100",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("svg",{className:"w-5 h-5 mt-0.5 text-yellow-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),v.jsx("div",{children:v.jsxs("p",{className:"text-sm text-yellow-700",children:[v.jsx("span",{className:"font-medium",children:"โปรดจำ:"}),' อย่าลืมกดปุ่ม "บันทึกคะแนนและปิดการเช็คชื่อ" ด้านบนเพื่อบันทึกการเปลี่ยนแปลงและปิดการเช็คชื่อครั้งนี้']})})]})})]})},K5=({checkInCode:n,qrCodeData:e,onClose:t})=>v.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full mx-4",children:[v.jsxs("div",{className:"flex justify-between items-start mb-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"QR Code สำหรับเช็คชื่อ"}),v.jsxs("p",{className:"text-lg font-medium text-gray-700",children:["รหัสเช็คชื่อ: ",v.jsx("span",{className:"font-mono font-bold",children:n})]})]}),v.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors duration-200",children:v.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-8 rounded-2xl flex justify-center items-center min-h-[320px] shadow-inner",children:e?v.jsx("img",{src:e,alt:"QR Code สำหรับเช็คชื่อ",className:"max-w-full"}):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-gray-500",children:"กำลังสร้าง QR Code..."})})}),v.jsx("p",{className:"text-center text-gray-500 text-sm mt-4",children:"ให้นักเรียนสแกน QR Code เพื่อเช็คชื่อเข้าเรียน"})]})}),Y5=()=>{const[n,e]=$.useState(!0);return n?v.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg",children:v.jsxs("div",{className:"flex justify-between",children:[v.jsxs("div",{className:"flex",children:[v.jsx("svg",{className:"w-6 h-6 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"คำแนะนำในการใช้งาน"}),v.jsxs("ul",{className:"mt-1 list-disc list-inside text-blue-700 ml-2",children:[v.jsx("li",{children:'คุณสามารถดูรายชื่อนักเรียนที่เช็คชื่อในแท็บ "รายชื่อผู้เช็คชื่อ"'}),v.jsx("li",{children:'ไปที่แท็บ "การให้คะแนน" เพื่อให้คะแนนและปรับสถานะนักเรียน'}),v.jsxs("li",{children:["เมื่อเสร็จแล้ว คลิกที่ปุ่ม ",v.jsx("span",{className:"font-medium",children:'"บันทึกคะแนนและปิดการเช็คชื่อ"'})," เพื่อบันทึกข้อมูลและปิดการเช็คชื่อ"]})]})]})]}),v.jsx("button",{onClick:()=>e(!1),className:"text-blue-500 hover:text-blue-700",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}):null},HS=n=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let i=0;i<n;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},W5=()=>{const{classroomId:n,checkinId:e}=Z_(),t=Ys(),[i,a]=$.useState(!0),[o,u]=$.useState(null),[h,m]=$.useState(null),[p,y]=$.useState(""),[E,b]=$.useState([]),[S,O]=$.useState([]),[U,V]=$.useState(!1),[z,G]=$.useState(""),[H,Z]=$.useState(""),[le,te]=$.useState("studentList");$.useEffect(()=>{(async()=>{try{const k=zc(),I=bc(k,"classroom",n),se=await sx(I);se.exists()?u(se.data()):console.error("ไม่พบข้อมูลห้องเรียนใน Firestore")}catch(k){console.error("Error fetching classroom data from Firestore:",k)}})()},[n]),$.useEffect(()=>((async()=>{try{const k=jt(),I=ze(k,`classroom/${n}/checkin/${e}`);Nr(I,J=>{if(J.exists()){const oe=J.val(),ue=oe.createdAt?new Date(oe.createdAt).toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"ไม่ระบุวันเวลา";if(y(ue),m({id:e,code:oe.code||"",date:oe.date||ue,status:oe.status||0,question_show:oe.question_show||!1,createdAt:oe.createdAt}),G(oe.code||""),!oe.code){const we=HS(6);G(we),Bi(I,{code:we})}}});const se=ze(k,`classroom/${n}/checkin/${e}/students`);Nr(se,J=>{if(J.exists()){const oe=J.val(),ue=Object.entries(oe).map(([we,L])=>({id:we,stdid:L.stdid||"",name:L.name||"",remark:L.remark||"",date:L.date||""}));b(ue)}else b([])});const fe=ze(k,`classroom/${n}/checkin/${e}/scores`);Nr(fe,J=>{if(J.exists()){const oe=J.val(),ue=Object.entries(oe).map(([we,L])=>({id:we,stdid:L.stdid||"",name:L.name||"",remark:L.remark||"",date:L.date||"",score:L.score||0,status:L.status!==void 0?L.status:0}));O(ue)}else O([]);a(!1)}),await Bi(I,{status:1})}catch(k){console.error("Error fetching checkin data:",k),a(!1)}})(),()=>{const k=jt(),I=ze(k,`classroom/${n}/checkin/${e}`),se=ze(k,`classroom/${n}/checkin/${e}/students`),fe=ze(k,`classroom/${n}/checkin/${e}/scores`);Dr(I),Dr(se),Dr(fe)}),[n,e]),$.useEffect(()=>{(async()=>{if(E.length!==0)try{const k=jt(),I=ze(k,`classroom/${n}/checkin/${e}/scores`),se=await Af(I);let fe={};se.exists()&&(fe=se.val());let J=!1;E.forEach(oe=>{(!fe[oe.id]||fe[oe.id].status!==1)&&(J=!0,fe[oe.id]={...fe[oe.id]||{},stdid:oe.stdid,name:oe.name,date:oe.date,remark:oe.remark||"",score:10,status:1,uid:oe.id})}),J&&await Ga(I,fe)}catch(k){console.error("Error updating scores automatically:",k)}})()},[E,n,e]);const M=async()=>{if(!z){const A=HS(6);G(A);try{const k=jt(),I=ze(k,`classroom/${n}/checkin/${e}`);await Bi(I,{code:A})}catch(k){console.error("Error setting check-in code:",k)}}try{const A=JSON.stringify({classroomId:n,checkinId:e,code:z}),I=await(await z5(async()=>{const{default:se}=await Promise.resolve().then(()=>L5);return{default:se}},[])).default.toDataURL(A);Z(I),V(!0)}catch(A){console.error("Error generating QR code:",A),alert("เกิดข้อผิดพลาดในการสร้าง QR Code")}},D=async()=>{try{const A=jt(),k=ze(A,`classroom/${n}/checkin/${e}/scores`),I={};S.forEach(fe=>{I[fe.id]={stdid:fe.stdid,name:fe.name,remark:fe.remark,date:fe.date,score:fe.score,status:parseInt(fe.status),uid:fe.id}}),await Ga(k,I);const se=ze(A,`classroom/${n}/checkin/${e}`);await Bi(se,{status:2}),alert("บันทึกคะแนนและปิดการเช็คชื่อเรียบร้อย"),t(`/manage-classroom/${n}`)}catch(A){console.error("Error saving scores:",A),alert("เกิดข้อผิดพลาดในการบันทึกคะแนน")}},C=()=>{t(`/manage-classroom/${n}`)},R=()=>{t(`/checkin/${n}/${e}/question`)};return i?v.jsx(F5,{}):v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:[v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("button",{onClick:C,className:"group flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-white transition duration-200 mb-6",children:[v.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),v.jsx("span",{className:"font-medium",children:"กลับสู่หน้าจัดการห้องเรียน"})]}),v.jsx(q5,{classroom:o,currentCheckin:h,checkinDate:p,checkInCode:z}),v.jsx(Y5,{}),v.jsx(H5,{generateQRCode:M,navigateToQuestion:R}),v.jsx(G5,{activeTab:le,setActiveTab:te,studentCount:E.length,scoreCount:S.length}),le==="studentList"?v.jsx($5,{students:E,classroomId:n,checkinId:e}):v.jsx(Q5,{scores:S,setScores:O,saveAllScores:D,classroomId:n,checkinId:e})]}),U&&v.jsx(K5,{checkInCode:z,qrCodeData:H,onClose:()=>V(!1)})]})};function X5(){return v.jsx("div",{children:v.jsxs(XN,{children:[v.jsx(As,{path:"/",element:v.jsx(c5,{})}),v.jsx(As,{path:"/home",element:v.jsx(h5,{})}),v.jsx(As,{path:"/edit-profile",element:v.jsx(d5,{})}),v.jsx(As,{path:"/add-course",element:v.jsx(f5,{})}),v.jsx(As,{path:"/manage-classroom/:id",element:v.jsx(V5,{})}),v.jsx(As,{path:"/checkin/:classroomId/:checkinId",element:v.jsx(W5,{})}),v.jsx(As,{path:"/checkin/:classroomId/:checkinId/question",element:v.jsx(U5,{})})]})})}console.log("App is being rendered");oN.createRoot(document.getElementById("root")).render(v.jsx($.StrictMode,{children:v.jsx(T2,{children:v.jsx(X5,{})})}));
