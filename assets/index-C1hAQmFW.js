(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Wx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ug={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function Xx(){if(qT)return ju;qT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return ju.Fragment=e,ju.jsx=t,ju.jsxs=t,ju}var HT;function Jx(){return HT||(HT=1,ug.exports=Xx()),ug.exports}var b=Jx(),cg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function Zx(){if(GT)return De;GT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function V(U,se,pe){this.props=U,this.context=se,this.refs=j,this.updater=pe||A}V.prototype.isReactComponent={},V.prototype.setState=function(U,se){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,se,"setState")},V.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=V.prototype;function G(U,se,pe){this.props=U,this.context=se,this.refs=j,this.updater=pe||A}var L=G.prototype=new F;L.constructor=G,D(L,V.prototype),L.isPureReactComponent=!0;var Y=Array.isArray,ee={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function k(U,se,pe,ue,ce,Ce){return pe=Ce.ref,{$$typeof:n,type:U,key:se,ref:pe!==void 0?pe:null,props:Ce}}function R(U,se){return k(U.type,se,void 0,void 0,void 0,U.props)}function S(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function N(U){var se={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(pe){return se[pe]})}var O=/\/+/g;function P(U,se){return typeof U=="object"&&U!==null&&U.key!=null?N(""+U.key):se.toString(36)}function x(){}function fe(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(x,x):(U.status="pending",U.then(function(se){U.status==="pending"&&(U.status="fulfilled",U.value=se)},function(se){U.status==="pending"&&(U.status="rejected",U.reason=se)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Oe(U,se,pe,ue,ce){var Ce=typeof U;(Ce==="undefined"||Ce==="boolean")&&(U=null);var Re=!1;if(U===null)Re=!0;else switch(Ce){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(U.$$typeof){case n:case e:Re=!0;break;case y:return Re=U._init,Oe(Re(U._payload),se,pe,ue,ce)}}if(Re)return ce=ce(U),Re=ue===""?"."+P(U,0):ue,Y(ce)?(pe="",Re!=null&&(pe=Re.replace(O,"$&/")+"/"),Oe(ce,se,pe,"",function(nt){return nt})):ce!=null&&(S(ce)&&(ce=R(ce,pe+(ce.key==null||U&&U.key===ce.key?"":(""+ce.key).replace(O,"$&/")+"/")+Re)),se.push(ce)),1;Re=0;var Ze=ue===""?".":ue+":";if(Y(U))for(var Ne=0;Ne<U.length;Ne++)ue=U[Ne],Ce=Ze+P(ue,Ne),Re+=Oe(ue,se,pe,Ce,ce);else if(Ne=w(U),typeof Ne=="function")for(U=Ne.call(U),Ne=0;!(ue=U.next()).done;)ue=ue.value,Ce=Ze+P(ue,Ne++),Re+=Oe(ue,se,pe,Ce,ce);else if(Ce==="object"){if(typeof U.then=="function")return Oe(fe(U),se,pe,ue,ce);throw se=String(U),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Re}function le(U,se,pe){if(U==null)return U;var ue=[],ce=0;return Oe(U,ue,"","",function(Ce){return se.call(pe,Ce,ce++)}),ue}function Ee(U){if(U._status===-1){var se=U._result;se=se(),se.then(function(pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=pe)},function(pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=pe)}),U._status===-1&&(U._status=0,U._result=se)}if(U._status===1)return U._result.default;throw U._result}var _e=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function $e(){}return De.Children={map:le,forEach:function(U,se,pe){le(U,function(){se.apply(this,arguments)},pe)},count:function(U){var se=0;return le(U,function(){se++}),se},toArray:function(U){return le(U,function(se){return se})||[]},only:function(U){if(!S(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},De.Component=V,De.Fragment=t,De.Profiler=a,De.PureComponent=G,De.StrictMode=i,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,De.act=function(){throw Error("act(...) is not supported in production builds of React.")},De.cache=function(U){return function(){return U.apply(null,arguments)}},De.cloneElement=function(U,se,pe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ue=D({},U.props),ce=U.key,Ce=void 0;if(se!=null)for(Re in se.ref!==void 0&&(Ce=void 0),se.key!==void 0&&(ce=""+se.key),se)!X.call(se,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&se.ref===void 0||(ue[Re]=se[Re]);var Re=arguments.length-2;if(Re===1)ue.children=pe;else if(1<Re){for(var Ze=Array(Re),Ne=0;Ne<Re;Ne++)Ze[Ne]=arguments[Ne+2];ue.children=Ze}return k(U.type,ce,void 0,void 0,Ce,ue)},De.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},De.createElement=function(U,se,pe){var ue,ce={},Ce=null;if(se!=null)for(ue in se.key!==void 0&&(Ce=""+se.key),se)X.call(se,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ce[ue]=se[ue]);var Re=arguments.length-2;if(Re===1)ce.children=pe;else if(1<Re){for(var Ze=Array(Re),Ne=0;Ne<Re;Ne++)Ze[Ne]=arguments[Ne+2];ce.children=Ze}if(U&&U.defaultProps)for(ue in Re=U.defaultProps,Re)ce[ue]===void 0&&(ce[ue]=Re[ue]);return k(U,Ce,void 0,void 0,null,ce)},De.createRef=function(){return{current:null}},De.forwardRef=function(U){return{$$typeof:d,render:U}},De.isValidElement=S,De.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:Ee}},De.memo=function(U,se){return{$$typeof:p,type:U,compare:se===void 0?null:se}},De.startTransition=function(U){var se=ee.T,pe={};ee.T=pe;try{var ue=U(),ce=ee.S;ce!==null&&ce(pe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then($e,_e)}catch(Ce){_e(Ce)}finally{ee.T=se}},De.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},De.use=function(U){return ee.H.use(U)},De.useActionState=function(U,se,pe){return ee.H.useActionState(U,se,pe)},De.useCallback=function(U,se){return ee.H.useCallback(U,se)},De.useContext=function(U){return ee.H.useContext(U)},De.useDebugValue=function(){},De.useDeferredValue=function(U,se){return ee.H.useDeferredValue(U,se)},De.useEffect=function(U,se){return ee.H.useEffect(U,se)},De.useId=function(){return ee.H.useId()},De.useImperativeHandle=function(U,se,pe){return ee.H.useImperativeHandle(U,se,pe)},De.useInsertionEffect=function(U,se){return ee.H.useInsertionEffect(U,se)},De.useLayoutEffect=function(U,se){return ee.H.useLayoutEffect(U,se)},De.useMemo=function(U,se){return ee.H.useMemo(U,se)},De.useOptimistic=function(U,se){return ee.H.useOptimistic(U,se)},De.useReducer=function(U,se,pe){return ee.H.useReducer(U,se,pe)},De.useRef=function(U){return ee.H.useRef(U)},De.useState=function(U){return ee.H.useState(U)},De.useSyncExternalStore=function(U,se,pe){return ee.H.useSyncExternalStore(U,se,pe)},De.useTransition=function(){return ee.H.useTransition()},De.version="19.0.0",De}var KT;function ey(){return KT||(KT=1,cg.exports=Zx()),cg.exports}var Q=ey(),hg={exports:{}},Bu={},dg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function eN(){return QT||(QT=1,function(n){function e(le,Ee){var _e=le.length;le.push(Ee);e:for(;0<_e;){var $e=_e-1>>>1,U=le[$e];if(0<a(U,Ee))le[$e]=Ee,le[_e]=U,_e=$e;else break e}}function t(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var Ee=le[0],_e=le.pop();if(_e!==Ee){le[0]=_e;e:for(var $e=0,U=le.length,se=U>>>1;$e<se;){var pe=2*($e+1)-1,ue=le[pe],ce=pe+1,Ce=le[ce];if(0>a(ue,_e))ce<U&&0>a(Ce,ue)?(le[$e]=Ce,le[ce]=_e,$e=ce):(le[$e]=ue,le[pe]=_e,$e=pe);else if(ce<U&&0>a(Ce,_e))le[$e]=Ce,le[ce]=_e,$e=ce;else break e}}return Ee}function a(le,Ee){var _e=le.sortIndex-Ee.sortIndex;return _e!==0?_e:le.id-Ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],p=[],y=1,v=null,w=3,A=!1,D=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function L(le){for(var Ee=t(p);Ee!==null;){if(Ee.callback===null)i(p);else if(Ee.startTime<=le)i(p),Ee.sortIndex=Ee.expirationTime,e(m,Ee);else break;Ee=t(p)}}function Y(le){if(j=!1,L(le),!D)if(t(m)!==null)D=!0,fe();else{var Ee=t(p);Ee!==null&&Oe(Y,Ee.startTime-le)}}var ee=!1,X=-1,k=5,R=-1;function S(){return!(n.unstable_now()-R<k)}function N(){if(ee){var le=n.unstable_now();R=le;var Ee=!0;try{e:{D=!1,j&&(j=!1,F(X),X=-1),A=!0;var _e=w;try{t:{for(L(le),v=t(m);v!==null&&!(v.expirationTime>le&&S());){var $e=v.callback;if(typeof $e=="function"){v.callback=null,w=v.priorityLevel;var U=$e(v.expirationTime<=le);if(le=n.unstable_now(),typeof U=="function"){v.callback=U,L(le),Ee=!0;break t}v===t(m)&&i(m),L(le)}else i(m);v=t(m)}if(v!==null)Ee=!0;else{var se=t(p);se!==null&&Oe(Y,se.startTime-le),Ee=!1}}break e}finally{v=null,w=_e,A=!1}Ee=void 0}}finally{Ee?O():ee=!1}}}var O;if(typeof G=="function")O=function(){G(N)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,x=P.port2;P.port1.onmessage=N,O=function(){x.postMessage(null)}}else O=function(){V(N,0)};function fe(){ee||(ee=!0,O())}function Oe(le,Ee){X=V(function(){le(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){D||A||(D=!0,fe())},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(le){switch(w){case 1:case 2:case 3:var Ee=3;break;default:Ee=w}var _e=w;w=Ee;try{return le()}finally{w=_e}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Ee){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var _e=w;w=le;try{return Ee()}finally{w=_e}},n.unstable_scheduleCallback=function(le,Ee,_e){var $e=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?$e+_e:$e):_e=$e,le){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=_e+U,le={id:y++,callback:Ee,priorityLevel:le,startTime:_e,expirationTime:U,sortIndex:-1},_e>$e?(le.sortIndex=_e,e(p,le),t(m)===null&&le===t(p)&&(j?(F(X),X=-1):j=!0,Oe(Y,_e-$e))):(le.sortIndex=U,e(m,le),D||A||(D=!0,fe())),le},n.unstable_shouldYield=S,n.unstable_wrapCallback=function(le){var Ee=w;return function(){var _e=w;w=Ee;try{return le.apply(this,arguments)}finally{w=_e}}}}(fg)),fg}var $T;function tN(){return $T||($T=1,dg.exports=eN()),dg.exports}var mg={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function nN(){if(YT)return un;YT=1;var n=ey();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,un.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,y)},un.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},un.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},un.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},un.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:A}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:w,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},un.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},un.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},un.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},un.requestFormReset=function(m){i.d.r(m)},un.unstable_batchedUpdates=function(m,p){return m(p)},un.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},un.useFormStatus=function(){return u.H.useHostTransitionStatus()},un.version="19.0.0",un}var WT;function iN(){if(WT)return mg.exports;WT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mg.exports=nN(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function rN(){if(XT)return Bu;XT=1;var n=tN(),e=ey(),t=iN();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),Y=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function R(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case d:return"Portal";case y:return"Profiler";case p:return"StrictMode";case j:return"Suspense";case V:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case A:return(r.displayName||"Context")+".Provider";case w:return(r._context.displayName||"Context")+".Consumer";case D:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return s=r.displayName||null,s!==null?s:R(r.type)||"Memo";case G:s=r._payload,r=r._init;try{return R(r(s))}catch{}}return null}var S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=Object.assign,O,P;function x(r){if(O===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||"",P=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+O+r+P}var fe=!1;function Oe(r,s){if(!r||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(J){var $=J}Reflect.construct(r,[],re)}else{try{re.call()}catch(J){$=J}r.call(re.prototype)}}else{try{throw Error()}catch(J){$=J}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(J){if(J&&$&&typeof J.stack=="string")return[J.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],C=g[1];if(T&&C){var M=T.split(`
`),z=C.split(`
`);for(f=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(c===M.length||f===z.length)for(c=M.length-1,f=z.length-1;1<=c&&0<=f&&M[c]!==z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(M[c]!==z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||M[c]!==z[f]){var Z=`
`+M[c].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=c&&0<=f);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?x(l):""}function le(r){switch(r.tag){case 26:case 27:case 5:return x(r.type);case 16:return x("Lazy");case 13:return x("Suspense");case 19:return x("SuspenseList");case 0:case 15:return r=Oe(r.type,!1),r;case 11:return r=Oe(r.type.render,!1),r;case 1:return r=Oe(r.type,!0),r;default:return""}}function Ee(r){try{var s="";do s+=le(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function _e(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function $e(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function U(r){if(_e(r)!==r)throw Error(i(188))}function se(r){var s=r.alternate;if(!s){if(s=_e(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,c=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return U(f),r;if(g===c)return U(f),s;g=g.sibling}throw Error(i(188))}if(l.return!==c.return)l=f,c=g;else{for(var T=!1,C=f.child;C;){if(C===l){T=!0,l=f,c=g;break}if(C===c){T=!0,c=f,l=g;break}C=C.sibling}if(!T){for(C=g.child;C;){if(C===l){T=!0,l=g,c=f;break}if(C===c){T=!0,c=g,l=f;break}C=C.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function pe(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=pe(r),s!==null)return s;r=r.sibling}return null}var ue=Array.isArray,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},Re=[],Ze=-1;function Ne(r){return{current:r}}function nt(r){0>Ze||(r.current=Re[Ze],Re[Ze]=null,Ze--)}function Qe(r,s){Ze++,Re[Ze]=r.current,r.current=s}var mn=Ne(null),Yi=Ne(null),Bn=Ne(null),Vr=Ne(null);function Ur(r,s){switch(Qe(Bn,s),Qe(Yi,r),Qe(mn,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?yT(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=yT(r),s=vT(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}nt(mn),Qe(mn,s)}function Wi(){nt(mn),nt(Yi),nt(Bn)}function Ml(r){r.memoizedState!==null&&Qe(Vr,r);var s=mn.current,l=vT(s,r.type);s!==l&&(Qe(Yi,r),Qe(mn,l))}function Za(r){Yi.current===r&&(nt(mn),nt(Yi)),Vr.current===r&&(nt(Vr),Mu._currentValue=Ce)}var eo=Object.prototype.hasOwnProperty,Ws=n.unstable_scheduleCallback,to=n.unstable_cancelCallback,hm=n.unstable_shouldYield,Pl=n.unstable_requestPaint,bn=n.unstable_now,Qc=n.unstable_getCurrentPriorityLevel,kt=n.unstable_ImmediatePriority,Ft=n.unstable_UserBlockingPriority,Xi=n.unstable_NormalPriority,$c=n.unstable_LowPriority,Ll=n.unstable_IdlePriority,dm=n.log,Xs=n.unstable_setDisableYieldValue,jr=null,on=null;function Vl(r){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(jr,r,void 0,(r.current.flags&128)===128)}catch{}}function Ei(r){if(typeof dm=="function"&&Xs(r),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(jr,r)}catch{}}var pn=Math.clz32?Math.clz32:Wc,Ul=Math.log,Yc=Math.LN2;function Wc(r){return r>>>=0,r===0?32:31-(Ul(r)/Yc|0)|0}var Ti=128,Br=4194304;function oi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function zn(r,s){var l=r.pendingLanes;if(l===0)return 0;var c=0,f=r.suspendedLanes,g=r.pingedLanes,T=r.warmLanes;r=r.finishedLanes!==0;var C=l&134217727;return C!==0?(l=C&~f,l!==0?c=oi(l):(g&=C,g!==0?c=oi(g):r||(T=C&~T,T!==0&&(c=oi(T))))):(C=l&~f,C!==0?c=oi(C):g!==0?c=oi(g):r||(T=l&~T,T!==0&&(c=oi(T)))),c===0?0:s!==0&&s!==c&&!(s&f)&&(f=c&-c,T=s&-s,f>=T||f===32&&(T&4194176)!==0)?s:c}function zr(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function no(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jl(){var r=Ti;return Ti<<=1,!(Ti&4194176)&&(Ti=128),r}function Fr(){var r=Br;return Br<<=1,!(Br&62914560)&&(Br=4194304),r}function io(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function bt(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Xc(r,s,l,c,f,g){var T=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,M=r.expirationTimes,z=r.hiddenUpdates;for(l=T&~l;0<l;){var Z=31-pn(l),re=1<<Z;C[Z]=0,M[Z]=-1;var $=z[Z];if($!==null)for(z[Z]=null,Z=0;Z<$.length;Z++){var J=$[Z];J!==null&&(J.lane&=-536870913)}l&=~re}c!==0&&qr(r,c,0),g!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=g&~(T&~s))}function qr(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-pn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|l&4194218}function Hr(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var c=31-pn(l),f=1<<c;f&s|r[c]&s&&(r[c]|=s),l&=~f}}function Jc(r){return r&=-r,2<r?8<r?r&134217727?32:268435456:8:2}function Zc(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:VT(r.type))}function Gr(r,s){var l=ce.p;try{return ce.p=r,s()}finally{ce.p=l}}var wi=Math.random().toString(36).slice(2),qt="__reactFiber$"+wi,Ot="__reactProps$"+wi,Ji="__reactContainer$"+wi,Js="__reactEvents$"+wi,ro="__reactListeners$"+wi,bi="__reactHandles$"+wi,Bl="__reactResources$"+wi,Kr="__reactMarker$"+wi;function Zs(r){delete r[qt],delete r[Ot],delete r[Js],delete r[ro],delete r[bi]}function li(r){var s=r[qt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Ji]||l[qt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=wT(r);r!==null;){if(l=r[qt])return l;r=wT(r)}return s}r=l,l=r.parentNode}return null}function Zi(r){if(r=r[qt]||r[Ji]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Qr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function $r(r){var s=r[Bl];return s||(s=r[Bl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ft(r){r[Kr]=!0}var zl=new Set,so={};function Dn(r,s){Sn(r,s),Sn(r+"Capture",s)}function Sn(r,s){for(so[r]=s,r=0;r<s.length;r++)zl.add(s[r])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},ql={};function eh(r){return eo.call(ql,r)?!0:eo.call(Fl,r)?!1:fm.test(r)?ql[r]=!0:(Fl[r]=!0,!1)}function Yr(r,s,l){if(eh(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function Wr(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function Fn(r,s,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+c)}}function gn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function th(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mm(r){var s=th(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function ea(r){r._valueTracker||(r._valueTracker=mm(r))}function Hl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return r&&(c=th(r)?r.checked?"true":"false":r.value),r=c,r!==l?(s.setValue(r),!0):!1}function ao(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var er=/[\n"\\]/g;function _t(r){return r.replace(er,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xr(r,s,l,c,f,g,T,C){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+gn(s)):r.value!==""+gn(s)&&(r.value=""+gn(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?oo(r,T,gn(s)):l!=null?oo(r,T,gn(l)):c!=null&&r.removeAttribute("value"),f==null&&g!=null&&(r.defaultChecked=!!g),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+gn(C):r.removeAttribute("name")}function ta(r,s,l,c,f,g,T,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;l=l!=null?""+gn(l):"",s=s!=null?""+gn(s):l,C||s===r.value||(r.value=s),r.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=C?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function oo(r,s,l){s==="number"&&ao(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Ye(r,s,l,c){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&c&&(r[l].defaultSelected=!0)}else{for(l=""+gn(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function na(r,s,l){if(s!=null&&(s=""+gn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+gn(l):""}function Jr(r,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(ue(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=gn(s),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c)}function qn(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var pm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(r,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,l):typeof l!="number"||l===0||pm.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function nh(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&l[f]!==c&&Gl(r,f,c)}else for(var g in s)s.hasOwnProperty(g)&&Gl(r,g,s[g])}function Kl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_m=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Si(r){return _m.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Hn=null;function lo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var tr=null,nr=null;function ir(r){var s=Zi(r);if(s&&(r=s.stateNode)){var l=r[Ot]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xr(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_t(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==r&&c.form===r.form){var f=c[Ot]||null;if(!f)throw Error(i(90));Xr(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===r.form&&Hl(c)}break e;case"textarea":na(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ye(r,!!l.multiple,s,!1)}}}var Ql=!1;function ih(r,s,l){if(Ql)return r(s,l);Ql=!0;try{var c=r(s);return c}finally{if(Ql=!1,(tr!==null||nr!==null)&&($h(),tr&&(s=tr,r=nr,nr=tr=null,ir(s),r)))for(s=0;s<r.length;s++)ir(r[s])}}function ia(r,s){var l=r.stateNode;if(l===null)return null;var c=l[Ot]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Gn=!1;if(kn)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{Gn=!1}var Ai=null,Zr=null,rr=null;function $l(){if(rr)return rr;var r,s=Zr,l=s.length,c,f="value"in Ai?Ai.value:Ai.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var T=l-r;for(c=1;c<=T&&s[l-c]===f[g-c];c++);return rr=f.slice(r,1<c?1-c:void 0)}function Ci(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ri(){return!0}function Yl(){return!1}function Ht(r){function s(l,c,f,g,T){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ri:Yl,this.isPropagationStopped=Yl,this}return N(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),s}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=Ht(et),sa=N({},et,{view:0,detail:0}),rh=Ht(sa),co,ho,Ii,aa=N({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ii&&(Ii&&r.type==="mousemove"?(co=r.screenX-Ii.screenX,ho=r.screenY-Ii.screenY):ho=co=0,Ii=r),co)},movementY:function(r){return"movementY"in r?r.movementY:ho}}),Kn=Ht(aa),sh=N({},aa,{dataTransfer:0}),ym=Ht(sh),oa=N({},sa,{relatedTarget:0}),fo=Ht(oa),Wl=N({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),mo=Ht(Wl),ah=N({},et,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),po=Ht(ah),vm=N({},et,{data:0}),Xl=Ht(vm),la={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=lh[r])?!!s[r]:!1}function ua(){return Jl}var uh=N({},sa,{key:function(r){if(r.key){var s=la[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ci(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?oh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(r){return r.type==="keypress"?Ci(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ci(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),go=Ht(uh),ch=N({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zl=Ht(ch),sr=N({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),hh=Ht(sr),dh=N({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),fh=Ht(dh),mh=N({},aa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),_o=Ht(mh),_n=N({},et,{newState:0,oldState:0}),ph=Ht(_n),gh=[9,13,27,32],xi=kn&&"CompositionEvent"in window,h=null;kn&&"documentMode"in document&&(h=document.documentMode);var _=kn&&"TextEvent"in window&&!h,E=kn&&(!xi||h&&8<h&&11>=h),I=" ",H=!1;function W(r,s){switch(r){case"keyup":return gh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var qe=!1;function Mt(r,s){switch(r){case"compositionend":return oe(s);case"keypress":return s.which!==32?null:(H=!0,I);case"textInput":return r=s.data,r===I&&H?null:r;default:return null}}function He(r,s){if(qe)return r==="compositionend"||!xi&&W(r,s)?(r=$l(),rr=Zr=Ai=null,qe=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Gt[r.type]:s==="textarea"}function ar(r,s,l,c){tr?nr?nr.push(c):nr=[c]:tr=c,s=Zh(s,"onChange"),0<s.length&&(l=new uo("onChange","change",null,l,c),r.push({event:l,listeners:s}))}var Jt=null,Ni=null;function eu(r){fT(r,0)}function _h(r){var s=Qr(r);if(Hl(s))return r}function Fv(r,s){if(r==="change")return s}var qv=!1;if(kn){var Em;if(kn){var Tm="oninput"in document;if(!Tm){var Hv=document.createElement("div");Hv.setAttribute("oninput","return;"),Tm=typeof Hv.oninput=="function"}Em=Tm}else Em=!1;qv=Em&&(!document.documentMode||9<document.documentMode)}function Gv(){Jt&&(Jt.detachEvent("onpropertychange",Kv),Ni=Jt=null)}function Kv(r){if(r.propertyName==="value"&&_h(Ni)){var s=[];ar(s,Ni,r,lo(r)),ih(eu,s)}}function CI(r,s,l){r==="focusin"?(Gv(),Jt=s,Ni=l,Jt.attachEvent("onpropertychange",Kv)):r==="focusout"&&Gv()}function RI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return _h(Ni)}function II(r,s){if(r==="click")return _h(s)}function xI(r,s){if(r==="input"||r==="change")return _h(s)}function NI(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var On=typeof Object.is=="function"?Object.is:NI;function tu(r,s){if(On(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!eo.call(s,f)||!On(r[f],s[f]))return!1}return!0}function Qv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $v(r,s){var l=Qv(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=s&&c>=s)return{node:l,offset:s-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Qv(l)}}function Yv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Yv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Wv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ao(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=ao(r.document)}return s}function wm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function DI(r,s){var l=Wv(s);s=r.focusedElem;var c=r.selectionRange;if(l!==s&&s&&s.ownerDocument&&Yv(s.ownerDocument.documentElement,s)){if(c!==null&&wm(s)){if(r=c.start,l=c.end,l===void 0&&(l=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(l,s.value.length);else if(l=(r=s.ownerDocument||document)&&r.defaultView||window,l.getSelection){l=l.getSelection();var f=s.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!l.extend&&g>c&&(f=c,c=g,g=f),f=$v(s,g);var T=$v(s,c);f&&T&&(l.rangeCount!==1||l.anchorNode!==f.node||l.anchorOffset!==f.offset||l.focusNode!==T.node||l.focusOffset!==T.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),l.removeAllRanges(),g>c?(l.addRange(r),l.extend(T.node,T.offset)):(r.setEnd(T.node,T.offset),l.addRange(r)))}}for(r=[],l=s;l=l.parentNode;)l.nodeType===1&&r.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)l=r[s],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var kI=kn&&"documentMode"in document&&11>=document.documentMode,yo=null,bm=null,nu=null,Sm=!1;function Xv(r,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Sm||yo==null||yo!==ao(c)||(c=yo,"selectionStart"in c&&wm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nu&&tu(nu,c)||(nu=c,c=Zh(bm,"onSelect"),0<c.length&&(s=new uo("onSelect","select",null,s,l),r.push({event:s,listeners:c}),s.target=yo)))}function ca(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var vo={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},Am={},Jv={};kn&&(Jv=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ha(r){if(Am[r])return Am[r];if(!vo[r])return r;var s=vo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Jv)return Am[r]=s[l];return r}var Zv=ha("animationend"),e0=ha("animationiteration"),t0=ha("animationstart"),OI=ha("transitionrun"),MI=ha("transitionstart"),PI=ha("transitioncancel"),n0=ha("transitionend"),i0=new Map,r0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ui(r,s){i0.set(r,s),Dn(s,[r])}var Qn=[],Eo=0,Cm=0;function yh(){for(var r=Eo,s=Cm=Eo=0;s<r;){var l=Qn[s];Qn[s++]=null;var c=Qn[s];Qn[s++]=null;var f=Qn[s];Qn[s++]=null;var g=Qn[s];if(Qn[s++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}g!==0&&s0(l,f,g)}}function vh(r,s,l,c){Qn[Eo++]=r,Qn[Eo++]=s,Qn[Eo++]=l,Qn[Eo++]=c,Cm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Rm(r,s,l,c){return vh(r,s,l,c),Eh(r)}function es(r,s){return vh(r,null,null,s),Eh(r)}function s0(r,s,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var f=!1,g=r.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(f=!0)),r=g,g=g.return;f&&s!==null&&r.tag===3&&(g=r.stateNode,f=31-pn(l),g=g.hiddenUpdates,r=g[f],r===null?g[f]=[s]:r.push(s),s.lane=l|536870912)}function Eh(r){if(50<Ru)throw Ru=0,Op=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var To={},a0=new WeakMap;function $n(r,s){if(typeof r=="object"&&r!==null){var l=a0.get(r);return l!==void 0?l:(s={value:r,source:s,stack:Ee(s)},a0.set(r,s),s)}return{value:r,source:s,stack:Ee(s)}}var wo=[],bo=0,Th=null,wh=0,Yn=[],Wn=0,da=null,or=1,lr="";function fa(r,s){wo[bo++]=wh,wo[bo++]=Th,Th=r,wh=s}function o0(r,s,l){Yn[Wn++]=or,Yn[Wn++]=lr,Yn[Wn++]=da,da=r;var c=or;r=lr;var f=32-pn(c)-1;c&=~(1<<f),l+=1;var g=32-pn(s)+f;if(30<g){var T=f-f%5;g=(c&(1<<T)-1).toString(32),c>>=T,f-=T,or=1<<32-pn(s)+f|l<<f|c,lr=g+r}else or=1<<g|l<<f|c,lr=r}function Im(r){r.return!==null&&(fa(r,1),o0(r,1,0))}function xm(r){for(;r===Th;)Th=wo[--bo],wo[bo]=null,wh=wo[--bo],wo[bo]=null;for(;r===da;)da=Yn[--Wn],Yn[Wn]=null,lr=Yn[--Wn],Yn[Wn]=null,or=Yn[--Wn],Yn[Wn]=null}var yn=null,Zt=null,We=!1,ci=null,Di=!1,Nm=Error(i(519));function ma(r){var s=Error(i(418,""));throw su($n(s,r)),Nm}function l0(r){var s=r.stateNode,l=r.type,c=r.memoizedProps;switch(s[qt]=r,s[Ot]=c,l){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(l=0;l<xu.length;l++)ze(xu[l],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),ta(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),ea(s);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),Jr(s,c.value,c.defaultValue,c.children),ea(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||_T(s.textContent,l)?(c.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),c.onScroll!=null&&ze("scroll",s),c.onScrollEnd!=null&&ze("scrollend",s),c.onClick!=null&&(s.onclick=ed),s=!0):s=!1,s||ma(r)}function u0(r){for(yn=r.return;yn;)switch(yn.tag){case 3:case 27:Di=!0;return;case 5:case 13:Di=!1;return;default:yn=yn.return}}function iu(r){if(r!==yn)return!1;if(!We)return u0(r),We=!0,!1;var s=!1,l;if((l=r.tag!==3&&r.tag!==27)&&((l=r.tag===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Wp(r.type,r.memoizedProps)),l=!l),l&&(s=!0),s&&Zt&&ma(r),u0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){Zt=di(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}Zt=null}}else Zt=yn?di(r.stateNode.nextSibling):null;return!0}function ru(){Zt=yn=null,We=!1}function su(r){ci===null?ci=[r]:ci.push(r)}var au=Error(i(460)),c0=Error(i(474)),Dm={then:function(){}};function h0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function bh(){}function d0(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(bh,bh),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===au?Error(i(483)):r;default:if(typeof s.status=="string")s.then(bh,bh);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===au?Error(i(483)):r}throw ou=s,au}}var ou=null;function f0(){if(ou===null)throw Error(i(459));var r=ou;return ou=null,r}var So=null,lu=0;function Sh(r){var s=lu;return lu+=1,So===null&&(So=[]),d0(So,r,s)}function uu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ah(r,s){throw s.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function m0(r){var s=r._init;return s(r._payload)}function p0(r){function s(q,B){if(r){var K=q.deletions;K===null?(q.deletions=[B],q.flags|=16):K.push(B)}}function l(q,B){if(!r)return null;for(;B!==null;)s(q,B),B=B.sibling;return null}function c(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function f(q,B){return q=ds(q,B),q.index=0,q.sibling=null,q}function g(q,B,K){return q.index=K,r?(K=q.alternate,K!==null?(K=K.index,K<B?(q.flags|=33554434,B):K):(q.flags|=33554434,B)):(q.flags|=1048576,B)}function T(q){return r&&q.alternate===null&&(q.flags|=33554434),q}function C(q,B,K,te){return B===null||B.tag!==6?(B=Ap(K,q.mode,te),B.return=q,B):(B=f(B,K),B.return=q,B)}function M(q,B,K,te){var me=K.type;return me===m?Z(q,B,K.props.children,te,K.key):B!==null&&(B.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===G&&m0(me)===B.type)?(B=f(B,K.props),uu(B,K),B.return=q,B):(B=qh(K.type,K.key,K.props,null,q.mode,te),uu(B,K),B.return=q,B)}function z(q,B,K,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Cp(K,q.mode,te),B.return=q,B):(B=f(B,K.children||[]),B.return=q,B)}function Z(q,B,K,te,me){return B===null||B.tag!==7?(B=Sa(K,q.mode,te,me),B.return=q,B):(B=f(B,K),B.return=q,B)}function re(q,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Ap(""+B,q.mode,K),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case u:return K=qh(B.type,B.key,B.props,null,q.mode,K),uu(K,B),K.return=q,K;case d:return B=Cp(B,q.mode,K),B.return=q,B;case G:var te=B._init;return B=te(B._payload),re(q,B,K)}if(ue(B)||X(B))return B=Sa(B,q.mode,K,null),B.return=q,B;if(typeof B.then=="function")return re(q,Sh(B),K);if(B.$$typeof===A)return re(q,Bh(q,B),K);Ah(q,B)}return null}function $(q,B,K,te){var me=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return me!==null?null:C(q,B,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case u:return K.key===me?M(q,B,K,te):null;case d:return K.key===me?z(q,B,K,te):null;case G:return me=K._init,K=me(K._payload),$(q,B,K,te)}if(ue(K)||X(K))return me!==null?null:Z(q,B,K,te,null);if(typeof K.then=="function")return $(q,B,Sh(K),te);if(K.$$typeof===A)return $(q,B,Bh(q,K),te);Ah(q,K)}return null}function J(q,B,K,te,me){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return q=q.get(K)||null,C(B,q,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case u:return q=q.get(te.key===null?K:te.key)||null,M(B,q,te,me);case d:return q=q.get(te.key===null?K:te.key)||null,z(B,q,te,me);case G:var Me=te._init;return te=Me(te._payload),J(q,B,K,te,me)}if(ue(te)||X(te))return q=q.get(K)||null,Z(B,q,te,me,null);if(typeof te.then=="function")return J(q,B,K,Sh(te),me);if(te.$$typeof===A)return J(q,B,K,Bh(B,te),me);Ah(B,te)}return null}function ge(q,B,K,te){for(var me=null,Me=null,ye=B,Te=B=0,$t=null;ye!==null&&Te<K.length;Te++){ye.index>Te?($t=ye,ye=null):$t=ye.sibling;var Xe=$(q,ye,K[Te],te);if(Xe===null){ye===null&&(ye=$t);break}r&&ye&&Xe.alternate===null&&s(q,ye),B=g(Xe,B,Te),Me===null?me=Xe:Me.sibling=Xe,Me=Xe,ye=$t}if(Te===K.length)return l(q,ye),We&&fa(q,Te),me;if(ye===null){for(;Te<K.length;Te++)ye=re(q,K[Te],te),ye!==null&&(B=g(ye,B,Te),Me===null?me=ye:Me.sibling=ye,Me=ye);return We&&fa(q,Te),me}for(ye=c(ye);Te<K.length;Te++)$t=J(ye,q,Te,K[Te],te),$t!==null&&(r&&$t.alternate!==null&&ye.delete($t.key===null?Te:$t.key),B=g($t,B,Te),Me===null?me=$t:Me.sibling=$t,Me=$t);return r&&ye.forEach(function(vs){return s(q,vs)}),We&&fa(q,Te),me}function Ie(q,B,K,te){if(K==null)throw Error(i(151));for(var me=null,Me=null,ye=B,Te=B=0,$t=null,Xe=K.next();ye!==null&&!Xe.done;Te++,Xe=K.next()){ye.index>Te?($t=ye,ye=null):$t=ye.sibling;var vs=$(q,ye,Xe.value,te);if(vs===null){ye===null&&(ye=$t);break}r&&ye&&vs.alternate===null&&s(q,ye),B=g(vs,B,Te),Me===null?me=vs:Me.sibling=vs,Me=vs,ye=$t}if(Xe.done)return l(q,ye),We&&fa(q,Te),me;if(ye===null){for(;!Xe.done;Te++,Xe=K.next())Xe=re(q,Xe.value,te),Xe!==null&&(B=g(Xe,B,Te),Me===null?me=Xe:Me.sibling=Xe,Me=Xe);return We&&fa(q,Te),me}for(ye=c(ye);!Xe.done;Te++,Xe=K.next())Xe=J(ye,q,Te,Xe.value,te),Xe!==null&&(r&&Xe.alternate!==null&&ye.delete(Xe.key===null?Te:Xe.key),B=g(Xe,B,Te),Me===null?me=Xe:Me.sibling=Xe,Me=Xe);return r&&ye.forEach(function(Yx){return s(q,Yx)}),We&&fa(q,Te),me}function Et(q,B,K,te){if(typeof K=="object"&&K!==null&&K.type===m&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case u:e:{for(var me=K.key;B!==null;){if(B.key===me){if(me=K.type,me===m){if(B.tag===7){l(q,B.sibling),te=f(B,K.props.children),te.return=q,q=te;break e}}else if(B.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===G&&m0(me)===B.type){l(q,B.sibling),te=f(B,K.props),uu(te,K),te.return=q,q=te;break e}l(q,B);break}else s(q,B);B=B.sibling}K.type===m?(te=Sa(K.props.children,q.mode,te,K.key),te.return=q,q=te):(te=qh(K.type,K.key,K.props,null,q.mode,te),uu(te,K),te.return=q,q=te)}return T(q);case d:e:{for(me=K.key;B!==null;){if(B.key===me)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){l(q,B.sibling),te=f(B,K.children||[]),te.return=q,q=te;break e}else{l(q,B);break}else s(q,B);B=B.sibling}te=Cp(K,q.mode,te),te.return=q,q=te}return T(q);case G:return me=K._init,K=me(K._payload),Et(q,B,K,te)}if(ue(K))return ge(q,B,K,te);if(X(K)){if(me=X(K),typeof me!="function")throw Error(i(150));return K=me.call(K),Ie(q,B,K,te)}if(typeof K.then=="function")return Et(q,B,Sh(K),te);if(K.$$typeof===A)return Et(q,B,Bh(q,K),te);Ah(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(l(q,B.sibling),te=f(B,K),te.return=q,q=te):(l(q,B),te=Ap(K,q.mode,te),te.return=q,q=te),T(q)):l(q,B)}return function(q,B,K,te){try{lu=0;var me=Et(q,B,K,te);return So=null,me}catch(ye){if(ye===au)throw ye;var Me=ei(29,ye,null,q.mode);return Me.lanes=te,Me.return=q,Me}finally{}}}var pa=p0(!0),g0=p0(!1),Ao=Ne(null),Ch=Ne(0);function _0(r,s){r=vr,Qe(Ch,r),Qe(Ao,s),vr=r|s.baseLanes}function km(){Qe(Ch,vr),Qe(Ao,Ao.current)}function Om(){vr=Ch.current,nt(Ao),nt(Ch)}var Xn=Ne(null),ki=null;function ts(r){var s=r.alternate;Qe(Lt,Lt.current&1),Qe(Xn,r),ki===null&&(s===null||Ao.current!==null||s.memoizedState!==null)&&(ki=r)}function y0(r){if(r.tag===22){if(Qe(Lt,Lt.current),Qe(Xn,r),ki===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(ki=r)}}else ns()}function ns(){Qe(Lt,Lt.current),Qe(Xn,Xn.current)}function ur(r){nt(Xn),ki===r&&(ki=null),nt(Lt)}var Lt=Ne(0);function Rh(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var LI=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},VI=n.unstable_scheduleCallback,UI=n.unstable_NormalPriority,Vt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mm(){return{controller:new LI,data:new Map,refCount:0}}function cu(r){r.refCount--,r.refCount===0&&VI(UI,function(){r.controller.abort()})}var hu=null,Pm=0,Co=0,Ro=null;function jI(r,s){if(hu===null){var l=hu=[];Pm=0,Co=zp(),Ro={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Pm++,s.then(v0,v0),s}function v0(){if(--Pm===0&&hu!==null){Ro!==null&&(Ro.status="fulfilled");var r=hu;hu=null,Co=0,Ro=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function BI(r,s){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<l.length;f++)(0,l[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var E0=S.S;S.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&jI(r,s),E0!==null&&E0(r,s)};var ga=Ne(null);function Lm(){var r=ga.current;return r!==null?r:ot.pooledCache}function Ih(r,s){s===null?Qe(ga,ga.current):Qe(ga,s.pool)}function T0(){var r=Lm();return r===null?null:{parent:Vt._currentValue,pool:r}}var is=0,ke=null,it=null,Ct=null,xh=!1,Io=!1,_a=!1,Nh=0,du=0,xo=null,zI=0;function St(){throw Error(i(321))}function Vm(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!On(r[l],s[l]))return!1;return!0}function Um(r,s,l,c,f,g){return is=g,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,S.H=r===null||r.memoizedState===null?ya:rs,_a=!1,g=l(c,f),_a=!1,Io&&(g=b0(s,l,c,f)),w0(r),g}function w0(r){S.H=Oi;var s=it!==null&&it.next!==null;if(is=0,Ct=it=ke=null,xh=!1,du=0,xo=null,s)throw Error(i(300));r===null||Kt||(r=r.dependencies,r!==null&&jh(r)&&(Kt=!0))}function b0(r,s,l,c){ke=r;var f=0;do{if(Io&&(xo=null),du=0,Io=!1,25<=f)throw Error(i(301));if(f+=1,Ct=it=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}S.H=va,g=s(l,c)}while(Io);return g}function FI(){var r=S.H,s=r.useState()[0];return s=typeof s.then=="function"?fu(s):s,r=r.useState()[0],(it!==null?it.memoizedState:null)!==r&&(ke.flags|=1024),s}function jm(){var r=Nh!==0;return Nh=0,r}function Bm(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function zm(r){if(xh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xh=!1}is=0,Ct=it=ke=null,Io=!1,du=Nh=0,xo=null}function An(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ke.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Rt(){if(it===null){var r=ke.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var s=Ct===null?ke.memoizedState:Ct.next;if(s!==null)Ct=s,it=r;else{if(r===null)throw ke.alternate===null?Error(i(467)):Error(i(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ct===null?ke.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}var Dh;Dh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function fu(r){var s=du;return du+=1,xo===null&&(xo=[]),r=d0(xo,r,s),s=ke,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,S.H=s===null||s.memoizedState===null?ya:rs),r}function kh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return fu(r);if(r.$$typeof===A)return ln(r)}throw Error(i(438,String(r)))}function Fm(r){var s=null,l=ke.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Dh(),ke.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),c=0;c<r;c++)l[c]=Y;return s.index++,l}function cr(r,s){return typeof s=="function"?s(r):s}function Oh(r){var s=Rt();return qm(s,it,r)}function qm(r,s,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var f=r.baseQueue,g=c.pending;if(g!==null){if(f!==null){var T=f.next;f.next=g.next,g.next=T}s.baseQueue=f=g,c.pending=null}if(g=r.baseState,f===null)r.memoizedState=g;else{s=f.next;var C=T=null,M=null,z=s,Z=!1;do{var re=z.lane&-536870913;if(re!==z.lane?(Ge&re)===re:(is&re)===re){var $=z.revertLane;if($===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),re===Co&&(Z=!0);else if((is&$)===$){z=z.next,$===Co&&(Z=!0);continue}else re={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(C=M=re,T=g):M=M.next=re,ke.lanes|=$,fs|=$;re=z.action,_a&&l(g,re),g=z.hasEagerState?z.eagerState:l(g,re)}else $={lane:re,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},M===null?(C=M=$,T=g):M=M.next=$,ke.lanes|=re,fs|=re;z=z.next}while(z!==null&&z!==s);if(M===null?T=g:M.next=C,!On(g,r.memoizedState)&&(Kt=!0,Z&&(l=Ro,l!==null)))throw l;r.memoizedState=g,r.baseState=T,r.baseQueue=M,c.lastRenderedState=g}return f===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Hm(r){var s=Rt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var T=f=f.next;do g=r(g,T.action),T=T.next;while(T!==f);On(g,s.memoizedState)||(Kt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,c]}function S0(r,s,l){var c=ke,f=Rt(),g=We;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=s();var T=!On((it||f).memoizedState,l);if(T&&(f.memoizedState=l,Kt=!0),f=f.queue,Qm(R0.bind(null,c,f,r),[r]),f.getSnapshot!==s||T||Ct!==null&&Ct.memoizedState.tag&1){if(c.flags|=2048,No(9,C0.bind(null,c,f,l,s),{destroy:void 0},null),ot===null)throw Error(i(349));g||is&60||A0(c,s,l)}return l}function A0(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=ke.updateQueue,s===null?(s=Dh(),ke.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function C0(r,s,l,c){s.value=l,s.getSnapshot=c,I0(s)&&x0(r)}function R0(r,s,l){return l(function(){I0(s)&&x0(r)})}function I0(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!On(r,l)}catch{return!0}}function x0(r){var s=es(r,2);s!==null&&vn(s,r,2)}function Gm(r){var s=An();if(typeof r=="function"){var l=r;if(r=l(),_a){Ei(!0);try{l()}finally{Ei(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:r},s}function N0(r,s,l,c){return r.baseState=l,qm(r,it,typeof c=="function"?c:cr)}function qI(r,s,l,c,f){if(Lh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};S.T!==null?l(!0):g.isTransition=!1,c(g),l=s.pending,l===null?(g.next=s.pending=g,D0(s,g)):(g.next=l.next,s.pending=l.next=g)}}function D0(r,s){var l=s.action,c=s.payload,f=r.state;if(s.isTransition){var g=S.T,T={};S.T=T;try{var C=l(f,c),M=S.S;M!==null&&M(T,C),k0(r,s,C)}catch(z){Km(r,s,z)}finally{S.T=g}}else try{g=l(f,c),k0(r,s,g)}catch(z){Km(r,s,z)}}function k0(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){O0(r,s,c)},function(c){return Km(r,s,c)}):O0(r,s,l)}function O0(r,s,l){s.status="fulfilled",s.value=l,M0(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,D0(r,l)))}function Km(r,s,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,M0(s),s=s.next;while(s!==c)}r.action=null}function M0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function P0(r,s){return s}function L0(r,s){if(We){var l=ot.formState;if(l!==null){e:{var c=ke;if(We){if(Zt){t:{for(var f=Zt,g=Di;f.nodeType!==8;){if(!g){f=null;break t}if(f=di(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Zt=di(f.nextSibling),c=f.data==="F!";break e}}ma(c)}c=!1}c&&(s=l[0])}}return l=An(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P0,lastRenderedState:s},l.queue=c,l=eE.bind(null,ke,c),c.dispatch=l,c=Gm(!1),g=Jm.bind(null,ke,!1,c.queue),c=An(),f={state:s,dispatch:null,action:r,pending:null},c.queue=f,l=qI.bind(null,ke,f,g,l),f.dispatch=l,c.memoizedState=r,[s,l,!1]}function V0(r){var s=Rt();return U0(s,it,r)}function U0(r,s,l){s=qm(r,s,P0)[0],r=Oh(cr)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?fu(s):s;var c=Rt(),f=c.queue,g=f.dispatch;return l!==c.memoizedState&&(ke.flags|=2048,No(9,HI.bind(null,f,l),{destroy:void 0},null)),[s,g,r]}function HI(r,s){r.action=s}function j0(r){var s=Rt(),l=it;if(l!==null)return U0(s,l,r);Rt(),s=s.memoizedState,l=Rt();var c=l.queue.dispatch;return l.memoizedState=r,[s,c,!1]}function No(r,s,l,c){return r={tag:r,create:s,inst:l,deps:c,next:null},s=ke.updateQueue,s===null&&(s=Dh(),ke.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,s.lastEffect=r),r}function B0(){return Rt().memoizedState}function Mh(r,s,l,c){var f=An();ke.flags|=r,f.memoizedState=No(1|s,l,{destroy:void 0},c===void 0?null:c)}function Ph(r,s,l,c){var f=Rt();c=c===void 0?null:c;var g=f.memoizedState.inst;it!==null&&c!==null&&Vm(c,it.memoizedState.deps)?f.memoizedState=No(s,l,g,c):(ke.flags|=r,f.memoizedState=No(1|s,l,g,c))}function z0(r,s){Mh(8390656,8,r,s)}function Qm(r,s){Ph(2048,8,r,s)}function F0(r,s){return Ph(4,2,r,s)}function q0(r,s){return Ph(4,4,r,s)}function H0(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function G0(r,s,l){l=l!=null?l.concat([r]):null,Ph(4,4,H0.bind(null,s,r),l)}function $m(){}function K0(r,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Vm(s,c[1])?c[0]:(l.memoizedState=[r,s],r)}function Q0(r,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Vm(s,c[1]))return c[0];if(c=r(),_a){Ei(!0);try{r()}finally{Ei(!1)}}return l.memoizedState=[c,s],c}function Ym(r,s,l){return l===void 0||is&1073741824?r.memoizedState=s:(r.memoizedState=l,r=YE(),ke.lanes|=r,fs|=r,l)}function $0(r,s,l,c){return On(l,s)?l:Ao.current!==null?(r=Ym(r,l,c),On(r,s)||(Kt=!0),r):is&42?(r=YE(),ke.lanes|=r,fs|=r,s):(Kt=!0,r.memoizedState=l)}function Y0(r,s,l,c,f){var g=ce.p;ce.p=g!==0&&8>g?g:8;var T=S.T,C={};S.T=C,Jm(r,!1,s,l);try{var M=f(),z=S.S;if(z!==null&&z(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Z=BI(M,c);mu(r,s,Z,Vn(r))}else mu(r,s,c,Vn(r))}catch(re){mu(r,s,{then:function(){},status:"rejected",reason:re},Vn())}finally{ce.p=g,S.T=T}}function GI(){}function Wm(r,s,l,c){if(r.tag!==5)throw Error(i(476));var f=W0(r).queue;Y0(r,f,s,Ce,l===null?GI:function(){return X0(r),l(c)})}function W0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:Ce},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function X0(r){var s=W0(r).next.queue;mu(r,s,{},Vn())}function Xm(){return ln(Mu)}function J0(){return Rt().memoizedState}function Z0(){return Rt().memoizedState}function KI(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Vn();r=os(l);var c=ls(s,r,l);c!==null&&(vn(c,s,l),_u(c,s,l)),s={cache:Mm()},r.payload=s;return}s=s.return}}function QI(r,s,l){var c=Vn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Lh(r)?tE(s,l):(l=Rm(r,s,l,c),l!==null&&(vn(l,r,c),nE(l,s,c)))}function eE(r,s,l){var c=Vn();mu(r,s,l,c)}function mu(r,s,l,c){var f={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lh(r))tE(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,C=g(T,l);if(f.hasEagerState=!0,f.eagerState=C,On(C,T))return vh(r,s,f,0),ot===null&&yh(),!1}catch{}finally{}if(l=Rm(r,s,f,c),l!==null)return vn(l,r,c),nE(l,s,c),!0}return!1}function Jm(r,s,l,c){if(c={lane:2,revertLane:zp(),action:c,hasEagerState:!1,eagerState:null,next:null},Lh(r)){if(s)throw Error(i(479))}else s=Rm(r,l,c,2),s!==null&&vn(s,r,2)}function Lh(r){var s=r.alternate;return r===ke||s!==null&&s===ke}function tE(r,s){Io=xh=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function nE(r,s,l){if(l&4194176){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,Hr(r,l)}}var Oi={readContext:ln,use:kh,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St};Oi.useCacheRefresh=St,Oi.useMemoCache=St,Oi.useHostTransitionStatus=St,Oi.useFormState=St,Oi.useActionState=St,Oi.useOptimistic=St;var ya={readContext:ln,use:kh,useCallback:function(r,s){return An().memoizedState=[r,s===void 0?null:s],r},useContext:ln,useEffect:z0,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,Mh(4194308,4,H0.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Mh(4194308,4,r,s)},useInsertionEffect:function(r,s){Mh(4,2,r,s)},useMemo:function(r,s){var l=An();s=s===void 0?null:s;var c=r();if(_a){Ei(!0);try{r()}finally{Ei(!1)}}return l.memoizedState=[c,s],c},useReducer:function(r,s,l){var c=An();if(l!==void 0){var f=l(s);if(_a){Ei(!0);try{l(s)}finally{Ei(!1)}}}else f=s;return c.memoizedState=c.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},c.queue=r,r=r.dispatch=QI.bind(null,ke,r),[c.memoizedState,r]},useRef:function(r){var s=An();return r={current:r},s.memoizedState=r},useState:function(r){r=Gm(r);var s=r.queue,l=eE.bind(null,ke,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:$m,useDeferredValue:function(r,s){var l=An();return Ym(l,r,s)},useTransition:function(){var r=Gm(!1);return r=Y0.bind(null,ke,r.queue,!0,!1),An().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var c=ke,f=An();if(We){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ot===null)throw Error(i(349));Ge&60||A0(c,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,z0(R0.bind(null,c,g,r),[r]),c.flags|=2048,No(9,C0.bind(null,c,g,l,s),{destroy:void 0},null),l},useId:function(){var r=An(),s=ot.identifierPrefix;if(We){var l=lr,c=or;l=(c&~(1<<32-pn(c)-1)).toString(32)+l,s=":"+s+"R"+l,l=Nh++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=zI++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return An().memoizedState=KI.bind(null,ke)}};ya.useMemoCache=Fm,ya.useHostTransitionStatus=Xm,ya.useFormState=L0,ya.useActionState=L0,ya.useOptimistic=function(r){var s=An();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Jm.bind(null,ke,!0,l),l.dispatch=s,[r,s]};var rs={readContext:ln,use:kh,useCallback:K0,useContext:ln,useEffect:Qm,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:q0,useMemo:Q0,useReducer:Oh,useRef:B0,useState:function(){return Oh(cr)},useDebugValue:$m,useDeferredValue:function(r,s){var l=Rt();return $0(l,it.memoizedState,r,s)},useTransition:function(){var r=Oh(cr)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:fu(r),s]},useSyncExternalStore:S0,useId:J0};rs.useCacheRefresh=Z0,rs.useMemoCache=Fm,rs.useHostTransitionStatus=Xm,rs.useFormState=V0,rs.useActionState=V0,rs.useOptimistic=function(r,s){var l=Rt();return N0(l,it,r,s)};var va={readContext:ln,use:kh,useCallback:K0,useContext:ln,useEffect:Qm,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:q0,useMemo:Q0,useReducer:Hm,useRef:B0,useState:function(){return Hm(cr)},useDebugValue:$m,useDeferredValue:function(r,s){var l=Rt();return it===null?Ym(l,r,s):$0(l,it.memoizedState,r,s)},useTransition:function(){var r=Hm(cr)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:fu(r),s]},useSyncExternalStore:S0,useId:J0};va.useCacheRefresh=Z0,va.useMemoCache=Fm,va.useHostTransitionStatus=Xm,va.useFormState=j0,va.useActionState=j0,va.useOptimistic=function(r,s){var l=Rt();return it!==null?N0(l,it,r,s):(l.baseState=r,[r,l.queue.dispatch])};function Zm(r,s,l,c){s=r.memoizedState,l=l(c,s),l=l==null?s:N({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var ep={isMounted:function(r){return(r=r._reactInternals)?_e(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var c=Vn(),f=os(c);f.payload=s,l!=null&&(f.callback=l),s=ls(r,f,c),s!==null&&(vn(s,r,c),_u(s,r,c))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var c=Vn(),f=os(c);f.tag=1,f.payload=s,l!=null&&(f.callback=l),s=ls(r,f,c),s!==null&&(vn(s,r,c),_u(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Vn(),c=os(l);c.tag=2,s!=null&&(c.callback=s),s=ls(r,c,l),s!==null&&(vn(s,r,l),_u(s,r,l))}};function iE(r,s,l,c,f,g,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!tu(l,c)||!tu(f,g):!0}function rE(r,s,l,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==r&&ep.enqueueReplaceState(s,s.state,null)}function Ea(r,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(r=r.defaultProps){l===s&&(l=N({},l));for(var f in r)l[f]===void 0&&(l[f]=r[f])}return l}var Vh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function sE(r){Vh(r)}function aE(r){console.error(r)}function oE(r){Vh(r)}function Uh(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function lE(r,s,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tp(r,s,l){return l=os(l),l.tag=3,l.payload={element:null},l.callback=function(){Uh(r,s)},l}function uE(r){return r=os(r),r.tag=3,r}function cE(r,s,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;r.payload=function(){return f(g)},r.callback=function(){lE(s,l,c)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){lE(s,l,c),typeof f!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function $I(r,s,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&gu(s,l,f,!0),l=Xn.current,l!==null){switch(l.tag){case 13:return ki===null?Lp():l.alternate===null&&vt===0&&(vt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===Dm?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Up(r,c,f)),!1;case 22:return l.flags|=65536,c===Dm?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Up(r,c,f)),!1}throw Error(i(435,l.tag))}return Up(r,c,f),Lp(),!1}if(We)return s=Xn.current,s!==null?(!(s.flags&65536)&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Nm&&(r=Error(i(422),{cause:c}),su($n(r,l)))):(c!==Nm&&(s=Error(i(423),{cause:c}),su($n(s,l))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,c=$n(c,l),f=tp(r.stateNode,c,f),gp(r,f),vt!==4&&(vt=2)),!1;var g=Error(i(520),{cause:c});if(g=$n(g,l),Au===null?Au=[g]:Au.push(g),vt!==4&&(vt=2),s===null)return!0;c=$n(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=f&-f,l.lanes|=r,r=tp(l.stateNode,c,r),gp(l,r),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ms===null||!ms.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=uE(f),cE(f,r,l,c),gp(l,f),!1}l=l.return}while(l!==null);return!1}var hE=Error(i(461)),Kt=!1;function en(r,s,l,c){s.child=r===null?g0(s,null,l,c):pa(s,r.child,l,c)}function dE(r,s,l,c,f){l=l.render;var g=s.ref;if("ref"in c){var T={};for(var C in c)C!=="ref"&&(T[C]=c[C])}else T=c;return wa(s),c=Um(r,s,l,T,g,f),C=jm(),r!==null&&!Kt?(Bm(r,s,f),hr(r,s,f)):(We&&C&&Im(s),s.flags|=1,en(r,s,c,f),s.child)}function fE(r,s,l,c,f){if(r===null){var g=l.type;return typeof g=="function"&&!Sp(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,mE(r,s,g,c,f)):(r=qh(l.type,null,c,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!cp(r,f)){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:tu,l(T,c)&&r.ref===s.ref)return hr(r,s,f)}return s.flags|=1,r=ds(g,c),r.ref=s.ref,r.return=s,s.child=r}function mE(r,s,l,c,f){if(r!==null){var g=r.memoizedProps;if(tu(g,c)&&r.ref===s.ref)if(Kt=!1,s.pendingProps=c=g,cp(r,f))r.flags&131072&&(Kt=!0);else return s.lanes=r.lanes,hr(r,s,f)}return np(r,s,l,c,f)}function pE(r,s,l){var c=s.pendingProps,f=c.children,g=(s.stateNode._pendingVisibility&2)!==0,T=r!==null?r.memoizedState:null;if(pu(r,s),c.mode==="hidden"||g){if(s.flags&128){if(c=T!==null?T.baseLanes|l:l,r!==null){for(f=s.child=r.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return gE(r,s,c,l)}if(l&536870912)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ih(s,T!==null?T.cachePool:null),T!==null?_0(s,T):km(),y0(s);else return s.lanes=s.childLanes=536870912,gE(r,s,T!==null?T.baseLanes|l:l,l)}else T!==null?(Ih(s,T.cachePool),_0(s,T),ns(),s.memoizedState=null):(r!==null&&Ih(s,null),km(),ns());return en(r,s,f,l),s.child}function gE(r,s,l,c){var f=Lm();return f=f===null?null:{parent:Vt._currentValue,pool:f},s.memoizedState={baseLanes:l,cachePool:f},r!==null&&Ih(s,null),km(),y0(s),r!==null&&gu(r,s,c,!0),null}function pu(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=2097664)}}function np(r,s,l,c,f){return wa(s),l=Um(r,s,l,c,void 0,f),c=jm(),r!==null&&!Kt?(Bm(r,s,f),hr(r,s,f)):(We&&c&&Im(s),s.flags|=1,en(r,s,l,f),s.child)}function _E(r,s,l,c,f,g){return wa(s),s.updateQueue=null,l=b0(s,c,l,f),w0(r),c=jm(),r!==null&&!Kt?(Bm(r,s,g),hr(r,s,g)):(We&&c&&Im(s),s.flags|=1,en(r,s,l,g),s.child)}function yE(r,s,l,c,f){if(wa(s),s.stateNode===null){var g=To,T=l.contextType;typeof T=="object"&&T!==null&&(g=ln(T)),g=new l(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ep,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},mp(s),T=l.contextType,g.context=typeof T=="object"&&T!==null?ln(T):To,g.state=s.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Zm(s,l,T,c),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&ep.enqueueReplaceState(g,g.state,null),vu(s,c,g,f),yu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var C=s.memoizedProps,M=Ea(l,C);g.props=M;var z=g.context,Z=l.contextType;T=To,typeof Z=="object"&&Z!==null&&(T=ln(Z));var re=l.getDerivedStateFromProps;Z=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||z!==T)&&rE(s,g,c,T),as=!1;var $=s.memoizedState;g.state=$,vu(s,c,g,f),yu(),z=s.memoizedState,C||$!==z||as?(typeof re=="function"&&(Zm(s,l,re,c),z=s.memoizedState),(M=as||iE(s,l,M,c,$,z,T))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=z),g.props=c,g.state=z,g.context=T,c=M):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,pp(r,s),T=s.memoizedProps,Z=Ea(l,T),g.props=Z,re=s.pendingProps,$=g.context,z=l.contextType,M=To,typeof z=="object"&&z!==null&&(M=ln(z)),C=l.getDerivedStateFromProps,(z=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==re||$!==M)&&rE(s,g,c,M),as=!1,$=s.memoizedState,g.state=$,vu(s,c,g,f),yu();var J=s.memoizedState;T!==re||$!==J||as||r!==null&&r.dependencies!==null&&jh(r.dependencies)?(typeof C=="function"&&(Zm(s,l,C,c),J=s.memoizedState),(Z=as||iE(s,l,Z,c,$,J,M)||r!==null&&r.dependencies!==null&&jh(r.dependencies))?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,J,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,J,M)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=J),g.props=c,g.state=J,g.context=M,c=Z):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,pu(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=pa(s,r.child,null,f),s.child=pa(s,null,l,f)):en(r,s,l,f),s.memoizedState=g.state,r=s.child):r=hr(r,s,f),r}function vE(r,s,l,c){return ru(),s.flags|=256,en(r,s,l,c),s.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function rp(r){return{baseLanes:r,cachePool:T0()}}function sp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=ti),r}function EE(r,s,l){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=r!==null&&r.memoizedState===null?!1:(Lt.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(We){if(f?ts(s):ns(),We){var C=Zt,M;if(M=C){e:{for(M=C,C=Di;M.nodeType!==8;){if(!C){C=null;break e}if(M=di(M.nextSibling),M===null){C=null;break e}}C=M}C!==null?(s.memoizedState={dehydrated:C,treeContext:da!==null?{id:or,overflow:lr}:null,retryLane:536870912},M=ei(18,null,null,0),M.stateNode=C,M.return=s,s.child=M,yn=s,Zt=null,M=!0):M=!1}M||ma(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return C.data==="$!"?s.lanes=16:s.lanes=536870912,null;ur(s)}return C=c.children,c=c.fallback,f?(ns(),f=s.mode,C=op({mode:"hidden",children:C},f),c=Sa(c,f,l,null),C.return=s,c.return=s,C.sibling=c,s.child=C,f=s.child,f.memoizedState=rp(l),f.childLanes=sp(r,T,l),s.memoizedState=ip,c):(ts(s),ap(s,C))}if(M=r.memoizedState,M!==null&&(C=M.dehydrated,C!==null)){if(g)s.flags&256?(ts(s),s.flags&=-257,s=lp(r,s,l)):s.memoizedState!==null?(ns(),s.child=r.child,s.flags|=128,s=null):(ns(),f=c.fallback,C=s.mode,c=op({mode:"visible",children:c.children},C),f=Sa(f,C,l,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,pa(s,r.child,null,l),c=s.child,c.memoizedState=rp(l),c.childLanes=sp(r,T,l),s.memoizedState=ip,s=f);else if(ts(s),C.data==="$!"){if(T=C.nextSibling&&C.nextSibling.dataset,T)var z=T.dgst;T=z,c=Error(i(419)),c.stack="",c.digest=T,su({value:c,source:null,stack:null}),s=lp(r,s,l)}else if(Kt||gu(r,s,l,!1),T=(l&r.childLanes)!==0,Kt||T){if(T=ot,T!==null){if(c=l&-l,c&42)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=c&(T.suspendedLanes|l)?0:c,c!==0&&c!==M.retryLane)throw M.retryLane=c,es(r,c),vn(T,r,c),hE}C.data==="$?"||Lp(),s=lp(r,s,l)}else C.data==="$?"?(s.flags|=128,s.child=r.child,s=ux.bind(null,r),C._reactRetry=s,s=null):(r=M.treeContext,Zt=di(C.nextSibling),yn=s,We=!0,ci=null,Di=!1,r!==null&&(Yn[Wn++]=or,Yn[Wn++]=lr,Yn[Wn++]=da,or=r.id,lr=r.overflow,da=s),s=ap(s,c.children),s.flags|=4096);return s}return f?(ns(),f=c.fallback,C=s.mode,M=r.child,z=M.sibling,c=ds(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&31457280,z!==null?f=ds(z,f):(f=Sa(f,C,l,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,C=r.child.memoizedState,C===null?C=rp(l):(M=C.cachePool,M!==null?(z=Vt._currentValue,M=M.parent!==z?{parent:z,pool:z}:M):M=T0(),C={baseLanes:C.baseLanes|l,cachePool:M}),f.memoizedState=C,f.childLanes=sp(r,T,l),s.memoizedState=ip,c):(ts(s),l=r.child,r=l.sibling,l=ds(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=l,s.memoizedState=null,l)}function ap(r,s){return s=op({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function op(r,s){return KE(r,s,0,null)}function lp(r,s,l){return pa(s,r.child,null,l),r=ap(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function TE(r,s,l){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),dp(r.return,s,l)}function up(r,s,l,c,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=f)}function wE(r,s,l){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(en(r,s,c.children,l),c=Lt.current,c&2)c=c&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&TE(r,l,s);else if(r.tag===19)TE(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(Qe(Lt,c),f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&Rh(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),up(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Rh(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}up(s,!0,l,null,g);break;case"together":up(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function hr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),fs|=s.lanes,!(l&s.childLanes))if(r!==null){if(gu(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=ds(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=ds(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function cp(r,s){return r.lanes&s?!0:(r=r.dependencies,!!(r!==null&&jh(r)))}function YI(r,s,l){switch(s.tag){case 3:Ur(s,s.stateNode.containerInfo),ss(s,Vt,r.memoizedState.cache),ru();break;case 27:case 5:Ml(s);break;case 4:Ur(s,s.stateNode.containerInfo);break;case 10:ss(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ts(s),s.flags|=128,null):l&s.child.childLanes?EE(r,s,l):(ts(s),r=hr(r,s,l),r!==null?r.sibling:null);ts(s);break;case 19:var f=(r.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(gu(r,s,l,!1),c=(l&s.childLanes)!==0),f){if(c)return wE(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qe(Lt,Lt.current),c)break;return null;case 22:case 23:return s.lanes=0,pE(r,s,l);case 24:ss(s,Vt,r.memoizedState.cache)}return hr(r,s,l)}function bE(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Kt=!0;else{if(!cp(r,l)&&!(s.flags&128))return Kt=!1,YI(r,s,l);Kt=!!(r.flags&131072)}else Kt=!1,We&&s.flags&1048576&&o0(s,wh,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")Sp(c)?(r=Ea(c,r),s.tag=1,s=yE(null,s,c,r,l)):(s.tag=0,s=np(null,s,c,r,l));else{if(c!=null){if(f=c.$$typeof,f===D){s.tag=11,s=dE(null,s,c,r,l);break e}else if(f===F){s.tag=14,s=fE(null,s,c,r,l);break e}}throw s=R(c)||c,Error(i(306,s,""))}}return s;case 0:return np(r,s,s.type,s.pendingProps,l);case 1:return c=s.type,f=Ea(c,s.pendingProps),yE(r,s,c,f,l);case 3:e:{if(Ur(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var g=s.pendingProps;f=s.memoizedState,c=f.element,pp(r,s),vu(s,g,null,l);var T=s.memoizedState;if(g=T.cache,ss(s,Vt,g),g!==f.cache&&fp(s,[Vt],l,!0),yu(),g=T.element,f.isDehydrated)if(f={element:g,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=vE(r,s,g,l);break e}else if(g!==c){c=$n(Error(i(424)),s),su(c),s=vE(r,s,g,l);break e}else for(Zt=di(s.stateNode.containerInfo.firstChild),yn=s,We=!0,ci=null,Di=!0,l=g0(s,null,g,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ru(),g===c){s=hr(r,s,l);break e}en(r,s,g,l)}s=s.child}return s;case 26:return pu(r,s),r===null?(l=CT(s.type,null,s.pendingProps,null))?s.memoizedState=l:We||(l=s.type,r=s.pendingProps,c=td(Bn.current).createElement(l),c[qt]=s,c[Ot]=r,tn(c,l,r),ft(c),s.stateNode=c):s.memoizedState=CT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ml(s),r===null&&We&&(c=s.stateNode=bT(s.type,s.pendingProps,Bn.current),yn=s,Di=!0,Zt=di(c.firstChild)),c=s.pendingProps.children,r!==null||We?en(r,s,c,l):s.child=pa(s,null,c,l),pu(r,s),s.child;case 5:return r===null&&We&&((f=c=Zt)&&(c=Ax(c,s.type,s.pendingProps,Di),c!==null?(s.stateNode=c,yn=s,Zt=di(c.firstChild),Di=!1,f=!0):f=!1),f||ma(s)),Ml(s),f=s.type,g=s.pendingProps,T=r!==null?r.memoizedProps:null,c=g.children,Wp(f,g)?c=null:T!==null&&Wp(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=Um(r,s,FI,null,null,l),Mu._currentValue=f),pu(r,s),en(r,s,c,l),s.child;case 6:return r===null&&We&&((r=l=Zt)&&(l=Cx(l,s.pendingProps,Di),l!==null?(s.stateNode=l,yn=s,Zt=null,r=!0):r=!1),r||ma(s)),null;case 13:return EE(r,s,l);case 4:return Ur(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=pa(s,null,c,l):en(r,s,c,l),s.child;case 11:return dE(r,s,s.type,s.pendingProps,l);case 7:return en(r,s,s.pendingProps,l),s.child;case 8:return en(r,s,s.pendingProps.children,l),s.child;case 12:return en(r,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,ss(s,s.type,c.value),en(r,s,c.children,l),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,wa(s),f=ln(f),c=c(f),s.flags|=1,en(r,s,c,l),s.child;case 14:return fE(r,s,s.type,s.pendingProps,l);case 15:return mE(r,s,s.type,s.pendingProps,l);case 19:return wE(r,s,l);case 22:return pE(r,s,l);case 24:return wa(s),c=ln(Vt),r===null?(f=Lm(),f===null&&(f=ot,g=Mm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),s.memoizedState={parent:c,cache:f},mp(s),ss(s,Vt,f)):(r.lanes&l&&(pp(r,s),vu(s,null,null,l),yu()),f=r.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ss(s,Vt,c)):(c=g.cache,ss(s,Vt,c),c!==f.cache&&fp(s,[Vt],l,!0))),en(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var hp=Ne(null),Ta=null,dr=null;function ss(r,s,l){Qe(hp,s._currentValue),s._currentValue=l}function fr(r){r._currentValue=hp.current,nt(hp)}function dp(r,s,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===l)break;r=r.return}}function fp(r,s,l,c){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var g=f.dependencies;if(g!==null){var T=f.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=f;for(var M=0;M<s.length;M++)if(C.context===s[M]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),dp(g.return,l,r),c||(T=null);break e}g=C.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(i(341));T.lanes|=l,g=T.alternate,g!==null&&(g.lanes|=l),dp(T,l,r),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===r){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function gu(r,s,l,c){r=null;for(var f=s,g=!1;f!==null;){if(!g){if(f.flags&524288)g=!0;else if(f.flags&262144)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var C=f.type;On(f.pendingProps.value,T.value)||(r!==null?r.push(C):r=[C])}}else if(f===Vr.current){if(T=f.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Mu):r=[Mu])}f=f.return}r!==null&&fp(s,r,l,c),s.flags|=262144}function jh(r){for(r=r.firstContext;r!==null;){if(!On(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function wa(r){Ta=r,dr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ln(r){return SE(Ta,r)}function Bh(r,s){return Ta===null&&wa(r),SE(r,s)}function SE(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},dr===null){if(r===null)throw Error(i(308));dr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else dr=dr.next=s;return l}var as=!1;function mp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function os(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ls(r,s,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,pt&2){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Eh(r),s0(r,null,l),s}return vh(r,c,s,l),Eh(r)}function _u(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194176)!==0)){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,Hr(r,l)}}function gp(r,s){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var _p=!1;function yu(){if(_p){var r=Ro;if(r!==null)throw r}}function vu(r,s,l,c){_p=!1;var f=r.updateQueue;as=!1;var g=f.firstBaseUpdate,T=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var M=C,z=M.next;M.next=null,T===null?g=z:T.next=z,T=M;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==T&&(C===null?Z.firstBaseUpdate=z:C.next=z,Z.lastBaseUpdate=M))}if(g!==null){var re=f.baseState;T=0,Z=z=M=null,C=g;do{var $=C.lane&-536870913,J=$!==C.lane;if(J?(Ge&$)===$:(c&$)===$){$!==0&&$===Co&&(_p=!0),Z!==null&&(Z=Z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ge=r,Ie=C;$=s;var Et=l;switch(Ie.tag){case 1:if(ge=Ie.payload,typeof ge=="function"){re=ge.call(Et,re,$);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ie.payload,$=typeof ge=="function"?ge.call(Et,re,$):ge,$==null)break e;re=N({},re,$);break e;case 2:as=!0}}$=C.callback,$!==null&&(r.flags|=64,J&&(r.flags|=8192),J=f.callbacks,J===null?f.callbacks=[$]:J.push($))}else J={lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(z=Z=J,M=re):Z=Z.next=J,T|=$;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;J=C,C=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);Z===null&&(M=re),f.baseState=M,f.firstBaseUpdate=z,f.lastBaseUpdate=Z,g===null&&(f.shared.lanes=0),fs|=T,r.lanes=T,r.memoizedState=re}}function AE(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function CE(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)AE(l[r],s)}function Eu(r,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&r)===r){c=void 0;var g=l.create,T=l.inst;c=g(),T.destroy=c}l=l.next}while(l!==f)}}catch(C){at(s,s.return,C)}}function us(r,s,l){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&r)===r){var T=c.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,f=s;var M=l;try{C()}catch(z){at(f,M,z)}}}c=c.next}while(c!==g)}}catch(z){at(s,s.return,z)}}function RE(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{CE(s,l)}catch(c){at(r,r.return,c)}}}function IE(r,s,l){l.props=Ea(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){at(r,s,c)}}function ba(r,s){try{var l=r.ref;if(l!==null){var c=r.stateNode;switch(r.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof l=="function"?r.refCleanup=l(f):l.current=f}}catch(g){at(r,s,g)}}function Mn(r,s){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){at(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){at(r,s,f)}else l.current=null}function xE(r){var s=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){at(r,r.return,f)}}function NE(r,s,l){try{var c=r.stateNode;Ex(c,r.type,l,s),c[Ot]=s}catch(f){at(r,r.return,f)}}function DE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function yp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||DE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function vp(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ed));else if(c!==4&&c!==27&&(r=r.child,r!==null))for(vp(r,s,l),r=r.sibling;r!==null;)vp(r,s,l),r=r.sibling}function zh(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(c!==4&&c!==27&&(r=r.child,r!==null))for(zh(r,s,l),r=r.sibling;r!==null;)zh(r,s,l),r=r.sibling}var mr=!1,yt=!1,Ep=!1,kE=typeof WeakSet=="function"?WeakSet:Set,Qt=null,OE=!1;function WI(r,s){if(r=r.containerInfo,$p=od,r=Wv(r),wm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,C=-1,M=-1,z=0,Z=0,re=r,$=null;t:for(;;){for(var J;re!==l||f!==0&&re.nodeType!==3||(C=T+f),re!==g||c!==0&&re.nodeType!==3||(M=T+c),re.nodeType===3&&(T+=re.nodeValue.length),(J=re.firstChild)!==null;)$=re,re=J;for(;;){if(re===r)break t;if($===l&&++z===f&&(C=T),$===g&&++Z===c&&(M=T),(J=re.nextSibling)!==null)break;re=$,$=re.parentNode}re=J}l=C===-1||M===-1?null:{start:C,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(Yp={focusedElem:r,selectionRange:l},od=!1,Qt=s;Qt!==null;)if(s=Qt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Qt=r;else for(;Qt!==null;){switch(s=Qt,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(r&1024&&g!==null){r=void 0,l=s,f=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var ge=Ea(l.type,f,l.elementType===l.type);r=c.getSnapshotBeforeUpdate(ge,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){at(l,l.return,Ie)}}break;case 3:if(r&1024){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Zp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Zp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(r&1024)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Qt=r;break}Qt=s.return}return ge=OE,OE=!1,ge}function ME(r,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:gr(r,l),c&4&&Eu(5,l);break;case 1:if(gr(r,l),c&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(C){at(l,l.return,C)}else{var f=Ea(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(C){at(l,l.return,C)}}c&64&&RE(l),c&512&&ba(l,l.return);break;case 3:if(gr(r,l),c&64&&(c=l.updateQueue,c!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{CE(c,r)}catch(C){at(l,l.return,C)}}break;case 26:gr(r,l),c&512&&ba(l,l.return);break;case 27:case 5:gr(r,l),s===null&&c&4&&xE(l),c&512&&ba(l,l.return);break;case 12:gr(r,l);break;case 13:gr(r,l),c&4&&VE(r,l);break;case 22:if(f=l.memoizedState!==null||mr,!f){s=s!==null&&s.memoizedState!==null||yt;var g=mr,T=yt;mr=f,(yt=s)&&!T?cs(r,l,(l.subtreeFlags&8772)!==0):gr(r,l),mr=g,yt=T}c&512&&(l.memoizedProps.mode==="manual"?ba(l,l.return):Mn(l,l.return));break;default:gr(r,l)}}function PE(r){var s=r.alternate;s!==null&&(r.alternate=null,PE(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Zs(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var It=null,Pn=!1;function pr(r,s,l){for(l=l.child;l!==null;)LE(r,s,l),l=l.sibling}function LE(r,s,l){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(jr,l)}catch{}switch(l.tag){case 26:yt||Mn(l,s),pr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:yt||Mn(l,s);var c=It,f=Pn;for(It=l.stateNode,pr(r,s,l),l=l.stateNode,s=l.attributes;s.length;)l.removeAttributeNode(s[0]);Zs(l),It=c,Pn=f;break;case 5:yt||Mn(l,s);case 6:f=It;var g=Pn;if(It=null,pr(r,s,l),It=f,Pn=g,It!==null)if(Pn)try{r=It,c=l.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)}catch(T){at(l,s,T)}else try{It.removeChild(l.stateNode)}catch(T){at(l,s,T)}break;case 18:It!==null&&(Pn?(s=It,l=l.stateNode,s.nodeType===8?Jp(s.parentNode,l):s.nodeType===1&&Jp(s,l),Uu(s)):Jp(It,l.stateNode));break;case 4:c=It,f=Pn,It=l.stateNode.containerInfo,Pn=!0,pr(r,s,l),It=c,Pn=f;break;case 0:case 11:case 14:case 15:yt||us(2,l,s),yt||us(4,l,s),pr(r,s,l);break;case 1:yt||(Mn(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&IE(l,s,c)),pr(r,s,l);break;case 21:pr(r,s,l);break;case 22:yt||Mn(l,s),yt=(c=yt)||l.memoizedState!==null,pr(r,s,l),yt=c;break;default:pr(r,s,l)}}function VE(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Uu(r)}catch(l){at(s,s.return,l)}}function XI(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new kE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new kE),s;default:throw Error(i(435,r.tag))}}function Tp(r,s){var l=XI(r);s.forEach(function(c){var f=cx.bind(null,r,c);l.has(c)||(l.add(c),c.then(f,f))})}function Jn(r,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],g=r,T=s,C=T;e:for(;C!==null;){switch(C.tag){case 27:case 5:It=C.stateNode,Pn=!1;break e;case 3:It=C.stateNode.containerInfo,Pn=!0;break e;case 4:It=C.stateNode.containerInfo,Pn=!0;break e}C=C.return}if(It===null)throw Error(i(160));LE(g,T,f),It=null,Pn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)UE(s,r),s=s.sibling}var hi=null;function UE(r,s){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jn(s,r),Zn(r),c&4&&(us(3,r,r.return),Eu(3,r),us(5,r,r.return));break;case 1:Jn(s,r),Zn(r),c&512&&(yt||l===null||Mn(l,l.return)),c&64&&mr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=hi;if(Jn(s,r),Zn(r),c&512&&(yt||l===null||Mn(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Kr]||g[qt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),tn(g,c,l),g[qt]=r,ft(g),c=g;break e;case"link":var T=xT("link","href",f).get(c+(l.href||""));if(T){for(var C=0;C<T.length;C++)if(g=T[C],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(C,1);break t}}g=f.createElement(c),tn(g,c,l),f.head.appendChild(g);break;case"meta":if(T=xT("meta","content",f).get(c+(l.content||""))){for(C=0;C<T.length;C++)if(g=T[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(C,1);break t}}g=f.createElement(c),tn(g,c,l),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[qt]=r,ft(g),c=g}r.stateNode=c}else NT(f,r.type,r.stateNode);else r.stateNode=IT(f,c,r.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?NT(f,r.type,r.stateNode):IT(f,c,r.memoizedProps)):c===null&&r.stateNode!==null&&NE(r,r.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&r.alternate===null){f=r.stateNode,g=r.memoizedProps;try{for(var M=f.firstChild;M;){var z=M.nextSibling,Z=M.nodeName;M[Kr]||Z==="HEAD"||Z==="BODY"||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=z}for(var re=r.type,$=f.attributes;$.length;)f.removeAttributeNode($[0]);tn(f,re,g),f[qt]=r,f[Ot]=g}catch(ge){at(r,r.return,ge)}}case 5:if(Jn(s,r),Zn(r),c&512&&(yt||l===null||Mn(l,l.return)),r.flags&32){f=r.stateNode;try{qn(f,"")}catch(ge){at(r,r.return,ge)}}c&4&&r.stateNode!=null&&(f=r.memoizedProps,NE(r,f,l!==null?l.memoizedProps:f)),c&1024&&(Ep=!0);break;case 6:if(Jn(s,r),Zn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(ge){at(r,r.return,ge)}}break;case 3:if(rd=null,f=hi,hi=nd(s.containerInfo),Jn(s,r),hi=f,Zn(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Uu(s.containerInfo)}catch(ge){at(r,r.return,ge)}Ep&&(Ep=!1,jE(r));break;case 4:c=hi,hi=nd(r.stateNode.containerInfo),Jn(s,r),Zn(r),hi=c;break;case 12:Jn(s,r),Zn(r);break;case 13:Jn(s,r),Zn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Np=bn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Tp(r,c)));break;case 22:if(c&512&&(yt||l===null||Mn(l,l.return)),M=r.memoizedState!==null,z=l!==null&&l.memoizedState!==null,Z=mr,re=yt,mr=Z||M,yt=re||z,Jn(s,r),yt=re,mr=Z,Zn(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=M?s._visibility&-2:s._visibility|1,M&&(s=mr||yt,l===null||z||s||Do(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(l=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(l===null){z=l=s;try{if(f=z.stateNode,M)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{T=z.stateNode,C=z.memoizedProps.style;var J=C!=null&&C.hasOwnProperty("display")?C.display:null;T.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ge){at(z,z.return,ge)}}}else if(s.tag===6){if(l===null){z=s;try{z.stateNode.nodeValue=M?"":z.memoizedProps}catch(ge){at(z,z.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Tp(r,l))));break;case 19:Jn(s,r),Zn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Tp(r,c)));break;case 21:break;default:Jn(s,r),Zn(r)}}function Zn(r){var s=r.flags;if(s&2){try{if(r.tag!==27){e:{for(var l=r.return;l!==null;){if(DE(l)){var c=l;break e}l=l.return}throw Error(i(160))}switch(c.tag){case 27:var f=c.stateNode,g=yp(r);zh(r,g,f);break;case 5:var T=c.stateNode;c.flags&32&&(qn(T,""),c.flags&=-33);var C=yp(r);zh(r,C,T);break;case 3:case 4:var M=c.stateNode.containerInfo,z=yp(r);vp(r,z,M);break;default:throw Error(i(161))}}}catch(Z){at(r,r.return,Z)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function jE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;jE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function gr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ME(r,s.alternate,s),s=s.sibling}function Do(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:us(4,s,s.return),Do(s);break;case 1:Mn(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&IE(s,s.return,l),Do(s);break;case 26:case 27:case 5:Mn(s,s.return),Do(s);break;case 22:Mn(s,s.return),s.memoizedState===null&&Do(s);break;default:Do(s)}r=r.sibling}}function cs(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=r,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:cs(f,g,l),Eu(4,g);break;case 1:if(cs(f,g,l),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){at(c,c.return,z)}if(c=g,f=c.updateQueue,f!==null){var C=c.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)AE(M[f],C)}catch(z){at(c,c.return,z)}}l&&T&64&&RE(g),ba(g,g.return);break;case 26:case 27:case 5:cs(f,g,l),l&&c===null&&T&4&&xE(g),ba(g,g.return);break;case 12:cs(f,g,l);break;case 13:cs(f,g,l),l&&T&4&&VE(f,g);break;case 22:g.memoizedState===null&&cs(f,g,l),ba(g,g.return);break;default:cs(f,g,l)}s=s.sibling}}function wp(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&cu(l))}function bp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&cu(r))}function hs(r,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)BE(r,s,l,c),s=s.sibling}function BE(r,s,l,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:hs(r,s,l,c),f&2048&&Eu(9,s);break;case 3:hs(r,s,l,c),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&cu(r)));break;case 12:if(f&2048){hs(r,s,l,c),r=s.stateNode;try{var g=s.memoizedProps,T=g.id,C=g.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){at(s,s.return,M)}}else hs(r,s,l,c);break;case 23:break;case 22:g=s.stateNode,s.memoizedState!==null?g._visibility&4?hs(r,s,l,c):Tu(r,s):g._visibility&4?hs(r,s,l,c):(g._visibility|=4,ko(r,s,l,c,(s.subtreeFlags&10256)!==0)),f&2048&&wp(s.alternate,s);break;case 24:hs(r,s,l,c),f&2048&&bp(s.alternate,s);break;default:hs(r,s,l,c)}}function ko(r,s,l,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,T=s,C=l,M=c,z=T.flags;switch(T.tag){case 0:case 11:case 15:ko(g,T,C,M,f),Eu(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&4?ko(g,T,C,M,f):Tu(g,T):(Z._visibility|=4,ko(g,T,C,M,f)),f&&z&2048&&wp(T.alternate,T);break;case 24:ko(g,T,C,M,f),f&&z&2048&&bp(T.alternate,T);break;default:ko(g,T,C,M,f)}s=s.sibling}}function Tu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,c=s,f=c.flags;switch(c.tag){case 22:Tu(l,c),f&2048&&wp(c.alternate,c);break;case 24:Tu(l,c),f&2048&&bp(c.alternate,c);break;default:Tu(l,c)}s=s.sibling}}var wu=8192;function Oo(r){if(r.subtreeFlags&wu)for(r=r.child;r!==null;)zE(r),r=r.sibling}function zE(r){switch(r.tag){case 26:Oo(r),r.flags&wu&&r.memoizedState!==null&&jx(hi,r.memoizedState,r.memoizedProps);break;case 5:Oo(r);break;case 3:case 4:var s=hi;hi=nd(r.stateNode.containerInfo),Oo(r),hi=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=wu,wu=16777216,Oo(r),wu=s):Oo(r));break;default:Oo(r)}}function FE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function bu(r){var s=r.deletions;if(r.flags&16){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Qt=c,HE(c,r)}FE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qE(r),r=r.sibling}function qE(r){switch(r.tag){case 0:case 11:case 15:bu(r),r.flags&2048&&us(9,r,r.return);break;case 3:bu(r);break;case 12:bu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,Fh(r)):bu(r);break;default:bu(r)}}function Fh(r){var s=r.deletions;if(r.flags&16){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Qt=c,HE(c,r)}FE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:us(8,s,s.return),Fh(s);break;case 22:l=s.stateNode,l._visibility&4&&(l._visibility&=-5,Fh(s));break;default:Fh(s)}r=r.sibling}}function HE(r,s){for(;Qt!==null;){var l=Qt;switch(l.tag){case 0:case 11:case 15:us(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:cu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Qt=c;else e:for(l=r;Qt!==null;){c=Qt;var f=c.sibling,g=c.return;if(PE(c),c===l){Qt=null;break e}if(f!==null){f.return=g,Qt=f;break e}Qt=g}}}function JI(r,s,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(r,s,l,c){return new JI(r,s,l,c)}function Sp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ds(r,s){var l=r.alternate;return l===null?(l=ei(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&31457280,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function GE(r,s){r.flags&=31457282;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function qh(r,s,l,c,f,g){var T=0;if(c=r,typeof r=="function")Sp(r)&&(T=1);else if(typeof r=="string")T=Vx(r,l,mn.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case m:return Sa(l.children,f,g,s);case p:T=8,f|=24;break;case y:return r=ei(12,l,s,f|2),r.elementType=y,r.lanes=g,r;case j:return r=ei(13,l,s,f),r.elementType=j,r.lanes=g,r;case V:return r=ei(19,l,s,f),r.elementType=V,r.lanes=g,r;case L:return KE(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case v:case A:T=10;break e;case w:T=9;break e;case D:T=11;break e;case F:T=14;break e;case G:T=16,c=null;break e}T=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=ei(T,l,s,f),s.elementType=r,s.type=c,s.lanes=g,s}function Sa(r,s,l,c){return r=ei(7,r,c,s),r.lanes=l,r}function KE(r,s,l,c){r=ei(22,r,c,s),r.elementType=L,r.lanes=l;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=f._current;if(g===null)throw Error(i(456));if(!(f._pendingVisibility&2)){var T=es(g,2);T!==null&&(f._pendingVisibility|=2,vn(T,g,2))}},attach:function(){var g=f._current;if(g===null)throw Error(i(456));if(f._pendingVisibility&2){var T=es(g,2);T!==null&&(f._pendingVisibility&=-3,vn(T,g,2))}}};return r.stateNode=f,r}function Ap(r,s,l){return r=ei(6,r,null,s),r.lanes=l,r}function Cp(r,s,l){return s=ei(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function _r(r){r.flags|=4}function QE(r,s){if(s.type!=="stylesheet"||s.state.loading&4)r.flags&=-16777217;else if(r.flags|=16777216,!DT(s)){if(s=Xn.current,s!==null&&((Ge&4194176)===Ge?ki!==null:(Ge&62914560)!==Ge&&!(Ge&536870912)||s!==ki))throw ou=Dm,c0;r.flags|=8192}}function Hh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Fr():536870912,r.lanes|=s,Po|=s)}function Su(r,s){if(!We)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function mt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=l,s}function ZI(r,s,l){var c=s.pendingProps;switch(xm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return l=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),fr(Vt),Wi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(iu(s)?_r(s):r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ci!==null&&(Mp(ci),ci=null))),mt(s),null;case 26:return l=s.memoizedState,r===null?(_r(s),l!==null?(mt(s),QE(s,l)):(mt(s),s.flags&=-16777217)):l?l!==r.memoizedState?(_r(s),mt(s),QE(s,l)):(mt(s),s.flags&=-16777217):(r.memoizedProps!==c&&_r(s),mt(s),s.flags&=-16777217),null;case 27:Za(s),l=Bn.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&_r(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return mt(s),null}r=mn.current,iu(s)?l0(s):(r=bT(f,c,l),s.stateNode=r,_r(s))}return mt(s),null;case 5:if(Za(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&_r(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(r=mn.current,iu(s))l0(s);else{switch(f=td(Bn.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?f.createElement(l,{is:c.is}):f.createElement(l)}}r[qt]=s,r[Ot]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(tn(r,l,c),l){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&_r(s)}}return mt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&_r(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Bn.current,iu(s)){if(r=s.stateNode,l=s.memoizedProps,c=null,f=yn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}r[qt]=s,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||_T(r.nodeValue,l)),r||ma(s)}else r=td(r).createTextNode(c),r[qt]=s,s.stateNode=r}return mt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=iu(s),c!==null&&c.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[qt]=s}else ru(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;mt(s),f=!1}else ci!==null&&(Mp(ci),ci=null),f=!0;if(!f)return s.flags&256?(ur(s),s):(ur(s),null)}if(ur(s),s.flags&128)return s.lanes=l,s;if(l=c!==null,r=r!==null&&r.memoizedState!==null,l){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),Hh(s,s.updateQueue),mt(s),null;case 4:return Wi(),r===null&&Gp(s.stateNode.containerInfo),mt(s),null;case 10:return fr(s.type),mt(s),null;case 19:if(nt(Lt),f=s.memoizedState,f===null)return mt(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)Su(f,!1);else{if(vt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(g=Rh(r),g!==null){for(s.flags|=128,Su(f,!1),r=g.updateQueue,s.updateQueue=r,Hh(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)GE(l,r),l=l.sibling;return Qe(Lt,Lt.current&1|2),s.child}r=r.sibling}f.tail!==null&&bn()>Gh&&(s.flags|=128,c=!0,Su(f,!1),s.lanes=4194304)}else{if(!c)if(r=Rh(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Hh(s,r),Su(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!We)return mt(s),null}else 2*bn()-f.renderingStartTime>Gh&&l!==536870912&&(s.flags|=128,c=!0,Su(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(r=f.last,r!==null?r.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=bn(),s.sibling=null,r=Lt.current,Qe(Lt,c?r&1|2:r&1),s):(mt(s),null);case 22:case 23:return ur(s),Om(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?l&536870912&&!(s.flags&128)&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),l=s.updateQueue,l!==null&&Hh(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),r!==null&&nt(ga),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),fr(Vt),mt(s),null;case 25:return null}throw Error(i(156,s.tag))}function ex(r,s){switch(xm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return fr(Vt),Wi(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Za(s),null;case 13:if(ur(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ru()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return nt(Lt),null;case 4:return Wi(),null;case 10:return fr(s.type),null;case 22:case 23:return ur(s),Om(),r!==null&&nt(ga),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return fr(Vt),null;case 25:return null;default:return null}}function $E(r,s){switch(xm(s),s.tag){case 3:fr(Vt),Wi();break;case 26:case 27:case 5:Za(s);break;case 4:Wi();break;case 13:ur(s);break;case 19:nt(Lt);break;case 10:fr(s.type);break;case 22:case 23:ur(s),Om(),r!==null&&nt(ga);break;case 24:fr(Vt)}}var tx={getCacheForType:function(r){var s=ln(Vt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},nx=typeof WeakMap=="function"?WeakMap:Map,pt=0,ot=null,Ve=null,Ge=0,lt=0,Ln=null,yr=!1,Mo=!1,Rp=!1,vr=0,vt=0,fs=0,Aa=0,Ip=0,ti=0,Po=0,Au=null,Mi=null,xp=!1,Np=0,Gh=1/0,Kh=null,ms=null,Qh=!1,Ca=null,Cu=0,Dp=0,kp=null,Ru=0,Op=null;function Vn(){if(pt&2&&Ge!==0)return Ge&-Ge;if(S.T!==null){var r=Co;return r!==0?r:zp()}return Zc()}function YE(){ti===0&&(ti=!(Ge&536870912)||We?jl():536870912);var r=Xn.current;return r!==null&&(r.flags|=32),ti}function vn(r,s,l){(r===ot&&lt===2||r.cancelPendingCommit!==null)&&(Lo(r,0),Er(r,Ge,ti,!1)),bt(r,l),(!(pt&2)||r!==ot)&&(r===ot&&(!(pt&2)&&(Aa|=l),vt===4&&Er(r,Ge,ti,!1)),Pi(r))}function WE(r,s,l){if(pt&6)throw Error(i(327));var c=!l&&(s&60)===0&&(s&r.expiredLanes)===0||zr(r,s),f=c?sx(r,s):Vp(r,s,!0),g=c;do{if(f===0){Mo&&!c&&Er(r,s,0,!1);break}else if(f===6)Er(r,s,0,!yr);else{if(l=r.current.alternate,g&&!ix(l)){f=Vp(r,s,!1),g=!1;continue}if(f===2){if(g=s,r.errorRecoveryDisabledLanes&g)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var C=r;f=Au;var M=C.current.memoizedState.isDehydrated;if(M&&(Lo(C,T).flags|=256),T=Vp(C,T,!1),T!==2){if(Rp&&!M){C.errorRecoveryDisabledLanes|=g,Aa|=g,f=4;break e}g=Mi,Mi=f,g!==null&&Mp(g)}f=T}if(g=!1,f!==2)continue}}if(f===1){Lo(r,0),Er(r,s,0,!0);break}e:{switch(c=r,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){Er(c,s,ti,!yr);break e}break;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=l,c.finishedLanes=s,(s&62914560)===s&&(g=Np+300-bn(),10<g)){if(Er(c,s,ti,!yr),zn(c,0)!==0)break e;c.timeoutHandle=ET(XE.bind(null,c,l,Mi,Kh,xp,s,ti,Aa,Po,yr,2,-0,0),g);break e}XE(c,l,Mi,Kh,xp,s,ti,Aa,Po,yr,0,-0,0)}}break}while(!0);Pi(r)}function Mp(r){Mi===null?Mi=r:Mi.push.apply(Mi,r)}function XE(r,s,l,c,f,g,T,C,M,z,Z,re,$){var J=s.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(Ou={stylesheets:null,count:0,unsuspend:Ux},zE(s),s=Bx(),s!==null)){r.cancelPendingCommit=s(rT.bind(null,r,l,c,f,T,C,M,1,re,$)),Er(r,g,T,!z);return}rT(r,l,c,f,T,C,M,Z,re,$)}function ix(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],g=f.getSnapshot;f=f.value;try{if(!On(g(),f))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Er(r,s,l,c){s&=~Ip,s&=~Aa,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var f=s;0<f;){var g=31-pn(f),T=1<<g;c[g]=-1,f&=~T}l!==0&&qr(r,l,s)}function $h(){return pt&6?!0:(Iu(0),!1)}function Pp(){if(Ve!==null){if(lt===0)var r=Ve.return;else r=Ve,dr=Ta=null,zm(r),So=null,lu=0,r=Ve;for(;r!==null;)$E(r.alternate,r),r=r.return;Ve=null}}function Lo(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,wx(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Pp(),ot=r,Ve=l=ds(r.current,null),Ge=s,lt=0,Ln=null,yr=!1,Mo=zr(r,s),Rp=!1,Po=ti=Ip=Aa=fs=vt=0,Mi=Au=null,xp=!1,s&8&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var f=31-pn(c),g=1<<f;s|=r[f],c&=~g}return vr=s,yh(),l}function JE(r,s){ke=null,S.H=Oi,s===au?(s=f0(),lt=3):s===c0?(s=f0(),lt=4):lt=s===hE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,Ve===null&&(vt=1,Uh(r,$n(s,r.current)))}function ZE(){var r=S.H;return S.H=Oi,r===null?Oi:r}function eT(){var r=S.A;return S.A=tx,r}function Lp(){vt=4,yr||(Ge&4194176)!==Ge&&Xn.current!==null||(Mo=!0),!(fs&134217727)&&!(Aa&134217727)||ot===null||Er(ot,Ge,ti,!1)}function Vp(r,s,l){var c=pt;pt|=2;var f=ZE(),g=eT();(ot!==r||Ge!==s)&&(Kh=null,Lo(r,s)),s=!1;var T=vt;e:do try{if(lt!==0&&Ve!==null){var C=Ve,M=Ln;switch(lt){case 8:Pp(),T=6;break e;case 3:case 2:case 6:Xn.current===null&&(s=!0);var z=lt;if(lt=0,Ln=null,Vo(r,C,M,z),l&&Mo){T=0;break e}break;default:z=lt,lt=0,Ln=null,Vo(r,C,M,z)}}rx(),T=vt;break}catch(Z){JE(r,Z)}while(!0);return s&&r.shellSuspendCounter++,dr=Ta=null,pt=c,S.H=f,S.A=g,Ve===null&&(ot=null,Ge=0,yh()),T}function rx(){for(;Ve!==null;)tT(Ve)}function sx(r,s){var l=pt;pt|=2;var c=ZE(),f=eT();ot!==r||Ge!==s?(Kh=null,Gh=bn()+500,Lo(r,s)):Mo=zr(r,s);e:do try{if(lt!==0&&Ve!==null){s=Ve;var g=Ln;t:switch(lt){case 1:lt=0,Ln=null,Vo(r,s,g,1);break;case 2:if(h0(g)){lt=0,Ln=null,nT(s);break}s=function(){lt===2&&ot===r&&(lt=7),Pi(r)},g.then(s,s);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:h0(g)?(lt=0,Ln=null,nT(s)):(lt=0,Ln=null,Vo(r,s,g,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var C=Ve;if(!T||DT(T)){lt=0,Ln=null;var M=C.sibling;if(M!==null)Ve=M;else{var z=C.return;z!==null?(Ve=z,Yh(z)):Ve=null}break t}}lt=0,Ln=null,Vo(r,s,g,5);break;case 6:lt=0,Ln=null,Vo(r,s,g,6);break;case 8:Pp(),vt=6;break e;default:throw Error(i(462))}}ax();break}catch(Z){JE(r,Z)}while(!0);return dr=Ta=null,S.H=c,S.A=f,pt=l,Ve!==null?0:(ot=null,Ge=0,yh(),vt)}function ax(){for(;Ve!==null&&!hm();)tT(Ve)}function tT(r){var s=bE(r.alternate,r,vr);r.memoizedProps=r.pendingProps,s===null?Yh(r):Ve=s}function nT(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=_E(l,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=_E(l,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:zm(s);default:$E(l,s),s=Ve=GE(s,vr),s=bE(l,s,vr)}r.memoizedProps=r.pendingProps,s===null?Yh(r):Ve=s}function Vo(r,s,l,c){dr=Ta=null,zm(s),So=null,lu=0;var f=s.return;try{if($I(r,f,s,l,Ge)){vt=1,Uh(r,$n(l,r.current)),Ve=null;return}}catch(g){if(f!==null)throw Ve=f,g;vt=1,Uh(r,$n(l,r.current)),Ve=null;return}s.flags&32768?(We||c===1?r=!0:Mo||Ge&536870912?r=!1:(yr=r=!0,(c===2||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),iT(s,r)):Yh(s)}function Yh(r){var s=r;do{if(s.flags&32768){iT(s,yr);return}r=s.return;var l=ZI(s.alternate,s,vr);if(l!==null){Ve=l;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=r}while(s!==null);vt===0&&(vt=5)}function iT(r,s){do{var l=ex(r.alternate,r);if(l!==null){l.flags&=32767,Ve=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=l}while(r!==null);vt=6,Ve=null}function rT(r,s,l,c,f,g,T,C,M,z){var Z=S.T,re=ce.p;try{ce.p=2,S.T=null,ox(r,s,l,c,re,f,g,T,C,M,z)}finally{S.T=Z,ce.p=re}}function ox(r,s,l,c,f,g,T,C){do Uo();while(Ca!==null);if(pt&6)throw Error(i(327));var M=r.finishedWork;if(c=r.finishedLanes,M===null)return null;if(r.finishedWork=null,r.finishedLanes=0,M===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var z=M.lanes|M.childLanes;if(z|=Cm,Xc(r,c,z,g,T,C),r===ot&&(Ve=ot=null,Ge=0),!(M.subtreeFlags&10256)&&!(M.flags&10256)||Qh||(Qh=!0,Dp=z,kp=l,hx(Xi,function(){return Uo(),null})),l=(M.flags&15990)!==0,M.subtreeFlags&15990||l?(l=S.T,S.T=null,g=ce.p,ce.p=2,T=pt,pt|=4,WI(r,M),UE(M,r),DI(Yp,r.containerInfo),od=!!$p,Yp=$p=null,r.current=M,ME(r,M.alternate,M),Pl(),pt=T,ce.p=g,S.T=l):r.current=M,Qh?(Qh=!1,Ca=r,Cu=c):sT(r,z),z=r.pendingLanes,z===0&&(ms=null),Vl(M.stateNode),Pi(r),s!==null)for(f=r.onRecoverableError,M=0;M<s.length;M++)z=s[M],f(z.value,{componentStack:z.stack});return Cu&3&&Uo(),z=r.pendingLanes,c&4194218&&z&42?r===Op?Ru++:(Ru=0,Op=r):Ru=0,Iu(0),null}function sT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,cu(s)))}function Uo(){if(Ca!==null){var r=Ca,s=Dp;Dp=0;var l=Jc(Cu),c=S.T,f=ce.p;try{if(ce.p=32>l?32:l,S.T=null,Ca===null)var g=!1;else{l=kp,kp=null;var T=Ca,C=Cu;if(Ca=null,Cu=0,pt&6)throw Error(i(331));var M=pt;if(pt|=4,qE(T.current),BE(T,T.current,C,l),pt=M,Iu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(jr,T)}catch{}g=!0}return g}finally{ce.p=f,S.T=c,sT(r,s)}}return!1}function aT(r,s,l){s=$n(l,s),s=tp(r.stateNode,s,2),r=ls(r,s,2),r!==null&&(bt(r,2),Pi(r))}function at(r,s,l){if(r.tag===3)aT(r,r,l);else for(;s!==null;){if(s.tag===3){aT(s,r,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ms===null||!ms.has(c))){r=$n(l,r),l=uE(2),c=ls(s,l,2),c!==null&&(cE(l,c,s,r),bt(c,2),Pi(c));break}}s=s.return}}function Up(r,s,l){var c=r.pingCache;if(c===null){c=r.pingCache=new nx;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(l)||(Rp=!0,f.add(l),r=lx.bind(null,r,s,l),s.then(r,r))}function lx(r,s,l){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ot===r&&(Ge&l)===l&&(vt===4||vt===3&&(Ge&62914560)===Ge&&300>bn()-Np?!(pt&2)&&Lo(r,0):Ip|=l,Po===Ge&&(Po=0)),Pi(r)}function oT(r,s){s===0&&(s=Fr()),r=es(r,s),r!==null&&(bt(r,s),Pi(r))}function ux(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),oT(r,l)}function cx(r,s){var l=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),oT(r,l)}function hx(r,s){return Ws(r,s)}var Wh=null,jo=null,jp=!1,Xh=!1,Bp=!1,Ra=0;function Pi(r){r!==jo&&r.next===null&&(jo===null?Wh=jo=r:jo=jo.next=r),Xh=!0,jp||(jp=!0,fx(dx))}function Iu(r,s){if(!Bp&&Xh){Bp=!0;do for(var l=!1,c=Wh;c!==null;){if(r!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var T=c.suspendedLanes,C=c.pingedLanes;g=(1<<31-pn(42|r)+1)-1,g&=f&~(T&~C),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,cT(c,g))}else g=Ge,g=zn(c,c===ot?g:0),!(g&3)||zr(c,g)||(l=!0,cT(c,g));c=c.next}while(l);Bp=!1}}function dx(){Xh=jp=!1;var r=0;Ra!==0&&(Tx()&&(r=Ra),Ra=0);for(var s=bn(),l=null,c=Wh;c!==null;){var f=c.next,g=lT(c,s);g===0?(c.next=null,l===null?Wh=f:l.next=f,f===null&&(jo=l)):(l=c,(r!==0||g&3)&&(Xh=!0)),c=f}Iu(r)}function lT(r,s){for(var l=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var T=31-pn(g),C=1<<T,M=f[T];M===-1?(!(C&l)||C&c)&&(f[T]=no(C,s)):M<=s&&(r.expiredLanes|=C),g&=~C}if(s=ot,l=Ge,l=zn(r,r===s?l:0),c=r.callbackNode,l===0||r===s&&lt===2||r.cancelPendingCommit!==null)return c!==null&&c!==null&&to(c),r.callbackNode=null,r.callbackPriority=0;if(!(l&3)||zr(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(c!==null&&to(c),Jc(l)){case 2:case 8:l=Ft;break;case 32:l=Xi;break;case 268435456:l=Ll;break;default:l=Xi}return c=uT.bind(null,r),l=Ws(l,c),r.callbackPriority=s,r.callbackNode=l,s}return c!==null&&c!==null&&to(c),r.callbackPriority=2,r.callbackNode=null,2}function uT(r,s){var l=r.callbackNode;if(Uo()&&r.callbackNode!==l)return null;var c=Ge;return c=zn(r,r===ot?c:0),c===0?null:(WE(r,c,s),lT(r,bn()),r.callbackNode!=null&&r.callbackNode===l?uT.bind(null,r):null)}function cT(r,s){if(Uo())return null;WE(r,s,!0)}function fx(r){bx(function(){pt&6?Ws(kt,r):r()})}function zp(){return Ra===0&&(Ra=jl()),Ra}function hT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Si(""+r)}function dT(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function mx(r,s,l,c,f){if(s==="submit"&&l&&l.stateNode===f){var g=hT((f[Ot]||null).action),T=c.submitter;T&&(s=(s=T[Ot]||null)?hT(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var C=new uo("action","action",null,c,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ra!==0){var M=T?dT(f,T):new FormData(f);Wm(l,{pending:!0,data:M,method:f.method,action:g},null,M)}}else typeof g=="function"&&(C.preventDefault(),M=T?dT(f,T):new FormData(f),Wm(l,{pending:!0,data:M,method:f.method,action:g},g,M))},currentTarget:f}]})}}for(var Fp=0;Fp<r0.length;Fp++){var qp=r0[Fp],px=qp.toLowerCase(),gx=qp[0].toUpperCase()+qp.slice(1);ui(px,"on"+gx)}ui(Zv,"onAnimationEnd"),ui(e0,"onAnimationIteration"),ui(t0,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(OI,"onTransitionRun"),ui(MI,"onTransitionStart"),ui(PI,"onTransitionCancel"),ui(n0,"onTransitionEnd"),Sn("onMouseEnter",["mouseout","mouseover"]),Sn("onMouseLeave",["mouseout","mouseover"]),Sn("onPointerEnter",["pointerout","pointerover"]),Sn("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_x=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function fT(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var C=c[T],M=C.instance,z=C.currentTarget;if(C=C.listener,M!==g&&f.isPropagationStopped())break e;g=C,f.currentTarget=z;try{g(f)}catch(Z){Vh(Z)}f.currentTarget=null,g=M}else for(T=0;T<c.length;T++){if(C=c[T],M=C.instance,z=C.currentTarget,C=C.listener,M!==g&&f.isPropagationStopped())break e;g=C,f.currentTarget=z;try{g(f)}catch(Z){Vh(Z)}f.currentTarget=null,g=M}}}}function ze(r,s){var l=s[Js];l===void 0&&(l=s[Js]=new Set);var c=r+"__bubble";l.has(c)||(mT(s,r,2,!1),l.add(c))}function Hp(r,s,l){var c=0;s&&(c|=4),mT(l,r,c,s)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function Gp(r){if(!r[Jh]){r[Jh]=!0,zl.forEach(function(l){l!=="selectionchange"&&(_x.has(l)||Hp(l,!1,r),Hp(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Jh]||(s[Jh]=!0,Hp("selectionchange",!1,s))}}function mT(r,s,l,c){switch(VT(s)){case 2:var f=qx;break;case 8:f=Hx;break;default:f=rg}l=f.bind(null,s,l,r),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Kp(r,s,l,c,f){var g=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(T===4)for(T=c.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===f||M.nodeType===8&&M.parentNode===f))return;T=T.return}for(;C!==null;){if(T=li(C),T===null)return;if(M=T.tag,M===5||M===6||M===26||M===27){c=g=T;continue e}C=C.parentNode}}c=c.return}ih(function(){var z=g,Z=lo(l),re=[];e:{var $=i0.get(r);if($!==void 0){var J=uo,ge=r;switch(r){case"keypress":if(Ci(l)===0)break e;case"keydown":case"keyup":J=go;break;case"focusin":ge="focus",J=fo;break;case"focusout":ge="blur",J=fo;break;case"beforeblur":case"afterblur":J=fo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=hh;break;case Zv:case e0:case t0:J=mo;break;case n0:J=fh;break;case"scroll":case"scrollend":J=rh;break;case"wheel":J=_o;break;case"copy":case"cut":case"paste":J=po;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Zl;break;case"toggle":case"beforetoggle":J=ph}var Ie=(s&4)!==0,Et=!Ie&&(r==="scroll"||r==="scrollend"),q=Ie?$!==null?$+"Capture":null:$;Ie=[];for(var B=z,K;B!==null;){var te=B;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||q===null||(te=ia(B,q),te!=null&&Ie.push(Nu(B,te,K))),Et)break;B=B.return}0<Ie.length&&($=new J($,ge,null,l,Z),re.push({event:$,listeners:Ie}))}}if(!(s&7)){e:{if($=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",$&&l!==Hn&&(ge=l.relatedTarget||l.fromElement)&&(li(ge)||ge[Ji]))break e;if((J||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,J?(ge=l.relatedTarget||l.toElement,J=z,ge=ge?li(ge):null,ge!==null&&(Et=_e(ge),Ie=ge.tag,ge!==Et||Ie!==5&&Ie!==27&&Ie!==6)&&(ge=null)):(J=null,ge=z),J!==ge)){if(Ie=Kn,te="onMouseLeave",q="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=Zl,te="onPointerLeave",q="onPointerEnter",B="pointer"),Et=J==null?$:Qr(J),K=ge==null?$:Qr(ge),$=new Ie(te,B+"leave",J,l,Z),$.target=Et,$.relatedTarget=K,te=null,li(Z)===z&&(Ie=new Ie(q,B+"enter",ge,l,Z),Ie.target=K,Ie.relatedTarget=Et,te=Ie),Et=te,J&&ge)t:{for(Ie=J,q=ge,B=0,K=Ie;K;K=Bo(K))B++;for(K=0,te=q;te;te=Bo(te))K++;for(;0<B-K;)Ie=Bo(Ie),B--;for(;0<K-B;)q=Bo(q),K--;for(;B--;){if(Ie===q||q!==null&&Ie===q.alternate)break t;Ie=Bo(Ie),q=Bo(q)}Ie=null}else Ie=null;J!==null&&pT(re,$,J,Ie,!1),ge!==null&&Et!==null&&pT(re,Et,ge,Ie,!0)}}e:{if($=z?Qr(z):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var me=Fv;else if(Pt($))if(qv)me=xI;else{me=RI;var Me=CI}else J=$.nodeName,!J||J.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?z&&Kl(z.elementType)&&(me=Fv):me=II;if(me&&(me=me(r,z))){ar(re,me,l,Z);break e}Me&&Me(r,$,z),r==="focusout"&&z&&$.type==="number"&&z.memoizedProps.value!=null&&oo($,"number",$.value)}switch(Me=z?Qr(z):window,r){case"focusin":(Pt(Me)||Me.contentEditable==="true")&&(yo=Me,bm=z,nu=null);break;case"focusout":nu=bm=yo=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Xv(re,l,Z);break;case"selectionchange":if(kI)break;case"keydown":case"keyup":Xv(re,l,Z)}var ye;if(xi)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else qe?W(r,l)&&(Te="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(E&&l.locale!=="ko"&&(qe||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&qe&&(ye=$l()):(Ai=Z,Zr="value"in Ai?Ai.value:Ai.textContent,qe=!0)),Me=Zh(z,Te),0<Me.length&&(Te=new Xl(Te,r,null,l,Z),re.push({event:Te,listeners:Me}),ye?Te.data=ye:(ye=oe(l),ye!==null&&(Te.data=ye)))),(ye=_?Mt(r,l):He(r,l))&&(Te=Zh(z,"onBeforeInput"),0<Te.length&&(Me=new Xl("onBeforeInput","beforeinput",null,l,Z),re.push({event:Me,listeners:Te}),Me.data=ye)),mx(re,r,z,l,Z)}fT(re,s)})}function Nu(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Zh(r,s){for(var l=s+"Capture",c=[];r!==null;){var f=r,g=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ia(r,l),f!=null&&c.unshift(Nu(r,f,g)),f=ia(r,s),f!=null&&c.push(Nu(r,f,g))),r=r.return}return c}function Bo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function pT(r,s,l,c,f){for(var g=s._reactName,T=[];l!==null&&l!==c;){var C=l,M=C.alternate,z=C.stateNode;if(C=C.tag,M!==null&&M===c)break;C!==5&&C!==26&&C!==27||z===null||(M=z,f?(z=ia(l,g),z!=null&&T.unshift(Nu(l,z,M))):f||(z=ia(l,g),z!=null&&T.push(Nu(l,z,M)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var yx=/\r\n?/g,vx=/\u0000|\uFFFD/g;function gT(r){return(typeof r=="string"?r:""+r).replace(yx,`
`).replace(vx,"")}function _T(r,s){return s=gT(s),gT(r)===s}function ed(){}function rt(r,s,l,c,f,g){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||qn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&qn(r,""+c);break;case"className":Wr(r,"class",c);break;case"tabIndex":Wr(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Wr(r,l,c);break;case"style":nh(r,c,g);break;case"data":if(s!=="object"){Wr(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Si(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&rt(r,s,"name",f.name,f,null),rt(r,s,"formEncType",f.formEncType,f,null),rt(r,s,"formMethod",f.formMethod,f,null),rt(r,s,"formTarget",f.formTarget,f,null)):(rt(r,s,"encType",f.encType,f,null),rt(r,s,"method",f.method,f,null),rt(r,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Si(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=ed);break;case"onScroll":c!=null&&ze("scroll",r);break;case"onScrollEnd":c!=null&&ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Si(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":ze("beforetoggle",r),ze("toggle",r),Yr(r,"popover",c);break;case"xlinkActuate":Fn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Fn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Fn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Fn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Fn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Fn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Fn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Yr(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=gm.get(l)||l,Yr(r,l,c))}}function Qp(r,s,l,c,f,g){switch(l){case"style":nh(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?qn(r,c):(typeof c=="number"||typeof c=="bigint")&&qn(r,""+c);break;case"onScroll":c!=null&&ze("scroll",r);break;case"onScrollEnd":c!=null&&ze("scrollend",r);break;case"onClick":c!=null&&(r.onclick=ed);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!so.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),s=l.slice(2,f?l.length-7:void 0),g=r[Ot]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,c,f);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Yr(r,l,c)}}}function tn(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",r),ze("load",r);var c=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var T=l[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(r,s,g,T,l,null)}}f&&rt(r,s,"srcSet",l.srcSet,l,null),c&&rt(r,s,"src",l.src,l,null);return;case"input":ze("invalid",r);var C=g=T=f=null,M=null,z=null;for(c in l)if(l.hasOwnProperty(c)){var Z=l[c];if(Z!=null)switch(c){case"name":f=Z;break;case"type":T=Z;break;case"checked":M=Z;break;case"defaultChecked":z=Z;break;case"value":g=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:rt(r,s,c,Z,l,null)}}ta(r,g,C,M,z,T,f,!1),ea(r);return;case"select":ze("invalid",r),c=T=g=null;for(f in l)if(l.hasOwnProperty(f)&&(C=l[f],C!=null))switch(f){case"value":g=C;break;case"defaultValue":T=C;break;case"multiple":c=C;default:rt(r,s,f,C,l,null)}s=g,l=T,r.multiple=!!c,s!=null?Ye(r,!!c,s,!1):l!=null&&Ye(r,!!c,l,!0);return;case"textarea":ze("invalid",r),g=f=c=null;for(T in l)if(l.hasOwnProperty(T)&&(C=l[T],C!=null))switch(T){case"value":c=C;break;case"defaultValue":f=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:rt(r,s,T,C,l,null)}Jr(r,c,f,g),ea(r);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(c=l[M],c!=null))switch(M){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(r,s,M,c,l,null)}return;case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":ze("load",r);break;case"video":case"audio":for(c=0;c<xu.length;c++)ze(xu[c],r);break;case"image":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"embed":case"source":case"link":ze("error",r),ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(c=l[z],c!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(r,s,z,c,l,null)}return;default:if(Kl(s)){for(Z in l)l.hasOwnProperty(Z)&&(c=l[Z],c!==void 0&&Qp(r,s,Z,c,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(c=l[C],c!=null&&rt(r,s,C,c,l,null))}function Ex(r,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,T=null,C=null,M=null,z=null,Z=null;for(J in l){var re=l[J];if(l.hasOwnProperty(J)&&re!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":M=re;default:c.hasOwnProperty(J)||rt(r,s,J,null,c,re)}}for(var $ in c){var J=c[$];if(re=l[$],c.hasOwnProperty($)&&(J!=null||re!=null))switch($){case"type":g=J;break;case"name":f=J;break;case"checked":z=J;break;case"defaultChecked":Z=J;break;case"value":T=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==re&&rt(r,s,$,J,c,re)}}Xr(r,T,C,M,z,Z,g,f);return;case"select":J=T=C=$=null;for(g in l)if(M=l[g],l.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":J=M;default:c.hasOwnProperty(g)||rt(r,s,g,null,c,M)}for(f in c)if(g=c[f],M=l[f],c.hasOwnProperty(f)&&(g!=null||M!=null))switch(f){case"value":$=g;break;case"defaultValue":C=g;break;case"multiple":T=g;default:g!==M&&rt(r,s,f,g,c,M)}s=C,l=T,c=J,$!=null?Ye(r,!!l,$,!1):!!c!=!!l&&(s!=null?Ye(r,!!l,s,!0):Ye(r,!!l,l?[]:"",!1));return;case"textarea":J=$=null;for(C in l)if(f=l[C],l.hasOwnProperty(C)&&f!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:rt(r,s,C,null,c,f)}for(T in c)if(f=c[T],g=l[T],c.hasOwnProperty(T)&&(f!=null||g!=null))switch(T){case"value":$=f;break;case"defaultValue":J=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&rt(r,s,T,f,c,g)}na(r,$,J);return;case"option":for(var ge in l)if($=l[ge],l.hasOwnProperty(ge)&&$!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":r.selected=!1;break;default:rt(r,s,ge,null,c,$)}for(M in c)if($=c[M],J=l[M],c.hasOwnProperty(M)&&$!==J&&($!=null||J!=null))switch(M){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:rt(r,s,M,$,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)$=l[Ie],l.hasOwnProperty(Ie)&&$!=null&&!c.hasOwnProperty(Ie)&&rt(r,s,Ie,null,c,$);for(z in c)if($=c[z],J=l[z],c.hasOwnProperty(z)&&$!==J&&($!=null||J!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:rt(r,s,z,$,c,J)}return;default:if(Kl(s)){for(var Et in l)$=l[Et],l.hasOwnProperty(Et)&&$!==void 0&&!c.hasOwnProperty(Et)&&Qp(r,s,Et,void 0,c,$);for(Z in c)$=c[Z],J=l[Z],!c.hasOwnProperty(Z)||$===J||$===void 0&&J===void 0||Qp(r,s,Z,$,c,J);return}}for(var q in l)$=l[q],l.hasOwnProperty(q)&&$!=null&&!c.hasOwnProperty(q)&&rt(r,s,q,null,c,$);for(re in c)$=c[re],J=l[re],!c.hasOwnProperty(re)||$===J||$==null&&J==null||rt(r,s,re,$,c,J)}var $p=null,Yp=null;function td(r){return r.nodeType===9?r:r.ownerDocument}function yT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Wp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xp=null;function Tx(){var r=window.event;return r&&r.type==="popstate"?r===Xp?!1:(Xp=r,!0):(Xp=null,!1)}var ET=typeof setTimeout=="function"?setTimeout:void 0,wx=typeof clearTimeout=="function"?clearTimeout:void 0,TT=typeof Promise=="function"?Promise:void 0,bx=typeof queueMicrotask=="function"?queueMicrotask:typeof TT<"u"?function(r){return TT.resolve(null).then(r).catch(Sx)}:ET;function Sx(r){setTimeout(function(){throw r})}function Jp(r,s){var l=s,c=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(c===0){r.removeChild(f),Uu(s);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=f}while(l);Uu(s)}function Zp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Zp(l),Zs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function Ax(r,s,l,c){for(;r.nodeType===1;){var f=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Kr])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==f.rel||r.getAttribute("href")!==(f.href==null?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=di(r.nextSibling),r===null)break}return null}function Cx(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=di(r.nextSibling),r===null))return null;return r}function di(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function wT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function bT(r,s,l){switch(s=td(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var ni=new Map,ST=new Set;function nd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Tr=ce.d;ce.d={f:Rx,r:Ix,D:xx,C:Nx,L:Dx,m:kx,X:Mx,S:Ox,M:Px};function Rx(){var r=Tr.f(),s=$h();return r||s}function Ix(r){var s=Zi(r);s!==null&&s.tag===5&&s.type==="form"?X0(s):Tr.r(r)}var zo=typeof document>"u"?null:document;function AT(r,s,l){var c=zo;if(c&&typeof s=="string"&&s){var f=_t(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),ST.has(f)||(ST.add(f),r={rel:r,crossOrigin:l,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),tn(s,"link",r),ft(s),c.head.appendChild(s)))}}function xx(r){Tr.D(r),AT("dns-prefetch",r,null)}function Nx(r,s){Tr.C(r,s),AT("preconnect",r,s)}function Dx(r,s,l){Tr.L(r,s,l);var c=zo;if(c&&r&&s){var f='link[rel="preload"][as="'+_t(s)+'"]';s==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+_t(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+_t(l.imageSizes)+'"]')):f+='[href="'+_t(r)+'"]';var g=f;switch(s){case"style":g=Fo(r);break;case"script":g=qo(r)}ni.has(g)||(r=N({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),ni.set(g,r),c.querySelector(f)!==null||s==="style"&&c.querySelector(Du(g))||s==="script"&&c.querySelector(ku(g))||(s=c.createElement("link"),tn(s,"link",r),ft(s),c.head.appendChild(s)))}}function kx(r,s){Tr.m(r,s);var l=zo;if(l&&r){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+_t(c)+'"][href="'+_t(r)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=qo(r)}if(!ni.has(g)&&(r=N({rel:"modulepreload",href:r},s),ni.set(g,r),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ku(g)))return}c=l.createElement("link"),tn(c,"link",r),ft(c),l.head.appendChild(c)}}}function Ox(r,s,l){Tr.S(r,s,l);var c=zo;if(c&&r){var f=$r(c).hoistableStyles,g=Fo(r);s=s||"default";var T=f.get(g);if(!T){var C={loading:0,preload:null};if(T=c.querySelector(Du(g)))C.loading=5;else{r=N({rel:"stylesheet",href:r,"data-precedence":s},l),(l=ni.get(g))&&eg(r,l);var M=T=c.createElement("link");ft(M),tn(M,"link",r),M._p=new Promise(function(z,Z){M.onload=z,M.onerror=Z}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,id(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:C},f.set(g,T)}}}function Mx(r,s){Tr.X(r,s);var l=zo;if(l&&r){var c=$r(l).hoistableScripts,f=qo(r),g=c.get(f);g||(g=l.querySelector(ku(f)),g||(r=N({src:r,async:!0},s),(s=ni.get(f))&&tg(r,s),g=l.createElement("script"),ft(g),tn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function Px(r,s){Tr.M(r,s);var l=zo;if(l&&r){var c=$r(l).hoistableScripts,f=qo(r),g=c.get(f);g||(g=l.querySelector(ku(f)),g||(r=N({src:r,async:!0,type:"module"},s),(s=ni.get(f))&&tg(r,s),g=l.createElement("script"),ft(g),tn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function CT(r,s,l,c){var f=(f=Bn.current)?nd(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Fo(l.href),l=$r(f).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Fo(l.href);var g=$r(f).hoistableStyles,T=g.get(r);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,T),(g=f.querySelector(Du(r)))&&!g._p&&(T.instance=g,T.state.loading=5),ni.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ni.set(r,l),g||Lx(f,r,l,T.state))),s&&c===null)throw Error(i(528,""));return T}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qo(l),l=$r(f).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Fo(r){return'href="'+_t(r)+'"'}function Du(r){return'link[rel="stylesheet"]['+r+"]"}function RT(r){return N({},r,{"data-precedence":r.precedence,precedence:null})}function Lx(r,s,l,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),tn(s,"link",l),ft(s),r.head.appendChild(s))}function qo(r){return'[src="'+_t(r)+'"]'}function ku(r){return"script[async]"+r}function IT(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+_t(l.href)+'"]');if(c)return s.instance=c,ft(c),c;var f=N({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),ft(c),tn(c,"style",f),id(c,l.precedence,r),s.instance=c;case"stylesheet":f=Fo(l.href);var g=r.querySelector(Du(f));if(g)return s.state.loading|=4,s.instance=g,ft(g),g;c=RT(l),(f=ni.get(f))&&eg(c,f),g=(r.ownerDocument||r).createElement("link"),ft(g);var T=g;return T._p=new Promise(function(C,M){T.onload=C,T.onerror=M}),tn(g,"link",c),s.state.loading|=4,id(g,l.precedence,r),s.instance=g;case"script":return g=qo(l.src),(f=r.querySelector(ku(g)))?(s.instance=f,ft(f),f):(c=l,(f=ni.get(g))&&(c=N({},l),tg(c,f)),r=r.ownerDocument||r,f=r.createElement("script"),ft(f),tn(f,"link",c),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&!(s.state.loading&4)&&(c=s.instance,s.state.loading|=4,id(c,l.precedence,r));return s.instance}function id(r,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,T=0;T<c.length;T++){var C=c[T];if(C.dataset.precedence===s)g=C;else if(g!==f)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function eg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function tg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var rd=null;function xT(r,s,l){if(rd===null){var c=new Map,f=rd=new Map;f.set(l,c)}else f=rd,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),f=0;f<l.length;f++){var g=l[f];if(!(g[Kr]||g[qt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=r+T;var C=c.get(T);C?C.push(g):c.set(T,[g])}}return c}function NT(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function Vx(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function DT(r){return!(r.type==="stylesheet"&&!(r.state.loading&3))}var Ou=null;function Ux(){}function jx(r,s,l){if(Ou===null)throw Error(i(475));var c=Ou;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&!(s.state.loading&4)){if(s.instance===null){var f=Fo(l.href),g=r.querySelector(Du(f));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=sd.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=g,ft(g);return}g=r.ownerDocument||r,l=RT(l),(f=ni.get(f))&&eg(l,f),g=g.createElement("link"),ft(g);var T=g;T._p=new Promise(function(C,M){T.onload=C,T.onerror=M}),tn(g,"link",l),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&!(s.state.loading&3)&&(c.count++,s=sd.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function Bx(){if(Ou===null)throw Error(i(475));var r=Ou;return r.stylesheets&&r.count===0&&ng(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&ng(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function sd(){if(this.count--,this.count===0){if(this.stylesheets)ng(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ad=null;function ng(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ad=new Map,s.forEach(zx,r),ad=null,sd.call(r))}function zx(r,s){if(!(s.state.loading&4)){var l=ad.get(r);if(l)var c=l.get(null);else{l=new Map,ad.set(r,l);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var T=f[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),c=T)}c&&l.set(null,c)}f=s.instance,T=f.getAttribute("data-precedence"),g=l.get(T)||c,g===c&&l.set(null,f),l.set(T,f),this.count++,c=sd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var Mu={$$typeof:A,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function Fx(r,s,l,c,f,g,T,C){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=io(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=io(0),this.hiddenUpdates=io(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function kT(r,s,l,c,f,g,T,C,M,z,Z,re){return r=new Fx(r,s,l,T,C,M,z,re),s=1,g===!0&&(s|=24),g=ei(3,null,null,s),r.current=g,g.stateNode=r,s=Mm(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:s},mp(g),r}function OT(r){return r?(r=To,r):To}function MT(r,s,l,c,f,g){f=OT(f),c.context===null?c.context=f:c.pendingContext=f,c=os(s),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=ls(r,c,s),l!==null&&(vn(l,r,s),_u(l,r,s))}function PT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function ig(r,s){PT(r,s),(r=r.alternate)&&PT(r,s)}function LT(r){if(r.tag===13){var s=es(r,67108864);s!==null&&vn(s,r,67108864),ig(r,67108864)}}var od=!0;function qx(r,s,l,c){var f=S.T;S.T=null;var g=ce.p;try{ce.p=2,rg(r,s,l,c)}finally{ce.p=g,S.T=f}}function Hx(r,s,l,c){var f=S.T;S.T=null;var g=ce.p;try{ce.p=8,rg(r,s,l,c)}finally{ce.p=g,S.T=f}}function rg(r,s,l,c){if(od){var f=sg(c);if(f===null)Kp(r,s,c,ld,l),UT(r,c);else if(Kx(f,r,s,l,c))c.stopPropagation();else if(UT(r,c),s&4&&-1<Gx.indexOf(r)){for(;f!==null;){var g=Zi(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=oi(g.pendingLanes);if(T!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var M=1<<31-pn(T);C.entanglements[1]|=M,T&=~M}Pi(g),!(pt&6)&&(Gh=bn()+500,Iu(0))}}break;case 13:C=es(g,2),C!==null&&vn(C,g,2),$h(),ig(g,2)}if(g=sg(c),g===null&&Kp(r,s,c,ld,l),g===f)break;f=g}f!==null&&c.stopPropagation()}else Kp(r,s,c,null,l)}}function sg(r){return r=lo(r),ag(r)}var ld=null;function ag(r){if(ld=null,r=li(r),r!==null){var s=_e(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=$e(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return ld=r,null}function VT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qc()){case kt:return 2;case Ft:return 8;case Xi:case $c:return 32;case Ll:return 268435456;default:return 32}default:return 32}}var og=!1,ps=null,gs=null,_s=null,Pu=new Map,Lu=new Map,ys=[],Gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UT(r,s){switch(r){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":Pu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(s.pointerId)}}function Vu(r,s,l,c,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Zi(s),s!==null&&LT(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Kx(r,s,l,c,f){switch(s){case"focusin":return ps=Vu(ps,r,s,l,c,f),!0;case"dragenter":return gs=Vu(gs,r,s,l,c,f),!0;case"mouseover":return _s=Vu(_s,r,s,l,c,f),!0;case"pointerover":var g=f.pointerId;return Pu.set(g,Vu(Pu.get(g)||null,r,s,l,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Lu.set(g,Vu(Lu.get(g)||null,r,s,l,c,f)),!0}return!1}function jT(r){var s=li(r.target);if(s!==null){var l=_e(s);if(l!==null){if(s=l.tag,s===13){if(s=$e(l),s!==null){r.blockedOn=s,Gr(r.priority,function(){if(l.tag===13){var c=Vn(),f=es(l,c);f!==null&&vn(f,l,c),ig(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ud(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=sg(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Hn=c,l.target.dispatchEvent(c),Hn=null}else return s=Zi(l),s!==null&&LT(s),r.blockedOn=l,!1;s.shift()}return!0}function BT(r,s,l){ud(r)&&l.delete(s)}function Qx(){og=!1,ps!==null&&ud(ps)&&(ps=null),gs!==null&&ud(gs)&&(gs=null),_s!==null&&ud(_s)&&(_s=null),Pu.forEach(BT),Lu.forEach(BT)}function cd(r,s){r.blockedOn===s&&(r.blockedOn=null,og||(og=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Qx)))}var hd=null;function zT(r){hd!==r&&(hd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){hd===r&&(hd=null);for(var s=0;s<r.length;s+=3){var l=r[s],c=r[s+1],f=r[s+2];if(typeof c!="function"){if(ag(c||l)===null)continue;break}var g=Zi(l);g!==null&&(r.splice(s,3),s-=3,Wm(g,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function Uu(r){function s(M){return cd(M,r)}ps!==null&&cd(ps,r),gs!==null&&cd(gs,r),_s!==null&&cd(_s,r),Pu.forEach(s),Lu.forEach(s);for(var l=0;l<ys.length;l++){var c=ys[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<ys.length&&(l=ys[0],l.blockedOn===null);)jT(l),l.blockedOn===null&&ys.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],g=l[c+1],T=f[Ot]||null;if(typeof g=="function")T||zT(l);else if(T){var C=null;if(g&&g.hasAttribute("formAction")){if(f=g,T=g[Ot]||null)C=T.formAction;else if(ag(f)!==null)continue}else C=T.action;typeof C=="function"?l[c+1]=C:(l.splice(c,3),c-=3),zT(l)}}}function lg(r){this._internalRoot=r}dd.prototype.render=lg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Vn();MT(l,c,r,s,null,null)},dd.prototype.unmount=lg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&Uo(),MT(r.current,2,null,r,null,null),$h(),s[Ji]=null}};function dd(r){this._internalRoot=r}dd.prototype.unstable_scheduleHydration=function(r){if(r){var s=Zc();r={blockedOn:null,target:r,priority:s};for(var l=0;l<ys.length&&s!==0&&s<ys[l].priority;l++);ys.splice(l,0,r),l===0&&jT(r)}};var FT=e.version;if(FT!=="19.0.0")throw Error(i(527,FT,"19.0.0"));ce.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=se(s),r=r!==null?pe(r):null,r=r===null?null:r.stateNode,r};var $x={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:S,findFiberByHostInstance:li,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{jr=fd.inject($x),on=fd}catch{}}return Bu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,c="",f=sE,g=aE,T=oE,C=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=kT(r,1,!1,null,null,l,c,f,g,T,C,null),r[Ji]=s.current,Gp(r.nodeType===8?r.parentNode:r),new lg(s)},Bu.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var c=!1,f="",g=sE,T=aE,C=oE,M=null,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks),l.formState!==void 0&&(z=l.formState)),s=kT(r,1,!0,s,l??null,c,f,g,T,C,M,z),s.context=OT(null),l=s.current,c=Vn(),f=os(c),f.callback=null,ls(l,f,c),s.current.lanes=c,bt(s,c),Pi(s),r[Ji]=s.current,Gp(r),new dd(s)},Bu.version="19.0.0",Bu}var JT;function sN(){if(JT)return hg.exports;JT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hg.exports=rN(),hg.exports}var aN=sN(),zu={},ZT;function oN(){if(ZT)return zu;ZT=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.parse=u,zu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function u(w,A){const D=new o,j=w.length;if(j<2)return D;const V=(A==null?void 0:A.decode)||y;let F=0;do{const G=w.indexOf("=",F);if(G===-1)break;const L=w.indexOf(";",F),Y=L===-1?j:L;if(G>Y){F=w.lastIndexOf(";",G-1)+1;continue}const ee=d(w,F,G),X=m(w,G,ee),k=w.slice(ee,X);if(D[k]===void 0){let R=d(w,G+1,Y),S=m(w,Y,R);const N=V(w.slice(R,S));D[k]=N}F=Y+1}while(F<j);return D}function d(w,A,D){do{const j=w.charCodeAt(A);if(j!==32&&j!==9)return A}while(++A<D);return D}function m(w,A,D){for(;A>D;){const j=w.charCodeAt(--A);if(j!==32&&j!==9)return A+1}return D}function p(w,A,D){const j=(D==null?void 0:D.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const V=j(A);if(!e.test(V))throw new TypeError(`argument val is invalid: ${A}`);let F=w+"="+V;if(!D)return F;if(D.maxAge!==void 0){if(!Number.isInteger(D.maxAge))throw new TypeError(`option maxAge is invalid: ${D.maxAge}`);F+="; Max-Age="+D.maxAge}if(D.domain){if(!t.test(D.domain))throw new TypeError(`option domain is invalid: ${D.domain}`);F+="; Domain="+D.domain}if(D.path){if(!i.test(D.path))throw new TypeError(`option path is invalid: ${D.path}`);F+="; Path="+D.path}if(D.expires){if(!v(D.expires)||!Number.isFinite(D.expires.valueOf()))throw new TypeError(`option expires is invalid: ${D.expires}`);F+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(F+="; HttpOnly"),D.secure&&(F+="; Secure"),D.partitioned&&(F+="; Partitioned"),D.priority)switch(typeof D.priority=="string"?D.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${D.priority}`)}if(D.sameSite)switch(typeof D.sameSite=="string"?D.sameSite.toLowerCase():D.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${D.sameSite}`)}return F}function y(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return a.call(w)==="[object Date]"}return zu}oN();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ew="popstate";function lN(n={}){function e(i,a){let{pathname:o,search:u,hash:d}=i.location;return l_("",{pathname:o,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:cc(a)}return cN(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Fi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uN(){return Math.random().toString(36).substring(2,10)}function tw(n,e){return{usr:n.state,key:n.key,idx:e}}function l_(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Tl(e):e,state:t,key:e&&e.key||i||uN()}}function cc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function cN(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,u=a.history,d="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){d="POP";let V=y(),F=V==null?null:V-p;p=V,m&&m({action:d,location:j.location,delta:F})}function w(V,F){d="PUSH";let G=l_(j.location,V,F);p=y()+1;let L=tw(G,p),Y=j.createHref(G);try{u.pushState(L,"",Y)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;a.location.assign(Y)}o&&m&&m({action:d,location:j.location,delta:1})}function A(V,F){d="REPLACE";let G=l_(j.location,V,F);p=y();let L=tw(G,p),Y=j.createHref(G);u.replaceState(L,"",Y),o&&m&&m({action:d,location:j.location,delta:0})}function D(V){let F=a.location.origin!=="null"?a.location.origin:a.location.href,G=typeof V=="string"?V:cc(V);return G=G.replace(/ $/,"%20"),gt(F,`No window.location.(origin|href) available to create URL for href: ${G}`),new URL(G,F)}let j={get action(){return d},get location(){return n(a,u)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(ew,v),m=V,()=>{a.removeEventListener(ew,v),m=null}},createHref(V){return e(a,V)},createURL:D,encodeLocation(V){let F=D(V);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:w,replace:A,go(V){return u.go(V)}};return j}function QS(n,e,t="/"){return hN(n,e,t,!1)}function hN(n,e,t,i){let a=typeof e=="string"?Tl(e):e,o=Ls(a.pathname||"/",t);if(o==null)return null;let u=$S(n);dN(u);let d=null;for(let m=0;d==null&&m<u.length;++m){let p=bN(o);d=TN(u[m],p,i)}return d}function $S(n,e=[],t=[],i=""){let a=(o,u,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};m.relativePath.startsWith("/")&&(gt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=Ir([i,m.relativePath]),y=t.concat(m);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),$S(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:vN(p,o.index),routesMeta:y})};return n.forEach((o,u)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,u);else for(let m of YS(o.path))a(o,u,m)}),e}function YS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let u=YS(i.join("/")),d=[];return d.push(...u.map(m=>m===""?o:[o,m].join("/"))),a&&d.push(...u),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function dN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var fN=/^:[\w-]+$/,mN=3,pN=2,gN=1,_N=10,yN=-2,nw=n=>n==="*";function vN(n,e){let t=n.split("/"),i=t.length;return t.some(nw)&&(i+=yN),e&&(i+=pN),t.filter(a=>!nw(a)).reduce((a,o)=>a+(fN.test(o)?mN:o===""?gN:_N),i)}function EN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function TN(n,e,t=!1){let{routesMeta:i}=n,a={},o="/",u=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=Ud({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),w=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=Ud({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Ir([o,v.pathname]),pathnameBase:RN(Ir([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=Ir([o,v.pathnameBase]))}return u}function Ud(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=wN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},w)=>{if(y==="*"){let D=d[w]||"";u=o.slice(0,o.length-D.length).replace(/(.)\/+$/,"$1")}const A=d[w];return v&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function wN(n,e=!1,t=!0){Fi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function bN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ls(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function SN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Tl(n):n;return{pathname:t?t.startsWith("/")?t:AN(t,e):e,search:IN(i),hash:xN(a)}}function AN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function pg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function WS(n){let e=CN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function XS(n,e,t,i=!1){let a;typeof n=="string"?a=Tl(n):(a={...n},gt(!a.pathname||!a.pathname.includes("?"),pg("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),pg("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),pg("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,d;if(u==null)d=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;a.pathname=w.join("/")}d=v>=0?e[v]:"/"}let m=SN(a,d),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var Ir=n=>n.join("/").replace(/\/\/+/g,"/"),RN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function NN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var JS=["POST","PUT","PATCH","DELETE"];new Set(JS);var DN=["GET",...JS];new Set(DN);var wl=Q.createContext(null);wl.displayName="DataRouter";var bf=Q.createContext(null);bf.displayName="DataRouterState";var ZS=Q.createContext({isTransitioning:!1});ZS.displayName="ViewTransition";var kN=Q.createContext(new Map);kN.displayName="Fetchers";var ON=Q.createContext(null);ON.displayName="Await";var Gi=Q.createContext(null);Gi.displayName="Navigation";var Cc=Q.createContext(null);Cc.displayName="Location";var Ki=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Ki.displayName="Route";var ty=Q.createContext(null);ty.displayName="RouteError";function MN(n,{relative:e}={}){gt(Rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=Q.useContext(Gi),{hash:a,pathname:o,search:u}=Ic(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:Ir([t,o])),i.createHref({pathname:d,search:u,hash:a})}function Rc(){return Q.useContext(Cc)!=null}function qa(){return gt(Rc(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Cc).location}var eA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tA(n){Q.useContext(Gi).static||Q.useLayoutEffect(n)}function Ks(){let{isDataRoute:n}=Q.useContext(Ki);return n?QN():PN()}function PN(){gt(Rc(),"useNavigate() may be used only in the context of a <Router> component.");let n=Q.useContext(wl),{basename:e,navigator:t}=Q.useContext(Gi),{matches:i}=Q.useContext(Ki),{pathname:a}=qa(),o=JSON.stringify(WS(i)),u=Q.useRef(!1);return tA(()=>{u.current=!0}),Q.useCallback((m,p={})=>{if(Fi(u.current,eA),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=XS(m,JSON.parse(o),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ir([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,a,n])}Q.createContext(null);function ny(){let{matches:n}=Q.useContext(Ki),e=n[n.length-1];return e?e.params:{}}function Ic(n,{relative:e}={}){let{matches:t}=Q.useContext(Ki),{pathname:i}=qa(),a=JSON.stringify(WS(t));return Q.useMemo(()=>XS(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function LN(n,e){return nA(n,e)}function nA(n,e,t,i){var G;gt(Rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=Q.useContext(Gi),{matches:u}=Q.useContext(Ki),d=u[u.length-1],m=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",v=d&&d.route;{let L=v&&v.path||"";iA(p,!v||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let w=qa(),A;if(e){let L=typeof e=="string"?Tl(e):e;gt(y==="/"||((G=L.pathname)==null?void 0:G.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${L.pathname}" was given in the \`location\` prop.`),A=L}else A=w;let D=A.pathname||"/",j=D;if(y!=="/"){let L=y.replace(/^\//,"").split("/");j="/"+D.replace(/^\//,"").split("/").slice(L.length).join("/")}let V=!o&&t&&t.matches&&t.matches.length>0?t.matches:QS(n,{pathname:j});Fi(v||V!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Fi(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=zN(V&&V.map(L=>Object.assign({},L,{params:Object.assign({},m,L.params),pathname:Ir([y,a.encodeLocation?a.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?y:Ir([y,a.encodeLocation?a.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),u,t,i);return e&&F?Q.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},F):F}function VN(){let n=KN(),e=NN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:o},"ErrorBoundary")," or"," ",Q.createElement("code",{style:o},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:a},t):null,u)}var UN=Q.createElement(VN,null),jN=class extends Q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Q.createElement(Ki.Provider,{value:this.props.routeContext},Q.createElement(ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BN({routeContext:n,match:e,children:t}){let i=Q.useContext(wl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Ki.Provider,{value:n},t)}function zN(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t==null?void 0:t.errors;if(o!=null){let m=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:y,errors:v}=t,w=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let v,w=!1,A=null,D=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,A=p.route.errorElement||UN,u&&(d<0&&y===0?(iA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,D=null):d===y&&(w=!0,D=p.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,y+1)),V=()=>{let F;return v?F=A:w?F=D:p.route.Component?F=Q.createElement(p.route.Component,null):p.route.element?F=p.route.element:F=m,Q.createElement(BN,{match:p,routeContext:{outlet:m,matches:j,isDataRoute:t!=null},children:F})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?Q.createElement(jN,{location:t.location,revalidation:t.revalidation,component:A,error:v,children:V(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):V()},null)}function iy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FN(n){let e=Q.useContext(wl);return gt(e,iy(n)),e}function qN(n){let e=Q.useContext(bf);return gt(e,iy(n)),e}function HN(n){let e=Q.useContext(Ki);return gt(e,iy(n)),e}function ry(n){let e=HN(n),t=e.matches[e.matches.length-1];return gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function GN(){return ry("useRouteId")}function KN(){var i;let n=Q.useContext(ty),e=qN("useRouteError"),t=ry("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function QN(){let{router:n}=FN("useNavigate"),e=ry("useNavigate"),t=Q.useRef(!1);return tA(()=>{t.current=!0}),Q.useCallback(async(a,o={})=>{Fi(t.current,eA),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var iw={};function iA(n,e,t){!e&&!iw[n]&&(iw[n]=!0,Fi(!1,t))}Q.memo($N);function $N({routes:n,future:e,state:t}){return nA(n,void 0,t,e)}function ws(n){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){gt(!Rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=Q.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof t=="string"&&(t=Tl(t));let{pathname:m="/",search:p="",hash:y="",state:v=null,key:w="default"}=t,A=Q.useMemo(()=>{let D=Ls(m,u);return D==null?null:{location:{pathname:D,search:p,hash:y,state:v,key:w},navigationType:i}},[u,m,p,y,v,w,i]);return Fi(A!=null,`<Router basename="${u}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:Q.createElement(Gi.Provider,{value:d},Q.createElement(Cc.Provider,{children:e,value:A}))}function WN({children:n,location:e}){return LN(u_(n),e)}function u_(n,e=[]){let t=[];return Q.Children.forEach(n,(i,a)=>{if(!Q.isValidElement(i))return;let o=[...e,a];if(i.type===Q.Fragment){t.push.apply(t,u_(i.props.children,o));return}gt(i.type===ws,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=u_(i.props.children,o)),t.push(u)}),t}var Ad="get",Cd="application/x-www-form-urlencoded";function Sf(n){return n!=null&&typeof n.tagName=="string"}function XN(n){return Sf(n)&&n.tagName.toLowerCase()==="button"}function JN(n){return Sf(n)&&n.tagName.toLowerCase()==="form"}function ZN(n){return Sf(n)&&n.tagName.toLowerCase()==="input"}function e2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function t2(n,e){return n.button===0&&(!e||e==="_self")&&!e2(n)}var md=null;function n2(){if(md===null)try{new FormData(document.createElement("form"),0),md=!1}catch{md=!0}return md}var i2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gg(n){return n!=null&&!i2.has(n)?(Fi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cd}"`),null):n}function r2(n,e){let t,i,a,o,u;if(JN(n)){let d=n.getAttribute("action");i=d?Ls(d,e):null,t=n.getAttribute("method")||Ad,a=gg(n.getAttribute("enctype"))||Cd,o=new FormData(n)}else if(XN(n)||ZN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?Ls(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Ad,a=gg(n.getAttribute("formenctype"))||gg(d.getAttribute("enctype"))||Cd,o=new FormData(d,n),!n2()){let{name:p,type:y,value:v}=n;if(y==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,v)}}else{if(Sf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ad,i=null,a=Cd,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:u}}function sy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function s2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function o2(n,e,t){let i=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await s2(o,t);return u.links?u.links():[]}return[]}));return h2(i.flat(1).filter(a2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function rw(n,e,t,i,a,o){let u=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,p)=>u(m,p)||d(m,p)):o==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function l2(n,e){return u2(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let a=[i.module];return i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function u2(n){return[...new Set(n)]}function c2(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function h2(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let o=JSON.stringify(c2(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function d2(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function f2(){let n=Q.useContext(wl);return sy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function m2(){let n=Q.useContext(bf);return sy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ay=Q.createContext(void 0);ay.displayName="FrameworkContext";function rA(){let n=Q.useContext(ay);return sy(n,"You must render this element inside a <HydratedRouter> element"),n}function p2(n,e){let t=Q.useContext(ay),[i,a]=Q.useState(!1),[o,u]=Q.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,w=Q.useRef(null);Q.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let j=F=>{F.forEach(G=>{u(G.isIntersecting)})},V=new IntersectionObserver(j,{threshold:.5});return w.current&&V.observe(w.current),()=>{V.disconnect()}}},[n]),Q.useEffect(()=>{if(i){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[i]);let A=()=>{a(!0)},D=()=>{a(!1),u(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:Fu(d,A),onBlur:Fu(m,D),onMouseEnter:Fu(p,A),onMouseLeave:Fu(y,D),onTouchStart:Fu(v,A)}]:[!1,w,{}]}function Fu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function g2({page:n,...e}){let{router:t}=f2(),i=Q.useMemo(()=>QS(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?Q.createElement(y2,{page:n,matches:i,...e}):null}function _2(n){let{manifest:e,routeModules:t}=rA(),[i,a]=Q.useState([]);return Q.useEffect(()=>{let o=!1;return o2(n,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[n,e,t]),i}function y2({page:n,matches:e,...t}){let i=qa(),{manifest:a,routeModules:o}=rA(),{loaderData:u,matches:d}=m2(),m=Q.useMemo(()=>rw(n,e,d,a,i,"data"),[n,e,d,a,i]),p=Q.useMemo(()=>rw(n,e,d,a,i,"assets"),[n,e,d,a,i]),y=Q.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,D=!1;if(e.forEach(V=>{var G;let F=a.routes[V.route.id];!F||!F.hasLoader||(!m.some(L=>L.route.id===V.route.id)&&V.route.id in u&&((G=o[V.route.id])!=null&&G.shouldRevalidate)||F.hasClientLoader?D=!0:A.add(V.route.id))}),A.size===0)return[];let j=d2(n);return D&&A.size>0&&j.searchParams.set("_routes",e.filter(V=>A.has(V.route.id)).map(V=>V.route.id).join(",")),[j.pathname+j.search]},[u,i,a,m,e,n,o]),v=Q.useMemo(()=>l2(p,a),[p,a]),w=_2(p);return Q.createElement(Q.Fragment,null,y.map(A=>Q.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>Q.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:D})=>Q.createElement("link",{key:A,...D})))}function v2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var sA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sA&&(window.__reactRouterVersion="7.1.5")}catch{}function E2({basename:n,children:e,window:t}){let i=Q.useRef();i.current==null&&(i.current=lN({window:t,v5Compat:!0}));let a=i.current,[o,u]=Q.useState({action:a.action,location:a.location}),d=Q.useCallback(m=>{Q.startTransition(()=>u(m))},[u]);return Q.useLayoutEffect(()=>a.listen(d),[a,d]),Q.createElement(YN,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a})}var aA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ju=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:u,state:d,target:m,to:p,preventScrollReset:y,viewTransition:v,...w},A){let{basename:D}=Q.useContext(Gi),j=typeof p=="string"&&aA.test(p),V,F=!1;if(typeof p=="string"&&j&&(V=p,sA))try{let S=new URL(window.location.href),N=p.startsWith("//")?new URL(S.protocol+p):new URL(p),O=Ls(N.pathname,D);N.origin===S.origin&&O!=null?p=O+N.search+N.hash:F=!0}catch{Fi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=MN(p,{relative:a}),[L,Y,ee]=p2(i,w),X=S2(p,{replace:u,state:d,target:m,preventScrollReset:y,relative:a,viewTransition:v});function k(S){e&&e(S),S.defaultPrevented||X(S)}let R=Q.createElement("a",{...w,...ee,href:V||G,onClick:F||o?e:k,ref:v2(A,Y),target:m,"data-discover":!j&&t==="render"?"true":void 0});return L&&!j?Q.createElement(Q.Fragment,null,R,Q.createElement(g2,{page:G})):R});Ju.displayName="Link";var T2=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:d,children:m,...p},y){let v=Ic(u,{relative:p.relative}),w=qa(),A=Q.useContext(bf),{navigator:D,basename:j}=Q.useContext(Gi),V=A!=null&&x2(v)&&d===!0,F=D.encodeLocation?D.encodeLocation(v).pathname:v.pathname,G=w.pathname,L=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(G=G.toLowerCase(),L=L?L.toLowerCase():null,F=F.toLowerCase()),L&&j&&(L=Ls(L,j)||L);const Y=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let ee=G===F||!a&&G.startsWith(F)&&G.charAt(Y)==="/",X=L!=null&&(L===F||!a&&L.startsWith(F)&&L.charAt(F.length)==="/"),k={isActive:ee,isPending:X,isTransitioning:V},R=ee?e:void 0,S;typeof i=="function"?S=i(k):S=[i,ee?"active":null,X?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(k):o;return Q.createElement(Ju,{...p,"aria-current":R,className:S,ref:y,style:N,to:u,viewTransition:d},typeof m=="function"?m(k):m)});T2.displayName="NavLink";var w2=Q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:u=Ad,action:d,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,...w},A)=>{let D=R2(),j=I2(d,{relative:p}),V=u.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&aA.test(d),G=L=>{if(m&&m(L),L.defaultPrevented)return;L.preventDefault();let Y=L.nativeEvent.submitter,ee=(Y==null?void 0:Y.getAttribute("formmethod"))||u;D(Y||L.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:a,state:o,relative:p,preventScrollReset:y,viewTransition:v})};return Q.createElement("form",{ref:A,method:V,action:j,onSubmit:i?m:G,...w,"data-discover":!F&&n==="render"?"true":void 0})});w2.displayName="Form";function b2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oA(n){let e=Q.useContext(wl);return gt(e,b2(n)),e}function S2(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:u}={}){let d=Ks(),m=qa(),p=Ic(n,{relative:o});return Q.useCallback(y=>{if(t2(y,e)){y.preventDefault();let v=t!==void 0?t:cc(m)===cc(p);d(n,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:u})}},[m,d,p,t,i,e,n,a,o,u])}var A2=0,C2=()=>`__${String(++A2)}__`;function R2(){let{router:n}=oA("useSubmit"),{basename:e}=Q.useContext(Gi),t=GN();return Q.useCallback(async(i,a={})=>{let{action:o,method:u,encType:d,formData:m,body:p}=r2(i,e);if(a.navigate===!1){let y=a.fetcherKey||C2();await n.fetch(y,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function I2(n,{relative:e}={}){let{basename:t}=Q.useContext(Gi),i=Q.useContext(Ki);gt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Ic(n||".",{relative:e})},u=qa();if(n==null){o.search=u.search;let d=new URLSearchParams(o.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(v=>v).forEach(v=>d.append("index",v));let y=d.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ir([t,o.pathname])),cc(o)}function x2(n,e={}){let t=Q.useContext(ZS);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=oA("useViewTransitionState"),a=Ic(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Ls(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Ls(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ud(a.pathname,u)!=null||Ud(a.pathname,o)!=null}new TextEncoder;var sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=function(n,e){if(!n)throw bl(e)},bl=function(n){return new Error("Firebase Database ("+lA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},N2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],u=n[t++],d=n[t++],m=((a&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},oy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],u=a+1<n.length,d=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=o>>2,v=(o&3)<<4|d>>4;let w=(d&15)<<2|p>>6,A=p&63;m||(A=64,u||(w=64)),i.push(t[y],t[v],t[w],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):N2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||d==null||p==null||v==null)throw new D2;const w=o<<2|d>>4;if(i.push(w),p!==64){const A=d<<4&240|p>>2;if(i.push(A),v!==64){const D=p<<6&192|v;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class D2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cA=function(n){const e=uA(n);return oy.encodeByteArray(e,!0)},jd=function(n){return cA(n).replace(/\./g,"")},Bd=function(n){try{return oy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(n){return hA(void 0,n)}function hA(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!O2(t)||(n[t]=hA(n[t],e[t]));return n}function O2(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=()=>M2().__FIREBASE_DEFAULTS__,L2=()=>{if(typeof process>"u"||typeof sw>"u")return;const n=sw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},V2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Bd(n[1]);return e&&JSON.parse(e)},Af=()=>{try{return P2()||L2()||V2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dA=n=>{var e,t;return(t=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fA=n=>{const e=dA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},mA=()=>{var n;return(n=Af())===null||n===void 0?void 0:n.config},pA=n=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jd(JSON.stringify(t)),jd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ly(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function U2(){var n;const e=(n=Af())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _A(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B2(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function z2(){return lA.NODE_ADMIN===!0}function F2(){return!U2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vA(){try{return typeof indexedDB=="object"}catch{return!1}}function EA(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function q2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="FirebaseError";class vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=H2,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?G2(o,i):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new vi(a,d,i)}}function G2(n,e){return n.replace(K2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const K2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){return JSON.parse(n)}function jt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=function(n){let e={},t={},i={},a="";try{const o=n.split(".");e=hc(Bd(o[0])||""),t=hc(Bd(o[1])||""),a=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},Q2=function(n){const e=TA(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},$2=function(n){const e=TA(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function il(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function c_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zd(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function rl(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=n[a],u=e[a];if(aw(o)&&aw(u)){if(!rl(o,u))return!1}else if(o!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function aw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const w=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(w<<1|w>>>31)&4294967295}let a=this.chain_[0],o=this.chain_[1],u=this.chain_[2],d=this.chain_[3],m=this.chain_[4],p,y;for(let v=0;v<80;v++){v<40?v<20?(p=d^o&(u^d),y=1518500249):(p=o^u^d,y=1859775393):v<60?(p=o&u|d&(o|u),y=2400959708):(p=o^u^d,y=3395469782);const w=(a<<5|a>>>27)+p+m+y+i[v]&4294967295;m=d,d=u,u=(o<<30|o>>>2)&4294967295,o=a,a=w}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const o=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(o[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}else for(;a<t;)if(o[u]=e[a],++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[a]>>o&255,++i;return e}}function W2(n,e){const t=new X2(n,e);return t.subscribe.bind(t)}class X2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");J2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=_g),a.error===void 0&&(a.error=_g),a.complete===void 0&&(a.complete=_g);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _g(){}function Cf(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const o=a-55296;i++,ae(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(o<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Rf=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1e3,tD=2,nD=4*60*60*1e3,iD=.5;function ow(n,e=eD,t=tD){const i=e*Math.pow(t,n),a=Math.round(iD*i*(Math.random()-.5)*2);return Math.min(nD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class si{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new xc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aD(e))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=Ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ia){return this.instances.has(e)}getOptions(e=Ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ia){return this.component?this.component.multipleInstances?e:Ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sD(n){return n===Ia?void 0:n}function aD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const lD={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},uD=Ue.INFO,cD={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},hD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=cD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nc{constructor(e){this.name=e,this._logLevel=uD,this._logHandler=hD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const dD=(n,e)=>e.some(t=>n instanceof t);let lw,uw;function fD(){return lw||(lw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mD(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wA=new WeakMap,h_=new WeakMap,bA=new WeakMap,yg=new WeakMap,uy=new WeakMap;function pD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(xs(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&wA.set(t,n)}).catch(()=>{}),uy.set(e,n),e}function gD(n){if(h_.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});h_.set(n,e)}let d_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return h_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||bA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _D(n){d_=n(d_)}function yD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(vg(this),e,...t);return bA.set(i,e.sort?e.sort():[e]),xs(i)}:mD().includes(n)?function(...e){return n.apply(vg(this),e),xs(wA.get(this))}:function(...e){return xs(n.apply(vg(this),e))}}function vD(n){return typeof n=="function"?yD(n):(n instanceof IDBTransaction&&gD(n),dD(n,fD())?new Proxy(n,d_):n)}function xs(n){if(n instanceof IDBRequest)return pD(n);if(yg.has(n))return yg.get(n);const e=vD(n);return e!==n&&(yg.set(n,e),uy.set(e,n)),e}const vg=n=>uy.get(n);function SA(n,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const u=indexedDB.open(n,e),d=xs(u);return i&&u.addEventListener("upgradeneeded",m=>{i(xs(u.result),m.oldVersion,m.newVersion,xs(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const ED=["get","getKey","getAll","getAllKeys","count"],TD=["put","add","delete","clear"],Eg=new Map;function cw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=TD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||ED.includes(t)))return;const o=async function(u,...d){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Eg.set(e,o),o}_D(n=>({...n,get:(e,t,i)=>cw(e,t)||n.get(e,t,i),has:(e,t)=>!!cw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f_="@firebase/app",hw="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Nc("@firebase/app"),SD="@firebase/app-compat",AD="@firebase/analytics-compat",CD="@firebase/analytics",RD="@firebase/app-check-compat",ID="@firebase/app-check",xD="@firebase/auth",ND="@firebase/auth-compat",DD="@firebase/database",kD="@firebase/data-connect",OD="@firebase/database-compat",MD="@firebase/functions",PD="@firebase/functions-compat",LD="@firebase/installations",VD="@firebase/installations-compat",UD="@firebase/messaging",jD="@firebase/messaging-compat",BD="@firebase/performance",zD="@firebase/performance-compat",FD="@firebase/remote-config",qD="@firebase/remote-config-compat",HD="@firebase/storage",GD="@firebase/storage-compat",KD="@firebase/firestore",QD="@firebase/vertexai",$D="@firebase/firestore-compat",YD="firebase",WD="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="[DEFAULT]",XD={[f_]:"fire-core",[SD]:"fire-core-compat",[CD]:"fire-analytics",[AD]:"fire-analytics-compat",[ID]:"fire-app-check",[RD]:"fire-app-check-compat",[xD]:"fire-auth",[ND]:"fire-auth-compat",[DD]:"fire-rtdb",[kD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[MD]:"fire-fn",[PD]:"fire-fn-compat",[LD]:"fire-iid",[VD]:"fire-iid-compat",[UD]:"fire-fcm",[jD]:"fire-fcm-compat",[BD]:"fire-perf",[zD]:"fire-perf-compat",[FD]:"fire-rc",[qD]:"fire-rc-compat",[HD]:"fire-gcs",[GD]:"fire-gcs-compat",[KD]:"fire-fst",[$D]:"fire-fst-compat",[QD]:"fire-vertex","fire-js":"fire-js",[YD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map,JD=new Map,p_=new Map;function dw(n,e){try{n.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _i(n){const e=n.name;if(p_.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;p_.set(e,n);for(const t of Fd.values())dw(t,n);for(const t of JD.values())dw(t,n);return!0}function Qs(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new Ha("app","Firebase",ZD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=WD;function AA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:m_,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw Ns.create("bad-app-name",{appName:String(a)});if(t||(t=mA()),!t)throw Ns.create("no-options");const o=Fd.get(a);if(o){if(rl(t,o.options)&&rl(i,o.config))return o;throw Ns.create("duplicate-app",{appName:a})}const u=new oD(a);for(const m of p_.values())u.addComponent(m);const d=new ek(t,i,u);return Fd.set(a,d),d}function If(n=m_){const e=Fd.get(n);if(!e&&n===m_&&mA())return AA();if(!e)throw Ns.create("no-app",{appName:n});return e}function xn(n,e,t){var i;let a=(i=XD[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(d.join(" "));return}_i(new si(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="firebase-heartbeat-database",nk=1,dc="firebase-heartbeat-store";let Tg=null;function CA(){return Tg||(Tg=SA(tk,nk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ns.create("idb-open",{originalErrorMessage:n.message})})),Tg}async function ik(n){try{const t=(await CA()).transaction(dc),i=await t.objectStore(dc).get(RA(n));return await t.done,i}catch(e){if(e instanceof vi)Dr.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(t.message)}}}async function fw(n,e){try{const i=(await CA()).transaction(dc,"readwrite");await i.objectStore(dc).put(e,RA(n)),await i.done}catch(t){if(t instanceof vi)Dr.warn(t.message);else{const i=Ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dr.warn(i.message)}}}function RA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=1024,sk=30;class ak{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=mw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>sk){const u=uk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Dr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=mw(),{heartbeatsToSend:i,unsentEntries:a}=ok(this._heartbeatsCache.heartbeats),o=jd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Dr.warn(t),""}}}function mw(){return new Date().toISOString().substring(0,10)}function ok(n,e=rk){const t=[];let i=n.slice();for(const a of n){const o=t.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),pw(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),pw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class lk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vA()?EA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ik(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return fw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return fw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function pw(n){return jd(JSON.stringify({version:2,heartbeats:n})).length}function uk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n){_i(new si("platform-logger",e=>new wD(e),"PRIVATE")),_i(new si("heartbeat",e=>new ak(e),"PRIVATE")),xn(f_,hw,n),xn(f_,hw,"esm2017"),xn("fire-js","")}ck("");var gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ds,IA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function S(){}S.prototype=R.prototype,k.D=R.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(N,O,P){for(var x=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)x[fe-2]=arguments[fe];return R.prototype[O].apply(N,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,R,S){S||(S=0);var N=Array(16);if(typeof R=="string")for(var O=0;16>O;++O)N[O]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(O=0;16>O;++O)N[O]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=k.g[0],S=k.g[1],O=k.g[2];var P=k.g[3],x=R+(P^S&(O^P))+N[0]+3614090360&4294967295;R=S+(x<<7&4294967295|x>>>25),x=P+(O^R&(S^O))+N[1]+3905402710&4294967295,P=R+(x<<12&4294967295|x>>>20),x=O+(S^P&(R^S))+N[2]+606105819&4294967295,O=P+(x<<17&4294967295|x>>>15),x=S+(R^O&(P^R))+N[3]+3250441966&4294967295,S=O+(x<<22&4294967295|x>>>10),x=R+(P^S&(O^P))+N[4]+4118548399&4294967295,R=S+(x<<7&4294967295|x>>>25),x=P+(O^R&(S^O))+N[5]+1200080426&4294967295,P=R+(x<<12&4294967295|x>>>20),x=O+(S^P&(R^S))+N[6]+2821735955&4294967295,O=P+(x<<17&4294967295|x>>>15),x=S+(R^O&(P^R))+N[7]+4249261313&4294967295,S=O+(x<<22&4294967295|x>>>10),x=R+(P^S&(O^P))+N[8]+1770035416&4294967295,R=S+(x<<7&4294967295|x>>>25),x=P+(O^R&(S^O))+N[9]+2336552879&4294967295,P=R+(x<<12&4294967295|x>>>20),x=O+(S^P&(R^S))+N[10]+4294925233&4294967295,O=P+(x<<17&4294967295|x>>>15),x=S+(R^O&(P^R))+N[11]+2304563134&4294967295,S=O+(x<<22&4294967295|x>>>10),x=R+(P^S&(O^P))+N[12]+1804603682&4294967295,R=S+(x<<7&4294967295|x>>>25),x=P+(O^R&(S^O))+N[13]+4254626195&4294967295,P=R+(x<<12&4294967295|x>>>20),x=O+(S^P&(R^S))+N[14]+2792965006&4294967295,O=P+(x<<17&4294967295|x>>>15),x=S+(R^O&(P^R))+N[15]+1236535329&4294967295,S=O+(x<<22&4294967295|x>>>10),x=R+(O^P&(S^O))+N[1]+4129170786&4294967295,R=S+(x<<5&4294967295|x>>>27),x=P+(S^O&(R^S))+N[6]+3225465664&4294967295,P=R+(x<<9&4294967295|x>>>23),x=O+(R^S&(P^R))+N[11]+643717713&4294967295,O=P+(x<<14&4294967295|x>>>18),x=S+(P^R&(O^P))+N[0]+3921069994&4294967295,S=O+(x<<20&4294967295|x>>>12),x=R+(O^P&(S^O))+N[5]+3593408605&4294967295,R=S+(x<<5&4294967295|x>>>27),x=P+(S^O&(R^S))+N[10]+38016083&4294967295,P=R+(x<<9&4294967295|x>>>23),x=O+(R^S&(P^R))+N[15]+3634488961&4294967295,O=P+(x<<14&4294967295|x>>>18),x=S+(P^R&(O^P))+N[4]+3889429448&4294967295,S=O+(x<<20&4294967295|x>>>12),x=R+(O^P&(S^O))+N[9]+568446438&4294967295,R=S+(x<<5&4294967295|x>>>27),x=P+(S^O&(R^S))+N[14]+3275163606&4294967295,P=R+(x<<9&4294967295|x>>>23),x=O+(R^S&(P^R))+N[3]+4107603335&4294967295,O=P+(x<<14&4294967295|x>>>18),x=S+(P^R&(O^P))+N[8]+1163531501&4294967295,S=O+(x<<20&4294967295|x>>>12),x=R+(O^P&(S^O))+N[13]+2850285829&4294967295,R=S+(x<<5&4294967295|x>>>27),x=P+(S^O&(R^S))+N[2]+4243563512&4294967295,P=R+(x<<9&4294967295|x>>>23),x=O+(R^S&(P^R))+N[7]+1735328473&4294967295,O=P+(x<<14&4294967295|x>>>18),x=S+(P^R&(O^P))+N[12]+2368359562&4294967295,S=O+(x<<20&4294967295|x>>>12),x=R+(S^O^P)+N[5]+4294588738&4294967295,R=S+(x<<4&4294967295|x>>>28),x=P+(R^S^O)+N[8]+2272392833&4294967295,P=R+(x<<11&4294967295|x>>>21),x=O+(P^R^S)+N[11]+1839030562&4294967295,O=P+(x<<16&4294967295|x>>>16),x=S+(O^P^R)+N[14]+4259657740&4294967295,S=O+(x<<23&4294967295|x>>>9),x=R+(S^O^P)+N[1]+2763975236&4294967295,R=S+(x<<4&4294967295|x>>>28),x=P+(R^S^O)+N[4]+1272893353&4294967295,P=R+(x<<11&4294967295|x>>>21),x=O+(P^R^S)+N[7]+4139469664&4294967295,O=P+(x<<16&4294967295|x>>>16),x=S+(O^P^R)+N[10]+3200236656&4294967295,S=O+(x<<23&4294967295|x>>>9),x=R+(S^O^P)+N[13]+681279174&4294967295,R=S+(x<<4&4294967295|x>>>28),x=P+(R^S^O)+N[0]+3936430074&4294967295,P=R+(x<<11&4294967295|x>>>21),x=O+(P^R^S)+N[3]+3572445317&4294967295,O=P+(x<<16&4294967295|x>>>16),x=S+(O^P^R)+N[6]+76029189&4294967295,S=O+(x<<23&4294967295|x>>>9),x=R+(S^O^P)+N[9]+3654602809&4294967295,R=S+(x<<4&4294967295|x>>>28),x=P+(R^S^O)+N[12]+3873151461&4294967295,P=R+(x<<11&4294967295|x>>>21),x=O+(P^R^S)+N[15]+530742520&4294967295,O=P+(x<<16&4294967295|x>>>16),x=S+(O^P^R)+N[2]+3299628645&4294967295,S=O+(x<<23&4294967295|x>>>9),x=R+(O^(S|~P))+N[0]+4096336452&4294967295,R=S+(x<<6&4294967295|x>>>26),x=P+(S^(R|~O))+N[7]+1126891415&4294967295,P=R+(x<<10&4294967295|x>>>22),x=O+(R^(P|~S))+N[14]+2878612391&4294967295,O=P+(x<<15&4294967295|x>>>17),x=S+(P^(O|~R))+N[5]+4237533241&4294967295,S=O+(x<<21&4294967295|x>>>11),x=R+(O^(S|~P))+N[12]+1700485571&4294967295,R=S+(x<<6&4294967295|x>>>26),x=P+(S^(R|~O))+N[3]+2399980690&4294967295,P=R+(x<<10&4294967295|x>>>22),x=O+(R^(P|~S))+N[10]+4293915773&4294967295,O=P+(x<<15&4294967295|x>>>17),x=S+(P^(O|~R))+N[1]+2240044497&4294967295,S=O+(x<<21&4294967295|x>>>11),x=R+(O^(S|~P))+N[8]+1873313359&4294967295,R=S+(x<<6&4294967295|x>>>26),x=P+(S^(R|~O))+N[15]+4264355552&4294967295,P=R+(x<<10&4294967295|x>>>22),x=O+(R^(P|~S))+N[6]+2734768916&4294967295,O=P+(x<<15&4294967295|x>>>17),x=S+(P^(O|~R))+N[13]+1309151649&4294967295,S=O+(x<<21&4294967295|x>>>11),x=R+(O^(S|~P))+N[4]+4149444226&4294967295,R=S+(x<<6&4294967295|x>>>26),x=P+(S^(R|~O))+N[11]+3174756917&4294967295,P=R+(x<<10&4294967295|x>>>22),x=O+(R^(P|~S))+N[2]+718787259&4294967295,O=P+(x<<15&4294967295|x>>>17),x=S+(P^(O|~R))+N[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+P&4294967295}i.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var S=R-this.blockSize,N=this.B,O=this.h,P=0;P<R;){if(O==0)for(;P<=S;)a(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<R;)if(N[O++]=k.charCodeAt(P++),O==this.blockSize){a(this,N),O=0;break}}else for(;P<R;)if(N[O++]=k[P++],O==this.blockSize){a(this,N),O=0;break}}this.h=O,this.o+=R},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var S=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=S&255,S/=256;for(this.u(k),k=Array(16),R=S=0;4>R;++R)for(var N=0;32>N;N+=8)k[S++]=this.g[R]>>>N&255;return k};function o(k,R){var S=d;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=R(k)}function u(k,R){this.h=R;for(var S=[],N=!0,O=k.length-1;0<=O;O--){var P=k[O]|0;N&&P==R||(S[O]=P,N=!1)}this.g=S}var d={};function m(k){return-128<=k&&128>k?o(k,function(R){return new u([R|0],0>R?-1:0)}):new u([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return v;if(0>k)return V(p(-k));for(var R=[],S=1,N=0;k>=S;N++)R[N]=k/S|0,S*=4294967296;return new u(R,0)}function y(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return V(y(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=p(Math.pow(R,8)),N=v,O=0;O<k.length;O+=8){var P=Math.min(8,k.length-O),x=parseInt(k.substring(O,O+P),R);8>P?(P=p(Math.pow(R,P)),N=N.j(P).add(p(x))):(N=N.j(S),N=N.add(p(x)))}return N}var v=m(0),w=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(j(this))return-V(this).m();for(var k=0,R=1,S=0;S<this.g.length;S++){var N=this.i(S);k+=(0<=N?N:4294967296+N)*R,R*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(D(this))return"0";if(j(this))return"-"+V(this).toString(k);for(var R=p(Math.pow(k,6)),S=this,N="";;){var O=Y(S,R).g;S=F(S,O.j(R));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=O,D(S))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function D(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function j(k){return k.h==-1}n.l=function(k){return k=F(this,k),j(k)?-1:D(k)?0:1};function V(k){for(var R=k.g.length,S=[],N=0;N<R;N++)S[N]=~k.g[N];return new u(S,~k.h).add(w)}n.abs=function(){return j(this)?V(this):this},n.add=function(k){for(var R=Math.max(this.g.length,k.g.length),S=[],N=0,O=0;O<=R;O++){var P=N+(this.i(O)&65535)+(k.i(O)&65535),x=(P>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);N=x>>>16,P&=65535,x&=65535,S[O]=x<<16|P}return new u(S,S[S.length-1]&-2147483648?-1:0)};function F(k,R){return k.add(V(R))}n.j=function(k){if(D(this)||D(k))return v;if(j(this))return j(k)?V(this).j(V(k)):V(V(this).j(k));if(j(k))return V(this.j(V(k)));if(0>this.l(A)&&0>k.l(A))return p(this.m()*k.m());for(var R=this.g.length+k.g.length,S=[],N=0;N<2*R;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<k.g.length;O++){var P=this.i(N)>>>16,x=this.i(N)&65535,fe=k.i(O)>>>16,Oe=k.i(O)&65535;S[2*N+2*O]+=x*Oe,G(S,2*N+2*O),S[2*N+2*O+1]+=P*Oe,G(S,2*N+2*O+1),S[2*N+2*O+1]+=x*fe,G(S,2*N+2*O+1),S[2*N+2*O+2]+=P*fe,G(S,2*N+2*O+2)}for(N=0;N<R;N++)S[N]=S[2*N+1]<<16|S[2*N];for(N=R;N<2*R;N++)S[N]=0;return new u(S,0)};function G(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function L(k,R){this.g=k,this.h=R}function Y(k,R){if(D(R))throw Error("division by zero");if(D(k))return new L(v,v);if(j(k))return R=Y(V(k),R),new L(V(R.g),V(R.h));if(j(R))return R=Y(k,V(R)),new L(V(R.g),R.h);if(30<k.g.length){if(j(k)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var S=w,N=R;0>=N.l(k);)S=ee(S),N=ee(N);var O=X(S,1),P=X(N,1);for(N=X(N,2),S=X(S,2);!D(N);){var x=P.add(N);0>=x.l(k)&&(O=O.add(S),P=x),N=X(N,1),S=X(S,1)}return R=F(k,O.j(R)),new L(O,R)}for(O=v;0<=k.l(R);){for(S=Math.max(1,Math.floor(k.m()/R.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=p(S),x=P.j(R);j(x)||0<x.l(k);)S-=N,P=p(S),x=P.j(R);D(P)&&(P=w),O=O.add(P),k=F(k,x)}return new L(O,k)}n.A=function(k){return Y(this,k).h},n.and=function(k){for(var R=Math.max(this.g.length,k.g.length),S=[],N=0;N<R;N++)S[N]=this.i(N)&k.i(N);return new u(S,this.h&k.h)},n.or=function(k){for(var R=Math.max(this.g.length,k.g.length),S=[],N=0;N<R;N++)S[N]=this.i(N)|k.i(N);return new u(S,this.h|k.h)},n.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),S=[],N=0;N<R;N++)S[N]=this.i(N)^k.i(N);return new u(S,this.h^k.h)};function ee(k){for(var R=k.g.length+1,S=[],N=0;N<R;N++)S[N]=k.i(N)<<1|k.i(N-1)>>>31;return new u(S,k.h)}function X(k,R){var S=R>>5;R%=32;for(var N=k.g.length-S,O=[],P=0;P<N;P++)O[P]=0<R?k.i(P+S)>>>R|k.i(P+S+1)<<32-R:k.i(P+S);return new u(O,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,IA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Ds=u}).apply(typeof gw<"u"?gw:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xA,$u,NA,Rd,g_,DA,kA,OA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var E=i;h=h.split(".");for(var I=0;I<h.length-1;I++){var H=h[I];if(!(H in E))break e;E=E[H]}h=h[h.length-1],I=E[h],_=_(I),_!=I&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function o(h,_){h instanceof String&&(h+="");var E=0,I=!1,H={next:function(){if(!I&&E<h.length){var W=E++;return{value:_(W,h[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}a("Array.prototype.values",function(h){return h||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,I),h.apply(_,H)}}return function(){return h.apply(_,arguments)}}function w(h,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function A(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function D(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(I,H,W){for(var oe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)oe[qe-2]=arguments[qe];return _.prototype[H].apply(I,oe)}}function j(h){const _=h.length;if(0<_){const E=Array(_);for(let I=0;I<_;I++)E[I]=h[I];return E}return[]}function V(h,_){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(m(I)){const H=h.length||0,W=I.length||0;h.length=H+W;for(let oe=0;oe<W;oe++)h[H+oe]=I[oe]}else h.push(I)}}class F{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function G(h){return/^[\s\xa0]*$/.test(h)}function L(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Y(h){return Y[" "](h),h}Y[" "]=function(){};var ee=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function X(h,_,E){for(const I in h)_.call(E,h[I],I,h)}function k(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function R(h){const _={};for(const E in h)_[E]=h[E];return _}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,_){let E,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(E in I)h[E]=I[E];for(let W=0;W<S.length;W++)E=S[W],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function O(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function P(h){d.setTimeout(()=>{throw h},0)}function x(){var h=$e;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class fe{constructor(){this.h=this.g=null}add(_,E){const I=Oe.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var Oe=new F(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,_e=!1,$e=new fe,U=()=>{const h=d.Promise.resolve(void 0);Ee=()=>{h.then(se)}};var se=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(E){P(E)}var _=Oe;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}_e=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function Ce(h,_){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ee){e:{try{Y(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ce.aa.h.call(this)}}D(Ce,ue);var Re={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function nt(h,_,E,I,H){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=H,this.key=++Ne,this.da=this.fa=!1}function Qe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function mn(h){this.src=h,this.g={},this.h=0}mn.prototype.add=function(h,_,E,I,H){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var oe=Bn(h,_,I,H);return-1<oe?(_=h[oe],E||(_.fa=!1)):(_=new nt(_,this.src,W,!!I,H),_.fa=E,h.push(_)),_};function Yi(h,_){var E=_.type;if(E in h.g){var I=h.g[E],H=Array.prototype.indexOf.call(I,_,void 0),W;(W=0<=H)&&Array.prototype.splice.call(I,H,1),W&&(Qe(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Bn(h,_,E,I){for(var H=0;H<h.length;++H){var W=h[H];if(!W.da&&W.listener==_&&W.capture==!!E&&W.ha==I)return H}return-1}var Vr="closure_lm_"+(1e6*Math.random()|0),Ur={};function Wi(h,_,E,I,H){if(Array.isArray(_)){for(var W=0;W<_.length;W++)Wi(h,_[W],E,I,H);return null}return E=Qc(E),h&&h[Ze]?h.K(_,E,p(I)?!!I.capture:!1,H):Ml(h,_,E,!1,I,H)}function Ml(h,_,E,I,H,W){if(!_)throw Error("Invalid event type");var oe=p(H)?!!H.capture:!!H,qe=Pl(h);if(qe||(h[Vr]=qe=new mn(h)),E=qe.add(_,E,I,oe,W),E.proxy)return E;if(I=Za(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)ce||(H=oe),H===void 0&&(H=!1),h.addEventListener(_.toString(),I,H);else if(h.attachEvent)h.attachEvent(to(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Za(){function h(E){return _.call(h.src,h.listener,E)}const _=hm;return h}function eo(h,_,E,I,H){if(Array.isArray(_))for(var W=0;W<_.length;W++)eo(h,_[W],E,I,H);else I=p(I)?!!I.capture:!!I,E=Qc(E),h&&h[Ze]?(h=h.i,_=String(_).toString(),_ in h.g&&(W=h.g[_],E=Bn(W,E,I,H),-1<E&&(Qe(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete h.g[_],h.h--)))):h&&(h=Pl(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Bn(_,E,I,H)),(E=-1<h?_[h]:null)&&Ws(E))}function Ws(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ze])Yi(_.i,h);else{var E=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(E,I,h.capture):_.detachEvent?_.detachEvent(to(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=Pl(_))?(Yi(E,h),E.h==0&&(E.src=null,_[Vr]=null)):Qe(h)}}}function to(h){return h in Ur?Ur[h]:Ur[h]="on"+h}function hm(h,_){if(h.da)h=!0;else{_=new Ce(_,this);var E=h.listener,I=h.ha||h.src;h.fa&&Ws(h),h=E.call(I,_)}return h}function Pl(h){return h=h[Vr],h instanceof mn?h:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qc(h){return typeof h=="function"?h:(h[bn]||(h[bn]=function(_){return h.handleEvent(_)}),h[bn])}function kt(){pe.call(this),this.i=new mn(this),this.M=this,this.F=null}D(kt,pe),kt.prototype[Ze]=!0,kt.prototype.removeEventListener=function(h,_,E,I){eo(this,h,_,E,I)};function Ft(h,_){var E,I=h.F;if(I)for(E=[];I;I=I.F)E.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new ue(_,h);else if(_ instanceof ue)_.target=_.target||h;else{var H=_;_=new ue(I,h),N(_,H)}if(H=!0,E)for(var W=E.length-1;0<=W;W--){var oe=_.g=E[W];H=Xi(oe,I,!0,_)&&H}if(oe=_.g=h,H=Xi(oe,I,!0,_)&&H,H=Xi(oe,I,!1,_)&&H,E)for(W=0;W<E.length;W++)oe=_.g=E[W],H=Xi(oe,I,!1,_)&&H}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],I=0;I<E.length;I++)Qe(E[I]);delete h.g[_],h.h--}}this.F=null},kt.prototype.K=function(h,_,E,I){return this.i.add(String(h),_,!1,E,I)},kt.prototype.L=function(h,_,E,I){return this.i.add(String(h),_,!0,E,I)};function Xi(h,_,E,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,W=0;W<_.length;++W){var oe=_[W];if(oe&&!oe.da&&oe.capture==E){var qe=oe.listener,Mt=oe.ha||oe.src;oe.fa&&Yi(h.i,oe),H=qe.call(Mt,I)!==!1&&H}}return H&&!I.defaultPrevented}function $c(h,_,E){if(typeof h=="function")E&&(h=w(h,E));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Ll(h){h.g=$c(()=>{h.g=null,h.i&&(h.i=!1,Ll(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class dm extends pe{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ll(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(h){pe.call(this),this.h=h,this.g={}}D(Xs,pe);var jr=[];function on(h){X(h.g,function(_,E){this.g.hasOwnProperty(E)&&Ws(_)},h),h.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),on(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vl=d.JSON.stringify,Ei=d.JSON.parse,pn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ul(){}Ul.prototype.h=null;function Yc(h){return h.h||(h.h=h.i())}function Wc(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Br(){ue.call(this,"d")}D(Br,ue);function oi(){ue.call(this,"c")}D(oi,ue);var zn={},zr=null;function no(){return zr=zr||new kt}zn.La="serverreachability";function jl(h){ue.call(this,zn.La,h)}D(jl,ue);function Fr(h){const _=no();Ft(_,new jl(_))}zn.STAT_EVENT="statevent";function io(h,_){ue.call(this,zn.STAT_EVENT,h),this.stat=_}D(io,ue);function bt(h){const _=no();Ft(_,new io(_,h))}zn.Ma="timingevent";function Xc(h,_){ue.call(this,zn.Ma,h),this.size=_}D(Xc,ue);function qr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Hr(){this.g=!0}Hr.prototype.xa=function(){this.g=!1};function Jc(h,_,E,I,H,W){h.info(function(){if(h.g)if(W)for(var oe="",qe=W.split("&"),Mt=0;Mt<qe.length;Mt++){var He=qe[Mt].split("=");if(1<He.length){var Gt=He[0];He=He[1];var Pt=Gt.split("_");oe=2<=Pt.length&&Pt[1]=="type"?oe+(Gt+"="+He+"&"):oe+(Gt+"=redacted&")}}else oe=null;else oe=W;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+_+`
`+E+`
`+oe})}function Zc(h,_,E,I,H,W,oe){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+_+`
`+E+`
`+W+" "+oe})}function Gr(h,_,E,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+qt(h,E)+(I?" "+I:"")})}function wi(h,_){h.info(function(){return"TIMEOUT: "+_})}Hr.prototype.info=function(){};function qt(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var I=E[h];if(!(2>I.length)){var H=I[1];if(Array.isArray(H)&&!(1>H.length)){var W=H[0];if(W!="noop"&&W!="stop"&&W!="close")for(var oe=1;oe<H.length;oe++)H[oe]=""}}}}return Vl(E)}catch{return _}}var Ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Js;function ro(){}D(ro,Ul),ro.prototype.g=function(){return new XMLHttpRequest},ro.prototype.i=function(){return{}},Js=new ro;function bi(h,_,E,I){this.j=h,this.i=_,this.l=E,this.R=I||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bl}function Bl(){this.i=null,this.g="",this.h=!1}var Kr={},Zs={};function li(h,_,E){h.L=1,h.v=na(_t(_)),h.m=E,h.P=!0,Zi(h,null)}function Zi(h,_){h.F=Date.now(),ft(h),h.A=_t(h.v);var E=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),nr(E.i,"t",I),h.C=0,E=h.j.J,h.h=new Bl,h.g=fh(h.j,E?_:null,!h.m),0<h.O&&(h.M=new dm(w(h.Y,h,h.g),h.O)),_=h.U,E=h.g,I=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(jr[0]=H.toString()),H=jr);for(var W=0;W<H.length;W++){var oe=Wi(E,H[W],I||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Fr(),Jc(h.i,h.u,h.A,h.l,h.R,h.m)}bi.prototype.ca=function(h){h=h.target;const _=this.M;_&&Kn(h)==3?_.j():this.Y(h)},bi.prototype.Y=function(h){try{if(h==this.g)e:{const Pt=Kn(this.g);var _=this.g.Ba();const ar=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||sh(this.g)))){this.J||Pt!=4||_==7||(_==8||0>=ar?Fr(3):Fr(2)),so(this);var E=this.g.Z();this.X=E;t:if(Qr(this)){var I=sh(this.g);h="";var H=I.length,W=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),Dn(this);var oe="";break t}this.h.i=new d.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(W&&_==H-1)});I.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=E==200,Zc(this.i,this.u,this.A,this.l,this.R,Pt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Mt=this.g;if((qe=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(qe)){var He=qe;break t}}He=null}if(E=He)Gr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kn(this,E);else{this.o=!1,this.s=3,bt(12),Sn(this),Dn(this);break e}}if(this.P){E=!0;let Jt;for(;!this.J&&this.C<oe.length;)if(Jt=$r(this,oe),Jt==Zs){Pt==4&&(this.s=4,bt(14),E=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Kr){this.s=4,bt(15),Gr(this.i,this.l,oe,"[Invalid Chunk]"),E=!1;break}else Gr(this.i,this.l,Jt,null),kn(this,Jt);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||oe.length!=0||this.h.h||(this.s=1,bt(16),E=!1),this.o=this.o&&E,!E)Gr(this.i,this.l,oe,"[Invalid Chunked Response]"),Sn(this),Dn(this);else if(0<oe.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ua(Gt),Gt.M=!0,bt(11))}}else Gr(this.i,this.l,oe,null),kn(this,oe);Pt==4&&Sn(this),this.o&&!this.J&&(Pt==4?ch(this.j,this):(this.o=!1,ft(this)))}else ym(this.g),E==400&&0<oe.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Sn(this),Dn(this)}}}catch{}finally{}};function Qr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function $r(h,_){var E=h.C,I=_.indexOf(`
`,E);return I==-1?Zs:(E=Number(_.substring(E,I)),isNaN(E)?Kr:(I+=1,I+E>_.length?Zs:(_=_.slice(I,I+E),h.C=I+E,_)))}bi.prototype.cancel=function(){this.J=!0,Sn(this)};function ft(h){h.S=Date.now()+h.I,zl(h,h.I)}function zl(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=qr(w(h.ba,h),_)}function so(h){h.B&&(d.clearTimeout(h.B),h.B=null)}bi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(wi(this.i,this.A),this.L!=2&&(Fr(),bt(17)),Sn(this),this.s=2,Dn(this)):zl(this,this.S-h)};function Dn(h){h.j.G==0||h.J||ch(h.j,h)}function Sn(h){so(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,on(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function kn(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Yr(E.h,h))){if(!h.K&&Yr(E.h,h)&&E.G==3){try{var I=E.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)go(E),mo(E);else break e;Jl(E),bt(18)}}else E.za=H[1],0<E.za-E.T&&37500>H[2]&&E.F&&E.v==0&&!E.C&&(E.C=qr(w(E.Za,E),6e3));if(1>=eh(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else sr(E,11)}else if((h.K||E.g==h)&&go(E),!G(_))for(H=E.Da.g.parse(_),_=0;_<H.length;_++){let He=H[_];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const Gt=He[3];Gt!=null&&(E.la=Gt,E.j.info("VER="+E.la));const Pt=He[4];Pt!=null&&(E.Aa=Pt,E.j.info("SVER="+E.Aa));const ar=He[5];ar!=null&&typeof ar=="number"&&0<ar&&(I=1.5*ar,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const Jt=h.g;if(Jt){const Ni=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var W=I.h;W.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Wr(W,W.h),W.h=null))}if(I.D){const eu=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;eu&&(I.ya=eu,Ye(I.I,I.D,eu))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var oe=h;if(I.qa=dh(I,I.J?I.ia:null,I.W),oe.K){Fn(I.h,oe);var qe=oe,Mt=I.L;Mt&&(qe.I=Mt),qe.B&&(so(qe),ft(qe)),I.g=oe}else lh(I);0<E.i.length&&po(E)}else He[0]!="stop"&&He[0]!="close"||sr(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?sr(E,7):Wl(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}Fr(4)}catch{}}var fm=class{constructor(h,_){this.g=h,this.map=_}};function Fl(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ql(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function eh(h){return h.h?1:h.g?h.g.size:0}function Yr(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Wr(h,_){h.g?h.g.add(_):h.h=_}function Fn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Fl.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return j(h.i)}function th(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],E=h.length,I=0;I<E;I++)_.push(h[I]);return _}_=[],E=0;for(I in h)_[E++]=h[I];return _}function mm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const I in h)_[E++]=I;return _}}}function ea(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=mm(h),I=th(h),H=I.length,W=0;W<H;W++)_.call(void 0,I[W],E&&E[W],h)}var Hl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ao(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var I=h[E].indexOf("="),H=null;if(0<=I){var W=h[E].substring(0,I);H=h[E].substring(I+1)}else W=h[E];_(W,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function er(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof er){this.h=h.h,Xr(this,h.j),this.o=h.o,this.g=h.g,ta(this,h.s),this.l=h.l;var _=h.i,E=new Si;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),oo(this,E),this.m=h.m}else h&&(_=String(h).match(Hl))?(this.h=!1,Xr(this,_[1]||"",!0),this.o=Jr(_[2]||""),this.g=Jr(_[3]||"",!0),ta(this,_[4]),this.l=Jr(_[5]||"",!0),oo(this,_[6]||"",!0),this.m=Jr(_[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}er.prototype.toString=function(){var h=[],_=this.j;_&&h.push(qn(_,Gl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(qn(_,Gl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(qn(E,E.charAt(0)=="/"?Kl:nh,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",qn(E,_m)),h.join("")};function _t(h){return new er(h)}function Xr(h,_,E){h.j=E?Jr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ta(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function oo(h,_,E){_ instanceof Si?(h.i=_,Ql(h.i,h.h)):(E||(_=qn(_,gm)),h.i=new Si(_,h.h))}function Ye(h,_,E){h.i.set(_,E)}function na(h){return Ye(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Jr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qn(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,pm),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function pm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Gl=/[#\/\?@]/g,nh=/[#\?:]/g,Kl=/[#\?]/g,gm=/[#\?@]/g,_m=/#/g;function Si(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&ao(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Si.prototype,n.add=function(h,_){Hn(this),this.i=null,h=ir(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function lo(h,_){Hn(h),_=ir(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function tr(h,_){return Hn(h),_=ir(h,_),h.g.has(_)}n.forEach=function(h,_){Hn(this),this.g.forEach(function(E,I){E.forEach(function(H){h.call(_,H,I,this)},this)},this)},n.na=function(){Hn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let I=0;I<_.length;I++){const H=h[I];for(let W=0;W<H.length;W++)E.push(_[I])}return E},n.V=function(h){Hn(this);let _=[];if(typeof h=="string")tr(this,h)&&(_=_.concat(this.g.get(ir(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Hn(this),this.i=null,h=ir(this,h),tr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function nr(h,_,E){lo(h,_),0<E.length&&(h.i=null,h.g.set(ir(h,_),j(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var I=_[E];const W=encodeURIComponent(String(I)),oe=this.V(I);for(I=0;I<oe.length;I++){var H=W;oe[I]!==""&&(H+="="+encodeURIComponent(String(oe[I]))),h.push(H)}}return this.i=h.join("&")};function ir(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ql(h,_){_&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(E,I){var H=I.toLowerCase();I!=H&&(lo(this,I),nr(this,H,E))},h)),h.j=_}function ih(h,_){const E=new Hr;if(d.Image){const I=new Image;I.onload=A(Gn,E,"TestLoadImage: loaded",!0,_,I),I.onerror=A(Gn,E,"TestLoadImage: error",!1,_,I),I.onabort=A(Gn,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=A(Gn,E,"TestLoadImage: timeout",!1,_,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function ia(h,_){const E=new Hr,I=new AbortController,H=setTimeout(()=>{I.abort(),Gn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(W=>{clearTimeout(H),W.ok?Gn(E,"TestPingServer: ok",!0,_):Gn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Gn(E,"TestPingServer: error",!1,_)})}function Gn(h,_,E,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(E)}catch{}}function ra(){this.g=new pn}function Ai(h,_,E){const I=E||"";try{ea(h,function(H,W){let oe=H;p(H)&&(oe=Vl(H)),_.push(I+W+"="+encodeURIComponent(oe))})}catch(H){throw _.push(I+"type="+encodeURIComponent("_badmap")),H}}function Zr(h){this.l=h.Ub||null,this.j=h.eb||!1}D(Zr,Ul),Zr.prototype.g=function(){return new rr(this.l,this.j)},Zr.prototype.i=function(h){return function(){return h}}({});function rr(h,_){kt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(rr,kt),n=rr.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ri(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Ci(this):Ri(this),this.readyState==3&&$l(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ci(this))},n.Qa=function(h){this.g&&(this.response=h,Ci(this))},n.ga=function(){this.g&&Ci(this)};function Ci(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ri(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Ri(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Yl(h){let _="";return X(h,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function Ht(h,_,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=Yl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):Ye(h,_,E))}function et(h){kt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(et,kt);var uo=/^https?$/i,sa=["POST","PUT"];n=et.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Js.g(),this.v=this.o?Yc(this.o):Yc(Js),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(W){rh(this,W);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)E.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())E.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(sa,_,void 0))||I||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,oe]of E)this.g.setRequestHeader(W,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aa(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){rh(this,W)}};function rh(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,co(h),Ii(h)}function co(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ho(this):this.bb())},n.bb=function(){ho(this)};function ho(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Kn(h)!=4||h.Z()!=2)){if(h.u&&Kn(h)==4)$c(h.Ea,0,h);else if(Ft(h,"readystatechange"),Kn(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var I;if(I=oe===0){var H=String(h.D).match(Hl)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),I=!uo.test(H?H.toLowerCase():"")}E=I}if(E)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var W=2<Kn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",co(h)}}finally{Ii(h)}}}}function Ii(h,_){if(h.g){aa(h);const E=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{E.onreadystatechange=I}catch{}}}function aa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Kn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Ei(_)}};function sh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ym(h){const _={};h=(h.g&&2<=Kn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(G(h[I]))continue;var E=O(h[I]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=_[H]||[];_[H]=W,W.push(E)}k(_,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function fo(h){this.Aa=0,this.i=[],this.j=new Hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oa("baseRetryDelayMs",5e3,h),this.cb=oa("retryDelaySeedMs",1e4,h),this.Wa=oa("forwardChannelMaxRetries",2,h),this.wa=oa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Fl(h&&h.concurrentRequestLimit),this.Da=new ra,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fo.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,I){bt(0),this.W=h,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=dh(this,null,this.W),po(this)};function Wl(h){if(ah(h),h.G==3){var _=h.U++,E=_t(h.I);if(Ye(E,"SID",h.K),Ye(E,"RID",_),Ye(E,"TYPE","terminate"),la(h,E),_=new bi(h,h.j,_),_.L=2,_.v=na(_t(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=fh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ft(_)}hh(h)}function mo(h){h.g&&(ua(h),h.g.cancel(),h.g=null)}function ah(h){mo(h),h.u&&(d.clearTimeout(h.u),h.u=null),go(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function po(h){if(!ql(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ee||U(),_e||(Ee(),_e=!0),$e.add(_,h),h.B=0}}function vm(h,_){return eh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=qr(w(h.Ga,h,_),Zl(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new bi(this,this.j,h);let W=this.o;if(this.S&&(W?(W=R(W),N(W,this.S)):W=this.S),this.m!==null||this.O||(H.H=W,W=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=oh(this,H,_),E=_t(this.I),Ye(E,"RID",h),Ye(E,"CVER",22),this.D&&Ye(E,"X-HTTP-Session-Id",this.D),la(this,E),W&&(this.O?_="headers="+encodeURIComponent(String(Yl(W)))+"&"+_:this.m&&Ht(E,this.m,W)),Wr(this.h,H),this.Ua&&Ye(E,"TYPE","init"),this.P?(Ye(E,"$req",_),Ye(E,"SID","null"),H.T=!0,li(H,E,null)):li(H,E,_),this.G=2}}else this.G==3&&(h?Xl(this,h):this.i.length==0||ql(this.h)||Xl(this))};function Xl(h,_){var E;_?E=_.l:E=h.U++;const I=_t(h.I);Ye(I,"SID",h.K),Ye(I,"RID",E),Ye(I,"AID",h.T),la(h,I),h.m&&h.o&&Ht(I,h.m,h.o),E=new bi(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=oh(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wr(h.h,E),li(E,I,_)}function la(h,_){h.H&&X(h.H,function(E,I){Ye(_,I,E)}),h.l&&ea({},function(E,I){Ye(_,I,E)})}function oh(h,_,E){E=Math.min(h.i.length,E);var I=h.l?w(h.l.Na,h.l,h):null;e:{var H=h.i;let W=-1;for(;;){const oe=["count="+E];W==-1?0<E?(W=H[0].g,oe.push("ofs="+W)):W=0:oe.push("ofs="+W);let qe=!0;for(let Mt=0;Mt<E;Mt++){let He=H[Mt].g;const Gt=H[Mt].map;if(He-=W,0>He)W=Math.max(0,H[Mt].g-100),qe=!1;else try{Ai(Gt,oe,"req"+He+"_")}catch{I&&I(Gt)}}if(qe){I=oe.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,I}function lh(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ee||U(),_e||(Ee(),_e=!0),$e.add(_,h),h.v=0}}function Jl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=qr(w(h.Fa,h),Zl(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,uh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=qr(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),mo(this),uh(this))};function ua(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function uh(h){h.g=new bi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=_t(h.qa);Ye(_,"RID","rpc"),Ye(_,"SID",h.K),Ye(_,"AID",h.T),Ye(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ye(_,"TO",h.ja),Ye(_,"TYPE","xmlhttp"),la(h,_),h.m&&h.o&&Ht(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=na(_t(_)),E.m=null,E.P=!0,Zi(E,h)}n.Za=function(){this.C!=null&&(this.C=null,mo(this),Jl(this),bt(19))};function go(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ch(h,_){var E=null;if(h.g==_){go(h),ua(h),h.g=null;var I=2}else if(Yr(h.h,_))E=_.D,Fn(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var H=h.B;I=no(),Ft(I,new Xc(I,E)),po(h)}else lh(h);else if(H=_.s,H==3||H==0&&0<_.X||!(I==1&&vm(h,_)||I==2&&Jl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),H){case 1:sr(h,5);break;case 4:sr(h,10);break;case 3:sr(h,6);break;default:sr(h,2)}}}function Zl(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function sr(h,_){if(h.j.info("Error code "+_),_==2){var E=w(h.fb,h),I=h.Xa;const H=!I;I=new er(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Xr(I,"https"),na(I),H?ih(I.toString(),E):ia(I.toString(),E)}else bt(2);h.G=0,h.l&&h.l.sa(_),hh(h),ah(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function hh(h){if(h.G=0,h.ka=[],h.l){const _=gn(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.ra()}}function dh(h,_,E){var I=E instanceof er?_t(E):new er(E);if(I.g!="")_&&(I.g=_+"."+I.g),ta(I,I.s);else{var H=d.location;I=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var W=new er(null);I&&Xr(W,I),_&&(W.g=_),H&&ta(W,H),E&&(W.l=E),I=W}return E=h.D,_=h.ya,E&&_&&Ye(I,E,_),Ye(I,"VER",h.la),la(h,I),I}function fh(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new et(new Zr({eb:E})):new et(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}n=mh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _o(){}_o.prototype.g=function(h,_){return new _n(h,_)};function _n(h,_){kt.call(this),this.g=new fo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!G(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!G(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new xi(this)}D(_n,kt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Wl(this.g)},_n.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Vl(h),h=E);_.i.push(new fm(_.Ya++,h)),_.G==3&&po(_)},_n.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,_n.aa.N.call(this)};function ph(h){Br.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}D(ph,Br);function gh(){oi.call(this),this.status=1}D(gh,oi);function xi(h){this.g=h}D(xi,mh),xi.prototype.ua=function(){Ft(this.g,"a")},xi.prototype.ta=function(h){Ft(this.g,new ph(h))},xi.prototype.sa=function(h){Ft(this.g,new gh)},xi.prototype.ra=function(){Ft(this.g,"b")},_o.prototype.createWebChannel=_o.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,OA=function(){return new _o},kA=function(){return no()},DA=zn,g_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,Rd=Ot,Ji.COMPLETE="complete",NA=Ji,Wc.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",kt.prototype.listen=kt.prototype.K,$u=Wc,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,xA=et}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const _w="@firebase/firestore",yw="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new Nc("@firebase/firestore");function Ko(){return Pa.logLevel}function he(n,...e){if(Pa.logLevel<=Ue.DEBUG){const t=e.map(cy);Pa.debug(`Firestore (${Al}): ${n}`,...t)}}function kr(n,...e){if(Pa.logLevel<=Ue.ERROR){const t=e.map(cy);Pa.error(`Firestore (${Al}): ${n}`,...t)}}function sl(n,...e){if(Pa.logLevel<=Ue.WARN){const t=e.map(cy);Pa.warn(`Firestore (${Al}): ${n}`,...t)}}function cy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n="Unexpected state"){const e=`FIRESTORE (${Al}) INTERNAL ASSERTION FAILED: `+n;throw kr(e),new Error(e)}function tt(n,e){n||be()}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}}class dk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fk{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let o=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xr,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string"),new MA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new hn(e)}}class mk{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class pk{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new mk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gk{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ii(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0);const i=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const a=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?a(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new vw(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tt(typeof t.token=="string"),this.R=t.token,new vw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=_k(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<t&&(i+=e.charAt(a[o]%62))}return i}}function Fe(n,e){return n<e?-1:n>e?1:0}function al(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=-62135596800,Tw=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Tw);return new Bt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ew)throw new de(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tw}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ew;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Bt(0,0))}static max(){return new Ae(new Bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="__name__";class Vi{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(),i===void 0?i=e.length-t:i>e.length-t&&be(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const o=Vi.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Vi.isNumericId(e),a=Vi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}}class ht extends Vi{construct(e,t,i){return new ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new ht(t)}static emptyPath(){return new ht([])}}const yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Vi{construct(e,t,i){return new rn(e,t,i)}static isValidIdentifier(e){return yk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ww}static keyField(){return new rn([ww])}static fromServerFormat(e){const t=[];let i="",a=0;const o=()=>{if(i.length===0)throw new de(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new de(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(i+=d,a++):(o(),a++)}if(o(),u)throw new de(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ht.fromString(e))}static fromName(e){return new ve(ht.fromString(e).popFirst(5))}static empty(){return new ve(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-1;function vk(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(i===1e9?new Bt(t+1,0):new Bt(t,i));return new Vs(a,ve.empty(),e)}function Ek(n){return new Vs(n.readTime,n.key,fc)}class Vs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vs(Ae.min(),ve.empty(),fc)}static max(){return new Vs(Ae.max(),ve.empty(),fc)}}function Tk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==wk)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,i)=>{t(e)})}static reject(e){return new ne((t,i)=>{i(e)})}static waitFor(e){return new ne((t,i)=>{let a=0,o=0,u=!1;e.forEach(d=>{++a,d.next(()=>{++o,u&&o===a&&t()},m=>i(m))}),u=!0,o===a&&t()})}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next(a=>a?ne.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,o)=>{i.push(t.call(this,a,o))}),this.waitFor(i)}static mapArray(e,t){return new ne((i,a)=>{const o=e.length,u=new Array(o);let d=0;for(let m=0;m<o;m++){const p=m;t(e[p]).next(y=>{u[p]=y,++d,d===o&&i(u)},y=>a(y))}})}static doWhile(e,t){return new ne((i,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):i()};o()})}}function Sk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Rl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-1;function Nf(n){return n==null}function qd(n){return n===0&&1/n==-1/0}function Ak(n){return typeof n=="number"&&Number.isInteger(n)&&!qd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="";function Ck(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bw(e)),e=Rk(n.get(t),e);return bw(e)}function Rk(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case LA:t+="";break;default:t+=o}}return t}function bw(n){return n+LA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class __{constructor(e,t){this.comparator=e,this.root=t||ks.EMPTY}insert(e,t){return new __(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ks.BLACK,null,null))}remove(e){return new __(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ks.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}},gd=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ks=class wr{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??wr.RED,this.left=a??wr.EMPTY,this.right=o??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,o){return new wr(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return wr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}};ks.EMPTY=null,ks.RED=!0,ks.BLACK=!1;ks.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,i,a,o){return this}insert(e,t,i){return new ks(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class Aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Un([])}unionWith(e){let t=new zt(rn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UA("Invalid base64 string: "+o):o}}(e);return new sn(t)}static fromUint8Array(e){const t=function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o}(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const Ik=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(n){if(tt(!!n),typeof n=="string"){let e=0;const t=Ik.exec(n);if(tt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function js(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="server_timestamp",BA="__type__",zA="__previous_value__",FA="__local_write_time__";function dy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BA])===null||t===void 0?void 0:t.stringValue)===jA}function Df(n){const e=n.mapValue.fields[zA];return dy(e)?Df(e):e}function mc(n){const e=Us(n.mapValue.fields[FA].timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,i,a,o,u,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const Hd="(default)";class pc{constructor(e,t){this.projectId=e,this.database=t||Hd}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="__type__",Nk="__max__",_d={mapValue:{}},HA="__vector__",Gd="value";function Bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dy(n)?4:kk(n)?9007199254740991:Dk(n)?10:11:be()}function qi(n,e){if(n===e)return!0;const t=Bs(n);if(t!==Bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=Us(a.timestampValue),d=Us(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return js(a.bytesValue).isEqual(js(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return At(a.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(a.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return At(a.integerValue)===At(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=At(a.doubleValue),d=At(o.doubleValue);return u===d?qd(u)===qd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return al(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(a,o){const u=a.mapValue.fields||{},d=o.mapValue.fields||{};if(Sw(u)!==Sw(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!qi(u[m],d[m])))return!1;return!0}(n,e);default:return be()}}function gc(n,e){return(n.values||[]).find(t=>qi(t,e))!==void 0}function ol(n,e){if(n===e)return 0;const t=Bs(n),i=Bs(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=At(o.integerValue||o.doubleValue),m=At(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Cw(n.timestampValue,e.timestampValue);case 4:return Cw(mc(n),mc(e));case 5:return Fe(n.stringValue,e.stringValue);case 6:return function(o,u){const d=js(o),m=js(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=Fe(d[p],m[p]);if(y!==0)return y}return Fe(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Fe(At(o.latitude),At(u.latitude));return d!==0?d:Fe(At(o.longitude),At(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Rw(n.arrayValue,e.arrayValue);case 10:return function(o,u){var d,m,p,y;const v=o.fields||{},w=u.fields||{},A=(d=v[Gd])===null||d===void 0?void 0:d.arrayValue,D=(m=w[Gd])===null||m===void 0?void 0:m.arrayValue,j=Fe(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0);return j!==0?j:Rw(A,D)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===_d.mapValue&&u===_d.mapValue)return 0;if(o===_d.mapValue)return 1;if(u===_d.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const w=Fe(m[v],y[v]);if(w!==0)return w;const A=ol(d[m[v]],p[y[v]]);if(A!==0)return A}return Fe(m.length,y.length)}(n.mapValue,e.mapValue);default:throw be()}}function Cw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Us(n),i=Us(e),a=Fe(t.seconds,i.seconds);return a!==0?a:Fe(t.nanos,i.nanos)}function Rw(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const o=ol(t[a],i[a]);if(o)return o}return Fe(t.length,i.length)}function ll(n){return y_(n)}function y_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Us(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return js(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const o of t.values||[])a?a=!1:i+=",",i+=y_(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const u of i)o?o=!1:a+=",",a+=`${u}:${y_(t.fields[u])}`;return a+"}"}(n.mapValue):be()}function Id(n){switch(Bs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(n);return e?16+Id(e):16;case 5:return 2*n.stringValue.length;case 6:return js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+Id(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return $s(i.fields,(o,u)=>{a+=o.length+Id(u)}),a}(n.mapValue);default:throw be()}}function Iw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function v_(n){return!!n&&"integerValue"in n}function fy(n){return!!n&&"arrayValue"in n}function xw(n){return!!n&&"nullValue"in n}function Nw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xd(n){return!!n&&"mapValue"in n}function Dk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[qA])===null||t===void 0?void 0:t.stringValue)===HA}function Zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $s(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Nk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=rn.emptyPath(),i={},a=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}u?i[d.lastSegment()]=Zu(u):a.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,a)}delete(e){const t=this.field(e.popLast());xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];xd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){$s(t,(a,o)=>e[a]=o);for(const a of i)delete e[a]}clone(){return new Rn(Zu(this.value))}}function GA(n){const e=[];return $s(n.fields,(t,i)=>{const a=new rn([t]);if(xd(i)){const o=GA(i.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,i,a,o,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,Ae.min(),Ae.min(),Ae.min(),Rn.empty(),0)}static newFoundDocument(e,t,i,a){return new dn(e,1,t,Ae.min(),i,a,0)}static newNoDocument(e,t){return new dn(e,2,t,Ae.min(),Ae.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Ae.min(),Ae.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this.position=e,this.inclusive=t}}function Dw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const o=e[a],u=n.position[a];if(o.field.isKeyField()?i=ve.comparator(ve.fromName(u.referenceValue),t.key):i=ol(u,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function kw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ok(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{}class Nt extends KA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Pk(e,t,i):t==="array-contains"?new Uk(e,i):t==="in"?new jk(e,i):t==="not-in"?new Bk(e,i):t==="array-contains-any"?new zk(e,i):new Nt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Lk(e,i):new Vk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ol(t,this.value)):t!==null&&Bs(this.value)===Bs(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends KA{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new yi(e,t)}matches(e){return QA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function QA(n){return n.op==="and"}function $A(n){return Mk(n)&&QA(n)}function Mk(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function E_(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+ll(n.value);if($A(n))return n.filters.map(e=>E_(e)).join(",");{const e=n.filters.map(t=>E_(t)).join(",");return`${n.op}(${e})`}}function YA(n,e){return n instanceof Nt?function(i,a){return a instanceof Nt&&i.op===a.op&&i.field.isEqual(a.field)&&qi(i.value,a.value)}(n,e):n instanceof yi?function(i,a){return a instanceof yi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,u,d)=>o&&YA(u,a.filters[d]),!0):!1}(n,e):void be()}function WA(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`}(n):n instanceof yi?function(t){return t.op.toString()+" {"+t.getFilters().map(WA).join(" ,")+"}"}(n):"Filter"}class Pk extends Nt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lk extends Nt{constructor(e,t){super(e,"in",t),this.keys=XA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vk extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=XA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ve.fromName(i.referenceValue))}class Uk extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fy(t)&&gc(t.arrayValue,this.value)}}class jk extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gc(this.value.arrayValue,t)}}class Bk extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!gc(this.value.arrayValue,t)}}class zk extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>gc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t=null,i=[],a=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=u,this.endAt=d,this.le=null}}function Ow(n,e=null,t=[],i=[],a=null,o=null,u=null){return new Fk(n,e,t,i,a,o,u)}function my(n){const e=xe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>E_(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ll(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ll(i)).join(",")),e.le=t}return e.le}function py(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ok(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!YA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kw(n.startAt,e.startAt)&&kw(n.endAt,e.endAt)}function T_(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t=null,i=[],a=[],o=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function qk(n,e,t,i,a,o,u,d){return new Dc(n,e,t,i,a,o,u,d)}function gy(n){return new Dc(n)}function Mw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JA(n){return n.collectionGroup!==null}function ec(n){const e=xe(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new zt(rn.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Qd(o,i))}),t.has(rn.keyField().canonicalString())||e.he.push(new Qd(rn.keyField(),i))}return e.he}function Ui(n){const e=xe(n);return e.Pe||(e.Pe=Hk(e,ec(n))),e.Pe}function Hk(n,e){if(n.limitType==="F")return Ow(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Qd(a.field,o)});const t=n.endAt?new Kd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Kd(n.startAt.position,n.startAt.inclusive):null;return Ow(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function w_(n,e){const t=n.filters.concat([e]);return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b_(n,e,t){return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return py(Ui(n),Ui(e))&&n.limitType===e.limitType}function ZA(n){return`${my(Ui(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>WA(a)).join(", ")}]`),Nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>ll(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>ll(a)).join(",")),`Target(${i})`}(Ui(n))}; limitType=${n.limitType})`}function Of(n,e){return e.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ve.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,a){for(const o of ec(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,d,m){const p=Dw(u,d,m);return u.inclusive?p<=0:p<0}(i.startAt,ec(i),a)||i.endAt&&!function(u,d,m){const p=Dw(u,d,m);return u.inclusive?p>=0:p>0}(i.endAt,ec(i),a))}(n,e)}function Gk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eC(n){return(e,t)=>{let i=!1;for(const a of ec(n)){const o=Kk(a,e,t);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function Kk(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),p=d.data.field(o);return m!==null&&p!==null?ol(m,p):be()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(t,i)=>{for(const[a,o]of i)e(a,o)})}isEmpty(){return VA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=new Dt(ve.comparator);function Or(){return Qk}const tC=new Dt(ve.comparator);function Yu(...n){let e=tC;for(const t of n)e=e.insert(t.key,t);return e}function nC(n){let e=tC;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Na(){return tc()}function iC(){return tc()}function tc(){return new Ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const $k=new Dt(ve.comparator),Yk=new zt(ve.comparator);function Be(...n){let e=Yk;for(const t of n)e=e.add(t);return e}const Wk=new zt(Fe);function Xk(){return Wk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qd(e)?"-0":e}}function rC(n){return{integerValue:""+n}}function Jk(n,e){return Ak(e)?rC(e):_y(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function Zk(n,e,t){return n instanceof $d?function(a,o){const u={fields:{[BA]:{stringValue:jA},[FA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&dy(o)&&(o=Df(o)),o&&(u.fields[zA]=o),{mapValue:u}}(t,e):n instanceof ul?aC(n,e):n instanceof _c?oC(n,e):function(a,o){const u=sC(a,o),d=Pw(u)+Pw(a.Ie);return v_(u)&&v_(a.Ie)?rC(d):_y(a.serializer,d)}(n,e)}function eO(n,e,t){return n instanceof ul?aC(n,e):n instanceof _c?oC(n,e):t}function sC(n,e){return n instanceof Yd?function(i){return v_(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class $d extends Mf{}class ul extends Mf{constructor(e){super(),this.elements=e}}function aC(n,e){const t=lC(e);for(const i of n.elements)t.some(a=>qi(a,i))||t.push(i);return{arrayValue:{values:t}}}class _c extends Mf{constructor(e){super(),this.elements=e}}function oC(n,e){let t=lC(e);for(const i of n.elements)t=t.filter(a=>!qi(a,i));return{arrayValue:{values:t}}}class Yd extends Mf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Pw(n){return At(n.integerValue||n.doubleValue)}function lC(n){return fy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t){this.field=e,this.transform=t}}function nO(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof ul&&a instanceof ul||i instanceof _c&&a instanceof _c?al(i.elements,a.elements,qi):i instanceof Yd&&a instanceof Yd?qi(i.Ie,a.Ie):i instanceof $d&&a instanceof $d}(n.transform,e.transform)}class iO{constructor(e,t){this.version=e,this.transformResults=t}}class ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pf{}function uC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hC(n.key,ji.none()):new kc(n.key,n.data,ji.none());{const t=n.data,i=Rn.empty();let a=new zt(rn.comparator);for(let o of e.fields)if(!a.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?i.delete(o):i.set(o,u),a=a.add(o)}return new Ys(n.key,i,new Un(a.toArray()),ji.none())}}function rO(n,e,t){n instanceof kc?function(a,o,u){const d=a.value.clone(),m=Vw(a.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ys?function(a,o,u){if(!Nd(a.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Vw(a.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(cC(a)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function nc(n,e,t,i){return n instanceof kc?function(o,u,d,m){if(!Nd(o.precondition,u))return d;const p=o.value.clone(),y=Uw(o.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ys?function(o,u,d,m){if(!Nd(o.precondition,u))return d;const p=Uw(o.fieldTransforms,m,u),y=u.data;return y.setAll(cC(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(o,u,d){return Nd(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function sO(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),o=sC(i.transform,a||null);o!=null&&(t===null&&(t=Rn.empty()),t.set(i.field,o))}return t||null}function Lw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&al(i,a,(o,u)=>nO(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kc extends Pf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ys extends Pf{constructor(e,t,i,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Vw(n,e,t){const i=new Map;tt(n.length===t.length);for(let a=0;a<t.length;a++){const o=n[a],u=o.transform,d=e.data.field(o.field);i.set(o.field,eO(u,d,t[a]))}return i}function Uw(n,e,t){const i=new Map;for(const a of n){const o=a.transform,u=t.data.field(a.field);i.set(a.field,Zk(o,u,e))}return i}class hC extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aO extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&rO(o,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=nc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=nc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=iC();return this.mutations.forEach(a=>{const o=e.get(a.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=t.has(a.key)?null:d;const m=uC(u,d);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,(t,i)=>Lw(t,i))&&al(this.baseMutations,e.baseMutations,(t,i)=>Lw(t,i))}}class yy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){tt(e.mutations.length===i.length);let a=function(){return $k}();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,i[u].version);return new yy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Ke;function cO(n){switch(n){case ie.OK:return be();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return be()}}function dC(n){if(n===void 0)return kr("GRPC error has no .code"),ie.UNKNOWN;switch(n){case xt.OK:return ie.OK;case xt.CANCELLED:return ie.CANCELLED;case xt.UNKNOWN:return ie.UNKNOWN;case xt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case xt.INTERNAL:return ie.INTERNAL;case xt.UNAVAILABLE:return ie.UNAVAILABLE;case xt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case xt.NOT_FOUND:return ie.NOT_FOUND;case xt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case xt.ABORTED:return ie.ABORTED;case xt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case xt.DATA_LOSS:return ie.DATA_LOSS;default:return be()}}(Ke=xt||(xt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Ds([4294967295,4294967295],0);function jw(n){const e=hO().encode(n),t=new IA;return t.update(e),new Uint8Array(t.digest())}function Bw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ds([t,i],0),new Ds([a,o],0)]}class vy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wu(`Invalid padding: ${t}`);if(i<0)throw new Wu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ds.fromNumber(this.Ee)}Ae(e,t,i){let a=e.add(t.multiply(Ds.fromNumber(i)));return a.compare(dO)===1&&(a=new Ds([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=jw(e),[i,a]=Bw(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);if(!this.Re(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new vy(o,a,t);return i.forEach(d=>u.insert(d)),u}insert(e){if(this.Ee===0)return;const t=jw(e),[i,a]=Bw(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(i,a,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lf(Ae.min(),a,new Dt(Fe),Or(),Be())}}class Oc{constructor(e,t,i,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Oc(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,i,a){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=a}}class fC{constructor(e,t){this.targetId=e,this.ge=t}}class mC{constructor(e,t,i=sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zw{constructor(){this.pe=0,this.ye=Fw(),this.we=sn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Be(),t=Be(),i=Be();return this.ye.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:be()}}),new Oc(this.we,this.Se,e,t,i)}Me(){this.be=!1,this.ye=Fw()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,tt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class fO{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Or(),this.$e=yd(),this.Ke=yd(),this.Ue=new Dt(Fe)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,i=e.ge.count,a=this.Xe(t);if(a){const o=a.target;if(T_(o))if(i===0){const u=new ve(o.path);this.ze(t,u,dn.newNoDocument(u,Ae.min()))}else tt(i===1);else{const u=this.et(t);if(u!==i){const d=this.tt(e),m=d?this.nt(d,e,u):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=t;let u,d;try{u=js(i).toUint8Array()}catch(m){if(m instanceof UA)return sl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new vy(u,a,o)}catch(m){return sl(m instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let a=0;return i.forEach(o=>{const u=this.ke.it(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,o,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const d=this.Xe(u);if(d){if(o.current&&T_(d.target)){const m=new ve(d.target.path);this._t(m).has(u)||this.ut(u,m)||this.ze(u,m,dn.newNoDocument(m,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let i=Be();this.Ke.forEach((o,u)=>{let d=!0;u.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const a=new Lf(e,t,this.Ue,this.Qe,i);return this.Qe=Or(),this.$e=yd(),this.Ke=yd(),this.Ue=new Dt(Fe),a}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new zw,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new zt(Fe),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new zt(Fe),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new zw),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function yd(){return new Dt(ve.comparator)}function Fw(){return new Dt(ve.comparator)}const mO={asc:"ASCENDING",desc:"DESCENDING"},pO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gO={and:"AND",or:"OR"};class _O{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function S_(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function Wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yO(n,e){return Wd(n,e.toTimestamp())}function Bi(n){return tt(!!n),Ae.fromTimestamp(function(t){const i=Us(t);return new Bt(i.seconds,i.nanos)}(n))}function Ey(n,e){return A_(n,e).canonicalString()}function A_(n,e){const t=function(a){return new ht(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gC(n){const e=ht.fromString(n);return tt(TC(e)),e}function C_(n,e){return Ey(n.databaseId,e.path)}function wg(n,e){const t=gC(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(yC(t))}function _C(n,e){return Ey(n.databaseId,e)}function vO(n){const e=gC(n);return e.length===4?ht.emptyPath():yC(e)}function R_(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yC(n){return tt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function qw(n,e,t){return{name:C_(n,e),fields:t.value.mapValue.fields}}function EO(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(tt(y===void 0||typeof y=="string"),sn.fromBase64String(y||"")):(tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),sn.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const y=p.code===void 0?ie.UNKNOWN:dC(p.code);return new de(y,p.message||"")}(u);t=new mC(i,a,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=wg(n,i.document.name),o=Bi(i.document.updateTime),u=i.document.createTime?Bi(i.document.createTime):Ae.min(),d=new Rn({mapValue:{fields:i.document.fields}}),m=dn.newFoundDocument(a,o,u,d),p=i.targetIds||[],y=i.removedTargetIds||[];t=new Dd(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=wg(n,i.document),o=i.readTime?Bi(i.readTime):Ae.min(),u=dn.newNoDocument(a,o),d=i.removedTargetIds||[];t=new Dd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=wg(n,i.document),o=i.removedTargetIds||[];t=new Dd([],o,a,null)}else{if(!("filter"in e))return be();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,u=new uO(a,o),d=i.targetId;t=new fC(d,u)}}return t}function TO(n,e){let t;if(e instanceof kc)t={update:qw(n,e.key,e.value)};else if(e instanceof hC)t={delete:C_(n,e.key)};else if(e instanceof Ys)t={update:qw(n,e.key,e.data),updateMask:NO(e.fieldMask)};else{if(!(e instanceof aO))return be();t={verify:C_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,u){const d=u.transform;if(d instanceof $d)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ul)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _c)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Yd)return{fieldPath:u.field.canonicalString(),increment:d.Ie};throw be()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:yO(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:be()}(n,e.precondition)),t}function wO(n,e){return n&&n.length>0?(tt(e!==void 0),n.map(t=>function(a,o){let u=a.updateTime?Bi(a.updateTime):Bi(o);return u.isEqual(Ae.min())&&(u=Bi(o)),new iO(u,a.transformResults||[])}(t,e))):[]}function bO(n,e){return{documents:[_C(n,e.path)]}}function SO(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=_C(n,a);const o=function(p){if(p.length!==0)return EC(yi.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(y=>function(w){return{field:$o(w.field),direction:RO(w.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=S_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function AO(n){let e=vO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){tt(i===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const w=vC(v);return w instanceof yi&&$A(w)?w.getFilters():[w]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(w=>function(D){return new Qd(Yo(D.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(v){let w;return w=typeof v=="object"?v.value:v,Nf(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(v){const w=!!v.before,A=v.values||[];return new Kd(A,w)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const w=!v.before,A=v.values||[];return new Kd(A,w)}(t.endAt)),qk(e,a,u,o,d,"F",m,p)}function CO(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Yo(t.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Yo(t.unaryFilter.field);return Nt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yo(t.unaryFilter.field);return Nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Yo(t.unaryFilter.field);return Nt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(n):n.fieldFilter!==void 0?function(t){return Nt.create(Yo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yi.create(t.compositeFilter.filters.map(i=>vC(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(n):be()}function RO(n){return mO[n]}function IO(n){return pO[n]}function xO(n){return gO[n]}function $o(n){return{fieldPath:n.canonicalString()}}function Yo(n){return rn.fromServerFormat(n.fieldPath)}function EC(n){return n instanceof Nt?function(t){if(t.op==="=="){if(Nw(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NAN"}};if(xw(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nw(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NAN"}};if(xw(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(t.field),op:IO(t.op),value:t.value}}}(n):n instanceof yi?function(t){const i=t.getFilters().map(a=>EC(a));return i.length===1?i[0]:{compositeFilter:{op:xO(t.op),filters:i}}}(n):be()}function NO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t,i,a,o=Ae.min(),u=Ae.min(),d=sn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.Tt=e}}function kO(n){const e=AO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?b_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.Tn=new MO}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Vs.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class MO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new zt(ht.comparator),o=!a.has(i);return this.index[t]=a.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new zt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wC=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(wC,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new cl(0)}static Un(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="LruGarbageCollector",PO=1048576;function Kw([n,e],[t,i]){const a=Fe(n,t);return a===0?Fe(e,i):a}class LO{constructor(e){this.Hn=e,this.buffer=new zt(Kw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Kw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(Gw,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rl(t)?he(Gw,"Ignoring IndexedDB error during garbage collection: ",t):await Cl(t)}await this.er(3e5)})}}class UO{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(xf.ae);const i=new LO(t);return this.tr.forEachTarget(e,a=>i.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>i.Zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Hw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hw):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,a,o,u,d,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,t))).next(v=>(o=v,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),Ko()<=Ue.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${o} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function jO(n,e){return new UO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.changes=new Ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&nc(i.mutation,a,Un.empty(),Bt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Be()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Be()){const a=Na();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(o=>{let u=Yu();return o.forEach((d,m)=>{u=u.insert(d,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=Na();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Be()))}populateOverlays(e,t,i){const a=[];return i.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,i,a){let o=Or();const u=tc(),d=function(){return tc()}();return t.forEach((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Ys)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),nc(y.mutation,p,y.mutation.getFieldMask(),Bt.now())):u.set(p.key,Un.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var v;return d.set(p,new zO(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,t){const i=tc();let a=new Dt((u,d)=>u-d),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Un.empty();y=d.applyToLocalView(p,y),i.set(m,y);const v=(a.get(d.batchId)||Be()).add(m);a=a.insert(d.batchId,v)})}).next(()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,v=iC();y.forEach(w=>{if(!o.has(w)){const A=uC(t.get(w),i.get(w));A!==null&&v.set(w,A),o=o.add(w)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return ne.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-o.size):ne.resolve(Na());let d=fc,m=o;return u.next(p=>ne.forEach(p,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),o.get(y)?ne.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{m=m.insert(y,w)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,m,p,Be())).next(y=>({batchId:d,changes:nC(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(i=>{let a=Yu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const o=t.collectionGroup;let u=Yu();return this.indexManager.getCollectionParents(e,o).next(d=>ne.forEach(d,m=>{const p=function(v,w){return new Dc(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((v,w)=>{u=u.insert(v,w)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,a))).next(u=>{o.forEach((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,dn.newInvalidDocument(y)))});let d=Yu();return u.forEach((m,p)=>{const y=o.get(m);y!==void 0&&nc(y.mutation,p,Un.empty(),Bt.now()),Of(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Bi(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:kO(a.bundledQuery),readTime:Bi(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.overlays=new Dt(ve.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Na();return ne.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Rr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const a=Na(),o=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let o=new Dt((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=o.get(p.largestBatchId);y===null&&(y=Na(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Na(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return ne.resolve(d)}Et(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Rr.get(a.largestBatchId).delete(i.key);this.Rr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new lO(t,i));let o=this.Rr.get(t);o===void 0&&(o=Be(),this.Rr.set(t,o)),this.Rr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.Vr=new zt(Wt.mr),this.gr=new zt(Wt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new Wt(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new Wt(e,t))}Sr(e,t){e.forEach(i=>this.removeReference(i,t))}br(e){const t=new ve(new ht([])),i=new Wt(t,e),a=new Wt(t,e+1),o=[];return this.gr.forEachInRange([i,a],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ve(new ht([])),i=new Wt(t,e),a=new Wt(t,e+1);let o=Be();return this.gr.forEachInRange([i,a],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Wt(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Wt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ve.comparator(e.key,t.key)||Fe(e.Cr,t.Cr)}static pr(e,t){return Fe(e.Cr,t.Cr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Wt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new oO(o,t,i,a);this.mutationQueue.push(u);for(const d of a)this.Mr=this.Mr.add(new Wt(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Nr(i),o=a<0?0:a;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?hy:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Wt(t,0),a=new Wt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,a],u=>{const d=this.Or(u.Cr);o.push(d)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new zt(Fe);return t.forEach(a=>{const o=new Wt(a,0),u=new Wt(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],d=>{i=i.add(d.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let o=i;ve.isDocumentKey(o)||(o=o.child(""));const u=new Wt(new ve(o),0);let d=new zt(Fe);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},u),ne.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(i=>{const a=this.Or(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){tt(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(t.mutations,a=>{const o=new Wt(a.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new Wt(t,0),a=this.Mr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.kr=e,this.docs=function(){return new Dt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),o=a?a.size:0,u=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let i=Or();return t.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():dn.newInvalidDocument(a))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let o=Or();const u=t.path,d=new ve(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Tk(Ek(y),i)<=0||(a.has(y.key)||Of(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,i,a){be()}qr(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new $O(this)}getSize(e){return ne.resolve(this.size)}}class $O extends BO{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.persistence=e,this.Qr=new Ka(t=>my(t),py),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Ty,this.targetCount=0,this.Ur=cl.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let a=0;const o=[];return this.Qr.forEach((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ne.waitFor(o).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Kr.Sr(t,i);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(u=>{o.push(a.markPotentiallyOrphaned(e,u))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new xf(0),this.zr=!1,this.zr=!0,this.jr=new GO,this.referenceDelegate=e(this),this.Hr=new YO(this),this.indexManager=new OO,this.remoteDocumentCache=function(a){return new QO(a)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new DO(t),this.Yr=new qO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new KO(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const a=new WO(this.Gr.next());return this.referenceDelegate.Zr(),i(a).next(o=>this.referenceDelegate.Xr(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class WO extends bk{constructor(e){super(),this.currentSequenceNumber=e}}class wy{constructor(e){this.persistence=e,this.ti=new Ty,this.ni=null}static ri(e){return new wy(e)}get ii(){if(this.ni)return this.ni;throw be()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const a=ve.fromPath(i);return this.si(e,a).next(o=>{o||t.removeEntry(a,Ae.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Xd{constructor(e,t){this.persistence=e,this.oi=new Ka(i=>Ck(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=jO(this,t)}static ri(e,t){return new Xd(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(i,a)=>this.ar(e,i,a).next(o=>o?ne.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.qr(e,u=>this.ar(e,u,t).next(d=>{d||(i++,o.removeEntry(u,Ae.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Id(e.data.value)),t}ar(e,t,i){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return ne.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=a}static Yi(e,t){let i=Be(),a=Be();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new by(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return F2()?8:Sk(fn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,a){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,a,i).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new XO;return this._s(e,t,u).next(d=>{if(o.result=d,this.Xi)return this.us(e,t,u,d.size)})}).next(()=>o.result)}us(e,t,i,a){return i.documentReadCount<this.es?(Ko()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(Ko()<=Ue.DEBUG&&he("QueryEngine","Query:",Qo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ts*a?(Ko()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):ne.resolve())}rs(e,t){if(Mw(t))return ne.resolve(null);let i=Ui(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=b_(t,null,"F"),i=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const u=Be(...o);return this.ns.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.cs(t,d);return this.ls(t,p,u,m.readTime)?this.rs(e,b_(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,i,a){return Mw(t)||a.isEqual(Ae.min())?ne.resolve(null):this.ns.getDocuments(e,i).next(o=>{const u=this.cs(t,o);return this.ls(t,u,i,a)?ne.resolve(null):(Ko()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qo(t)),this.hs(e,u,t,vk(a,fc)).next(d=>d))})}cs(e,t){let i=new zt(eC(e));return t.forEach((a,o)=>{Of(e,o)&&(i=i.add(o))}),i}ls(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}_s(e,t,i){return Ko()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ns.getDocumentsMatchingQuery(e,t,Vs.min(),i)}hs(e,t,i,a){return this.ns.getDocumentsMatchingQuery(e,i,a).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="LocalStore",ZO=3e8;class eM{constructor(e,t,i,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new Dt(Fe),this.Is=new Ka(o=>my(o),py),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FO(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function tM(n,e,t,i){return new eM(n,e,t,i)}async function SC(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],d=[];let m=Be();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of o){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:d}))})})}function nM(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,y){const v=p.batch,w=v.keys();let A=ne.resolve();return w.forEach(D=>{A=A.next(()=>y.getEntry(m,D)).next(j=>{const V=p.docVersions.get(D);tt(V!==null),j.version.compareTo(V)<0&&(v.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))})}),A.next(()=>d.mutationQueue.removeMutationBatch(m,v))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Be();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function AC(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function iM(n,e){const t=xe(n),i=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((y,v)=>{const w=a.get(v);if(!w)return;d.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,v)));let A=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(sn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),a=a.insert(v,A),function(j,V,F){return j.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=ZO?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(w,A,y)&&d.push(t.Hr.updateTargetData(o,A))});let m=Or(),p=Be();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),d.push(rM(o,u,e.documentUpdates).next(y=>{m=y.Vs,p=y.fs})),!i.isEqual(Ae.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));d.push(y)}return ne.waitFor(d).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,p)).next(()=>m)}).then(o=>(t.Ts=a,o))}function rM(n,e,t){let i=Be(),a=Be();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let u=Or();return t.forEach((d,m)=>{const p=o.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):he(Sy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:u,fs:a}})}function sM(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=hy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function aM(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Hr.getTargetData(i,e).next(o=>o?(a=o,ne.resolve(a)):t.Hr.allocateTargetId(i).next(u=>(a=new Cs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ts.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function I_(n,e,t){const i=xe(n),a=i.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!Rl(u))throw u;he(Sy,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(a.target)}function Qw(n,e,t){const i=xe(n);let a=Ae.min(),o=Be();return i.persistence.runTransaction("Execute query","readwrite",u=>function(m,p,y){const v=xe(m),w=v.Is.get(y);return w!==void 0?ne.resolve(v.Ts.get(w)):v.Hr.getTargetData(p,y)}(i,u,Ui(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,d.targetId).next(m=>{o=m})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,t?a:Ae.min(),t?o:Be())).next(d=>(oM(i,Gk(e),d),{documents:d,gs:o})))}function oM(n,e,t){let i=n.Es.get(e)||Ae.min();t.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Es.set(e,i)}class $w{constructor(){this.activeTargetIds=Xk()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lM{constructor(){this.ho=new $w,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new $w,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="ConnectivityMonitor";class Ww{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(Yw,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(Yw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function x_(){return vd===null?vd=function(){return 268435456+Math.round(2147483648*Math.random())}():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="RestConnection",cM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hM{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${a}`,this.wo=this.databaseId.database===Hd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}So(e,t,i,a,o){const u=x_(),d=this.bo(e,t.toUriEncodedString());he(bg,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,o),this.vo(e,d,m,i).then(p=>(he(bg,`Received RPC '${e}' ${u}: `,p),p),p=>{throw sl(bg,`RPC '${e}' ${u} failed with error: `,p,"url: ",d,"request:",i),p})}Co(e,t,i,a,o,u){return this.So(e,t,i,a,o)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Al}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),i&&i.headers.forEach((a,o)=>e[o]=a)}bo(e,t){const i=cM[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class fM extends hM{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,a){const o=x_();return new Promise((u,d)=>{const m=new xA;m.setWithCredentials(!0),m.listenOnce(NA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Rd.NO_ERROR:const y=m.getResponseJson();he(cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case Rd.TIMEOUT:he(cn,`RPC '${e}' ${o} timed out`),d(new de(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Rd.HTTP_ERROR:const v=m.getStatus();if(he(cn,`RPC '${e}' ${o} failed with status:`,v,"response text:",m.getResponseText()),v>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w==null?void 0:w.error;if(A&&A.status&&A.message){const D=function(V){const F=V.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(F)>=0?F:ie.UNKNOWN}(A.status);d(new de(D,A.message))}else d(new de(ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new de(ie.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{he(cn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(a);he(cn,`RPC '${e}' ${o} sending request:`,a),m.send(t,"POST",p,i,15)})}Wo(e,t,i){const a=x_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=OA(),d=kA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=o.join("");he(cn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const v=u.createWebChannel(y,m);let w=!1,A=!1;const D=new dM({Fo:V=>{A?he(cn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(w||(he(cn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),w=!0),he(cn,`RPC '${e}' stream ${a} sending:`,V),v.send(V))},Mo:()=>v.close()}),j=(V,F,G)=>{V.listen(F,L=>{try{G(L)}catch(Y){setTimeout(()=>{throw Y},0)}})};return j(v,$u.EventType.OPEN,()=>{A||(he(cn,`RPC '${e}' stream ${a} transport opened.`),D.Qo())}),j(v,$u.EventType.CLOSE,()=>{A||(A=!0,he(cn,`RPC '${e}' stream ${a} transport closed`),D.Ko())}),j(v,$u.EventType.ERROR,V=>{A||(A=!0,sl(cn,`RPC '${e}' stream ${a} transport errored:`,V),D.Ko(new de(ie.UNAVAILABLE,"The operation could not be completed")))}),j(v,$u.EventType.MESSAGE,V=>{var F;if(!A){const G=V.data[0];tt(!!G);const L=G,Y=(L==null?void 0:L.error)||((F=L[0])===null||F===void 0?void 0:F.error);if(Y){he(cn,`RPC '${e}' stream ${a} received error:`,Y);const ee=Y.status;let X=function(S){const N=xt[S];if(N!==void 0)return dC(N)}(ee),k=Y.message;X===void 0&&(X=ie.INTERNAL,k="Unknown error status: "+ee+" with message "+Y.message),A=!0,D.Ko(new de(X,k)),v.close()}else he(cn,`RPC '${e}' stream ${a} received:`,G),D.Uo(G)}}),j(d,DA.STAT_EVENT,V=>{V.stat===g_.PROXY?he(cn,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===g_.NOPROXY&&he(cn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{D.$o()},0),D}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){return new _O(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t,i=1e3,a=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=a,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-i);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="PersistentStream";class RC{constructor(e,t,i,a,o,u,d,m){this.Ti=e,this.n_=i,this.r_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new CC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.i_===t&&this.V_(i,a)},i=>{e(()=>{const a=new de(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(a)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{i(()=>this.m_(a))}),this.stream.onMessage(a=>{i(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(Xw,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(he(Xw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mM extends RC{constructor(e,t,i,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=EO(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ae.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?Bi(u.readTime):Ae.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=R_(this.serializer),t.addTarget=function(o,u){let d;const m=u.target;if(d=T_(m)?{documents:bO(o,m)}:{query:SO(o,m).ht},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=pC(o,u.resumeToken);const p=S_(o,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Wd(o,u.snapshotVersion.toTimestamp());const p=S_(o,u.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=CO(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=R_(this.serializer),t.removeTarget=e,this.I_(t)}}class pM extends RC{constructor(e,t,i,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=wO(e.writeResults,e.commitTime),i=Bi(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=R_(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>TO(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{}class _M extends gM{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new de(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.So(e,A_(t,i),a,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ie.UNKNOWN,o.toString())})}Co(e,t,i,a,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Co(e,A_(t,i),a,u,d,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ie.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class yM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(kr(t),this.N_=!1):he("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="RemoteStore";class vM{constructor(e,t,i,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{i.enqueueAndForget(async()=>{Qa(this)&&(he(La,"Restarting streams for network reachability change."),await async function(m){const p=xe(m);p.W_.add(4),await Mc(p),p.j_.set("Unknown"),p.W_.delete(4),await Uf(p)}(this))})}),this.j_=new yM(i,a)}}async function Uf(n){if(Qa(n))for(const e of n.G_)await e(!0)}async function Mc(n){for(const e of n.G_)await e(!1)}function IC(n,e){const t=xe(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Iy(t)?Ry(t):Il(t).c_()&&Cy(t,e))}function Ay(n,e){const t=xe(n),i=Il(t);t.U_.delete(e),i.c_()&&xC(t,e),t.U_.size===0&&(i.c_()?i.P_():Qa(t)&&t.j_.set("Unknown"))}function Cy(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Il(n).y_(e)}function xC(n,e){n.H_.Ne(e),Il(n).w_(e)}function Ry(n){n.H_=new fO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Il(n).start(),n.j_.B_()}function Iy(n){return Qa(n)&&!Il(n).u_()&&n.U_.size>0}function Qa(n){return xe(n).W_.size===0}function NC(n){n.H_=void 0}async function EM(n){n.j_.set("Online")}async function TM(n){n.U_.forEach((e,t)=>{Cy(n,e)})}async function wM(n,e){NC(n),Iy(n)?(n.j_.q_(e),Ry(n)):n.j_.set("Unknown")}async function bM(n,e,t){if(n.j_.set("Online"),e instanceof mC&&e.state===2&&e.cause)try{await async function(a,o){const u=o.cause;for(const d of o.targetIds)a.U_.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.U_.delete(d),a.H_.removeTarget(d))}(n,e)}catch(i){he(La,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jd(n,i)}else if(e instanceof Dd?n.H_.We(e):e instanceof fC?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Ae.min()))try{const i=await AC(n.localStore);t.compareTo(i)>=0&&await function(o,u){const d=o.H_.ot(u);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=o.U_.get(p);y&&o.U_.set(p,y.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach((m,p)=>{const y=o.U_.get(m);if(!y)return;o.U_.set(m,y.withResumeToken(sn.EMPTY_BYTE_STRING,y.snapshotVersion)),xC(o,m);const v=new Cs(y.target,m,p,y.sequenceNumber);Cy(o,v)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){he(La,"Failed to raise snapshot:",i),await Jd(n,i)}}async function Jd(n,e,t){if(!Rl(e))throw e;n.W_.add(1),await Mc(n),n.j_.set("Offline"),t||(t=()=>AC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(La,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Uf(n)})}function DC(n,e){return e().catch(t=>Jd(n,t,e))}async function jf(n){const e=xe(n),t=zs(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:hy;for(;SM(e);)try{const a=await sM(e.localStore,i);if(a===null){e.K_.length===0&&t.P_();break}i=a.batchId,AM(e,a)}catch(a){await Jd(e,a)}kC(e)&&OC(e)}function SM(n){return Qa(n)&&n.K_.length<10}function AM(n,e){n.K_.push(e);const t=zs(n);t.c_()&&t.S_&&t.b_(e.mutations)}function kC(n){return Qa(n)&&!zs(n).u_()&&n.K_.length>0}function OC(n){zs(n).start()}async function CM(n){zs(n).C_()}async function RM(n){const e=zs(n);for(const t of n.K_)e.b_(t.mutations)}async function IM(n,e,t){const i=n.K_.shift(),a=yy.from(i,e,t);await DC(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await jf(n)}async function xM(n,e){e&&zs(n).S_&&await async function(i,a){if(function(u){return cO(u)&&u!==ie.ABORTED}(a.code)){const o=i.K_.shift();zs(i).h_(),await DC(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await jf(i)}}(n,e),kC(n)&&OC(n)}async function Jw(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),he(La,"RemoteStore received new credentials");const i=Qa(t);t.W_.add(3),await Mc(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Uf(t)}async function NM(n,e){const t=xe(n);e?(t.W_.delete(2),await Uf(t)):e||(t.W_.add(2),await Mc(t),t.j_.set("Unknown"))}function Il(n){return n.J_||(n.J_=function(t,i,a){const o=xe(t);return o.M_(),new mM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:EM.bind(null,n),No:TM.bind(null,n),Lo:wM.bind(null,n),p_:bM.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Iy(n)?Ry(n):n.j_.set("Unknown")):(await n.J_.stop(),NC(n))})),n.J_}function zs(n){return n.Y_||(n.Y_=function(t,i,a){const o=xe(t);return o.M_(),new pM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:CM.bind(null,n),Lo:xM.bind(null,n),D_:RM.bind(null,n),v_:IM.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await jf(n)):(await n.Y_.stop(),n.K_.length>0&&(he(La,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,i,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,o){const u=Date.now()+i,d=new xy(e,t,u,a,o);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(n,e){if(kr("AsyncQueue",`${e}: ${n}`),Rl(n))return new de(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{static emptySet(e){return new Xo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=Yu(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Xo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.Z_=new Dt(ve.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):be():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class hl{constructor(e,t,i,a,o,u,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new hl(e,t,Xo.emptySet(t),u,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class kM{constructor(){this.queries=eb(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const a=xe(t),o=a.queries;a.queries=eb(),o.forEach((u,d)=>{for(const m of d.ta)m.onError(i)})})(this,new de(ie.ABORTED,"Firestore shutting down"))}}function eb(){return new Ka(n=>ZA(n),kf)}async function MC(n,e){const t=xe(n);let i=3;const a=e.query;let o=t.queries.get(a);o?!o.na()&&e.ra()&&(i=2):(o=new DM,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await t.onListen(a,!0);break;case 1:o.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const d=Ny(u,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&Dy(t)}async function PC(n,e){const t=xe(n),i=e.query;let a=3;const o=t.queries.get(i);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?a=e.ra()?0:1:!o.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function OM(n,e){const t=xe(n);let i=!1;for(const a of e){const o=a.query,u=t.queries.get(o);if(u){for(const d of u.ta)d.oa(a)&&(i=!0);u.ea=a}}i&&Dy(t)}function MM(n,e,t){const i=xe(n),a=i.queries.get(e);if(a)for(const o of a.ta)o.onError(t);i.queries.delete(e)}function Dy(n){n.ia.forEach(e=>{e.next()})}var N_,tb;(tb=N_||(N_={}))._a="default",tb.Cache="cache";class LC{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==N_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.key=e}}class UC{constructor(e){this.key=e}}class PM{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Be(),this.mutatedKeys=Be(),this.ya=eC(e),this.wa=new Xo(this.ya)}get Sa(){return this.fa}ba(e,t){const i=t?t.Da:new Zw,a=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const w=a.get(y),A=Of(this.query,v)?v:null,D=!!w&&this.mutatedKeys.has(w.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let V=!1;w&&A?w.data.isEqual(A.data)?D!==j&&(i.track({type:3,doc:A}),V=!0):this.va(w,A)||(i.track({type:2,doc:A}),V=!0,(m&&this.ya(A,m)>0||p&&this.ya(A,p)<0)&&(d=!0)):!w&&A?(i.track({type:0,doc:A}),V=!0):w&&!A&&(i.track({type:1,doc:w}),V=!0,(m||p)&&(d=!0)),V&&(A?(u=u.add(A),o=j?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{wa:u,Da:i,ls:d,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,v)=>function(A,D){const j=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return j(A)-j(D)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(i),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,u.length!==0||p?{snapshot:new hl(this.query,e.wa,o,u,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Zw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Be(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new UC(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new VC(i))}),t}Oa(e){this.fa=e.gs,this.pa=Be();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return hl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ky="SyncEngine";class LM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class VM{constructor(e){this.key=e,this.Ba=!1}}class UM{constructor(e,t,i,a,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ka(d=>ZA(d),kf),this.qa=new Map,this.Qa=new Set,this.$a=new Dt(ve.comparator),this.Ka=new Map,this.Ua=new Ty,this.Wa={},this.Ga=new Map,this.za=cl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function jM(n,e,t=!0){const i=HC(n);let a;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.Na()):a=await jC(i,e,t,!0),a}async function BM(n,e){const t=HC(n);await jC(t,e,!0,!1)}async function jC(n,e,t,i){const a=await aM(n.localStore,Ui(e)),o=a.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let d;return i&&(d=await zM(n,e,o,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&IC(n.remoteStore,a),d}async function zM(n,e,t,i,a){n.Ha=(v,w,A)=>async function(j,V,F,G){let L=V.view.ba(F);L.ls&&(L=await Qw(j.localStore,V.query,!1).then(({documents:k})=>V.view.ba(k,L)));const Y=G&&G.targetChanges.get(V.targetId),ee=G&&G.targetMismatches.get(V.targetId)!=null,X=V.view.applyChanges(L,j.isPrimaryClient,Y,ee);return ib(j,V.targetId,X.Ma),X.snapshot}(n,v,w,A);const o=await Qw(n.localStore,e,!0),u=new PM(e,o.gs),d=u.ba(o.documents),m=Oc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=u.applyChanges(d,n.isPrimaryClient,m);ib(n,t,p.Ma);const y=new LM(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function FM(n,e,t){const i=xe(n),a=i.ka.get(e),o=i.qa.get(a.targetId);if(o.length>1)return i.qa.set(a.targetId,o.filter(u=>!kf(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await I_(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Ay(i.remoteStore,a.targetId),D_(i,a.targetId)}).catch(Cl)):(D_(i,a.targetId),await I_(i.localStore,a.targetId,!0))}async function qM(n,e){const t=xe(n),i=t.ka.get(e),a=t.qa.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ay(t.remoteStore,i.targetId))}async function HM(n,e,t){const i=XM(n);try{const a=await function(u,d){const m=xe(u),p=Bt.now(),y=d.reduce((A,D)=>A.add(D.key),Be());let v,w;return m.persistence.runTransaction("Locally write mutations","readwrite",A=>{let D=Or(),j=Be();return m.ds.getEntries(A,y).next(V=>{D=V,D.forEach((F,G)=>{G.isValidDocument()||(j=j.add(F))})}).next(()=>m.localDocuments.getOverlayedDocuments(A,D)).next(V=>{v=V;const F=[];for(const G of d){const L=sO(G,v.get(G.key).overlayedDocument);L!=null&&F.push(new Ys(G.key,L,GA(L.value.mapValue),ji.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,F,d)}).next(V=>{w=V;const F=V.applyToLocalDocumentSet(v,j);return m.documentOverlayCache.saveOverlays(A,V.batchId,F)})}).then(()=>({batchId:w.batchId,changes:nC(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,d,m){let p=u.Wa[u.currentUser.toKey()];p||(p=new Dt(Fe)),p=p.insert(d,m),u.Wa[u.currentUser.toKey()]=p}(i,a.batchId,t),await Pc(i,a.changes),await jf(i.remoteStore)}catch(a){const o=Ny(a,"Failed to persist write");t.reject(o)}}async function BC(n,e){const t=xe(n);try{const i=await iM(t.localStore,e);e.targetChanges.forEach((a,o)=>{const u=t.Ka.get(o);u&&(tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.Ba=!0:a.modifiedDocuments.size>0?tt(u.Ba):a.removedDocuments.size>0&&(tt(u.Ba),u.Ba=!1))}),await Pc(t,i,e)}catch(i){await Cl(i)}}function nb(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ka.forEach((o,u)=>{const d=u.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(u,d){const m=xe(u);m.onlineState=d;let p=!1;m.queries.forEach((y,v)=>{for(const w of v.ta)w.sa(d)&&(p=!0)}),p&&Dy(m)}(i.eventManager,e),a.length&&i.La.p_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GM(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Ka.get(e),o=a&&a.key;if(o){let u=new Dt(ve.comparator);u=u.insert(o,dn.newNoDocument(o,Ae.min()));const d=Be().add(o),m=new Lf(Ae.min(),new Map,new Dt(Fe),u,d);await BC(i,m),i.$a=i.$a.remove(o),i.Ka.delete(e),Oy(i)}else await I_(i.localStore,e,!1).then(()=>D_(i,e,t)).catch(Cl)}async function KM(n,e){const t=xe(n),i=e.batch.batchId;try{const a=await nM(t.localStore,e);FC(t,i,null),zC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Pc(t,a)}catch(a){await Cl(a)}}async function QM(n,e,t){const i=xe(n);try{const a=await function(u,d){const m=xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next(v=>(tt(v!==null),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(i.localStore,e);FC(i,e,t),zC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Pc(i,a)}catch(a){await Cl(a)}}function zC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function FC(n,e,t){const i=xe(n);let a=i.Wa[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),i.Wa[i.currentUser.toKey()]=a}}function D_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.br(e).forEach(i=>{n.Ua.containsKey(i)||qC(n,i)})}function qC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Ay(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Oy(n))}function ib(n,e,t){for(const i of t)i instanceof VC?(n.Ua.addReference(i.key,e),$M(n,i)):i instanceof UC?(he(ky,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||qC(n,i.key)):be()}function $M(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(he(ky,"New document in limbo: "+t),n.Qa.add(i),Oy(n))}function Oy(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ve(ht.fromString(e)),i=n.za.next();n.Ka.set(i,new VM(t)),n.$a=n.$a.insert(t,i),IC(n.remoteStore,new Cs(Ui(gy(t.path)),i,"TargetPurposeLimboResolution",xf.ae))}}async function Pc(n,e,t){const i=xe(n),a=[],o=[],u=[];i.ka.isEmpty()||(i.ka.forEach((d,m)=>{u.push(i.Ha(m,e,t).then(p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=by.Yi(m.targetId,p);o.push(v)}}))}),await Promise.all(u),i.La.p_(a),await async function(m,p){const y=xe(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ne.forEach(p,w=>ne.forEach(w.Hi,A=>y.persistence.referenceDelegate.addReference(v,w.targetId,A)).next(()=>ne.forEach(w.Ji,A=>y.persistence.referenceDelegate.removeReference(v,w.targetId,A)))))}catch(v){if(!Rl(v))throw v;he(Sy,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const A=y.Ts.get(w),D=A.snapshotVersion,j=A.withLastLimboFreeSnapshotVersion(D);y.Ts=y.Ts.insert(w,j)}}}(i.localStore,o))}async function YM(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){he(ky,"User change. New user:",e.toKey());const i=await SC(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(d=>{d.forEach(m=>{m.reject(new de(ie.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pc(t,i.Rs)}}function WM(n,e){const t=xe(n),i=t.Ka.get(e);if(i&&i.Ba)return Be().add(i.key);{let a=Be();const o=t.qa.get(e);if(!o)return a;for(const u of o){const d=t.ka.get(u);a=a.unionWith(d.view.Sa)}return a}}function HC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GM.bind(null,e),e.La.p_=OM.bind(null,e.eventManager),e.La.Ja=MM.bind(null,e.eventManager),e}function XM(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QM.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return tM(this.persistence,new JO,e.initialUser,this.serializer)}Xa(e){return new bC(wy.ri,this.serializer)}Za(e){return new lM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class JM extends Zd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){tt(this.persistence.referenceDelegate instanceof Xd);const i=this.persistence.referenceDelegate.garbageCollector;return new VO(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new bC(i=>Xd.ri(i,t),this.serializer)}}class k_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YM.bind(null,this.syncEngine),await NM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kM}()}createDatastore(e){const t=Vf(e.databaseInfo.databaseId),i=function(o){return new fM(o)}(e.databaseInfo);return function(o,u,d,m){return new _M(o,u,d,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,o,u,d){return new vM(i,a,o,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>nb(this.syncEngine,t,0),function(){return Ww.D()?new Ww:new uM}())}createSyncEngine(e,t){return function(a,o,u,d,m,p,y){const v=new UM(a,o,u,d,m,p);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=xe(a);he(La,"RemoteStore shutting down."),o.W_.add(5),await Mc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}k_.provider={build:()=>new k_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class ZM{constructor(e,t,i,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=hn.UNAUTHENTICATED,this.clientId=PA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async u=>{he(Fs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(he(Fs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ny(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ag(n,e){n.asyncQueue.verifyOperationInProgress(),he(Fs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await SC(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function rb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await eP(n);he(Fs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Jw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Jw(e.remoteStore,a)),n._onlineComponents=e}async function eP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Fs,"Using user provided OfflineComponentProvider");try{await Ag(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;sl("Error using user provided cache. Falling back to memory cache: "+t),await Ag(n,new Zd)}}else he(Fs,"Using default OfflineComponentProvider"),await Ag(n,new JM(void 0));return n._offlineComponents}async function KC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Fs,"Using user provided OnlineComponentProvider"),await rb(n,n._uninitializedComponentsProvider._online)):(he(Fs,"Using default OnlineComponentProvider"),await rb(n,new k_))),n._onlineComponents}function tP(n){return KC(n).then(e=>e.syncEngine)}async function QC(n){const e=await KC(n),t=e.eventManager;return t.onListen=jM.bind(null,e.syncEngine),t.onUnlisten=FM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qM.bind(null,e.syncEngine),t}function nP(n,e,t={}){const i=new xr;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,d,m,p){const y=new GC({next:w=>{y.su(),u.enqueueAndForget(()=>PC(o,v));const A=w.docs.has(d);!A&&w.fromCache?p.reject(new de(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&m&&m.source==="server"?p.reject(new de(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new LC(gy(d.path),y,{includeMetadataChanges:!0,Ta:!0});return MC(o,v)}(await QC(n),n.asyncQueue,e,t,i)),i.promise}function iP(n,e,t={}){const i=new xr;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,d,m,p){const y=new GC({next:w=>{y.su(),u.enqueueAndForget(()=>PC(o,v)),w.fromCache&&m.source==="server"?p.reject(new de(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new LC(d,y,{includeMetadataChanges:!0,Ta:!0});return MC(o,v)}(await QC(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n,e,t){if(!t)throw new de(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rP(n,e,t,i){if(e===!0&&i===!0)throw new de(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ab(n){if(!ve.isDocumentKey(n))throw new de(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ob(n){if(ve.isDocumentKey(n))throw new de(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be()}function Mr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bf(n);throw new de(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="firestore.googleapis.com",lb=!0;class ub{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WC,this.ssl=lb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:lb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PO)throw new de(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$C((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ub({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ub(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new hk;switch(i.type){case"firstParty":return new pk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=sb.get(t);i&&(he("ComponentProvider","Removing Datastore"),sb.delete(t),i.terminate())}(this),Promise.resolve()}}function sP(n,e,t,i={}){var a;const o=(n=Mr(n,zf))._getSettings(),u=`${e}:${t}`;if(o.host!==WC&&o.host!==u&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:u,ssl:!1})),i.mockUserToken){let d,m;if(typeof i.mockUserToken=="string")d=i.mockUserToken,m=hn.MOCK_USER;else{d=gA(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new de(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new hn(p)}n._authCredentials=new dk(new MA(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xl(this.firestore,e,this._query)}}class Tn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class Os extends xl{constructor(e,t,i){super(e,t,gy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new ve(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function O_(n,e,...t){if(n=dt(n),YC("collection","path",e),n instanceof zf){const i=ht.fromString(e,...t);return ob(i),new Os(n,null,i)}{if(!(n instanceof Tn||n instanceof Os))throw new de(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ht.fromString(e,...t));return ob(i),new Os(n.firestore,null,i)}}function yc(n,e,...t){if(n=dt(n),arguments.length===1&&(e=PA.newId()),YC("doc","path",e),n instanceof zf){const i=ht.fromString(e,...t);return ab(i),new Tn(n,null,new ve(i))}{if(!(n instanceof Tn||n instanceof Os))throw new de(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ht.fromString(e,...t));return ab(i),new Tn(n.firestore,n instanceof Os?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="AsyncQueue";class hb{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new CC(this,"async_queue_retry"),this.Su=()=>{const i=Sg();i&&he(cb,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const t=Sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new xr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Rl(e))throw e;he(cb,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const a=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(i);throw kr("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=xy.createAndSchedule(this,e,t,i,o=>this.Fu(o));return this.fu.push(a),a}Du(){this.gu&&be()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Lc extends zf{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new hb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hb(e),this._firestoreClient=void 0,await e}}}function Ff(n,e){const t=typeof n=="object"?n:If(),i=typeof n=="string"?n:Hd,a=Qs(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=fA("firestore");o&&sP(a,...o)}return a}function My(n){if(n._terminated)throw new de(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aP(n),n._firestoreClient}function aP(n){var e,t,i;const a=n._freezeSettings(),o=function(d,m,p,y){return new xk(d,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,$C(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new ZM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(sn.fromBase64String(e))}catch(t){throw new de(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dl(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=/^__.*__$/;class lP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class XC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Gf{constructor(e,t,i,a,o,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Gf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.$u(e),a}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:i,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ef(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(JC(this.Lu)&&oP.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class uP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vf(e)}ju(e,t,i,a=!1){return new Gf({Lu:e,methodName:t,zu:i,path:rn.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vy(n){const e=n._freezeSettings(),t=Vf(n._databaseId);return new uP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cP(n,e,t,i,a,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,a);jy("Data must be an object, but it was:",u,i);const d=ZC(i,u);let m,p;if(o.merge)m=new Un(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const w=M_(e,v,t);if(!u.contains(w))throw new de(ie.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);tR(y,w)||y.push(w)}m=new Un(y),p=u.fieldTransforms.filter(v=>m.covers(v.field))}else m=null,p=u.fieldTransforms;return new lP(new Rn(d),m,p)}class Kf extends Hf{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kf}}function hP(n,e,t){return new Gf({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Uy extends Hf{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=hP(this,e,!0),i=this.Hu.map(o=>Nl(o,t)),a=new ul(i);return new tO(e.path,a)}isEqual(e){return e instanceof Uy&&rl(this.Hu,e.Hu)}}function dP(n,e,t,i){const a=n.ju(1,e,t);jy("Data must be an object, but it was:",a,i);const o=[],u=Rn.empty();$s(i,(m,p)=>{const y=By(e,m,t);p=dt(p);const v=a.Ku(y);if(p instanceof Kf)o.push(y);else{const w=Nl(p,v);w!=null&&(o.push(y),u.set(y,w))}});const d=new Un(o);return new XC(u,d,a.fieldTransforms)}function fP(n,e,t,i,a,o){const u=n.ju(1,e,t),d=[M_(e,i,t)],m=[a];if(o.length%2!=0)throw new de(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)d.push(M_(e,o[w])),m.push(o[w+1]);const p=[],y=Rn.empty();for(let w=d.length-1;w>=0;--w)if(!tR(p,d[w])){const A=d[w];let D=m[w];D=dt(D);const j=u.Ku(A);if(D instanceof Kf)p.push(A);else{const V=Nl(D,j);V!=null&&(p.push(A),y.set(A,V))}}const v=new Un(p);return new XC(y,v,u.fieldTransforms)}function mP(n,e,t,i=!1){return Nl(t,n.ju(i?4:3,e))}function Nl(n,e){if(eR(n=dt(n)))return jy("Unsupported field value:",e,n),ZC(n,e);if(n instanceof Hf)return function(i,a){if(!JC(a.Lu))throw a.Wu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,a){const o=[];let u=0;for(const d of i){let m=Nl(d,a.Uu(u));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(i,a){if((i=dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Jk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Bt.fromDate(i);return{timestampValue:Wd(a.serializer,o)}}if(i instanceof Bt){const o=new Bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wd(a.serializer,o)}}if(i instanceof Py)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof dl)return{bytesValue:pC(a.serializer,i._byteString)};if(i instanceof Tn){const o=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw a.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ey(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ly)return function(u,d){return{mapValue:{fields:{[qA]:{stringValue:HA},[Gd]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return _y(d.serializer,p)})}}}}}}(i,a);throw a.Wu(`Unsupported field value: ${Bf(i)}`)}(n,e)}function ZC(n,e){const t={};return VA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(n,(i,a)=>{const o=Nl(a,e.qu(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function eR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bt||n instanceof Py||n instanceof dl||n instanceof Tn||n instanceof Hf||n instanceof Ly)}function jy(n,e,t){if(!eR(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Bf(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function M_(n,e,t){if((e=dt(e))instanceof qf)return e._internalPath;if(typeof e=="string")return By(n,e);throw ef("Field path arguments must be of type string or ",n,!1,void 0,t)}const pP=new RegExp("[~\\*/\\[\\]]");function By(n,e,t){if(e.search(pP)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qf(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ef(n,e,t,i,a){const o=i&&!i.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new de(ie.INVALID_ARGUMENT,d+n+m)}function tR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,i,a,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gP extends nR{data(){return super.data()}}function zy(n,e){return typeof e=="string"?By(n,e):e instanceof qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fy{}class yP extends Fy{}function vP(n,e,...t){let i=[];e instanceof Fy&&i.push(e),i=i.concat(t),function(o){const u=o.filter(m=>m instanceof qy).length,d=o.filter(m=>m instanceof Qf).length;if(u>1||u>0&&d>0)throw new de(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Qf extends yP{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Qf(e,t,i)}_apply(e){const t=this._parse(e);return iR(e._query,t),new xl(e.firestore,e.converter,w_(e._query,t))}_parse(e){const t=Vy(e.firestore);return function(o,u,d,m,p,y,v){let w;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new de(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){fb(v,y);const D=[];for(const j of v)D.push(db(m,o,j));w={arrayValue:{values:D}}}else w=db(m,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||fb(v,y),w=mP(d,u,v,y==="in"||y==="not-in");return Nt.create(p,y,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function EP(n,e,t){const i=e,a=zy("where",n);return Qf._create(a,i,t)}class qy extends Fy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,o){let u=a;const d=o.getFlattenedFilters();for(const m of d)iR(u,m),u=w_(u,m)}(e._query,t),new xl(e.firestore,e.converter,w_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function db(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new de(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JA(e)&&t.indexOf("/")!==-1)throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ht.fromString(t));if(!ve.isDocumentKey(i))throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Iw(n,new ve(i))}if(t instanceof Tn)return Iw(n,t._key);throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(t)}.`)}function fb(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iR(n,e){const t=function(a,o){for(const u of a)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TP{convertValue(e,t="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return $s(e,(a,o)=>{i[a]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,a;const o=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[Gd].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>At(u.doubleValue));return new Ly(o)}convertGeoPoint(e){return new Py(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Df(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const t=Us(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ht.fromString(e);tt(TC(i));const a=new pc(i.get(1),i.get(3)),o=new ve(i.popFirst(5));return a.isEqual(t)||kr(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rR extends nR{constructor(e,t,i,a,o,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class kd extends rR{data(e={}){return super.data(e)}}class bP{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Xu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new kd(this._firestore,this._userDataWriter,i.key,i,new Xu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(d=>{const m=new kd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const m=new kd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:SP(d.type),doc:m,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){n=Mr(n,Tn);const e=Mr(n.firestore,Lc);return nP(My(e),n._key).then(t=>RP(e,n,t))}class sR extends TP{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function P_(n){n=Mr(n,xl);const e=Mr(n.firestore,Lc),t=My(e),i=new sR(e);return _P(n._query),iP(t,n._query).then(a=>new bP(e,i,n,a))}function L_(n,e,t){n=Mr(n,Tn);const i=Mr(n.firestore,Lc),a=wP(n.converter,e,t);return aR(i,[cP(Vy(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ji.none())])}function CP(n,e,t,...i){n=Mr(n,Tn);const a=Mr(n.firestore,Lc),o=Vy(a);let u;return u=typeof(e=dt(e))=="string"||e instanceof qf?fP(o,"updateDoc",n._key,e,t,i):dP(o,"updateDoc",n._key,e),aR(a,[u.toMutation(n._key,ji.exists(!0))])}function aR(n,e){return function(i,a){const o=new xr;return i.asyncQueue.enqueueAndForget(async()=>HM(await tP(i),a,o)),o.promise}(My(n),e)}function RP(n,e,t){const i=t.docs.get(e._key),a=new sR(n);return new rR(n,a,e._key,i,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}function IP(...n){return new Uy("arrayUnion",n)}(function(e,t=!0){(function(a){Al=a})(Ga),_i(new si("firestore",(i,{instanceIdentifier:a,options:o})=>{const u=i.getProvider("app").getImmediate(),d=new Lc(new fk(i.getProvider("auth-internal")),new gk(u,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new de(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(p.options.projectId,y)}(u,a),u);return o=Object.assign({useFetchStreams:t},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),xn(_w,yw,e),xn(_w,yw,"esm2017")})();var xP="firebase",NP="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(xP,NP,"app");const oR="@firebase/installations",Hy="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1e4,uR=`w:${Hy}`,cR="FIS_v2",DP="https://firebaseinstallations.googleapis.com/v1",kP=60*60*1e3,OP="installations",MP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Va=new Ha(OP,MP,PP);function hR(n){return n instanceof vi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR({projectId:n}){return`${DP}/projects/${n}/installations`}function fR(n){return{token:n.token,requestStatus:2,expiresIn:VP(n.expiresIn),creationTime:Date.now()}}async function mR(n,e){const i=(await e.json()).error;return Va.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function pR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function LP(n,{refreshToken:e}){const t=pR(n);return t.append("Authorization",UP(e)),t}async function gR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function VP(n){return Number(n.replace("s","000"))}function UP(n){return`${cR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=dR(n),a=pR(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:t,authVersion:cR,appId:n.appId,sdkVersion:uR},d={method:"POST",headers:a,body:JSON.stringify(u)},m=await gR(()=>fetch(i,d));if(m.ok){const p=await m.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:fR(p.authToken)}}else throw await mR("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^[cdef][\w-]{21}$/,V_="";function FP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=qP(n);return zP.test(t)?t:V_}catch{return V_}}function qP(n){return BP(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Map;function vR(n,e){const t=$f(n);ER(t,e),HP(t,e)}function ER(n,e){const t=yR.get(n);if(t)for(const i of t)i(e)}function HP(n,e){const t=GP();t&&t.postMessage({key:n,fid:e}),KP()}let Da=null;function GP(){return!Da&&"BroadcastChannel"in self&&(Da=new BroadcastChannel("[Firebase] FID Change"),Da.onmessage=n=>{ER(n.data.key,n.data.fid)}),Da}function KP(){yR.size===0&&Da&&(Da.close(),Da=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firebase-installations-database",$P=1,Ua="firebase-installations-store";let Cg=null;function Gy(){return Cg||(Cg=SA(QP,$P,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ua)}}})),Cg}async function tf(n,e){const t=$f(n),a=(await Gy()).transaction(Ua,"readwrite"),o=a.objectStore(Ua),u=await o.get(t);return await o.put(e,t),await a.done,(!u||u.fid!==e.fid)&&vR(n,e.fid),e}async function TR(n){const e=$f(n),i=(await Gy()).transaction(Ua,"readwrite");await i.objectStore(Ua).delete(e),await i.done}async function Yf(n,e){const t=$f(n),a=(await Gy()).transaction(Ua,"readwrite"),o=a.objectStore(Ua),u=await o.get(t),d=e(u);return d===void 0?await o.delete(t):await o.put(d,t),await a.done,d&&(!u||u.fid!==d.fid)&&vR(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ky(n){let e;const t=await Yf(n.appConfig,i=>{const a=YP(i),o=WP(n,a);return e=o.registrationPromise,o.installationEntry});return t.fid===V_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function YP(n){const e=n||{fid:FP(),registrationStatus:0};return wR(e)}function WP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Va.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=XP(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:JP(n)}:{installationEntry:e}}async function XP(n,e){try{const t=await jP(n,e);return tf(n.appConfig,t)}catch(t){throw hR(t)&&t.customData.serverCode===409?await TR(n.appConfig):await tf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function JP(n){let e=await mb(n.appConfig);for(;e.registrationStatus===1;)await _R(100),e=await mb(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Ky(n);return i||t}return e}function mb(n){return Yf(n,e=>{if(!e)throw Va.create("installation-not-found");return wR(e)})}function wR(n){return ZP(n)?{fid:n.fid,registrationStatus:0}:n}function ZP(n){return n.registrationStatus===1&&n.registrationTime+lR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL({appConfig:n,heartbeatServiceProvider:e},t){const i=tL(n,t),a=LP(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:uR,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(u)},m=await gR(()=>fetch(i,d));if(m.ok){const p=await m.json();return fR(p)}else throw await mR("Generate Auth Token",m)}function tL(n,{fid:e}){return`${dR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qy(n,e=!1){let t;const i=await Yf(n.appConfig,o=>{if(!bR(o))throw Va.create("not-registered");const u=o.authToken;if(!e&&rL(u))return o;if(u.requestStatus===1)return t=nL(n,e),o;{if(!navigator.onLine)throw Va.create("app-offline");const d=aL(o);return t=iL(n,d),d}});return t?await t:i.authToken}async function nL(n,e){let t=await pb(n.appConfig);for(;t.authToken.requestStatus===1;)await _R(100),t=await pb(n.appConfig);const i=t.authToken;return i.requestStatus===0?Qy(n,e):i}function pb(n){return Yf(n,e=>{if(!bR(e))throw Va.create("not-registered");const t=e.authToken;return oL(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function iL(n,e){try{const t=await eL(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await tf(n.appConfig,i),t}catch(t){if(hR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await TR(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await tf(n.appConfig,i)}throw t}}function bR(n){return n!==void 0&&n.registrationStatus===2}function rL(n){return n.requestStatus===2&&!sL(n)}function sL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+kP}function aL(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function oL(n){return n.requestStatus===1&&n.requestTime+lR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(n){const e=n,{installationEntry:t,registrationPromise:i}=await Ky(e);return i?i.catch(console.error):Qy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(n,e=!1){const t=n;return await cL(t),(await Qy(t,e)).token}async function cL(n){const{registrationPromise:e}=await Ky(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){if(!n||!n.options)throw Rg("App Configuration");if(!n.name)throw Rg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Rg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Rg(n){return Va.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="installations",dL="installations-internal",fL=n=>{const e=n.getProvider("app").getImmediate(),t=hL(e),i=Qs(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},mL=n=>{const e=n.getProvider("app").getImmediate(),t=Qs(e,SR).getImmediate();return{getId:()=>lL(t),getToken:a=>uL(t,a)}};function pL(){_i(new si(SR,fL,"PUBLIC")),_i(new si(dL,mL,"PRIVATE"))}pL();xn(oR,Hy);xn(oR,Hy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="analytics",gL="firebase_id",_L="origin",yL=60*1e3,vL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$y="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new Nc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new Ha("analytics","Analytics",EL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(n){if(!n.startsWith($y)){const e=jn.create("invalid-gtag-resource",{gtagURL:n});return Nn.warn(e.message),""}return n}function AR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function wL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function bL(n,e){const t=wL("firebase-js-sdk-policy",{createScriptURL:TL}),i=document.createElement("script"),a=`${$y}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function SL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function AL(n,e,t,i,a,o){const u=i[a];try{if(u)await e[u];else{const m=(await AR(t)).find(p=>p.measurementId===a);m&&await e[m.appId]}}catch(d){Nn.error(d)}n("config",a,o)}async function CL(n,e,t,i,a){try{let o=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const d=await AR(t);for(const m of u){const p=d.find(v=>v.measurementId===m),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,a||{})}catch(o){Nn.error(o)}}function RL(n,e,t,i){async function a(o,...u){try{if(o==="event"){const[d,m]=u;await CL(n,e,t,d,m)}else if(o==="config"){const[d,m]=u;await AL(n,e,t,i,d,m)}else if(o==="consent"){const[d,m]=u;n("consent",d,m)}else if(o==="get"){const[d,m,p]=u;n("get",d,m,p)}else if(o==="set"){const[d]=u;n("set",d)}else n(o,...u)}catch(d){Nn.error(d)}}return a}function IL(n,e,t,i,a){let o=function(...u){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(o=window[a]),window[a]=RL(o,n,e,t),{gtagCore:o,wrappedGtag:window[a]}}function xL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($y)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=30,DL=1e3;class kL{constructor(e={},t=DL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const CR=new kL;function OL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function ML(n){var e;const{appId:t,apiKey:i}=n,a={method:"GET",headers:OL(i)},o=vL.replace("{app-id}",t),u=await fetch(o,a);if(u.status!==200&&u.status!==304){let d="";try{const m=await u.json();!((e=m.error)===null||e===void 0)&&e.message&&(d=m.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:d})}return u.json()}async function PL(n,e=CR,t){const{appId:i,apiKey:a,measurementId:o}=n.options;if(!i)throw jn.create("no-app-id");if(!a){if(o)return{measurementId:o,appId:i};throw jn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new UL;return setTimeout(async()=>{d.abort()},yL),RR({appId:i,apiKey:a,measurementId:o},u,d,e)}async function RR(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=CR){var o;const{appId:u,measurementId:d}=n;try{await LL(i,e)}catch(m){if(d)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:u,measurementId:d};throw m}try{const m=await ML(n);return a.deleteThrottleMetadata(u),m}catch(m){const p=m;if(!VL(p)){if(a.deleteThrottleMetadata(u),d)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:d};throw m}const y=Number((o=p==null?void 0:p.customData)===null||o===void 0?void 0:o.httpStatus)===503?ow(t,a.intervalMillis,NL):ow(t,a.intervalMillis),v={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return a.setThrottleMetadata(u,v),Nn.debug(`Calling attemptFetch again in ${y} millis`),RR(n,v,i,a)}}function LL(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),o=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(o),i(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function VL(n){if(!(n instanceof vi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class UL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jL(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const o=await e,u=Object.assign(Object.assign({},i),{send_to:o});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(){if(vA())try{await EA()}catch(n){return Nn.warn(jn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Nn.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zL(n,e,t,i,a,o,u){var d;const m=PL(n);m.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>Nn.error(A)),e.push(m);const p=BL().then(A=>{if(A)return i.getId()}),[y,v]=await Promise.all([m,p]);xL(o)||bL(o,y.measurementId),a("js",new Date);const w=(d=u==null?void 0:u.config)!==null&&d!==void 0?d:{};return w[_L]="firebase",w.update=!0,v!=null&&(w[gL]=v),a("config",y.measurementId,w),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.app=e}_delete(){return delete ic[this.app.options.appId],Promise.resolve()}}let ic={},gb=[];const _b={};let Ig="dataLayer",qL="gtag",yb,IR,vb=!1;function HL(){const n=[];if(_A()&&n.push("This is a browser extension environment."),q2()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=jn.create("invalid-analytics-context",{errorInfo:e});Nn.warn(t.message)}}function GL(n,e,t){HL();const i=n.options.appId;if(!i)throw jn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(ic[i]!=null)throw jn.create("already-exists",{id:i});if(!vb){SL(Ig);const{wrappedGtag:o,gtagCore:u}=IL(ic,gb,_b,Ig,qL);IR=o,yb=u,vb=!0}return ic[i]=zL(n,gb,_b,e,yb,Ig,t),new FL(n)}function KL(n=If()){n=dt(n);const e=Qs(n,nf);return e.isInitialized()?e.getImmediate():QL(n)}function QL(n,e={}){const t=Qs(n,nf);if(t.isInitialized()){const a=t.getImmediate();if(rl(e,t.getOptions()))return a;throw jn.create("already-initialized")}return t.initialize({options:e})}function $L(n,e,t,i){n=dt(n),jL(IR,ic[n.app.options.appId],e,t,i).catch(a=>Nn.error(a))}const Eb="@firebase/analytics",Tb="0.10.11";function YL(){_i(new si(nf,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return GL(i,a,t)},"PUBLIC")),_i(new si("analytics-internal",n,"PRIVATE")),xn(Eb,Tb),xn(Eb,Tb,"esm2017");function n(e){try{const t=e.getProvider(nf).getImmediate();return{logEvent:(i,a,o)=>$L(t,i,a,o)}}catch(t){throw jn.create("interop-component-reg-failed",{reason:t})}}}YL();function Yy(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function xR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WL=xR,NR=new Ha("auth","Firebase",xR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Nc("@firebase/auth");function XL(n,...e){rf.logLevel<=Ue.WARN&&rf.warn(`Auth (${Ga}): ${n}`,...e)}function Od(n,...e){rf.logLevel<=Ue.ERROR&&rf.error(`Auth (${Ga}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,...e){throw Xy(n,...e)}function pi(n,...e){return Xy(n,...e)}function Wy(n,e,t){const i=Object.assign(Object.assign({},WL()),{[e]:t});return new Ha("auth","Firebase",i).create(e,{appName:n.name})}function Ma(n){return Wy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JL(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Hi(n,"argument-error"),Wy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return NR.create(n,...e)}function Se(n,e,...t){if(!n)throw Xy(e,...t)}function Sr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Od(e),new Error(e)}function Pr(n,e){n||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZL(){return wb()==="http:"||wb()==="https:"}function wb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZL()||_A()||"connection"in navigator)?navigator.onLine:!0}function t4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pr(t>e,"Short delay should be less than long delay!"),this.isMobile=ly()||yA()}get(){return e4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(n,e){Pr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new Vc(3e4,6e4);function Zy(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $a(n,e,t,i,a={}){return kR(n,a,async()=>{let o={},u={};i&&(e==="GET"?u=i:o={body:JSON.stringify(i)});const d=Sl(Object.assign({key:n.config.apiKey},u)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},o);return j2()||(p.referrerPolicy="no-referrer"),DR.fetch()(OR(n,n.config.apiHost,t,d),p)})}async function kR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},n4),e);try{const a=new s4(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Ed(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Ed(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Ed(n,"user-disabled",u);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Wy(n,y,p);Hi(n,y)}}catch(a){if(a instanceof vi)throw a;Hi(n,"network-request-failed",{message:String(a)})}}async function r4(n,e,t,i,a={}){const o=await $a(n,e,t,i,a);return"mfaPendingCredential"in o&&Hi(n,"multi-factor-auth-required",{_serverResponse:o}),o}function OR(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?Jy(n.config,a):`${n.config.apiScheme}://${a}`}class s4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),i4.get())})}}function Ed(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=pi(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(n,e){return $a(n,"POST","/v1/accounts:delete",e)}async function MR(n,e){return $a(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o4(n,e=!1){const t=dt(n),i=await t.getIdToken(e),a=ev(i);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:a,token:i,authTime:rc(xg(a.auth_time)),issuedAtTime:rc(xg(a.iat)),expirationTime:rc(xg(a.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function xg(n){return Number(n)*1e3}function ev(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const a=Bd(t);return a?JSON.parse(a):(Od("Failed to decode base64 JWT payload"),null)}catch(a){return Od("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function bb(n){const e=ev(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof vi&&l4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function l4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(n){var e;const t=n.auth,i=await n.getIdToken(),a=await fl(n,MR(t,{idToken:i}));Se(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?PR(o.providerUserInfo):[],d=h4(n.providerData,u),m=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(d!=null&&d.length),y=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new j_(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function c4(n){const e=dt(n);await sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h4(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function PR(n){return n.map(e=>{var{providerId:t}=e,i=Yy(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(n,e){const t=await kR(n,{},async()=>{const i=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,u=OR(n,a,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",DR.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function f4(n,e){return $a(n,"POST","/v2/accounts:revokeToken",Zy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=bb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await d4(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,u=new Jo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Se(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(Se(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ar{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,o=Yy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new u4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new j_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await fl(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return o4(this,e)}reload(){return c4(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await sf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(Ma(this.auth));const e=await this.getIdToken();return await fl(this,a4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,o,u,d,m,p,y;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,w=(a=t.email)!==null&&a!==void 0?a:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(u=t.photoURL)!==null&&u!==void 0?u:void 0,j=(d=t.tenantId)!==null&&d!==void 0?d:void 0,V=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,F=(p=t.createdAt)!==null&&p!==void 0?p:void 0,G=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:L,emailVerified:Y,isAnonymous:ee,providerData:X,stsTokenManager:k}=t;Se(L&&k,e,"internal-error");const R=Jo.fromJSON(this.name,k);Se(typeof L=="string",e,"internal-error"),Es(v,e.name),Es(w,e.name),Se(typeof Y=="boolean",e,"internal-error"),Se(typeof ee=="boolean",e,"internal-error"),Es(A,e.name),Es(D,e.name),Es(j,e.name),Es(V,e.name),Es(F,e.name),Es(G,e.name);const S=new Ar({uid:L,auth:e,email:w,emailVerified:Y,displayName:v,isAnonymous:ee,photoURL:D,phoneNumber:A,tenantId:j,stsTokenManager:R,createdAt:F,lastLoginAt:G});return X&&Array.isArray(X)&&(S.providerData=X.map(N=>Object.assign({},N))),V&&(S._redirectEventId=V),S}static async _fromIdTokenResponse(e,t,i=!1){const a=new Jo;a.updateFromServerResponse(t);const o=new Ar({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await sf(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?PR(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),d=new Jo;d.updateFromIdToken(i);const m=new Ar({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new j_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Map;function Cr(n){Pr(n instanceof Function,"Expected a class definition");let e=Sb.get(n);return e?(Pr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Sb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LR.type="NONE";const Ab=LR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(n,e,t){return`firebase:${n}:${e}:${t}`}class Zo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=Md(this.userKey,a.apiKey,o),this.fullPersistenceKey=Md("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Zo(Cr(Ab),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||Cr(Ab);const u=Md(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const y=await p._get(u);if(y){const v=Ar._fromJSON(e,y);p!==o&&(d=v),o=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new Zo(o,e,i):(o=m[0],d&&await o._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Zo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FR(e))return"Blackberry";if(qR(e))return"Webos";if(UR(e))return"Safari";if((e.includes("chrome/")||jR(e))&&!e.includes("edge/"))return"Chrome";if(zR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function VR(n=fn()){return/firefox\//i.test(n)}function UR(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jR(n=fn()){return/crios\//i.test(n)}function BR(n=fn()){return/iemobile/i.test(n)}function zR(n=fn()){return/android/i.test(n)}function FR(n=fn()){return/blackberry/i.test(n)}function qR(n=fn()){return/webos/i.test(n)}function tv(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function m4(n=fn()){var e;return tv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p4(){return B2()&&document.documentMode===10}function HR(n=fn()){return tv(n)||zR(n)||qR(n)||FR(n)||/windows phone/i.test(n)||BR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n,e=[]){let t;switch(n){case"Browser":t=Cb(fn());break;case"Worker":t=`${Cb(fn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ga}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((u,d)=>{try{const m=e(o);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(n,e={}){return $a(n,"GET","/v2/passwordPolicy",Zy(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=6;class v4{constructor(e){var t,i,a,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:y4,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,o,u,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(o=m.containsUppercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rb(this),this.idTokenSubscription=new Rb(this),this.beforeStateQueue=new g4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await MR(this,{idToken:e}),i=await Ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ii(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(Ma(this));const t=e?dt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _4(this),t=new v4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await f4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&XL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wf(n){return dt(n)}class Rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=W2(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T4(n){nv=n}function w4(n){return nv.loadJS(n)}function b4(){return nv.gapiScript}function S4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n,e){const t=Qs(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(rl(o,e??{}))return a;Hi(a,"already-initialized")}return t.initialize({options:e})}function C4(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Cr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function R4(n,e,t){const i=Wf(n);Se(i._canInitEmulator,i,"emulator-config-failed"),Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=KR(e),{host:u,port:d}=I4(e),m=d===null?"":`:${d}`;i.config.emulator={url:`${o}//${u}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),x4()}function KR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function I4(n){const e=KR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:Ib(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:Ib(u)}}}function Ib(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function x4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,e){return r4(n,"POST","/v1/accounts:signInWithIdp",Zy(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="http://localhost";class ja extends QR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,o=Yy(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new ja(i,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,el(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:N4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends iv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Uc{constructor(){super("facebook.com")}static credential(e){return ja._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ja._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return br.credential(t,i)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Uc{constructor(){super("github.com")}static credential(e){return ja._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Uc{constructor(){super("twitter.com")}static credential(e,t){return ja._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return As.credential(t,i)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await Ar._fromIdTokenResponse(e,i,a),u=xb(i);return new ml({user:o,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=xb(i);return new ml({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function xb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends vi{constructor(e,t,i,a){var o;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new af(e,t,i,a)}}function $R(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(n,o,e,i):o})}async function D4(n,e,t=!1){const i=await fl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ml._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(n,e,t=!1){const{auth:i}=n;if(ii(i.app))return Promise.reject(Ma(i));const a="reauthenticate";try{const o=await fl(n,$R(i,a,e,n),t);Se(o.idToken,i,"internal-error");const u=ev(o.idToken);Se(u,i,"internal-error");const{sub:d}=u;return Se(n.uid===d,i,"user-mismatch"),ml._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Hi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(n,e,t=!1){if(ii(n.app))return Promise.reject(Ma(n));const i="signIn",a=await $R(n,i,e),o=await ml._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(n,e){return $a(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=dt(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await fl(i,M4(i.auth,o));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function L4(n,e,t,i){return dt(n).onIdTokenChanged(e,t,i)}function V4(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function U4(n){return dt(n).signOut()}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=1e3,B4=10;class WR extends YR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);p4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,B4):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WR.type="LOCAL";const z4=WR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR extends YR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XR.type="SESSION";const JR=XR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Xf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(u).map(async p=>p(t.origin,o)),m=await F4(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((d,m)=>{const p=rv("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(w.data.response);break;default:clearTimeout(y),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function H4(n){zi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function G4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Q4(){return ZR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebaseLocalStorageDb",$4=1,lf="firebaseLocalStorage",t1="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jf(n,e){return n.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function Y4(){const n=indexedDB.deleteDatabase(e1);return new jc(n).toPromise()}function B_(){const n=indexedDB.open(e1,$4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(lf,{keyPath:t1})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(lf)?e(i):(i.close(),await Y4(),e(await B_()))})})}async function Nb(n,e,t){const i=Jf(n,!0).put({[t1]:e,value:t});return new jc(i).toPromise()}async function W4(n,e){const t=Jf(n,!1).get(e),i=await new jc(t).toPromise();return i===void 0?null:i.value}function Db(n,e){const t=Jf(n,!0).delete(e);return new jc(t).toPromise()}const X4=800,J4=3;class n1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await B_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>J4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(Q4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await G4(),!this.activeServiceWorker)return;this.sender=new q4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||K4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B_();return await Nb(e,of,"1"),await Db(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Nb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>W4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Db(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Jf(a,!1).getAll();return new jc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n1.type="LOCAL";const Z4=n1;new Vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(n,e){return e?Cr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends QR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eV(n){return O4(n.auth,new sv(n),n.bypassAuthState)}function tV(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),k4(t,new sv(n),n.bypassAuthState)}async function nV(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),D4(t,new sv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eV;case"linkViaPopup":case"linkViaRedirect":return nV;case"reauthViaPopup":case"reauthViaRedirect":return tV;default:Hi(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new Vc(2e3,1e4);async function rV(n,e,t){if(ii(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const i=Wf(n);JL(n,e,iv);const a=i1(i,t);return new ka(i,"signInViaPopup",e,a).executeNotNull()}class ka extends r1{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=rv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iV.get())};e()}}ka.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV="pendingRedirect",Pd=new Map;class aV extends r1{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{const i=await oV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oV(n,e){const t=cV(e),i=uV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function lV(n,e){Pd.set(n._key(),e)}function uV(n){return Cr(n._redirectPersistence)}function cV(n){return Md(sV,n.config.apiKey,n.name)}async function hV(n,e,t=!1){if(ii(n.app))return Promise.reject(Ma(n));const i=Wf(n),a=i1(i,e),u=await new aV(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=10*60*1e3;class fV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!s1(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dV&&this.cachedEventUids.clear(),this.cachedEventUids.has(kb(e))}saveEventToCache(e){this.cachedEventUids.add(kb(e)),this.lastProcessedEventTime=Date.now()}}function kb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function s1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(n,e={}){return $a(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_V=/^https?/;async function yV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pV(n);for(const t of e)try{if(vV(t))return}catch{}Hi(n,"unauthorized-domain")}function vV(n){const e=U_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!_V.test(t))return!1;if(gV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new Vc(3e4,6e4);function Ob(){const n=zi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TV(n){return new Promise((e,t)=>{var i,a,o;function u(){Ob(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ob(),t(pi(n,"network-request-failed"))},timeout:EV.get()})}if(!((a=(i=zi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=zi().gapi)===null||o===void 0)&&o.load)u();else{const d=S4("iframefcb");return zi()[d]=()=>{gapi.load?u():t(pi(n,"network-request-failed"))},w4(`${b4()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function wV(n){return Ld=Ld||TV(n),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new Vc(5e3,15e3),SV="__/auth/iframe",AV="emulator/auth/iframe",CV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IV(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jy(e,AV):`https://${n.config.authDomain}/${SV}`,i={apiKey:e.apiKey,appName:n.name,v:Ga},a=RV.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Sl(i).slice(1)}`}async function xV(n){const e=await wV(n),t=zi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:IV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CV,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const u=pi(n,"network-request-failed"),d=zi().setTimeout(()=>{o(u)},bV.get());function m(){zi().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DV=500,kV=600,OV="_blank",MV="http://localhost";class Mb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PV(n,e,t,i=DV,a=kV){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},NV),{width:i.toString(),height:a.toString(),top:o,left:u}),p=fn().toLowerCase();t&&(d=jR(p)?OV:t),VR(p)&&(e=e||MV,m.scrollbars="yes");const y=Object.entries(m).reduce((w,[A,D])=>`${w}${A}=${D},`,"");if(m4(p)&&d!=="_self")return LV(e||"",d),new Mb(null);const v=window.open(e||"",d,y);Se(v,n,"popup-blocked");try{v.focus()}catch{}return new Mb(v)}function LV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="__/auth/handler",UV="emulator/auth/handler",jV=encodeURIComponent("fac");async function Pb(n,e,t,i,a,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ga,eventId:a};if(e instanceof iv){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",c_(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof Uc){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),p=m?`#${jV}=${encodeURIComponent(m)}`:"";return`${BV(n)}?${Sl(d).slice(1)}${p}`}function BV({config:n}){return n.emulator?Jy(n,UV):`https://${n.authDomain}/${VV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class zV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JR,this._completeRedirectFn=hV,this._overrideRedirectResult=lV}async _openPopup(e,t,i,a){var o;Pr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await Pb(e,t,i,U_(),a);return PV(e,u,rv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await Pb(e,t,i,U_(),a);return H4(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Pr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await xV(e),i=new fV(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ng,{type:Ng},a=>{var o;const u=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Ng];u!==void 0&&t(!!u),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HR()||UR()||tv()}}const FV=zV;var Lb="@firebase/auth",Vb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GV(n){_i(new si("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GR(n)},p=new E4(i,a,o,m);return C4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_i(new si("auth-internal",e=>{const t=Wf(e.getProvider("auth").getImmediate());return(i=>new qV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(Lb,Vb,HV(n)),xn(Lb,Vb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=5*60,QV=pA("authIdTokenMaxAge")||KV;let Ub=null;const $V=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>QV)return;const a=t==null?void 0:t.token;Ub!==a&&(Ub=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Zf(n=If()){const e=Qs(n,"auth");if(e.isInitialized())return e.getImmediate();const t=A4(n,{popupRedirectResolver:FV,persistence:[Z4,z4,JR]}),i=pA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=$V(o.toString());V4(t,u,()=>u(t.currentUser)),L4(t,d=>u(d))}}const a=dA("auth");return a&&R4(t,`http://${a}`),t}function YV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}T4({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const o=pi("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",YV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GV("Browser");var jb={};const Bb="@firebase/database",zb="1.0.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a1="";function WV(n){a1=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),jt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:hc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Qi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new XV(e)}}catch{}return new JV},Oa=o1("localStorage"),ZV=o1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Nc("@firebase/database"),eU=function(){let n=1;return function(){return n++}}(),l1=function(n){const e=Z2(n),t=new Y2;t.update(e);const i=t.digest();return oy.encodeByteArray(i)},Bc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Bc.apply(null,i):typeof i=="object"?e+=jt(i):e+=i,e+=" "}return e};let sc=null,Fb=!0;const tU=function(n,e){ae(!0,"Can't turn on custom loggers persistently."),tl.logLevel=Ue.VERBOSE,sc=tl.log.bind(tl)},nn=function(...n){if(Fb===!0&&(Fb=!1,sc===null&&ZV.get("logging_enabled")===!0&&tU()),sc){const e=Bc.apply(null,n);sc(e)}},zc=function(n){return function(...e){nn(n,...e)}},z_=function(...n){const e="FIREBASE INTERNAL ERROR: "+Bc(...n);tl.error(e)},Lr=function(...n){const e=`FIREBASE FATAL ERROR: ${Bc(...n)}`;throw tl.error(e),new Error(e)},wn=function(...n){const e="FIREBASE WARNING: "+Bc(...n);tl.warn(e)},nU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},av=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},iU=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},pl="[MIN_NAME]",Ba="[MAX_NAME]",Ya=function(n,e){if(n===e)return 0;if(n===pl||e===Ba)return-1;if(e===pl||n===Ba)return 1;{const t=qb(n),i=qb(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},rU=function(n,e){return n===e?0:n<e?-1:1},qu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+jt(e))},ov=function(n){if(typeof n!="object"||n===null)return jt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=jt(e[i]),t+=":",t+=ov(n[e[i]]);return t+="}",t},u1=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function an(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const c1=function(n){ae(!av(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,o,u,d,m;n===0?(o=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=d+i,u=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(o=0,u=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(m=t;m;m-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(a?1:0),p.reverse();const y=p.join("");let v="";for(m=0;m<64;m+=8){let w=parseInt(y.substr(m,8),2).toString(16);w.length===1&&(w="0"+w),v=v+w}return v.toLowerCase()},sU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},aU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function oU(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const lU=new RegExp("^-?(0*)\\d{1,10}$"),uU=-2147483648,cU=2147483647,qb=function(n){if(lU.test(n)){const e=Number(n);if(e>=uU&&e<=cU)return e}return null},Dl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw wn("Exception was thrown by user callback.",t),e},Math.floor(0))}},hU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ac=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,ii(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){wn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wn(e)}}class Vd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Vd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="5",h1="v",d1="s",f1="r",m1="f",p1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,g1="ls",_1="p",F_="ac",y1="websocket",v1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t,i,a,o=!1,u="",d=!1,m=!1){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Oa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function mU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function T1(n,e,t){ae(typeof e=="string","typeof type must == string"),ae(typeof t=="object","typeof params must == object");let i;if(e===y1)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===v1)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mU(n)&&(t.ns=n.namespace);const a=[];return an(t,(o,u)=>{a.push(o+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.counters_={}}incrementCounter(e,t=1){Qi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return k2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg={},kg={};function uv(n){const e=n.toString();return Dg[e]||(Dg[e]=new pU),Dg[e]}function gU(n,e){const t=n.toString();return kg[t]||(kg[t]=e()),kg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Dl(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="start",yU="close",vU="pLPCommand",EU="pRTLPCB",w1="id",b1="pw",S1="ser",TU="cb",wU="seg",bU="ts",SU="d",AU="dframe",A1=1870,C1=30,CU=A1-C1,RU=25e3,IU=3e4;class Wo{constructor(e,t,i,a,o,u,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zc(e),this.stats_=uv(t),this.urlFn=m=>(this.appCheckToken&&(m[F_]=this.appCheckToken),T1(t,v1,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _U(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IU)),iU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cv((...o)=>{const[u,d,m,p,y]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Hb)this.id=d,this.password=m;else if(u===yU)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[Hb]="t",i[S1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[TU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[h1]=lv,this.transportSessionId&&(i[d1]=this.transportSessionId),this.lastSessionId&&(i[g1]=this.lastSessionId),this.applicationId&&(i[_1]=this.applicationId),this.appCheckToken&&(i[F_]=this.appCheckToken),typeof location<"u"&&location.hostname&&p1.test(location.hostname)&&(i[f1]=m1);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wo.forceAllow_=!0}static forceDisallow(){Wo.forceDisallow_=!0}static isAvailable(){return Wo.forceAllow_?!0:!Wo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sU()&&!aU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=cA(t),a=u1(i,CU);for(let o=0;o<a.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[AU]="t",i[w1]=e,i[b1]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cv{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=eU(),window[vU+this.uniqueCallbackIdentifier]=e,window[EU+this.uniqueCallbackIdentifier]=t,this.myIFrame=cv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){nn("frame writing exception"),d.stack&&nn(d.stack),nn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[w1]=this.myID,e[b1]=this.myPW,e[S1]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C1+i.length<=A1;){const u=this.pendingSegs.shift();i=i+"&"+wU+a+"="+u.seg+"&"+bU+a+"="+u.ts+"&"+SU+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(RU)),o=()=>{clearTimeout(a),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=16384,NU=45e3;let uf=null;typeof MozWebSocket<"u"?uf=MozWebSocket:typeof WebSocket<"u"&&(uf=WebSocket);class fi{constructor(e,t,i,a,o,u,d){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zc(this.connId),this.stats_=uv(t),this.connURL=fi.connectionURL_(t,u,d,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,o){const u={};return u[h1]=lv,typeof location<"u"&&location.hostname&&p1.test(location.hostname)&&(u[f1]=m1),t&&(u[d1]=t),i&&(u[g1]=i),a&&(u[F_]=a),o&&(u[_1]=o),T1(e,y1,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oa.set("previous_websocket_failure",!0);try{let i;z2(),this.mySock=new uf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&uf!==null&&!fi.forceDisallow_}static previouslyFailed(){return Oa.isInMemoryStorage||Oa.get("previous_websocket_failure")===!0}markConnectionHealthy(){Oa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=hc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=u1(t,xU);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(NU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fi.responsesRequiredToBeHealthy=2;fi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{static get ALL_TRANSPORTS(){return[Wo,fi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=fi&&fi.isAvailable();let i=t&&!fi.previouslyFailed();if(e.webSocketOnly&&(t||wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[fi];else{const a=this.transports_=[];for(const o of vc.ALL_TRANSPORTS)o&&o.isAvailable()&&a.push(o);vc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=6e4,kU=5e3,OU=10*1024,MU=100*1024,Og="t",Gb="d",PU="s",Kb="r",LU="e",Qb="o",$b="a",Yb="n",Wb="p",VU="h";class UU{constructor(e,t,i,a,o,u,d,m,p,y){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=m,this.onKill_=p,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zc("c:"+this.id+":"),this.transportManager_=new vc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=ac(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>MU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>OU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Og in e){const t=e[Og];t===$b?this.upgradeIfSecondaryHealthy_():t===Kb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Qb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=qu("t",e),i=qu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$b,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Yb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=qu("t",e),i=qu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=qu(Og,e);if(Gb in e){const i=e[Gb];if(t===VU){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===Yb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===PU?this.onConnectionShutdown_(i):t===Kb?this.onReset_(i):t===LU?z_("Server Error: "+i):t===Qb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):z_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),lv!==i&&wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ac(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(DU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ac(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(kU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let o=0;o<a.length;o++)if(a[o].callback===t&&(!i||i===a[o].context)){a.splice(o,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends I1{static getInstance(){return new cf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ly()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=32,Jb=768;class st{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Je(){return new st("")}function Pe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function qs(n){return n.pieces_.length-n.pieceNum_}function ct(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new st(n.pieces_,e)}function hv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function jU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Ec(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function x1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new st(e,0)}function Tt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof st)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new st(t,0)}function je(n){return n.pieceNum_>=n.pieces_.length}function En(n,e){const t=Pe(n),i=Pe(e);if(t===null)return e;if(t===i)return En(ct(n),ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function BU(n,e){const t=Ec(n,0),i=Ec(e,0);for(let a=0;a<t.length&&a<i.length;a++){const o=Ya(t[a],i[a]);if(o!==0)return o}return t.length===i.length?0:t.length<i.length?-1:1}function dv(n,e){if(qs(n)!==qs(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function ri(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(qs(n)>qs(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class zU{constructor(e,t){this.errorPrefix_=t,this.parts_=Ec(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Rf(this.parts_[i]);N1(this)}}function FU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Rf(e),N1(n)}function qU(n){const e=n.parts_.pop();n.byteLength_-=Rf(e),n.parts_.length>0&&(n.byteLength_-=1)}function N1(n){if(n.byteLength_>Jb)throw new Error(n.errorPrefix_+"has a key path longer than "+Jb+" bytes ("+n.byteLength_+").");if(n.parts_.length>Xb)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xb+") or object contains a cycle "+xa(n))}function xa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends I1{static getInstance(){return new fv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=1e3,HU=60*5*1e3,Zb=30*1e3,GU=1.3,KU=3e4,QU="server_kill",eS=3;class Nr extends R1{constructor(e,t,i,a,o,u,d,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=d,this.authOverride_=m,this.id=Nr.nextPersistentConnectionId_++,this.log_=zc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hu,this.maxReconnectDelay_=HU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,o={r:a,a:e,b:t};this.log_(jt(o)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new xc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const d=u.d;u.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,a){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const d={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(o,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const o={p:i},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,d=>{const m=d.d,p=d.s;Nr.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",d),p!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(p,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Qi(e,"w")){const i=il(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||$2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Zb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Q2(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const o=a.s,u=a.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";a&&(o.q=i,o.t=a),this.sendRequest(u,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,o){this.initConnection_();const u={p:t,d:i};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+jt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):z_("Unrecognized action received from server: "+jt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>KU&&(this.reconnectDelay_=Hu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*GU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Nr.nextConnectionId_++,o=this.lastSessionId;let u=!1,d=null;const m=function(){d?d.close():(u=!0,i())},p=function(v){ae(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(v)};this.realtime_={close:m,sendRequest:p};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,w]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=w&&w.token,d=new UU(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,A=>{wn(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(QU)},o))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&wn(v),m())}}}interrupt(e){nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],c_(this.interruptReasons_)&&(this.reconnectDelay_=Hu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>ov(o)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new st(e).toString();let a;if(this.listens.has(i)){const o=this.listens.get(i);a=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){nn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eS&&(this.reconnectDelay_=Zb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){nn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+a1.replace(/\./g,"-")]=1,ly()?e["framework.cordova"]=1:yA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cf.getInstance().currentlyOnline();return c_(this.interruptReasons_)&&e}}Nr.nextPersistentConnectionId_=0;Nr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Le(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Le(pl,e),a=new Le(pl,t);return this.compare(i,a)!==0}minPost(){return Le.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td;class D1 extends em{static get __EMPTY_NODE(){return Td}static set __EMPTY_NODE(e){Td=e}compare(e,t){return Ya(e.name,t.name)}isDefinedOn(e){throw bl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Le.MIN}maxPost(){return new Le(Ba,Td)}makePost(e,t){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Le(e,Td)}toString(){return".key"}}const nl=new D1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,i,a,o=null){this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Xt{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??Xt.RED,this.left=a??In.EMPTY_NODE,this.right=o??In.EMPTY_NODE}copy(e,t,i,a,o){return new Xt(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return o<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return In.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return In.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Xt.RED=!0;Xt.BLACK=!1;class $U{copy(e,t,i,a,o){return this}insert(e,t,i){return new Xt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class In{constructor(e,t=In.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new In(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xt.BLACK,null,null))}remove(e){return new In(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new wd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new wd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new wd(this.root_,null,this.comparator_,!0,e)}}In.EMPTY_NODE=new $U;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n,e){return Ya(n.name,e.name)}function mv(n,e){return Ya(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_;function WU(n){q_=n}const k1=function(n){return typeof n=="number"?"number:"+c1(n):"string:"+n},O1=function(n){if(n.isLeafNode()){const e=n.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qi(e,".sv"),"Priority must be a string or number.")}else ae(n===q_||n.isEmpty(),"priority of unexpected type.");ae(n===q_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tS;class Yt{static set __childrenNodeConstructor(e){tS=e}static get __childrenNodeConstructor(){return tS}constructor(e,t=Yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),O1(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return je(e)?this:Pe(e)===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Pe(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ae(i!==".priority"||qs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ct(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+k1(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=c1(this.value_):e+=this.value_,this.lazyHash_=l1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Yt.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=Yt.VALUE_TYPE_ORDER.indexOf(t),o=Yt.VALUE_TYPE_ORDER.indexOf(i);return ae(a>=0,"Unknown leaf type: "+t),ae(o>=0,"Unknown leaf type: "+i),a===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M1,P1;function XU(n){M1=n}function JU(n){P1=n}class ZU extends em{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),o=i.compareTo(a);return o===0?Ya(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Le.MIN}maxPost(){return new Le(Ba,new Yt("[PRIORITY-POST]",P1))}makePost(e,t){const i=M1(e);return new Le(t,new Yt("[PRIORITY-POST]",i))}toString(){return".priority"}}const wt=new ZU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=Math.log(2);class t6{constructor(e){const t=o=>parseInt(Math.log(o)/e6,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hf=function(n,e,t,i){n.sort(e);const a=function(m,p){const y=p-m;let v,w;if(y===0)return null;if(y===1)return v=n[m],w=t?t(v):v,new Xt(w,v.node,Xt.BLACK,null,null);{const A=parseInt(y/2,10)+m,D=a(m,A),j=a(A+1,p);return v=n[A],w=t?t(v):v,new Xt(w,v.node,Xt.BLACK,D,j)}},o=function(m){let p=null,y=null,v=n.length;const w=function(D,j){const V=v-D,F=v;v-=D;const G=a(V+1,F),L=n[V],Y=t?t(L):L;A(new Xt(Y,L.node,j,null,G))},A=function(D){p?(p.left=D,p=D):(y=D,p=D)};for(let D=0;D<m.count;++D){const j=m.nextBitIsOne(),V=Math.pow(2,m.count-(D+1));j?w(V,Xt.BLACK):(w(V,Xt.BLACK),w(V,Xt.RED))}return y},u=new t6(n.length),d=o(u);return new In(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg;const Ho={};class Rr{static get Default(){return ae(Ho&&wt,"ChildrenNode.ts has not been loaded"),Mg=Mg||new Rr({".priority":Ho},{".priority":wt}),Mg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=il(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof In?t:null}hasIndex(e){return Qi(this.indexSet_,e.toString())}addIndex(e,t){ae(e!==nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const o=t.getIterator(Le.Wrap);let u=o.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=o.getNext();let d;a?d=hf(i,e.getCompare()):d=Ho;const m=e.toString(),p=Object.assign({},this.indexSet_);p[m]=e;const y=Object.assign({},this.indexes_);return y[m]=d,new Rr(y,p)}addToIndexes(e,t){const i=zd(this.indexes_,(a,o)=>{const u=il(this.indexSet_,o);if(ae(u,"Missing index implementation for "+o),a===Ho)if(u.isDefinedOn(e.node)){const d=[],m=t.getIterator(Le.Wrap);let p=m.getNext();for(;p;)p.name!==e.name&&d.push(p),p=m.getNext();return d.push(e),hf(d,u.getCompare())}else return Ho;else{const d=t.get(e.name);let m=a;return d&&(m=m.remove(new Le(e.name,d))),m.insert(e,e.node)}});return new Rr(i,this.indexSet_)}removeFromIndexes(e,t){const i=zd(this.indexes_,a=>{if(a===Ho)return a;{const o=t.get(e.name);return o?a.remove(new Le(e.name,o)):a}});return new Rr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu;class we{static get EMPTY_NODE(){return Gu||(Gu=new we(new In(mv),null,Rr.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&O1(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gu}updatePriority(e){return this.children_.isEmpty()?this:new we(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Gu:t}}getChild(e){const t=Pe(e);return t===null?this:this.getImmediateChild(t).getChild(ct(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ae(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Le(e,t);let a,o;t.isEmpty()?(a=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?Gu:this.priorityNode_;return new we(a,u,o)}}updateChild(e,t){const i=Pe(e);if(i===null)return t;{ae(Pe(e)!==".priority"||qs(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ct(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,o=!0;if(this.forEachChild(wt,(u,d)=>{t[u]=d.val(e),i++,o&&we.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):o=!1}),!e&&o&&a<2*i){const u=[];for(const d in t)u[d]=t[d];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+k1(this.getPriority().val())+":"),this.forEachChild(wt,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":l1(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const o=a.getPredecessorKey(new Le(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Le(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Le(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Le.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)<0;)a.getNext(),o=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Le.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)>0;)a.getNext(),o=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fc?-1:0}withIndex(e){if(e===nl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new we(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(wt),a=t.getIterator(wt);let o=i.getNext(),u=a.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=a.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===nl?null:this.indexMap_.get(e.toString())}}we.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class n6 extends we{constructor(){super(new In(mv),we.EMPTY_NODE,Rr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return we.EMPTY_NODE}isEmpty(){return!1}}const Fc=new n6;Object.defineProperties(Le,{MIN:{value:new Le(pl,we.EMPTY_NODE)},MAX:{value:new Le(Ba,Fc)}});D1.__EMPTY_NODE=we.EMPTY_NODE;Yt.__childrenNodeConstructor=we;WU(Fc);JU(Fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=!0;function Ut(n,e=null){if(n===null)return we.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Yt(t,Ut(e))}if(!(n instanceof Array)&&i6){const t=[];let i=!1;if(an(n,(u,d)=>{if(u.substring(0,1)!=="."){const m=Ut(d);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Le(u,m)))}}),t.length===0)return we.EMPTY_NODE;const o=hf(t,YU,u=>u.name,mv);if(i){const u=hf(t,wt.getCompare());return new we(o,Ut(e),new Rr({".priority":u},{".priority":wt}))}else return new we(o,Ut(e),Rr.Default)}else{let t=we.EMPTY_NODE;return an(n,(i,a)=>{if(Qi(n,i)&&i.substring(0,1)!=="."){const o=Ut(a);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Ut(e))}}XU(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6 extends em{constructor(e){super(),this.indexPath_=e,ae(!je(e)&&Pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),o=i.compareTo(a);return o===0?Ya(e.name,t.name):o}makePost(e,t){const i=Ut(e),a=we.EMPTY_NODE.updateChild(this.indexPath_,i);return new Le(t,a)}maxPost(){const e=we.EMPTY_NODE.updateChild(this.indexPath_,Fc);return new Le(Ba,e)}toString(){return Ec(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6 extends em{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Ya(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Le.MIN}maxPost(){return Le.MAX}makePost(e,t){const i=Ut(e);return new Le(t,i)}toString(){return".value"}}const a6=new s6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n){return{type:"value",snapshotNode:n}}function gl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Tc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function o6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.index_=e}updateChild(e,t,i,a,o,u){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(a).equals(i.getChild(a))&&d.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Tc(t,d)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(gl(t,i)):u.trackChildChange(wc(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(wt,(a,o)=>{t.hasChild(a)||i.trackChildChange(Tc(a,o))}),t.isLeafNode()||t.forEachChild(wt,(a,o)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(o)||i.trackChildChange(wc(a,o,u))}else i.trackChildChange(gl(a,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?we.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.indexedFilter_=new pv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bc.getStartPost_(e),this.endPost_=bc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,o,u){return this.matches(new Le(t,i))||(i=we.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,o,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=we.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(we.EMPTY_NODE);const o=this;return t.forEachChild(wt,(u,d)=>{o.matches(new Le(u,d))||(a=a.updateImmediateChild(u,we.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new bc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,o,u){return this.rangedFilter_.matches(new Le(t,i))||(i=we.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,o,u):this.fullLimitUpdateChild_(e,t,i,o,u)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=we.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=we.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;o.hasNext()&&u<this.limit_;){const d=o.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))a=a.updateImmediateChild(d.name,d.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(we.EMPTY_NODE);let o;this.reverse_?o=a.getReverseIterator(this.index_):o=a.getIterator(this.index_);let u=0;for(;o.hasNext();){const d=o.getNext();u<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?u++:a=a.updateImmediateChild(d.name,we.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,o){let u;if(this.reverse_){const v=this.index_.getCompare();u=(w,A)=>v(A,w)}else u=this.index_.getCompare();const d=e;ae(d.numChildren()===this.limit_,"");const m=new Le(t,i),p=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(d.hasChild(t)){const v=d.getImmediateChild(t);let w=a.getChildAfterChild(this.index_,p,this.reverse_);for(;w!=null&&(w.name===t||d.hasChild(w.name));)w=a.getChildAfterChild(this.index_,w,this.reverse_);const A=w==null?1:u(w,m);if(y&&!i.isEmpty()&&A>=0)return o!=null&&o.trackChildChange(wc(t,i,v)),d.updateImmediateChild(t,i);{o!=null&&o.trackChildChange(Tc(t,v));const j=d.updateImmediateChild(t,we.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(o!=null&&o.trackChildChange(gl(w.name,w.node)),j.updateImmediateChild(w.name,w.node)):j}}else return i.isEmpty()?e:y&&u(p,m)>=0?(o!=null&&(o.trackChildChange(Tc(p.name,p.node)),o.trackChildChange(gl(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(p.name,we.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pl}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ba}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wt}copy(){const e=new gv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function u6(n){return n.loadsAllData()?new pv(n.getIndex()):n.hasLimit()?new l6(n):new bc(n)}function nS(n){const e={};if(n.isDefault())return e;let t;if(n.index_===wt?t="$priority":n.index_===a6?t="$value":n.index_===nl?t="$key":(ae(n.index_ instanceof r6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=jt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=jt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+jt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=jt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+jt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function iS(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==wt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends R1{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=zc("p:rest:"),this.listens_={}}listen(e,t,i,a){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=df.getListenId_(e,i),d={};this.listens_[u]=d;const m=nS(e._queryParams);this.restRequest_(o+".json",m,(p,y)=>{let v=y;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(o,v,!1,i),il(this.listens_,u)===d){let w;p?p===401?w="permission_denied":w="rest_error:"+p:w="ok",a(w,null)}})}unlisten(e,t){const i=df.getListenId_(e,t);delete this.listens_[i]}get(e){const t=nS(e._queryParams),i=e._path.toString(),a=new xc;return this.restRequest_(i+".json",t,(o,u)=>{let d=u;o===404&&(d=null,o=null),o===null?(this.onDataUpdate_(i,d,!1,null),a.resolve(d)):a.reject(new Error(d))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,o])=>{a&&a.accessToken&&(t.auth=a.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Sl(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=hc(d.responseText)}catch{wn("Failed to parse JSON response for "+u+": "+d.responseText)}i(null,m)}else d.status!==401&&d.status!==404&&wn("Got unsuccessful REST response for "+u+" Status: "+d.status),i(d.status);i=null}},d.open("GET",u,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this.rootNode_=we.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(){return{value:null,children:new Map}}function V1(n,e,t){if(je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Pe(e);n.children.has(i)||n.children.set(i,ff());const a=n.children.get(i);e=ct(e),V1(a,e,t)}}function H_(n,e,t){n.value!==null?t(e,n.value):h6(n,(i,a)=>{const o=new st(e.toString()+"/"+i);H_(a,o,t)})}function h6(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&an(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=10*1e3,f6=30*1e3,m6=5*60*1e3;class p6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new d6(e);const i=rS+(f6-rS)*Math.random();ac(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;an(e,(a,o)=>{o>0&&Qi(this.statsToReport_,a)&&(t[a]=o,i=!0)}),i&&this.server_.reportStats(t),ac(this.reportStats_.bind(this),Math.floor(Math.random()*2*m6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mi||(mi={}));function _v(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=mi.ACK_USER_WRITE,this.source=_v()}operationForChild(e){if(je(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new st(e));return new mf(Je(),t,this.revert)}}else return ae(Pe(this.path)===e,"operationForChild called for unrelated child."),new mf(ct(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.source=e,this.path=t,this.type=mi.LISTEN_COMPLETE}operationForChild(e){return je(this.path)?new Sc(this.source,Je()):new Sc(this.source,ct(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=mi.OVERWRITE}operationForChild(e){return je(this.path)?new za(this.source,Je(),this.snap.getImmediateChild(e)):new za(this.source,ct(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=mi.MERGE}operationForChild(e){if(je(this.path)){const t=this.children.subtree(new st(e));return t.isEmpty()?null:t.value?new za(this.source,Je(),t.value):new _l(this.source,Je(),t)}else return ae(Pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _l(this.source,ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(je(e))return this.isFullyInitialized()&&!this.filtered_;const t=Pe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function _6(n,e,t,i){const a=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(o6(u.childName,u.snapshotNode))}),Ku(n,a,"child_removed",e,i,t),Ku(n,a,"child_added",e,i,t),Ku(n,a,"child_moved",o,i,t),Ku(n,a,"child_changed",e,i,t),Ku(n,a,"value",e,i,t),a}function Ku(n,e,t,i,a,o){const u=i.filter(d=>d.type===t);u.sort((d,m)=>v6(n,d,m)),u.forEach(d=>{const m=y6(n,d,o);a.forEach(p=>{p.respondsTo(d.type)&&e.push(p.createEvent(m,n.query_))})})}function y6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function v6(n,e,t){if(e.childName==null||t.childName==null)throw bl("Should only compare child_ events.");const i=new Le(e.childName,e.snapshotNode),a=new Le(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(n,e){return{eventCache:n,serverCache:e}}function oc(n,e,t,i){return tm(new Hs(e,t,i),n.serverCache)}function U1(n,e,t,i){return tm(n.eventCache,new Hs(e,t,i))}function pf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg;const E6=()=>(Pg||(Pg=new In(rU)),Pg);class ut{static fromObject(e){let t=new ut(null);return an(e,(i,a)=>{t=t.set(new st(i),a)}),t}constructor(e,t=E6()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Je(),value:this.value};if(je(e))return null;{const i=Pe(e),a=this.children.get(i);if(a!==null){const o=a.findRootMostMatchingPathAndValue(ct(e),t);return o!=null?{path:Tt(new st(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(je(e))return this;{const t=Pe(e),i=this.children.get(t);return i!==null?i.subtree(ct(e)):new ut(null)}}set(e,t){if(je(e))return new ut(t,this.children);{const i=Pe(e),o=(this.children.get(i)||new ut(null)).set(ct(e),t),u=this.children.insert(i,o);return new ut(this.value,u)}}remove(e){if(je(e))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const t=Pe(e),i=this.children.get(t);if(i){const a=i.remove(ct(e));let o;return a.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,a),this.value===null&&o.isEmpty()?new ut(null):new ut(this.value,o)}else return this}}get(e){if(je(e))return this.value;{const t=Pe(e),i=this.children.get(t);return i?i.get(ct(e)):null}}setTree(e,t){if(je(e))return t;{const i=Pe(e),o=(this.children.get(i)||new ut(null)).setTree(ct(e),t);let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),new ut(this.value,u)}}fold(e){return this.fold_(Je(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,o)=>{i[a]=o.fold_(Tt(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Je(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(je(e))return null;{const o=Pe(e),u=this.children.get(o);return u?u.findOnPath_(ct(e),Tt(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Je(),t)}foreachOnPath_(e,t,i){if(je(e))return this;{this.value&&i(t,this.value);const a=Pe(e),o=this.children.get(a);return o?o.foreachOnPath_(ct(e),Tt(t,a),i):new ut(null)}}foreach(e){this.foreach_(Je(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(Tt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.writeTree_=e}static empty(){return new gi(new ut(null))}}function lc(n,e,t){if(je(e))return new gi(new ut(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let o=i.value;const u=En(a,e);return o=o.updateChild(u,t),new gi(n.writeTree_.set(a,o))}else{const a=new ut(t),o=n.writeTree_.setTree(e,a);return new gi(o)}}}function G_(n,e,t){let i=n;return an(t,(a,o)=>{i=lc(i,Tt(e,a),o)}),i}function sS(n,e){if(je(e))return gi.empty();{const t=n.writeTree_.setTree(e,new ut(null));return new gi(t)}}function K_(n,e){return Wa(n,e)!=null}function Wa(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(En(t.path,e)):null}function aS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(wt,(i,a)=>{e.push(new Le(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Le(i,a.value))}),e}function Ms(n,e){if(je(e))return n;{const t=Wa(n,e);return t!=null?new gi(new ut(t)):new gi(n.writeTree_.subtree(e))}}function Q_(n){return n.writeTree_.isEmpty()}function yl(n,e){return j1(Je(),n.writeTree_,e)}function j1(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,o)=>{a===".priority"?(ae(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=j1(Tt(n,a),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Tt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n,e){return q1(e,n)}function T6(n,e,t,i,a){ae(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=lc(n.visibleWrites,e,t)),n.lastWriteId=i}function w6(n,e,t,i){ae(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=G_(n.visibleWrites,e,t),n.lastWriteId=i}function b6(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function S6(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);ae(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,o=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&A6(d,i.path)?a=!1:ri(i.path,d.path)&&(o=!0)),u--}if(a){if(o)return C6(n),!0;if(i.snap)n.visibleWrites=sS(n.visibleWrites,i.path);else{const d=i.children;an(d,m=>{n.visibleWrites=sS(n.visibleWrites,Tt(i.path,m))})}return!0}else return!1}function A6(n,e){if(n.snap)return ri(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ri(Tt(n.path,t),e))return!0;return!1}function C6(n){n.visibleWrites=B1(n.allWrites,R6,Je()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function R6(n){return n.visible}function B1(n,e,t){let i=gi.empty();for(let a=0;a<n.length;++a){const o=n[a];if(e(o)){const u=o.path;let d;if(o.snap)ri(t,u)?(d=En(t,u),i=lc(i,d,o.snap)):ri(u,t)&&(d=En(u,t),i=lc(i,Je(),o.snap.getChild(d)));else if(o.children){if(ri(t,u))d=En(t,u),i=G_(i,d,o.children);else if(ri(u,t))if(d=En(u,t),je(d))i=G_(i,Je(),o.children);else{const m=il(o.children,Pe(d));if(m){const p=m.getChild(ct(d));i=lc(i,Je(),p)}}}else throw bl("WriteRecord should have .snap or .children")}}return i}function z1(n,e,t,i,a){if(!i&&!a){const o=Wa(n.visibleWrites,e);if(o!=null)return o;{const u=Ms(n.visibleWrites,e);if(Q_(u))return t;if(t==null&&!K_(u,Je()))return null;{const d=t||we.EMPTY_NODE;return yl(u,d)}}}else{const o=Ms(n.visibleWrites,e);if(!a&&Q_(o))return t;if(!a&&t==null&&!K_(o,Je()))return null;{const u=function(p){return(p.visible||a)&&(!i||!~i.indexOf(p.writeId))&&(ri(p.path,e)||ri(e,p.path))},d=B1(n.allWrites,u,e),m=t||we.EMPTY_NODE;return yl(d,m)}}}function I6(n,e,t){let i=we.EMPTY_NODE;const a=Wa(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(wt,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=Ms(n.visibleWrites,e);return t.forEachChild(wt,(u,d)=>{const m=yl(Ms(o,new st(u)),d);i=i.updateImmediateChild(u,m)}),aS(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const o=Ms(n.visibleWrites,e);return aS(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function x6(n,e,t,i,a){ae(i||a,"Either existingEventSnap or existingServerSnap must exist");const o=Tt(e,t);if(K_(n.visibleWrites,o))return null;{const u=Ms(n.visibleWrites,o);return Q_(u)?a.getChild(t):yl(u,a.getChild(t))}}function N6(n,e,t,i){const a=Tt(e,t),o=Wa(n.visibleWrites,a);if(o!=null)return o;if(i.isCompleteForChild(t)){const u=Ms(n.visibleWrites,a);return yl(u,i.getNode().getImmediateChild(t))}else return null}function D6(n,e){return Wa(n.visibleWrites,e)}function k6(n,e,t,i,a,o,u){let d;const m=Ms(n.visibleWrites,e),p=Wa(m,Je());if(p!=null)d=p;else if(t!=null)d=yl(m,t);else return[];if(d=d.withIndex(u),!d.isEmpty()&&!d.isLeafNode()){const y=[],v=u.getCompare(),w=o?d.getReverseIteratorFrom(i,u):d.getIteratorFrom(i,u);let A=w.getNext();for(;A&&y.length<a;)v(A,i)!==0&&y.push(A),A=w.getNext();return y}else return[]}function O6(){return{visibleWrites:gi.empty(),allWrites:[],lastWriteId:-1}}function gf(n,e,t,i){return z1(n.writeTree,n.treePath,e,t,i)}function Ev(n,e){return I6(n.writeTree,n.treePath,e)}function oS(n,e,t,i){return x6(n.writeTree,n.treePath,e,t,i)}function _f(n,e){return D6(n.writeTree,Tt(n.treePath,e))}function M6(n,e,t,i,a,o){return k6(n.writeTree,n.treePath,e,t,i,a,o)}function Tv(n,e,t){return N6(n.writeTree,n.treePath,e,t)}function F1(n,e){return q1(Tt(n.treePath,e),n.writeTree)}function q1(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ae(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ae(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const o=a.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,wc(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,Tc(i,a.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,gl(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,wc(i,e.snapshotNode,a.oldSnap));else throw bl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const H1=new L6;class wv{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Hs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tv(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fa(this.viewCache_),o=M6(this.writes_,a,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(n){return{filter:n}}function U6(n,e){ae(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function j6(n,e,t,i,a){const o=new P6;let u,d;if(t.type===mi.OVERWRITE){const p=t;p.source.fromUser?u=$_(n,e,p.path,p.snap,i,a,o):(ae(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered()&&!je(p.path),u=yf(n,e,p.path,p.snap,i,a,d,o))}else if(t.type===mi.MERGE){const p=t;p.source.fromUser?u=z6(n,e,p.path,p.children,i,a,o):(ae(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered(),u=Y_(n,e,p.path,p.children,i,a,d,o))}else if(t.type===mi.ACK_USER_WRITE){const p=t;p.revert?u=H6(n,e,p.path,i,a,o):u=F6(n,e,p.path,p.affectedTree,i,a,o)}else if(t.type===mi.LISTEN_COMPLETE)u=q6(n,e,t.path,i,o);else throw bl("Unknown operation type: "+t.type);const m=o.getChanges();return B6(e,u,m),{viewCache:u,changes:m}}function B6(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=pf(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(L1(pf(e)))}}function G1(n,e,t,i,a,o){const u=e.eventCache;if(_f(i,t)!=null)return e;{let d,m;if(je(t))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Fa(e),y=p instanceof we?p:we.EMPTY_NODE,v=Ev(i,y);d=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const p=gf(i,Fa(e));d=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=Pe(t);if(p===".priority"){ae(qs(t)===1,"Can't have a priority with additional path components");const y=u.getNode();m=e.serverCache.getNode();const v=oS(i,t,y,m);v!=null?d=n.filter.updatePriority(y,v):d=u.getNode()}else{const y=ct(t);let v;if(u.isCompleteForChild(p)){m=e.serverCache.getNode();const w=oS(i,t,u.getNode(),m);w!=null?v=u.getNode().getImmediateChild(p).updateChild(y,w):v=u.getNode().getImmediateChild(p)}else v=Tv(i,p,e.serverCache);v!=null?d=n.filter.updateChild(u.getNode(),p,v,y,a,o):d=u.getNode()}}return oc(e,d,u.isFullyInitialized()||je(t),n.filter.filtersNodes())}}function yf(n,e,t,i,a,o,u,d){const m=e.serverCache;let p;const y=u?n.filter:n.filter.getIndexedFilter();if(je(t))p=y.updateFullNode(m.getNode(),i,null);else if(y.filtersNodes()&&!m.isFiltered()){const A=m.getNode().updateChild(t,i);p=y.updateFullNode(m.getNode(),A,null)}else{const A=Pe(t);if(!m.isCompleteForPath(t)&&qs(t)>1)return e;const D=ct(t),V=m.getNode().getImmediateChild(A).updateChild(D,i);A===".priority"?p=y.updatePriority(m.getNode(),V):p=y.updateChild(m.getNode(),A,V,D,H1,null)}const v=U1(e,p,m.isFullyInitialized()||je(t),y.filtersNodes()),w=new wv(a,v,o);return G1(n,v,t,a,w,d)}function $_(n,e,t,i,a,o,u){const d=e.eventCache;let m,p;const y=new wv(a,e,o);if(je(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,u),m=oc(e,p,!0,n.filter.filtersNodes());else{const v=Pe(t);if(v===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),m=oc(e,p,d.isFullyInitialized(),d.isFiltered());else{const w=ct(t),A=d.getNode().getImmediateChild(v);let D;if(je(w))D=i;else{const j=y.getCompleteChild(v);j!=null?hv(w)===".priority"&&j.getChild(x1(w)).isEmpty()?D=j:D=j.updateChild(w,i):D=we.EMPTY_NODE}if(A.equals(D))m=e;else{const j=n.filter.updateChild(d.getNode(),v,D,w,y,u);m=oc(e,j,d.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function lS(n,e){return n.eventCache.isCompleteForChild(e)}function z6(n,e,t,i,a,o,u){let d=e;return i.foreach((m,p)=>{const y=Tt(t,m);lS(e,Pe(y))&&(d=$_(n,d,y,p,a,o,u))}),i.foreach((m,p)=>{const y=Tt(t,m);lS(e,Pe(y))||(d=$_(n,d,y,p,a,o,u))}),d}function uS(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Y_(n,e,t,i,a,o,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,p;je(t)?p=i:p=new ut(null).setTree(t,i);const y=e.serverCache.getNode();return p.children.inorderTraversal((v,w)=>{if(y.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),D=uS(n,A,w);m=yf(n,m,new st(v),D,a,o,u,d)}}),p.children.inorderTraversal((v,w)=>{const A=!e.serverCache.isCompleteForChild(v)&&w.value===null;if(!y.hasChild(v)&&!A){const D=e.serverCache.getNode().getImmediateChild(v),j=uS(n,D,w);m=yf(n,m,new st(v),j,a,o,u,d)}}),m}function F6(n,e,t,i,a,o,u){if(_f(a,t)!=null)return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(je(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return yf(n,e,t,m.getNode().getChild(t),a,o,d,u);if(je(t)){let p=new ut(null);return m.getNode().forEachChild(nl,(y,v)=>{p=p.set(new st(y),v)}),Y_(n,e,t,p,a,o,d,u)}else return e}else{let p=new ut(null);return i.foreach((y,v)=>{const w=Tt(t,y);m.isCompleteForPath(w)&&(p=p.set(y,m.getNode().getChild(w)))}),Y_(n,e,t,p,a,o,d,u)}}function q6(n,e,t,i,a){const o=e.serverCache,u=U1(e,o.getNode(),o.isFullyInitialized()||je(t),o.isFiltered());return G1(n,u,t,i,H1,a)}function H6(n,e,t,i,a,o){let u;if(_f(i,t)!=null)return e;{const d=new wv(i,e,a),m=e.eventCache.getNode();let p;if(je(t)||Pe(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=gf(i,Fa(e));else{const v=e.serverCache.getNode();ae(v instanceof we,"serverChildren would be complete if leaf node"),y=Ev(i,v)}y=y,p=n.filter.updateFullNode(m,y,o)}else{const y=Pe(t);let v=Tv(i,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=m.getImmediateChild(y)),v!=null?p=n.filter.updateChild(m,y,v,ct(t),d,o):e.eventCache.getNode().hasChild(y)?p=n.filter.updateChild(m,y,we.EMPTY_NODE,ct(t),d,o):p=m,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=gf(i,Fa(e)),u.isLeafNode()&&(p=n.filter.updateFullNode(p,u,o)))}return u=e.serverCache.isFullyInitialized()||_f(i,Je())!=null,oc(e,p,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new pv(i.getIndex()),o=u6(i);this.processor_=V6(o);const u=t.serverCache,d=t.eventCache,m=a.updateFullNode(we.EMPTY_NODE,u.getNode(),null),p=o.updateFullNode(we.EMPTY_NODE,d.getNode(),null),y=new Hs(m,u.isFullyInitialized(),a.filtersNodes()),v=new Hs(p,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=tm(v,y),this.eventGenerator_=new g6(this.query_)}get query(){return this.query_}}function K6(n){return n.viewCache_.serverCache.getNode()}function Q6(n){return pf(n.viewCache_)}function $6(n,e){const t=Fa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!je(e)&&!t.getImmediateChild(Pe(e)).isEmpty())?t.getChild(e):null}function cS(n){return n.eventRegistrations_.length===0}function Y6(n,e){n.eventRegistrations_.push(e)}function hS(n,e,t){const i=[];if(t){ae(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(o=>{const u=o.createCancelEvent(t,a);u&&i.push(u)})}if(e){let a=[];for(let o=0;o<n.eventRegistrations_.length;++o){const u=n.eventRegistrations_[o];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function dS(n,e,t,i){e.type===mi.MERGE&&e.source.queryId!==null&&(ae(Fa(n.viewCache_),"We should always have a full cache before handling merges"),ae(pf(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,o=j6(n.processor_,a,e,t,i);return U6(n.processor_,o.viewCache),ae(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,K1(n,o.changes,o.viewCache.eventCache.getNode(),null)}function W6(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(wt,(o,u)=>{i.push(gl(o,u))}),t.isFullyInitialized()&&i.push(L1(t.getNode())),K1(n,i,t.getNode(),e)}function K1(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return _6(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf;class Q1{constructor(){this.views=new Map}}function X6(n){ae(!vf,"__referenceConstructor has already been defined"),vf=n}function J6(){return ae(vf,"Reference.ts has not been loaded"),vf}function Z6(n){return n.views.size===0}function bv(n,e,t,i){const a=e.source.queryId;if(a!==null){const o=n.views.get(a);return ae(o!=null,"SyncTree gave us an op for an invalid query."),dS(o,e,t,i)}else{let o=[];for(const u of n.views.values())o=o.concat(dS(u,e,t,i));return o}}function $1(n,e,t,i,a){const o=e._queryIdentifier,u=n.views.get(o);if(!u){let d=gf(t,a?i:null),m=!1;d?m=!0:i instanceof we?(d=Ev(t,i),m=!1):(d=we.EMPTY_NODE,m=!1);const p=tm(new Hs(d,m,!1),new Hs(i,a,!1));return new G6(e,p)}return u}function e5(n,e,t,i,a,o){const u=$1(n,e,i,a,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),Y6(u,t),W6(u,t)}function t5(n,e,t,i){const a=e._queryIdentifier,o=[];let u=[];const d=Gs(n);if(a==="default")for(const[m,p]of n.views.entries())u=u.concat(hS(p,t,i)),cS(p)&&(n.views.delete(m),p.query._queryParams.loadsAllData()||o.push(p.query));else{const m=n.views.get(a);m&&(u=u.concat(hS(m,t,i)),cS(m)&&(n.views.delete(a),m.query._queryParams.loadsAllData()||o.push(m.query)))}return d&&!Gs(n)&&o.push(new(J6())(e._repo,e._path)),{removed:o,events:u}}function Y1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ps(n,e){let t=null;for(const i of n.views.values())t=t||$6(i,e);return t}function W1(n,e){if(e._queryParams.loadsAllData())return im(n);{const i=e._queryIdentifier;return n.views.get(i)}}function X1(n,e){return W1(n,e)!=null}function Gs(n){return im(n)!=null}function im(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;function n5(n){ae(!Ef,"__referenceConstructor has already been defined"),Ef=n}function i5(){return ae(Ef,"Reference.ts has not been loaded"),Ef}let r5=1;class fS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ut(null),this.pendingWriteTree_=O6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function J1(n,e,t,i,a){return T6(n.pendingWriteTree_,e,t,i,a),a?kl(n,new za(_v(),e,t)):[]}function s5(n,e,t,i){w6(n.pendingWriteTree_,e,t,i);const a=ut.fromObject(t);return kl(n,new _l(_v(),e,a))}function Rs(n,e,t=!1){const i=b6(n.pendingWriteTree_,e);if(S6(n.pendingWriteTree_,e)){let o=new ut(null);return i.snap!=null?o=o.set(Je(),!0):an(i.children,u=>{o=o.set(new st(u),!0)}),kl(n,new mf(i.path,o,t))}else return[]}function qc(n,e,t){return kl(n,new za(yv(),e,t))}function a5(n,e,t){const i=ut.fromObject(t);return kl(n,new _l(yv(),e,i))}function o5(n,e){return kl(n,new Sc(yv(),e))}function l5(n,e,t){const i=Av(n,t);if(i){const a=Cv(i),o=a.path,u=a.queryId,d=En(o,e),m=new Sc(vv(u),d);return Rv(n,o,m)}else return[]}function Tf(n,e,t,i,a=!1){const o=e._path,u=n.syncPointTree_.get(o);let d=[];if(u&&(e._queryIdentifier==="default"||X1(u,e))){const m=t5(u,e,t,i);Z6(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const p=m.removed;if(d=m.events,!a){const y=p.findIndex(w=>w._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(o,(w,A)=>Gs(A));if(y&&!v){const w=n.syncPointTree_.subtree(o);if(!w.isEmpty()){const A=h5(w);for(let D=0;D<A.length;++D){const j=A[D],V=j.query,F=nI(n,j);n.listenProvider_.startListening(uc(V),Ac(n,V),F.hashFn,F.onComplete)}}}!v&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(uc(e),null):p.forEach(w=>{const A=n.queryToTagMap.get(rm(w));n.listenProvider_.stopListening(uc(w),A)}))}d5(n,p)}return d}function Z1(n,e,t,i){const a=Av(n,i);if(a!=null){const o=Cv(a),u=o.path,d=o.queryId,m=En(u,e),p=new za(vv(d),m,t);return Rv(n,u,p)}else return[]}function u5(n,e,t,i){const a=Av(n,i);if(a){const o=Cv(a),u=o.path,d=o.queryId,m=En(u,e),p=ut.fromObject(t),y=new _l(vv(d),m,p);return Rv(n,u,y)}else return[]}function W_(n,e,t,i=!1){const a=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(a,(w,A)=>{const D=En(w,a);o=o||Ps(A,D),u=u||Gs(A)});let d=n.syncPointTree_.get(a);d?(u=u||Gs(d),o=o||Ps(d,Je())):(d=new Q1,n.syncPointTree_=n.syncPointTree_.set(a,d));let m;o!=null?m=!0:(m=!1,o=we.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((A,D)=>{const j=Ps(D,Je());j&&(o=o.updateImmediateChild(A,j))}));const p=X1(d,e);if(!p&&!e._queryParams.loadsAllData()){const w=rm(e);ae(!n.queryToTagMap.has(w),"View does not exist, but we have a tag");const A=f5();n.queryToTagMap.set(w,A),n.tagToQueryMap.set(A,w)}const y=nm(n.pendingWriteTree_,a);let v=e5(d,e,t,y,o,m);if(!p&&!u&&!i){const w=W1(d,e);v=v.concat(m5(n,e,w))}return v}function Sv(n,e,t){const a=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,d)=>{const m=En(u,e),p=Ps(d,m);if(p)return p});return z1(a,e,o,t,!0)}function c5(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,y)=>{const v=En(p,t);i=i||Ps(y,v)});let a=n.syncPointTree_.get(t);a?i=i||Ps(a,Je()):(a=new Q1,n.syncPointTree_=n.syncPointTree_.set(t,a));const o=i!=null,u=o?new Hs(i,!0,!1):null,d=nm(n.pendingWriteTree_,e._path),m=$1(a,e,d,o?u.getNode():we.EMPTY_NODE,o);return Q6(m)}function kl(n,e){return eI(e,n.syncPointTree_,null,nm(n.pendingWriteTree_,Je()))}function eI(n,e,t,i){if(je(n.path))return tI(n,e,t,i);{const a=e.get(Je());t==null&&a!=null&&(t=Ps(a,Je()));let o=[];const u=Pe(n.path),d=n.operationForChild(u),m=e.children.get(u);if(m&&d){const p=t?t.getImmediateChild(u):null,y=F1(i,u);o=o.concat(eI(d,m,p,y))}return a&&(o=o.concat(bv(a,n,i,t))),o}}function tI(n,e,t,i){const a=e.get(Je());t==null&&a!=null&&(t=Ps(a,Je()));let o=[];return e.children.inorderTraversal((u,d)=>{const m=t?t.getImmediateChild(u):null,p=F1(i,u),y=n.operationForChild(u);y&&(o=o.concat(tI(y,d,m,p)))}),a&&(o=o.concat(bv(a,n,i,t))),o}function nI(n,e){const t=e.query,i=Ac(n,t);return{hashFn:()=>(K6(e)||we.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?l5(n,t._path,i):o5(n,t._path);{const o=oU(a,t);return Tf(n,t,null,o)}}}}function Ac(n,e){const t=rm(e);return n.queryToTagMap.get(t)}function rm(n){return n._path.toString()+"$"+n._queryIdentifier}function Av(n,e){return n.tagToQueryMap.get(e)}function Cv(n){const e=n.indexOf("$");return ae(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new st(n.substr(0,e))}}function Rv(n,e,t){const i=n.syncPointTree_.get(e);ae(i,"Missing sync point for query tag that we're tracking");const a=nm(n.pendingWriteTree_,e);return bv(i,t,a,null)}function h5(n){return n.fold((e,t,i)=>{if(t&&Gs(t))return[im(t)];{let a=[];return t&&(a=Y1(t)),an(i,(o,u)=>{a=a.concat(u)}),a}})}function uc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(i5())(n._repo,n._path):n}function d5(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=rm(i),o=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(o)}}}function f5(){return r5++}function m5(n,e,t){const i=e._path,a=Ac(n,e),o=nI(n,t),u=n.listenProvider_.startListening(uc(e),a,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(i);if(a)ae(!Gs(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((p,y,v)=>{if(!je(p)&&y&&Gs(y))return[im(y).query];{let w=[];return y&&(w=w.concat(Y1(y).map(A=>A.query))),an(v,(A,D)=>{w=w.concat(D)}),w}});for(let p=0;p<m.length;++p){const y=m[p];n.listenProvider_.stopListening(uc(y),Ac(n,y))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Iv(t)}node(){return this.node_}}class xv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Tt(this.path_,e);return new xv(this.syncTree_,t)}node(){return Sv(this.syncTree_,this.path_)}}const p5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},mS=function(n,e,t){if(!n||typeof n!="object")return n;if(ae(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return g5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return _5(n[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},g5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ae(!1,"Unexpected server value: "+n)}},_5=function(n,e,t){n.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ae(!1,"Unexpected increment value: "+i);const a=e.node();if(ae(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},iI=function(n,e,t,i){return Nv(e,new xv(t,n),i)},rI=function(n,e,t){return Nv(n,new Iv(e),t)};function Nv(n,e,t){const i=n.getPriority().val(),a=mS(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,d=mS(u.getValue(),e,t);return d!==u.getValue()||a!==u.getPriority().val()?new Yt(d,Ut(a)):n}else{const u=n;return o=u,a!==u.getPriority().val()&&(o=o.updatePriority(new Yt(a))),u.forEachChild(wt,(d,m)=>{const p=Nv(m,e.getImmediateChild(d),t);p!==m&&(o=o.updateImmediateChild(d,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function kv(n,e){let t=e instanceof st?e:new st(e),i=n,a=Pe(t);for(;a!==null;){const o=il(i.node.children,a)||{children:{},childCount:0};i=new Dv(a,i,o),t=ct(t),a=Pe(t)}return i}function Ol(n){return n.node.value}function sI(n,e){n.node.value=e,X_(n)}function aI(n){return n.node.childCount>0}function y5(n){return Ol(n)===void 0&&!aI(n)}function sm(n,e){an(n.node.children,(t,i)=>{e(new Dv(t,n,i))})}function oI(n,e,t,i){t&&e(n),sm(n,a=>{oI(a,e,!0)})}function v5(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Hc(n){return new st(n.parent===null?n.name:Hc(n.parent)+"/"+n.name)}function X_(n){n.parent!==null&&E5(n.parent,n.name,n)}function E5(n,e,t){const i=y5(t),a=Qi(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,X_(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,X_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=/[\[\].#$\/\u0000-\u001F\u007F]/,w5=/[\[\].#$\u0000-\u001F\u007F]/,Lg=10*1024*1024,Ov=function(n){return typeof n=="string"&&n.length!==0&&!T5.test(n)},lI=function(n){return typeof n=="string"&&n.length!==0&&!w5.test(n)},b5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lI(n)},S5=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!av(n)||n&&typeof n=="object"&&Qi(n,".sv")},A5=function(n,e,t,i){am(Cf(n,"value"),e,t)},am=function(n,e,t){const i=t instanceof st?new zU(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+xa(i));if(typeof e=="function")throw new Error(n+"contains a function "+xa(i)+" with contents = "+e.toString());if(av(e))throw new Error(n+"contains "+e.toString()+" "+xa(i));if(typeof e=="string"&&e.length>Lg/3&&Rf(e)>Lg)throw new Error(n+"contains a string greater than "+Lg+" utf8 bytes "+xa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,o=!1;if(an(e,(u,d)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!Ov(u)))throw new Error(n+" contains an invalid key ("+u+") "+xa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FU(i,u),am(n,d,i),qU(i)}),a&&o)throw new Error(n+' contains ".value" child '+xa(i)+" in addition to actual children.")}},C5=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=Ec(i);for(let u=0;u<o.length;u++)if(!(o[u]===".priority"&&u===o.length-1)){if(!Ov(o[u]))throw new Error(n+"contains an invalid key ("+o[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(BU);let a=null;for(t=0;t<e.length;t++){if(i=e[t],a!==null&&ri(a,i))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}},R5=function(n,e,t,i){const a=Cf(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const o=[];an(e,(u,d)=>{const m=new st(u);if(am(a,d,Tt(t,m)),hv(m)===".priority"&&!S5(d))throw new Error(a+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),C5(a,o)},uI=function(n,e,t,i){if(!lI(t))throw new Error(Cf(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},I5=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),uI(n,e,t)},x5=function(n,e){if(Pe(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},N5=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ov(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!b5(t))throw new Error(Cf(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function om(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],o=a.getPath();t!==null&&!dv(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(a)}t&&n.eventLists_.push(t)}function cI(n,e,t){om(n,t),hI(n,i=>dv(i,e))}function ai(n,e,t){om(n,t),hI(n,i=>ri(i,e)||ri(e,i))}function hI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const o=a.path;e(o)?(k5(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function k5(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();sc&&nn("event: "+t.toString()),Dl(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5="repo_interrupt",M5=25;class P5{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new D5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ff(),this.transactionQueueTree_=new Dv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L5(n,e,t){if(n.stats_=uv(n.repoInfo_),n.forceRestClient_||hU())n.server_=new df(n.repoInfo_,(i,a,o,u)=>{pS(n,i,a,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>gS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Nr(n.repoInfo_,e,(i,a,o,u)=>{pS(n,i,a,o,u)},i=>{gS(n,i)},i=>{U5(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=gU(n.repoInfo_,()=>new p6(n.stats_,n.server_)),n.infoData_=new c6,n.infoSyncTree_=new fS({startListening:(i,a,o,u)=>{let d=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(d=qc(n.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),Mv(n,"connected",!1),n.serverSyncTree_=new fS({startListening:(i,a,o,u)=>(n.server_.listen(i,o,a,(d,m)=>{const p=u(d,m);ai(n.eventQueue_,i._path,p)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function V5(n){const t=n.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function lm(n){return p5({timestamp:V5(n)})}function pS(n,e,t,i,a){n.dataUpdateCount++;const o=new st(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const m=zd(t,p=>Ut(p));u=u5(n.serverSyncTree_,o,m,a)}else{const m=Ut(t);u=Z1(n.serverSyncTree_,o,m,a)}else if(i){const m=zd(t,p=>Ut(p));u=a5(n.serverSyncTree_,o,m)}else{const m=Ut(t);u=qc(n.serverSyncTree_,o,m)}let d=o;u.length>0&&(d=vl(n,o)),ai(n.eventQueue_,d,u)}function gS(n,e){Mv(n,"connected",e),e===!1&&F5(n)}function U5(n,e){an(e,(t,i)=>{Mv(n,t,i)})}function Mv(n,e,t){const i=new st("/.info/"+e),a=Ut(t);n.infoData_.updateSnapshot(i,a);const o=qc(n.infoSyncTree_,i,a);ai(n.eventQueue_,i,o)}function Pv(n){return n.nextWriteId_++}function j5(n,e,t){const i=c5(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const o=Ut(a).withIndex(e._queryParams.getIndex());W_(n.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=qc(n.serverSyncTree_,e._path,o);else{const d=Ac(n.serverSyncTree_,e);u=Z1(n.serverSyncTree_,e._path,o,d)}return ai(n.eventQueue_,e._path,u),Tf(n.serverSyncTree_,e,t,null,!0),o},a=>(Gc(n,"get for query "+jt(e)+" failed: "+a),Promise.reject(new Error(a))))}function B5(n,e,t,i,a){Gc(n,"set",{path:e.toString(),value:t,priority:i});const o=lm(n),u=Ut(t,i),d=Sv(n.serverSyncTree_,e),m=rI(u,d,o),p=Pv(n),y=J1(n.serverSyncTree_,e,m,p,!0);om(n.eventQueue_,y),n.server_.put(e.toString(),u.val(!0),(w,A)=>{const D=w==="ok";D||wn("set at "+e+" failed: "+w);const j=Rs(n.serverSyncTree_,p,!D);ai(n.eventQueue_,e,j),J_(n,a,w,A)});const v=Vv(n,e);vl(n,v),ai(n.eventQueue_,v,[])}function z5(n,e,t,i){Gc(n,"update",{path:e.toString(),value:t});let a=!0;const o=lm(n),u={};if(an(t,(d,m)=>{a=!1,u[d]=iI(Tt(e,d),Ut(m),n.serverSyncTree_,o)}),a)nn("update() called with empty data.  Don't do anything."),J_(n,i,"ok",void 0);else{const d=Pv(n),m=s5(n.serverSyncTree_,e,u,d);om(n.eventQueue_,m),n.server_.merge(e.toString(),t,(p,y)=>{const v=p==="ok";v||wn("update at "+e+" failed: "+p);const w=Rs(n.serverSyncTree_,d,!v),A=w.length>0?vl(n,e):e;ai(n.eventQueue_,A,w),J_(n,i,p,y)}),an(t,p=>{const y=Vv(n,Tt(e,p));vl(n,y)}),ai(n.eventQueue_,e,[])}}function F5(n){Gc(n,"onDisconnectEvents");const e=lm(n),t=ff();H_(n.onDisconnect_,Je(),(a,o)=>{const u=iI(a,o,n.serverSyncTree_,e);V1(t,a,u)});let i=[];H_(t,Je(),(a,o)=>{i=i.concat(qc(n.serverSyncTree_,a,o));const u=Vv(n,a);vl(n,u)}),n.onDisconnect_=ff(),ai(n.eventQueue_,Je(),i)}function q5(n,e,t){let i;Pe(e._path)===".info"?i=W_(n.infoSyncTree_,e,t):i=W_(n.serverSyncTree_,e,t),cI(n.eventQueue_,e._path,i)}function dI(n,e,t){let i;Pe(e._path)===".info"?i=Tf(n.infoSyncTree_,e,t):i=Tf(n.serverSyncTree_,e,t),cI(n.eventQueue_,e._path,i)}function H5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(O5)}function Gc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),nn(t,...e)}function J_(n,e,t,i){e&&Dl(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let o=a;i&&(o+=": "+i);const u=new Error(o);u.code=a,e(u)}})}function fI(n,e,t){return Sv(n.serverSyncTree_,e,t)||we.EMPTY_NODE}function Lv(n,e=n.transactionQueueTree_){if(e||um(n,e),Ol(e)){const t=pI(n,e);ae(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&G5(n,Hc(e),t)}else aI(e)&&sm(e,t=>{Lv(n,t)})}function G5(n,e,t){const i=t.map(p=>p.currentWriteId),a=fI(n,e,i);let o=a;const u=a.hash();for(let p=0;p<t.length;p++){const y=t[p];ae(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=En(e,y.path);o=o.updateChild(v,y.currentOutputSnapshotRaw)}const d=o.val(!0),m=e;n.server_.put(m.toString(),d,p=>{Gc(n,"transaction put response",{path:m.toString(),status:p});let y=[];if(p==="ok"){const v=[];for(let w=0;w<t.length;w++)t[w].status=2,y=y.concat(Rs(n.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&v.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();um(n,kv(n.transactionQueueTree_,e)),Lv(n,n.transactionQueueTree_),ai(n.eventQueue_,e,y);for(let w=0;w<v.length;w++)Dl(v[w])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{wn("transaction at "+m.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}vl(n,e)}},u)}function vl(n,e){const t=mI(n,e),i=Hc(t),a=pI(n,t);return K5(n,a,i),i}function K5(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],p=En(t,m.path);let y=!1,v;if(ae(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,v=m.abortReason,a=a.concat(Rs(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=M5)y=!0,v="maxretry",a=a.concat(Rs(n.serverSyncTree_,m.currentWriteId,!0));else{const w=fI(n,m.path,u);m.currentInputSnapshot=w;const A=e[d].update(w.val());if(A!==void 0){am("transaction failed: Data returned ",A,m.path);let D=Ut(A);typeof A=="object"&&A!=null&&Qi(A,".priority")||(D=D.updatePriority(w.getPriority()));const V=m.currentWriteId,F=lm(n),G=rI(D,w,F);m.currentOutputSnapshotRaw=D,m.currentOutputSnapshotResolved=G,m.currentWriteId=Pv(n),u.splice(u.indexOf(V),1),a=a.concat(J1(n.serverSyncTree_,m.path,G,m.currentWriteId,m.applyLocally)),a=a.concat(Rs(n.serverSyncTree_,V,!0))}else y=!0,v="nodata",a=a.concat(Rs(n.serverSyncTree_,m.currentWriteId,!0))}ai(n.eventQueue_,t,a),a=[],y&&(e[d].status=2,function(w){setTimeout(w,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(v==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(v),!1,null))))}um(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Dl(i[d]);Lv(n,n.transactionQueueTree_)}function mI(n,e){let t,i=n.transactionQueueTree_;for(t=Pe(e);t!==null&&Ol(i)===void 0;)i=kv(i,t),e=ct(e),t=Pe(e);return i}function pI(n,e){const t=[];return gI(n,e,t),t.sort((i,a)=>i.order-a.order),t}function gI(n,e,t){const i=Ol(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);sm(e,a=>{gI(n,a,t)})}function um(n,e){const t=Ol(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,sI(e,t.length>0?t:void 0)}sm(e,i=>{um(n,i)})}function Vv(n,e){const t=Hc(mI(n,e)),i=kv(n.transactionQueueTree_,e);return v5(i,a=>{Vg(n,a)}),Vg(n,i),oI(i,a=>{Vg(n,a)}),t}function Vg(n,e){const t=Ol(e);if(t){const i=[];let a=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(ae(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(ae(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(Rs(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?sI(e,void 0):t.length=o+1,ai(n.eventQueue_,Hc(e),a);for(let u=0;u<i.length;u++)Dl(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function $5(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):wn(`Invalid query segment '${t}' in query '${n}'`)}return e}const _S=function(n,e){const t=Y5(n),i=t.namespace;t.domain==="firebase.com"&&Lr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||nU();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new E1(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new st(t.pathString)}},Y5=function(n){let e="",t="",i="",a="",o="",u=!0,d="https",m=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(d=n.substring(0,p-1),n=n.substring(p+2));let y=n.indexOf("/");y===-1&&(y=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(y,v)),y<v&&(a=Q5(n.substring(y,v)));const w=$5(n.substring(Math.min(n.length,v)));p=e.indexOf(":"),p>=0?(u=d==="https"||d==="wss",m=parseInt(e.substring(p+1),10)):p=e.length;const A=e.slice(0,p);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const D=e.indexOf(".");i=e.substring(0,D).toLowerCase(),t=e.substring(D+1),o=i}"ns"in w&&(o=w.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:u,scheme:d,pathString:a,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+jt(this.snapshot.exportVal())}}class yI{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return je(this._path)?null:hv(this._path)}get ref(){return new $i(this._repo,this._path)}get _queryIdentifier(){const e=iS(this._queryParams),t=ov(e);return t==="{}"?"default":t}get _queryObject(){return iS(this._queryParams)}isEqual(e){if(e=dt(e),!(e instanceof Uv))return!1;const t=this._repo===e._repo,i=dv(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+jU(this._path)}}class $i extends Uv{constructor(e,t){super(e,t,new gv,!1)}get parent(){const e=x1(this._path);return e===null?null:new $i(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class El{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new st(e),i=wf(this.ref,e);return new El(this._node.getChild(t),i,wt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new El(a,wf(this.ref,i),wt)))}hasChild(e){const t=new st(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Is(n,e){return n=dt(n),n._checkNotDeleted("ref"),e!==void 0?wf(n._root,e):n._root}function wf(n,e){return n=dt(n),Pe(n._path)===null?I5("child","path",e):uI("child","path",e),new $i(n._repo,Tt(n._path,e))}function Ug(n,e){n=dt(n),x5("set",n._path),A5("set",e,n._path);const t=new xc;return B5(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function W5(n,e){R5("update",e,n._path);const t=new xc;return z5(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yS(n){n=dt(n);const e=new vI(()=>{}),t=new Kc(e);return j5(n._repo,n,t).then(i=>new El(i,new $i(n._repo,n._path),n._queryParams.getIndex()))}class Kc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new _I("value",this,new El(e.snapshotNode,new $i(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yI(this,e,t):null}matches(e){return e instanceof Kc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class jv{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yI(this,e,t):null}createEvent(e,t){ae(e.childName!=null,"Child events should have a childName.");const i=wf(new $i(t._repo,t._path),e.childName),a=t._queryParams.getIndex();return new _I(e.type,this,new El(e.snapshotNode,i,a),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof jv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function X5(n,e,t,i,a){const o=new vI(t,void 0),u=new Kc(o);return q5(n._repo,n,u),()=>dI(n._repo,n,u)}function EI(n,e,t,i){return X5(n,"value",e)}function TI(n,e,t){let i=null;const a=null;e==="value"?i=new Kc(a):e&&(i=new jv(e,a)),dI(n._repo,n,i)}X6($i);n5($i);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="FIREBASE_DATABASE_EMULATOR_HOST",Z_={};let Z5=!1;function e3(n,e,t,i){n.repoInfo_=new E1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function t3(n,e,t,i,a){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=_S(o,a),d=u.repoInfo,m;typeof process<"u"&&jb&&(m=jb[J5]),m?(o=`http://${m}?ns=${d.namespace}`,u=_S(o,a),d=u.repoInfo):u.repoInfo.secure;const p=new fU(n.name,n.options,e);N5("Invalid Firebase Database URL",u),je(u.path)||Lr("Database URL must point to the root of a Firebase Database (not including a child path).");const y=i3(d,n,p,new dU(n,t));return new r3(y,n)}function n3(n,e){const t=Z_[e];(!t||t[n.key]!==n)&&Lr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),H5(n),delete t[n.key]}function i3(n,e,t,i){let a=Z_[e.name];a||(a={},Z_[e.name]=a);let o=a[n.toURLString()];return o&&Lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new P5(n,Z5,t,i),a[n.toURLString()]=o,o}class r3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(L5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $i(this._repo,Je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(n3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Lr("Cannot call "+e+" on a deleted database.")}}function Bv(n=If(),e){const t=Qs(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=fA("database");i&&s3(t,...i)}return t}function s3(n,e,t,i={}){n=dt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Lr("Cannot call useEmulator() after instance has already been initialized.");const a=n._repoInternal;let o;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Vd(Vd.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:gA(i.mockUserToken,n.app.options.projectId);o=new Vd(u)}e3(a,e,t,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(n){WV(Ga),_i(new si("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return t3(i,a,o,t)},"PUBLIC").setMultipleInstances(!0)),xn(Bb,zb,n),xn(Bb,zb,"esm2017")}Nr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Nr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};a3();const o3={apiKey:"AIzaSyDk7mEkayeHxrKerk0hOOCsxmztdYh9uck",authDomain:"final-web-app-5880c.firebaseapp.com",projectId:"final-web-app-5880c",storageBucket:"final-web-app-5880c.firebasestorage.app",messagingSenderId:"725331159486",appId:"1:725331159486:web:3ac104befd96704203b1ef",measurementId:"G-P0380Q8BWN",databaseURL:"https://final-web-app-5880c-default-rtdb.asia-southeast1.firebasedatabase.app"},cm=AA(o3),l3=Ff(cm);KL(cm);const u3=Zf(cm),bd=Bv(cm),c3=async()=>{const n=new br;try{const e=await rV(u3,n),t=e.user;if(console.log("User Logged In:",t),t){const{uid:i,displayName:a,email:o,photoURL:u}=t;console.log("Saving to Firestore:",i,a,o);const d=yc(l3,"users",i);return await L_(d,{uid:i,name:a,email:o,photoURL:u},{merge:!0}),console.log("Firestore Saved Successfully!"),e}}catch(e){throw console.error("Error signing in with Google:",e),e}},h3=()=>{const n=Ks(),[e,t]=Q.useState(!1);Q.useEffect(()=>{JSON.parse(localStorage.getItem("user"))&&n("/home")},[n]);const i=()=>{t(!0),c3().then(a=>{const o=a.user;localStorage.setItem("user",JSON.stringify(o)),n("/home")}).catch(a=>{console.error("Error during sign in: ",a.message),alert("เกิดข้อผิดพลาดในการเข้าสู่ระบบ: "+a.message)}).finally(()=>{t(!1)})};return e?b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:b.jsxs("div",{className:"p-8 bg-white rounded-xl shadow-xl",children:[b.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600 font-medium text-center",children:"กำลังเข้าสู่ระบบ..."})]})}):b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:b.jsxs("div",{className:"max-w-md w-full space-y-8 p-10 bg-white rounded-2xl shadow-xl transform transition-all hover:scale-[1.01]",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"flex justify-center mb-8",children:b.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full shadow-inner",children:b.jsxs("svg",{className:"w-14 h-14 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[b.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),b.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})})}),b.jsx("h1",{className:"text-4xl font-bold mb-3 text-gray-800 tracking-tight",children:"ระบบจัดการห้องเรียน"}),b.jsx("h2",{className:"text-xl font-semibold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"สำหรับอาจารย์"}),b.jsx("p",{className:"text-gray-600 text-lg",children:"กรุณาเข้าสู่ระบบด้วยบัญชี Google ของท่าน"})]}),b.jsx("button",{onClick:i,disabled:e,className:`w-full flex items-center justify-center px-6 py-4 
            text-gray-700 bg-white rounded-xl 
            border-2 border-gray-200
            hover:bg-gray-50 hover:border-blue-300 
            focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
            transform transition-all duration-200 active:scale-95
            shadow-sm hover:shadow-md
            ${e?"opacity-50 cursor-not-allowed":""}`,children:e?b.jsx("div",{className:"w-6 h-6 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}):b.jsxs(b.Fragment,{children:[b.jsx("svg",{className:"w-6 h-6 mr-3",viewBox:"0 0 24 24"}),b.jsx("span",{className:"text-lg font-medium cursor-pointer",children:"เข้าสู่ระบบด้วย Google"})]})}),b.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:b.jsx("span",{className:"bg-yellow-50 px-3 py-1 rounded-full",children:"ระบบนี้รองรับการใช้งานผ่านบัญชี Google เท่านั้น"})})]})})},d3=()=>{const n=Ks(),e=Zf(),t=Ff(),[i,a]=Q.useState([]),[o,u]=Q.useState(null),[d,m]=Q.useState(!1);Q.useEffect(()=>{const w=e.currentUser;if(w){u(w);const A=O_(t,"classroom"),D=vP(A,EP("owner","==",w.uid));(async()=>{const F=(await P_(D)).docs.map(G=>{var Y,ee,X,k;const L=G.data();return{id:G.id,name:((Y=L.info)==null?void 0:Y.name)||"ไม่มีชื่อวิชา",code:((ee=L.info)==null?void 0:ee.code)||"ไม่มีรหัสวิชา",room:((X=L.info)==null?void 0:X.room)||"ไม่มีห้องเรียน",photo:((k=L.info)==null?void 0:k.photo)||"https://via.placeholder.com/400x200?text=No+Image"}});a(F)})()}else n("/")},[e,t,n]);const p=()=>{m(!0)},y=async()=>{try{await U4(e),localStorage.removeItem("user"),n("/",{replace:!0})}catch(w){console.error("Logout error:",w)}},v=()=>{m(!1)};return b.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:[b.jsx("header",{className:"bg-white shadow-md",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("div",{className:"flex items-center space-x-3",children:b.jsx("h1",{className:"text-3xl font-bold text-indigo-600",children:"ระบบจัดการห้องเรียน"})}),b.jsxs("div",{className:"flex items-center space-x-6",children:[o&&b.jsxs("div",{className:"flex items-center bg-gray-50 rounded-full px-4 py-2",children:[b.jsx("img",{src:o.photoURL,alt:o.displayName,className:"w-10 h-10 rounded-full border-2 border-indigo-200"}),b.jsxs("div",{className:"ml-3",children:[b.jsx("p",{className:"text-sm font-semibold text-gray-800",children:o.displayName}),b.jsx("p",{className:"text-xs text-gray-500",children:o.email})]})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx(Ju,{to:"/edit-profile",className:"px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-full hover:bg-indigo-100 transition-colors duration-200",children:"แก้ไขข้อมูลส่วนตัว"}),b.jsx(Ju,{to:"/add-course",className:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded-full hover:bg-green-600 transition-colors duration-200",children:"เพิ่มวิชา"}),b.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-full hover:bg-red-600 transition-colors duration-200",children:"ออกจากระบบ"})]})]})]})})}),b.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b.jsx("div",{className:"flex justify-between items-center mb-8",children:b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"รายวิชาที่สอน"})}),i.length===0?b.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:b.jsx("p",{className:"text-gray-500 text-lg",children:"ยังไม่มีรายวิชาที่สอน กรุณาเพิ่มวิชาใหม่"})}):b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map(w=>b.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transform hover:scale-105 transition-transform duration-200",children:[b.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:`url(${w.photo})`}}),b.jsxs("div",{className:"p-6",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:w.name}),b.jsxs("div",{className:"space-y-2 mb-6",children:[b.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[b.jsx("span",{className:"font-medium mr-2",children:"รหัสวิชา:"}),w.code]}),b.jsxs("p",{className:"text-gray-600 text-sm flex items-center",children:[b.jsx("span",{className:"font-medium mr-2",children:"ห้องเรียน:"}),w.room]})]}),b.jsx(Ju,{to:`/manage-classroom/${w.id}`,className:"block w-full text-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium",children:"จัดการห้องเรียน"})]})]},w.id))})]}),d&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 popup-logout",children:b.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-sm w-full mx-4 shadow-2xl",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"ยืนยันการออกจากระบบ"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"คุณต้องการออกจากระบบใช่หรือไม่?"}),b.jsxs("div",{className:"flex justify-end space-x-4",children:[b.jsx("button",{onClick:v,className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-medium",children:"ยกเลิก"}),b.jsx("button",{onClick:y,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200 font-medium",children:"ยืนยัน"})]})]})})]})},f3=()=>{const n=Ks(),e=Zf(),t=Bv(),[i,a]=Q.useState(""),[o,u]=Q.useState(""),[d,m]=Q.useState(""),[p,y]=Q.useState(""),[v,w]=Q.useState(!1),[A,D]=Q.useState(""),[j,V]=Q.useState("");Q.useEffect(()=>{const G=e.currentUser;if(!G){n("/");return}a(G.displayName||""),u(G.email||""),m(G.photoURL||"");const L=Is(t,`users/${G.uid}/profile`);yS(L).then(Y=>{if(Y.exists()){const ee=Y.val();ee.displayName&&a(ee.displayName),ee.photoURL&&m(ee.photoURL)}})},[e,t,n]);const F=async G=>{G.preventDefault(),w(!0),D(""),V("");try{const L=e.currentUser;if(!L)throw new Error("ไม่พบข้อมูลผู้ใช้");let Y=p||d;await P4(L,{displayName:i,photoURL:Y}),V("อัปเดตข้อมูลผู้ใช้ในระบบแล้ว"),w(!1),n("/home"),await W5(Is(t,`users/${L.uid}/profile`),{displayName:i,email:o,photoURL:Y});const ee=Is(t,`users/${L.uid}/profile`),X=await yS(ee);if(X.exists()){const k=X.val();a(k.displayName),m(k.photoURL)}y("")}catch(L){console.error("Error updating profile:",L),D("เกิดข้อผิดพลาดในการอัปเดตข้อมูล: "+L.message),w(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-white to-purple-100",children:b.jsx("div",{className:"container mx-auto px-4 py-12 sm:px-6 lg:px-8",children:b.jsx("div",{className:"max-w-3xl mx-auto",children:b.jsxs("div",{className:" bg-white/80 rounded-3xl shadow-2xl overflow-hidden border border-white/50",children:[b.jsxs("div",{className:"px-8 py-8 bg-gradient-to-r from-indigo-600 to-purple-600 relative",children:[b.jsx("div",{className:"absolute inset-0 bg-pattern opacity-10"}),b.jsxs("div",{className:"relative z-10",children:[b.jsx("h1",{className:"text-3xl font-bold text-white text-center mb-2",children:"แก้ไขข้อมูลส่วนตัว"}),b.jsx("p",{className:"text-indigo-100 text-center text-sm",children:"ปรับแต่งโปรไฟล์ของคุณให้ตรงกับตัวตน"})]})]}),b.jsxs("form",{onSubmit:F,className:"p-8 sm:p-10",children:[b.jsx("div",{className:"mb-12",children:b.jsxs("div",{className:"relative w-36 h-36 mx-auto",children:[b.jsx("div",{className:"w-full h-full rounded-full border-4 border-white shadow-xl overflow-hidden bg-gradient-to-br from-indigo-50 to-purple-50 ring-4 ring-indigo-100/50",children:d||p?b.jsx("img",{src:p||d,alt:"Profile",className:"w-full h-full object-cover transition-all duration-300",onError:G=>{G.target.onerror=null,G.target.src="",G.target.className="hidden",G.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center text-sm text-red-500 bg-red-50">ไม่สามารถโหลดรูปได้</div>'}}):b.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-50",children:b.jsx("span",{className:"text-5xl",children:"👤"})})}),b.jsx("div",{className:"absolute -bottom-2 -right-2 p-2.5 bg-white rounded-full shadow-lg ring-2 ring-indigo-100/50",children:b.jsxs("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),A&&b.jsx("div",{className:"mb-8 p-4 bg-red-50/80  border border-red-200 rounded-2xl animate-fadeIn",children:b.jsxs("div",{className:"flex items-center text-red-700",children:[b.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),b.jsx("p",{className:"text-sm font-medium",children:A})]})}),j&&b.jsx("div",{className:"mb-8 p-4 bg-green-50/80  border border-green-200 rounded-2xl animate-fadeIn",children:b.jsxs("div",{className:"flex items-center text-green-700",children:[b.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),b.jsx("p",{className:"text-sm font-medium",children:j})]})}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"display-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อผู้ใช้"}),b.jsx("input",{type:"text",id:"display-name",value:i,onChange:G=>a(G.target.value),className:"w-full px-4 py-3.5 bg-white/50  border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"อีเมล"}),b.jsx("input",{type:"email",id:"email",value:o,onChange:G=>u(G.target.value),disabled:!0,className:"w-full px-4 py-3.5 bg-gray-100/80  border border-gray-200 rounded-xl text-gray-500 cursor-not-allowed"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"photo-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"ใส่ลิงก์รูปภาพใหม่"}),b.jsx("input",{type:"text",id:"photo-url",value:p,onChange:G=>y(G.target.value),placeholder:"ใส่ URL รูปภาพ",className:"w-full px-4 py-3.5 bg-white/50  border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})]})]}),b.jsxs("div",{className:"mt-12 flex justify-end space-x-4",children:[b.jsx("button",{type:"button",onClick:()=>n("/home"),className:"px-6 py-3 border border-gray-200 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-200 font-medium focus:ring-2 focus:ring-gray-200",children:"ยกเลิก"}),b.jsx("button",{type:"submit",disabled:v,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed font-medium focus:ring-2 focus:ring-indigo-500 shadow-lg shadow-indigo-500/20",children:v?b.jsxs("span",{className:"flex items-center",children:[b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"กำลังบันทึก..."]}):"บันทึก"})]})]})]})})})})},m3=()=>{const n=Ks(),e=Zf(),t=Ff(),[i,a]=Q.useState({courseCode:"",courseName:"",className:"",imageUrl:""}),[o,u]=Q.useState(""),[d,m]=Q.useState(!1),[p,y]=Q.useState(null),[v,w]=Q.useState(!1);Q.useEffect(()=>{if(i.imageUrl){const V=new Image;V.onload=()=>{y(i.imageUrl),w(!1)},V.onerror=()=>{y(null),w(!0)},V.src=i.imageUrl}else y(null),w(!1)},[i.imageUrl]);const A=V=>{a({...i,[V.target.name]:V.target.value})},D=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),j=async V=>{V.preventDefault(),m(!0),u("");try{const F=e.currentUser;if(!F)throw new Error("ไม่พบข้อมูลผู้ใช้ กรุณาเข้าสู่ระบบใหม่");if(!i.courseCode||!i.courseName||!i.className)throw new Error("กรุณากรอกข้อมูลให้ครบถ้วน");let G=i.imageUrl;(!G||!G.startsWith("http")||v)&&(G="https://via.placeholder.com/400x200?text=No+Image");const L=D();await L_(yc(t,"classroom",L),{owner:F.uid,info:{code:i.courseCode,name:i.courseName,room:i.className,photo:G}}),await L_(yc(t,"users",F.uid,"classroom",L),{status:1,info:{code:i.courseCode,name:i.courseName,room:i.className,photo:G}}),n("/home")}catch(F){console.error("Error adding course:",F),u(F.message)}finally{m(!1)}};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-white to-purple-100 py-16",children:b.jsx("div",{className:"container mx-auto px-4",children:b.jsx("div",{className:"max-w-4xl mx-auto",children:b.jsxs("div",{className:" bg-white/90 rounded-3xl shadow-2xl overflow-hidden border border-white/50 transform hover:scale-[1.01] transition-all duration-300",children:[b.jsxs("div",{className:"px-8 py-12 bg-gradient-to-r from-indigo-600 to-purple-600 relative overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_100%_100%,rgba(255,255,255,0.2)_0%,transparent_50%)] opacity-70"}),b.jsx("div",{className:"absolute -right-20 -top-20 w-64 h-64 bg-purple-500/30 rounded-full blur-3xl"}),b.jsx("div",{className:"absolute -left-20 -bottom-20 w-64 h-64 bg-indigo-500/30 rounded-full blur-3xl"}),b.jsxs("div",{className:"relative z-10",children:[b.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-3 tracking-tight",children:"เพิ่มวิชาใหม่"}),b.jsx("p",{className:"text-indigo-100 text-center text-lg font-light",children:"สร้างรายวิชาใหม่สำหรับการเรียนการสอน"})]})]}),b.jsxs("form",{onSubmit:j,className:"p-10 space-y-8",children:[b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"group",children:[b.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"รหัสวิชา"}),b.jsx("input",{type:"text",name:"courseCode",value:i.courseCode,onChange:A,placeholder:"เช่น SC310001",required:!0,className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"})]}),b.jsxs("div",{className:"group",children:[b.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"ชื่อวิชา"}),b.jsx("input",{type:"text",name:"courseName",value:i.courseName,onChange:A,placeholder:"เช่น Computer Programming",required:!0,className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"})]}),b.jsxs("div",{className:"group",children:[b.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"ห้องเรียน"}),b.jsx("input",{type:"text",name:"className",value:i.className,onChange:A,placeholder:"เช่น SC5101",required:!0,className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"})]})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"group",children:[b.jsx("label",{className:"block text-base font-medium text-gray-700 mb-2 group-focus-within:text-indigo-600 transition-colors",children:"รูปภาพปก"}),b.jsx("input",{type:"url",name:"imageUrl",value:i.imageUrl,onChange:A,placeholder:"https://example.com/image.jpg",className:"w-full px-5 py-4 bg-white/80  border-2 border-gray-100 rounded-2xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 placeholder:text-gray-400"}),v&&b.jsx("div",{className:"mt-3 p-4 bg-red-50/90  border-2 border-red-100 rounded-2xl animate-pulse",children:b.jsxs("div",{className:"flex items-center text-red-700",children:[b.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),b.jsx("p",{className:"text-sm font-medium",children:"ไม่สามารถโหลดรูปภาพได้ กรุณาตรวจสอบ URL อีกครั้ง"})]})})]}),b.jsxs("div",{className:"mt-6",children:[b.jsx("p",{className:"text-base font-medium text-gray-700 mb-2",children:"ตัวอย่างรูปภาพ"}),b.jsx("div",{className:"border-2 border-gray-100 rounded-2xl overflow-hidden aspect-video bg-white/80  group hover:border-indigo-200 transition-all duration-300",children:p?b.jsx("img",{src:p,alt:"Course preview",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-lg",children:v?"ไม่สามารถโหลดรูปภาพได้":"ไม่มีรูปภาพ"})})]})]})]}),o&&b.jsx("div",{className:"p-4 bg-red-50/90  border-2 border-red-100 rounded-2xl animate-pulse",children:b.jsxs("div",{className:"flex items-center text-red-700",children:[b.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),b.jsx("p",{className:"text-sm font-medium",children:o})]})}),b.jsxs("div",{className:"flex justify-end space-x-4 pt-8 border-t border-gray-100",children:[b.jsx("button",{type:"button",onClick:()=>n("/home"),className:"px-8 py-4 border-2 border-gray-200 rounded-2xl text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 font-medium focus:ring-4 focus:ring-gray-200/50  text-base",children:"ยกเลิก"}),b.jsxs("button",{type:"submit",disabled:d,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed font-medium focus:ring-4 focus:ring-indigo-500/50 shadow-xl shadow-indigo-500/20 text-base relative overflow-hidden group",children:[b.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_100%_100%,rgba(255,255,255,0.2)_0%,transparent_50%)] opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),d?b.jsxs("span",{className:"flex items-center",children:[b.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"กำลังบันทึก..."]}):"บันทึก"]})]})]})]})})})})};var Go={},jg,vS;function p3(){return vS||(vS=1,jg=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),jg}var Bg={},Ts={},ES;function Xa(){if(ES)return Ts;ES=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Ts.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Ts.getSymbolTotalCodewords=function(i){return e[i]},Ts.getBCHDigit=function(t){let i=0;for(;t!==0;)i++,t>>>=1;return i},Ts.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');n=i},Ts.isKanjiModeEnabled=function(){return typeof n<"u"},Ts.toSJIS=function(i){return n(i)},Ts}var zg={},TS;function zv(){return TS||(TS=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,a){if(n.isValid(i))return i;try{return e(i)}catch{return a}}}(zg)),zg}var Fg,wS;function g3(){if(wS)return Fg;wS=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Fg=n,Fg}var qg,bS;function _3(){if(bS)return qg;bS=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,i,a){const o=e*this.size+t;this.data[o]=i,a&&(this.reservedBit[o]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},qg=n,qg}var Hg={},SS;function y3(){return SS||(SS=1,function(n){const e=Xa().getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const a=Math.floor(i/7)+2,o=e(i),u=o===145?26:Math.ceil((o-13)/(2*a-2))*2,d=[o-7];for(let m=1;m<a-1;m++)d[m]=d[m-1]-u;return d.push(6),d.reverse()},n.getPositions=function(i){const a=[],o=n.getRowColCoords(i),u=o.length;for(let d=0;d<u;d++)for(let m=0;m<u;m++)d===0&&m===0||d===0&&m===u-1||d===u-1&&m===0||a.push([o[d],o[m]]);return a}}(Hg)),Hg}var Gg={},AS;function v3(){if(AS)return Gg;AS=1;const n=Xa().getSymbolSize,e=7;return Gg.getPositions=function(i){const a=n(i);return[[0,0],[a-e,0],[0,a-e]]},Gg}var Kg={},CS;function E3(){return CS||(CS=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},n.from=function(a){return n.isValid(a)?parseInt(a,10):void 0},n.getPenaltyN1=function(a){const o=a.size;let u=0,d=0,m=0,p=null,y=null;for(let v=0;v<o;v++){d=m=0,p=y=null;for(let w=0;w<o;w++){let A=a.get(v,w);A===p?d++:(d>=5&&(u+=e.N1+(d-5)),p=A,d=1),A=a.get(w,v),A===y?m++:(m>=5&&(u+=e.N1+(m-5)),y=A,m=1)}d>=5&&(u+=e.N1+(d-5)),m>=5&&(u+=e.N1+(m-5))}return u},n.getPenaltyN2=function(a){const o=a.size;let u=0;for(let d=0;d<o-1;d++)for(let m=0;m<o-1;m++){const p=a.get(d,m)+a.get(d,m+1)+a.get(d+1,m)+a.get(d+1,m+1);(p===4||p===0)&&u++}return u*e.N2},n.getPenaltyN3=function(a){const o=a.size;let u=0,d=0,m=0;for(let p=0;p<o;p++){d=m=0;for(let y=0;y<o;y++)d=d<<1&2047|a.get(p,y),y>=10&&(d===1488||d===93)&&u++,m=m<<1&2047|a.get(y,p),y>=10&&(m===1488||m===93)&&u++}return u*e.N3},n.getPenaltyN4=function(a){let o=0;const u=a.data.length;for(let m=0;m<u;m++)o+=a.data[m];return Math.abs(Math.ceil(o*100/u/5)-10)*e.N4};function t(i,a,o){switch(i){case n.Patterns.PATTERN000:return(a+o)%2===0;case n.Patterns.PATTERN001:return a%2===0;case n.Patterns.PATTERN010:return o%3===0;case n.Patterns.PATTERN011:return(a+o)%3===0;case n.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(o/3))%2===0;case n.Patterns.PATTERN101:return a*o%2+a*o%3===0;case n.Patterns.PATTERN110:return(a*o%2+a*o%3)%2===0;case n.Patterns.PATTERN111:return(a*o%3+(a+o)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(a,o){const u=o.size;for(let d=0;d<u;d++)for(let m=0;m<u;m++)o.isReserved(m,d)||o.xor(m,d,t(a,m,d))},n.getBestMask=function(a,o){const u=Object.keys(n.Patterns).length;let d=0,m=1/0;for(let p=0;p<u;p++){o(p),n.applyMask(p,a);const y=n.getPenaltyN1(a)+n.getPenaltyN2(a)+n.getPenaltyN3(a)+n.getPenaltyN4(a);n.applyMask(p,a),y<m&&(m=y,d=p)}return d}}(Kg)),Kg}var Sd={},RS;function wI(){if(RS)return Sd;RS=1;const n=zv(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Sd.getBlocksCount=function(a,o){switch(o){case n.L:return e[(a-1)*4+0];case n.M:return e[(a-1)*4+1];case n.Q:return e[(a-1)*4+2];case n.H:return e[(a-1)*4+3];default:return}},Sd.getTotalCodewordsCount=function(a,o){switch(o){case n.L:return t[(a-1)*4+0];case n.M:return t[(a-1)*4+1];case n.Q:return t[(a-1)*4+2];case n.H:return t[(a-1)*4+3];default:return}},Sd}var Qg={},Qu={},IS;function T3(){if(IS)return Qu;IS=1;const n=new Uint8Array(512),e=new Uint8Array(256);return function(){let i=1;for(let a=0;a<255;a++)n[a]=i,e[i]=a,i<<=1,i&256&&(i^=285);for(let a=255;a<512;a++)n[a]=n[a-255]}(),Qu.log=function(i){if(i<1)throw new Error("log("+i+")");return e[i]},Qu.exp=function(i){return n[i]},Qu.mul=function(i,a){return i===0||a===0?0:n[e[i]+e[a]]},Qu}var xS;function w3(){return xS||(xS=1,function(n){const e=T3();n.mul=function(i,a){const o=new Uint8Array(i.length+a.length-1);for(let u=0;u<i.length;u++)for(let d=0;d<a.length;d++)o[u+d]^=e.mul(i[u],a[d]);return o},n.mod=function(i,a){let o=new Uint8Array(i);for(;o.length-a.length>=0;){const u=o[0];for(let m=0;m<a.length;m++)o[m]^=e.mul(a[m],u);let d=0;for(;d<o.length&&o[d]===0;)d++;o=o.slice(d)}return o},n.generateECPolynomial=function(i){let a=new Uint8Array([1]);for(let o=0;o<i;o++)a=n.mul(a,new Uint8Array([1,e.exp(o)]));return a}}(Qg)),Qg}var $g,NS;function b3(){if(NS)return $g;NS=1;const n=w3();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(i){this.degree=i,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(i.length+this.degree);a.set(i);const o=n.mod(a,this.genPoly),u=this.degree-o.length;if(u>0){const d=new Uint8Array(this.degree);return d.set(o,u),d}return o},$g=e,$g}var Yg={},Wg={},Xg={},DS;function bI(){return DS||(DS=1,Xg.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Xg}var Li={},kS;function SI(){if(kS)return Li;kS=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Li.KANJI=new RegExp(t,"g"),Li.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Li.BYTE=new RegExp(i,"g"),Li.NUMERIC=new RegExp(n,"g"),Li.ALPHANUMERIC=new RegExp(e,"g");const a=new RegExp("^"+t+"$"),o=new RegExp("^"+n+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Li.testKanji=function(m){return a.test(m)},Li.testNumeric=function(m){return o.test(m)},Li.testAlphanumeric=function(m){return u.test(m)},Li}var OS;function Ja(){return OS||(OS=1,function(n){const e=bI(),t=SI();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(o,u){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?o.ccBits[0]:u<27?o.ccBits[1]:o.ccBits[2]},n.getBestModeForData=function(o){return t.testNumeric(o)?n.NUMERIC:t.testAlphanumeric(o)?n.ALPHANUMERIC:t.testKanji(o)?n.KANJI:n.BYTE},n.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},n.isValid=function(o){return o&&o.bit&&o.ccBits};function i(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+a)}}n.from=function(o,u){if(n.isValid(o))return o;try{return i(o)}catch{return u}}}(Wg)),Wg}var MS;function S3(){return MS||(MS=1,function(n){const e=Xa(),t=wI(),i=zv(),a=Ja(),o=bI(),u=7973,d=e.getBCHDigit(u);function m(w,A,D){for(let j=1;j<=40;j++)if(A<=n.getCapacity(j,D,w))return j}function p(w,A){return a.getCharCountIndicator(w,A)+4}function y(w,A){let D=0;return w.forEach(function(j){const V=p(j.mode,A);D+=V+j.getBitsLength()}),D}function v(w,A){for(let D=1;D<=40;D++)if(y(w,D)<=n.getCapacity(D,A,a.MIXED))return D}n.from=function(A,D){return o.isValid(A)?parseInt(A,10):D},n.getCapacity=function(A,D,j){if(!o.isValid(A))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=a.BYTE);const V=e.getSymbolTotalCodewords(A),F=t.getTotalCodewordsCount(A,D),G=(V-F)*8;if(j===a.MIXED)return G;const L=G-p(j,A);switch(j){case a.NUMERIC:return Math.floor(L/10*3);case a.ALPHANUMERIC:return Math.floor(L/11*2);case a.KANJI:return Math.floor(L/13);case a.BYTE:default:return Math.floor(L/8)}},n.getBestVersionForData=function(A,D){let j;const V=i.from(D,i.M);if(Array.isArray(A)){if(A.length>1)return v(A,V);if(A.length===0)return 1;j=A[0]}else j=A;return m(j.mode,j.getLength(),V)},n.getEncodedBits=function(A){if(!o.isValid(A)||A<7)throw new Error("Invalid QR Code version");let D=A<<12;for(;e.getBCHDigit(D)-d>=0;)D^=u<<e.getBCHDigit(D)-d;return A<<12|D}}(Yg)),Yg}var Jg={},PS;function A3(){if(PS)return Jg;PS=1;const n=Xa(),e=1335,t=21522,i=n.getBCHDigit(e);return Jg.getEncodedBits=function(o,u){const d=o.bit<<3|u;let m=d<<10;for(;n.getBCHDigit(m)-i>=0;)m^=e<<n.getBCHDigit(m)-i;return(d<<10|m)^t},Jg}var Zg={},e_,LS;function C3(){if(LS)return e_;LS=1;const n=Ja();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let a,o,u;for(a=0;a+3<=this.data.length;a+=3)o=this.data.substr(a,3),u=parseInt(o,10),i.put(u,10);const d=this.data.length-a;d>0&&(o=this.data.substr(a),u=parseInt(o,10),i.put(u,d*3+1))},e_=e,e_}var t_,VS;function R3(){if(VS)return t_;VS=1;const n=Ja(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(i){this.mode=n.ALPHANUMERIC,this.data=i}return t.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(a){let o;for(o=0;o+2<=this.data.length;o+=2){let u=e.indexOf(this.data[o])*45;u+=e.indexOf(this.data[o+1]),a.put(u,11)}this.data.length%2&&a.put(e.indexOf(this.data[o]),6)},t_=t,t_}var n_,US;function I3(){if(US)return n_;US=1;const n=Ja();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(i){return i*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let i=0,a=this.data.length;i<a;i++)t.put(this.data[i],8)},n_=e,n_}var i_,jS;function x3(){if(jS)return i_;jS=1;const n=Ja(),e=Xa();function t(i){this.mode=n.KANJI,this.data=i}return t.getBitsLength=function(a){return a*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let a;for(a=0;a<this.data.length;a++){let o=e.toSJIS(this.data[a]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),i.put(o,13)}},i_=t,i_}var r_={exports:{}},BS;function N3(){return BS||(BS=1,function(n){var e={single_source_shortest_paths:function(t,i,a){var o={},u={};u[i]=0;var d=e.PriorityQueue.make();d.push(i,0);for(var m,p,y,v,w,A,D,j,V;!d.empty();){m=d.pop(),p=m.value,v=m.cost,w=t[p]||{};for(y in w)w.hasOwnProperty(y)&&(A=w[y],D=v+A,j=u[y],V=typeof u[y]>"u",(V||j>D)&&(u[y]=D,d.push(y,D),o[y]=p))}if(typeof a<"u"&&typeof u[a]>"u"){var F=["Could not find a path from ",i," to ",a,"."].join("");throw new Error(F)}return o},extract_shortest_path_from_predecessor_list:function(t,i){for(var a=[],o=i;o;)a.push(o),t[o],o=t[o];return a.reverse(),a},find_path:function(t,i,a){var o=e.single_source_shortest_paths(t,i,a);return e.extract_shortest_path_from_predecessor_list(o,a)},PriorityQueue:{make:function(t){var i=e.PriorityQueue,a={},o;t=t||{};for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);return a.queue=[],a.sorter=t.sorter||i.default_sorter,a},default_sorter:function(t,i){return t.cost-i.cost},push:function(t,i){var a={value:t,cost:i};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e}(r_)),r_.exports}var zS;function D3(){return zS||(zS=1,function(n){const e=Ja(),t=C3(),i=R3(),a=I3(),o=x3(),u=SI(),d=Xa(),m=N3();function p(F){return unescape(encodeURIComponent(F)).length}function y(F,G,L){const Y=[];let ee;for(;(ee=F.exec(L))!==null;)Y.push({data:ee[0],index:ee.index,mode:G,length:ee[0].length});return Y}function v(F){const G=y(u.NUMERIC,e.NUMERIC,F),L=y(u.ALPHANUMERIC,e.ALPHANUMERIC,F);let Y,ee;return d.isKanjiModeEnabled()?(Y=y(u.BYTE,e.BYTE,F),ee=y(u.KANJI,e.KANJI,F)):(Y=y(u.BYTE_KANJI,e.BYTE,F),ee=[]),G.concat(L,Y,ee).sort(function(k,R){return k.index-R.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function w(F,G){switch(G){case e.NUMERIC:return t.getBitsLength(F);case e.ALPHANUMERIC:return i.getBitsLength(F);case e.KANJI:return o.getBitsLength(F);case e.BYTE:return a.getBitsLength(F)}}function A(F){return F.reduce(function(G,L){const Y=G.length-1>=0?G[G.length-1]:null;return Y&&Y.mode===L.mode?(G[G.length-1].data+=L.data,G):(G.push(L),G)},[])}function D(F){const G=[];for(let L=0;L<F.length;L++){const Y=F[L];switch(Y.mode){case e.NUMERIC:G.push([Y,{data:Y.data,mode:e.ALPHANUMERIC,length:Y.length},{data:Y.data,mode:e.BYTE,length:Y.length}]);break;case e.ALPHANUMERIC:G.push([Y,{data:Y.data,mode:e.BYTE,length:Y.length}]);break;case e.KANJI:G.push([Y,{data:Y.data,mode:e.BYTE,length:p(Y.data)}]);break;case e.BYTE:G.push([{data:Y.data,mode:e.BYTE,length:p(Y.data)}])}}return G}function j(F,G){const L={},Y={start:{}};let ee=["start"];for(let X=0;X<F.length;X++){const k=F[X],R=[];for(let S=0;S<k.length;S++){const N=k[S],O=""+X+S;R.push(O),L[O]={node:N,lastCount:0},Y[O]={};for(let P=0;P<ee.length;P++){const x=ee[P];L[x]&&L[x].node.mode===N.mode?(Y[x][O]=w(L[x].lastCount+N.length,N.mode)-w(L[x].lastCount,N.mode),L[x].lastCount+=N.length):(L[x]&&(L[x].lastCount=N.length),Y[x][O]=w(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,G))}}ee=R}for(let X=0;X<ee.length;X++)Y[ee[X]].end=0;return{map:Y,table:L}}function V(F,G){let L;const Y=e.getBestModeForData(F);if(L=e.from(G,Y),L!==e.BYTE&&L.bit<Y.bit)throw new Error('"'+F+'" cannot be encoded with mode '+e.toString(L)+`.
 Suggested mode is: `+e.toString(Y));switch(L===e.KANJI&&!d.isKanjiModeEnabled()&&(L=e.BYTE),L){case e.NUMERIC:return new t(F);case e.ALPHANUMERIC:return new i(F);case e.KANJI:return new o(F);case e.BYTE:return new a(F)}}n.fromArray=function(G){return G.reduce(function(L,Y){return typeof Y=="string"?L.push(V(Y,null)):Y.data&&L.push(V(Y.data,Y.mode)),L},[])},n.fromString=function(G,L){const Y=v(G,d.isKanjiModeEnabled()),ee=D(Y),X=j(ee,L),k=m.find_path(X.map,"start","end"),R=[];for(let S=1;S<k.length-1;S++)R.push(X.table[k[S]].node);return n.fromArray(A(R))},n.rawSplit=function(G){return n.fromArray(v(G,d.isKanjiModeEnabled()))}}(Zg)),Zg}var FS;function k3(){if(FS)return Bg;FS=1;const n=Xa(),e=zv(),t=g3(),i=_3(),a=y3(),o=v3(),u=E3(),d=wI(),m=b3(),p=S3(),y=A3(),v=Ja(),w=D3();function A(X,k){const R=X.size,S=o.getPositions(k);for(let N=0;N<S.length;N++){const O=S[N][0],P=S[N][1];for(let x=-1;x<=7;x++)if(!(O+x<=-1||R<=O+x))for(let fe=-1;fe<=7;fe++)P+fe<=-1||R<=P+fe||(x>=0&&x<=6&&(fe===0||fe===6)||fe>=0&&fe<=6&&(x===0||x===6)||x>=2&&x<=4&&fe>=2&&fe<=4?X.set(O+x,P+fe,!0,!0):X.set(O+x,P+fe,!1,!0))}}function D(X){const k=X.size;for(let R=8;R<k-8;R++){const S=R%2===0;X.set(R,6,S,!0),X.set(6,R,S,!0)}}function j(X,k){const R=a.getPositions(k);for(let S=0;S<R.length;S++){const N=R[S][0],O=R[S][1];for(let P=-2;P<=2;P++)for(let x=-2;x<=2;x++)P===-2||P===2||x===-2||x===2||P===0&&x===0?X.set(N+P,O+x,!0,!0):X.set(N+P,O+x,!1,!0)}}function V(X,k){const R=X.size,S=p.getEncodedBits(k);let N,O,P;for(let x=0;x<18;x++)N=Math.floor(x/3),O=x%3+R-8-3,P=(S>>x&1)===1,X.set(N,O,P,!0),X.set(O,N,P,!0)}function F(X,k,R){const S=X.size,N=y.getEncodedBits(k,R);let O,P;for(O=0;O<15;O++)P=(N>>O&1)===1,O<6?X.set(O,8,P,!0):O<8?X.set(O+1,8,P,!0):X.set(S-15+O,8,P,!0),O<8?X.set(8,S-O-1,P,!0):O<9?X.set(8,15-O-1+1,P,!0):X.set(8,15-O-1,P,!0);X.set(S-8,8,1,!0)}function G(X,k){const R=X.size;let S=-1,N=R-1,O=7,P=0;for(let x=R-1;x>0;x-=2)for(x===6&&x--;;){for(let fe=0;fe<2;fe++)if(!X.isReserved(N,x-fe)){let Oe=!1;P<k.length&&(Oe=(k[P]>>>O&1)===1),X.set(N,x-fe,Oe),O--,O===-1&&(P++,O=7)}if(N+=S,N<0||R<=N){N-=S,S=-S;break}}}function L(X,k,R){const S=new t;R.forEach(function(fe){S.put(fe.mode.bit,4),S.put(fe.getLength(),v.getCharCountIndicator(fe.mode,X)),fe.write(S)});const N=n.getSymbolTotalCodewords(X),O=d.getTotalCodewordsCount(X,k),P=(N-O)*8;for(S.getLengthInBits()+4<=P&&S.put(0,4);S.getLengthInBits()%8!==0;)S.putBit(0);const x=(P-S.getLengthInBits())/8;for(let fe=0;fe<x;fe++)S.put(fe%2?17:236,8);return Y(S,X,k)}function Y(X,k,R){const S=n.getSymbolTotalCodewords(k),N=d.getTotalCodewordsCount(k,R),O=S-N,P=d.getBlocksCount(k,R),x=S%P,fe=P-x,Oe=Math.floor(S/P),le=Math.floor(O/P),Ee=le+1,_e=Oe-le,$e=new m(_e);let U=0;const se=new Array(P),pe=new Array(P);let ue=0;const ce=new Uint8Array(X.buffer);for(let nt=0;nt<P;nt++){const Qe=nt<fe?le:Ee;se[nt]=ce.slice(U,U+Qe),pe[nt]=$e.encode(se[nt]),U+=Qe,ue=Math.max(ue,Qe)}const Ce=new Uint8Array(S);let Re=0,Ze,Ne;for(Ze=0;Ze<ue;Ze++)for(Ne=0;Ne<P;Ne++)Ze<se[Ne].length&&(Ce[Re++]=se[Ne][Ze]);for(Ze=0;Ze<_e;Ze++)for(Ne=0;Ne<P;Ne++)Ce[Re++]=pe[Ne][Ze];return Ce}function ee(X,k,R,S){let N;if(Array.isArray(X))N=w.fromArray(X);else if(typeof X=="string"){let Oe=k;if(!Oe){const le=w.rawSplit(X);Oe=p.getBestVersionForData(le,R)}N=w.fromString(X,Oe||40)}else throw new Error("Invalid data");const O=p.getBestVersionForData(N,R);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(!k)k=O;else if(k<O)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+O+`.
`);const P=L(k,R,N),x=n.getSymbolSize(k),fe=new i(x);return A(fe,k),D(fe),j(fe,k),F(fe,R,0),k>=7&&V(fe,k),G(fe,P),isNaN(S)&&(S=u.getBestMask(fe,F.bind(null,fe,R))),u.applyMask(S,fe),F(fe,R,S),{modules:fe,version:k,errorCorrectionLevel:R,maskPattern:S,segments:N}}return Bg.create=function(k,R){if(typeof k>"u"||k==="")throw new Error("No input text");let S=e.M,N,O;return typeof R<"u"&&(S=e.from(R.errorCorrectionLevel,e.M),N=p.from(R.version),O=u.from(R.maskPattern),R.toSJISFunc&&n.setToSJISFunction(R.toSJISFunc)),ee(k,N,S,O)},Bg}var s_={},a_={},qS;function AI(){return qS||(qS=1,function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let i=t.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+t);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(o){return[o,o]}))),i.length===6&&i.push("F","F");const a=parseInt(i.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const a=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,o=i.width&&i.width>=21?i.width:void 0,u=i.scale||4;return{width:o,scale:o?4:u,margin:a,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,a){return a.width&&a.width>=i+a.margin*2?a.width/(i+a.margin*2):a.scale},n.getImageWidth=function(i,a){const o=n.getScale(i,a);return Math.floor((i+a.margin*2)*o)},n.qrToImageData=function(i,a,o){const u=a.modules.size,d=a.modules.data,m=n.getScale(u,o),p=Math.floor((u+o.margin*2)*m),y=o.margin*m,v=[o.color.light,o.color.dark];for(let w=0;w<p;w++)for(let A=0;A<p;A++){let D=(w*p+A)*4,j=o.color.light;if(w>=y&&A>=y&&w<p-y&&A<p-y){const V=Math.floor((w-y)/m),F=Math.floor((A-y)/m);j=v[d[V*u+F]?1:0]}i[D++]=j.r,i[D++]=j.g,i[D++]=j.b,i[D]=j.a}}}(a_)),a_}var HS;function O3(){return HS||(HS=1,function(n){const e=AI();function t(a,o,u){a.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=u,o.width=u,o.style.height=u+"px",o.style.width=u+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(o,u,d){let m=d,p=u;typeof m>"u"&&(!u||!u.getContext)&&(m=u,u=void 0),u||(p=i()),m=e.getOptions(m);const y=e.getImageWidth(o.modules.size,m),v=p.getContext("2d"),w=v.createImageData(y,y);return e.qrToImageData(w.data,o,m),t(v,p,y),v.putImageData(w,0,0),p},n.renderToDataURL=function(o,u,d){let m=d;typeof m>"u"&&(!u||!u.getContext)&&(m=u,u=void 0),m||(m={});const p=n.render(o,u,m),y=m.type||"image/png",v=m.rendererOpts||{};return p.toDataURL(y,v.quality)}}(s_)),s_}var o_={},GS;function M3(){if(GS)return o_;GS=1;const n=AI();function e(a,o){const u=a.a/255,d=o+'="'+a.hex+'"';return u<1?d+" "+o+'-opacity="'+u.toFixed(2).slice(1)+'"':d}function t(a,o,u){let d=a+o;return typeof u<"u"&&(d+=" "+u),d}function i(a,o,u){let d="",m=0,p=!1,y=0;for(let v=0;v<a.length;v++){const w=Math.floor(v%o),A=Math.floor(v/o);!w&&!p&&(p=!0),a[v]?(y++,v>0&&w>0&&a[v-1]||(d+=p?t("M",w+u,.5+A+u):t("m",m,0),m=0,p=!1),w+1<o&&a[v+1]||(d+=t("h",y),y=0)):m++}return d}return o_.render=function(o,u,d){const m=n.getOptions(u),p=o.modules.size,y=o.modules.data,v=p+m.margin*2,w=m.color.light.a?"<path "+e(m.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",A="<path "+e(m.color.dark,"stroke")+' d="'+i(y,p,m.margin)+'"/>',D='viewBox="0 0 '+v+" "+v+'"',V='<svg xmlns="http://www.w3.org/2000/svg" '+(m.width?'width="'+m.width+'" height="'+m.width+'" ':"")+D+' shape-rendering="crispEdges">'+w+A+`</svg>
`;return typeof d=="function"&&d(null,V),V},o_}var KS;function P3(){if(KS)return Go;KS=1;const n=p3(),e=k3(),t=O3(),i=M3();function a(o,u,d,m,p){const y=[].slice.call(arguments,1),v=y.length,w=typeof y[v-1]=="function";if(!w&&!n())throw new Error("Callback required as last argument");if(w){if(v<2)throw new Error("Too few arguments provided");v===2?(p=d,d=u,u=m=void 0):v===3&&(u.getContext&&typeof p>"u"?(p=m,m=void 0):(p=m,m=d,d=u,u=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(d=u,u=m=void 0):v===2&&!u.getContext&&(m=d,d=u,u=void 0),new Promise(function(A,D){try{const j=e.create(d,m);A(o(j,u,m))}catch(j){D(j)}})}try{const A=e.create(d,m);p(null,o(A,u,m))}catch(A){p(A)}}return Go.create=e.create,Go.toCanvas=a.bind(null,t.render),Go.toDataURL=a.bind(null,t.renderToDataURL),Go.toString=a.bind(null,function(o,u,d){return i.render(o,d)}),Go}var L3=P3();const V3=Wx(L3),U3=()=>{var L,Y,ee,X,k;const{id:n}=ny(),e=Ks(),t=Ff(),[i,a]=Q.useState(null),[o,u]=Q.useState([]),[d,m]=Q.useState([]),[p,y]=Q.useState(!0),[v,w]=Q.useState(!1),[A,D]=Q.useState(new Date().toISOString().split("T")[0]),j=Q.useRef(null);Q.useEffect(()=>{const R=Bv(),S=Is(R,`classroom/${n}/students`),N=EI(S,O=>{if(console.log("🔥 Student Data from Firebase:",O.val()),O.exists()){const P=O.val(),x=Object.entries(P).map(([fe,Oe])=>({id:fe,name:Oe.name,stdid:Oe.stdid}));console.log("📌 Students List:",x),x.length!==o.length&&u(x)}else console.log("❌ No student data found!"),u([]);y(!1)});return()=>{TI(S,N)}},[n,o.length]),Q.useEffect(()=>{(async()=>{try{const S=yc(t,"classroom",n),N=await AP(S);N.exists()&&a(N.data());const O=O_(t,"classroom",n,"students"),P=await P_(O);u(P.docs.map(Oe=>({id:Oe.id,...Oe.data()})));const x=O_(t,"classroom",n,"checkin"),fe=await P_(x);m(fe.docs.map(Oe=>({id:Oe.id,...Oe.data()}))),y(!1)}catch(S){console.error("Error fetching data:",S),y(!1)}})()},[n,t]);const V=A?d.filter(R=>{const S=new Date(R.date).toLocaleDateString("th-TH"),N=new Date(A).toLocaleDateString("th-TH");return S===N}):d,F=async()=>{if(j.current)try{const R=document.createElement("canvas");await V3.toCanvas(R,String(n),{width:256,margin:2,color:{dark:"#000000",light:"#ffffff"}}),j.current.innerHTML="",j.current.appendChild(R)}catch(R){console.error("Error generating QR Code:",R)}},G=async(R,S)=>{try{const N=yc(t,"classroom",n,"checkin",R);await CP(N,{students:IP({studentId:S,status:1})}),m(O=>O.map(P=>P.id===R?{...P,students:P.students.map(x=>x.id===S?{...x,status:1}:x)}:P))}catch(N){console.error("Error updating checkin status:",N)}};return p?b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:b.jsxs("div",{className:"p-8 bg-white rounded-xl shadow-xl",children:[b.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600 font-medium text-center",children:"กำลังโหลดข้อมูล"})]})}):i?b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("button",{onClick:()=>e("/home"),className:"group flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-white transition duration-200 mb-6",children:[b.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),b.jsx("span",{className:"font-medium",children:"กลับสู่หน้าหลัก"})]}),b.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:[b.jsxs("div",{className:"relative z-10 p-8",children:[b.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:(L=i.info)==null?void 0:L.name}),b.jsxs("div",{className:"space-y-2 text-white/90",children:[b.jsxs("p",{className:"text-lg",children:["รหัสวิชา: ",(Y=i.info)==null?void 0:Y.code]}),b.jsxs("p",{className:"text-lg",children:["ห้องเรียน: ",(ee=i.info)==null?void 0:ee.room]})]}),b.jsx("button",{onClick:()=>{w(!0),setTimeout(F,100)},className:"mt-6 px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-xl font-medium backdrop-blur-sm transition duration-200 transform hover:scale-105",children:"แสดง QR Code ลงทะเบียน"})]}),b.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20",children:b.jsx("div",{className:"w-40 h-40 bg-white/10 rounded-full blur-2xl"})})]}),v&&b.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-md w-full mx-4",children:[b.jsxs("div",{className:"flex justify-between items-start mb-6",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"QR Code สำหรับลงทะเบียน"}),b.jsx("p",{className:"text-xl font-semibold text-gray-800",children:(X=i.info)==null?void 0:X.name}),b.jsxs("p",{className:"text-lg text-gray-700 font-medium",children:["รหัสวิชา: ",(k=i.info)==null?void 0:k.code]})]}),b.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors duration-200",children:b.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),b.jsx("div",{ref:j,className:"bg-gradient-to-br from-gray-50 to-gray-100 p-8 rounded-2xl flex justify-center items-center min-h-[320px] shadow-inner"}),b.jsx("p",{className:"text-center text-gray-500 text-sm mt-4",children:"สแกน QR Code เพื่อเข้าร่วมห้องเรียน"})]})}),b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[b.jsx("div",{className:"p-6 border-b border-gray-100",children:b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"รายชื่อนักเรียนที่ลงทะเบียน"})}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50",children:[b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"รหัสนักเรียน"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ชื่อนักเรียน"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:p?b.jsx("tr",{children:b.jsx("td",{colSpan:"3",className:"text-center py-4 text-gray-600",children:"กำลังโหลดข้อมูล..."})}):o.length>0?o.map((R,S)=>b.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[b.jsx("td",{className:"px-6 py-4 text-gray-600",children:S+1}),b.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:R.stdid}),b.jsx("td",{className:"px-6 py-4 text-gray-800",children:R.name})]},R.id)):b.jsx("tr",{children:b.jsx("td",{colSpan:"3",className:"text-center py-4 text-gray-600",children:"ไม่พบข้อมูลนักเรียน"})})})]})}),b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[b.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ประวัติการเช็คชื่อ"}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("input",{type:"date",value:A,onChange:R=>D(R.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),b.jsx("button",{onClick:()=>e(`/checkin/${n}`),className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium shadow-lg shadow-blue-500/20 hover:bg-blue-600 transition duration-200 transform hover:scale-105",children:"เพิ่มการเช็คชื่อ"})]})]}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50",children:[b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"วัน-เวลา"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"จำนวนคนเข้าเรียน"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"สถานะ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"จัดการ"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:V.map((R,S)=>{var N,O,P;return b.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[b.jsx("td",{className:"px-6 py-4 text-gray-600",children:S+1}),b.jsx("td",{className:"px-6 py-4 text-gray-800",children:new Date(R.date).toLocaleString("th-TH")}),b.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[((N=R.students)==null?void 0:N.filter(x=>x.status===1).length)||0," ","คน"]}),b.jsx("td",{className:"px-6 py-4",children:b.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${(O=R.students)!=null&&O.every(x=>x.status===1)?"bg-green-50 text-green-700 ring-1 ring-green-600/20":"bg-yellow-50 text-yellow-700 ring-1 ring-yellow-600/20"}`,children:(P=R.students)!=null&&P.every(x=>x.status===1)?"จบการเช็คชื่อ":"กำลังเรียน"})}),b.jsx("td",{className:"px-6 py-4",children:b.jsx("button",{onClick:()=>G(R.id),className:"text-blue-500 hover:text-blue-700 font-medium transition-colors",children:"เช็คชื่อ"})})]},R.id)})})]})})]})]})]})}):b.jsx("div",{children:"..."})},j3=()=>{const n=Ks(),[e,t]=Q.useState([]),[i,a]=Q.useState([]),[o,u]=Q.useState(!1),[d,m]=Q.useState(!1),[p,y]=Q.useState(!1),{classroomId:v}=ny(),w="1";Q.useEffect(()=>{const L=Is(bd,`classroom/${v}/checkin/${w}/answers`);return EI(L,Y=>{const ee=Y.val();if(ee){const X=Object.keys(ee).map(k=>({id:k,...ee[k]}));a(X)}else a([])}),()=>TI(L)},[v]);const A=L=>{const Y={id:e.length+1,type:L,questionNo:"",questionText:"",choices:L==="choice"?["",""]:[],isEditing:!0};t([...e,Y]),y(!0)},D=(L,Y,ee)=>{const X=e.map(k=>k.id===L?{...k,[Y]:ee}:k);t(X)},j=L=>{const Y=e.map(ee=>ee.id===L?{...ee,choices:[...ee.choices,""]}:ee);t(Y)},V=L=>{const Y=e.filter(X=>X.id!==L);t(Y);const ee=Is(bd,`classroom/${v}/checkin/${w}`);Ug(ee,{question_show:!1}).then(()=>{u(!1)}).catch(X=>{console.error("เกิดข้อผิดพลาด: ",X)}),window.location.reload()},F=()=>{if(e.length===0){alert("กรุณาเพิ่มคำถามก่อน");return}const L=Is(bd,`classroom/${v}/checkin/${w}`),Y=e.reduce((ee,X)=>(ee[X.id]={question_no:X.questionNo,question_text:X.questionText,type:X.type,choices:X.type==="choice"?X.choices:null},ee),{});Ug(L,{questions:Y,question_show:!0}).then(()=>{u(!0),m(!0),alert("เริ่มถามคำถามเรียบร้อย")}).catch(ee=>{console.error("เกิดข้อผิดพลาด: ",ee)})},G=()=>{const L=Is(bd,`classroom/${v}/checkin/${w}`);Ug(L,{question_show:!1}).then(()=>{u(!1),alert("ปิดคำถามเรียบร้อย")}).catch(Y=>{console.error("เกิดข้อผิดพลาด: ",Y)})};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("button",{onClick:()=>n(-1),className:"group flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-white transition duration-200 mb-6",children:[b.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),b.jsx("span",{className:"font-medium",children:"กลับสู่หน้าเช็คชื่อ"})]}),b.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:[b.jsxs("div",{className:"relative z-10 p-8",children:[b.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"ถาม-ตอบในห้องเรียน"}),b.jsx("p",{className:"text-white/90",children:"สร้างคำถามและดูคำตอบจากนักเรียนแบบเรียลไทม์"})]}),b.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20",children:b.jsx("div",{className:"w-40 h-40 bg-white/10 rounded-full blur-2xl"})})]}),b.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden mb-8 border border-gray-100",children:[b.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-8",children:b.jsx("h2",{className:"text-3xl font-bold text-white",children:"ตั้งคำถาม"})}),b.jsxs("div",{className:"p-8 space-y-8",children:[b.jsxs("div",{className:"flex gap-4",children:[b.jsx("button",{onClick:()=>A("text"),className:"flex-1 px-6 py-4 bg-gradient-to-r from-emerald-400 to-green-500 text-white rounded-2xl font-medium shadow-lg hover:from-emerald-500 hover:to-green-600 transition-all duration-300 transform hover:-translate-y-1",children:"✏️ เพิ่มคำถามแบบข้อความ"}),b.jsx("button",{onClick:()=>A("choice"),className:"flex-1 px-6 py-4 bg-gradient-to-r from-blue-400 to-indigo-500 text-white rounded-2xl font-medium shadow-lg hover:from-blue-500 hover:to-indigo-600 transition-all duration-300 transform hover:-translate-y-1",children:"🎯 เพิ่มคำถามแบบตัวเลือก"})]}),e.map(L=>b.jsxs("div",{className:"space-y-6 bg-gray-50 p-8 rounded-2xl border border-gray-200 hover:border-purple-200 transition-all duration-300",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("span",{className:"w-10 h-10 flex items-center justify-center bg-purple-100 text-purple-600 rounded-full font-bold",children:L.id}),b.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["คำถาม ",L.type==="text"?"ข้อความ":"ตัวเลือก"]})]}),b.jsx("button",{onClick:()=>V(L.id),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition duration-300 transform hover:-translate-y-1 shadow-lg shadow-red-500/20",children:"ยกเลิก"})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ข้อที่"}),b.jsx("input",{type:"text",value:L.questionNo,onChange:Y=>D(L.id,"questionNo",Y.target.value),placeholder:"กรอกข้อที่ของคำถาม",className:"w-full px-6 py-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-300 hover:border-purple-300"})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"คำถาม"}),b.jsx("textarea",{value:L.questionText,onChange:Y=>D(L.id,"questionText",Y.target.value),placeholder:"พิมพ์คำถามที่ต้องการถาม...",rows:"4",className:"w-full px-6 py-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-300 hover:border-purple-300"})]}),L.type==="choice"&&b.jsxs("div",{className:"space-y-4",children:[b.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"ตัวเลือก"}),L.choices.map((Y,ee)=>b.jsxs("div",{className:"flex gap-3",children:[b.jsx("input",{type:"text",value:Y,onChange:X=>{const k=[...L.choices];k[ee]=X.target.value,D(L.id,"choices",k)},placeholder:`ตัวเลือก ${ee+1}`,className:"w-full px-6 py-4 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-300 hover:border-purple-300"}),ee>=2&&b.jsx("button",{onClick:()=>{const X=L.choices.filter((k,R)=>R!==ee);D(L.id,"choices",X)},className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition duration-300 transform hover:-translate-y-1 shadow-lg shadow-red-500/20",children:"ลบ"})]},ee)),b.jsx("button",{onClick:()=>j(L.id),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition duration-300 transform hover:-translate-y-1 shadow-md",children:"➕ เพิ่มตัวเลือก"})]})]},L.id)),p&&b.jsxs("div",{className:"flex gap-4",children:[b.jsx("button",{onClick:F,disabled:o,className:`flex-1 px-6 py-4 rounded-2xl font-medium shadow-lg transition-all duration-300 transform hover:-translate-y-1
        ${o?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-blue-400 to-blue-600 text-white shadow-blue-500/20 hover:from-blue-500 hover:to-blue-700"}`,children:"🚀 เริ่มถามคำถามทั้งหมด"}),b.jsx("button",{onClick:G,disabled:!o,className:`flex-1 px-6 py-4 rounded-2xl font-medium shadow-lg transition-all duration-300 transform hover:-translate-y-1
        ${o?"bg-gradient-to-r from-red-400 to-red-600 text-white shadow-red-500/20 hover:from-red-500 hover:to-red-700":"bg-gray-300 cursor-not-allowed"}`,children:"🛑 ปิดคำถาม"}),b.jsx("button",{onClick:()=>m(!0),className:"flex-1 px-6 py-4 bg-gradient-to-r from-purple-400 to-purple-600 text-white rounded-2xl font-medium shadow-lg hover:from-purple-500 hover:to-purple-700 transition-all duration-300 transform hover:-translate-y-1 shadow-purple-500/20",children:"👁️ แสดงคำถาม"})]})]})]}),b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[b.jsx("div",{className:"p-6 border-b border-gray-100",children:b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"คำตอบจากนักเรียน"})}),b.jsx("div",{className:"p-6",children:i.length>0?b.jsx("div",{className:"grid gap-4",children:i.map(L=>b.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-100 hover:border-purple-200 transition duration-200",children:[b.jsx("p",{className:"text-gray-800 text-lg mb-2",children:L.text}),b.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[b.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),L.time]})]},L.id))}):b.jsxs("div",{className:"text-center py-12",children:[b.jsx("p",{className:"text-gray-500 text-lg",children:"ยังไม่มีคำตอบจากนักเรียน"}),o&&b.jsx("p",{className:"text-gray-400 mt-2",children:"รอคำตอบจากนักเรียน..."})]})})]}),d&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 popup-ques",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-2xl p-6 space-y-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"คำถามที่ถามไป"}),b.jsx("div",{className:"space-y-4",children:e.map(L=>b.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl space-y-6",children:[b.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["คำถาม ",L.id," (",L.type==="text"?"ข้อความ":"ตัวเลือก",")"]}),b.jsx("p",{className:"text-2xl text-gray-800 leading-relaxed",children:L.questionText}),L.type==="choice"&&b.jsx("ol",{className:"list-decimal  space-y-3",children:L.choices.map((Y,ee)=>b.jsx("li",{className:"text-xl text-gray-700",children:Y},ee))})]},L.id))}),b.jsx("button",{onClick:()=>m(!1),className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium shadow-lg hover:bg-blue-600 transition duration-200",children:"ปิด"})]})})]})})},B3=()=>{const{classroomId:n}=ny(),e=Ks(),t={info:{name:"Computer Programming",code:"SC310001",photo:"https://via.placeholder.com/200",room:"SC5101"}},i=[{id:"checkin1",code:"ABC123",date:"10/02/2025 13:00",status:1},{id:"checkin2",code:"XYZ456",date:"17/02/2025 13:00",status:2}],a=[{id:"student1",stdid:"63010001",name:"John Doe",remark:"มาเรียน",date:"10/02/2025 13:05"},{id:"student2",stdid:"63010002",name:"Jane Smith",remark:"มาสาย",date:"10/02/2025 13:10"}],o=[{id:"student1",stdid:"63010001",name:"John Doe",remark:"มาเรียน",date:"10/02/2025 13:05",score:10,status:"1"},{id:"student2",stdid:"63010002",name:"Jane Smith",remark:"มาสาย",date:"10/02/2025 13:10",score:5,status:"2"}],[u,d]=Q.useState(t),[m,p]=Q.useState(i),[y,v]=Q.useState(a),[w,A]=Q.useState(o),[D,j]=Q.useState("checkin1"),V=L=>{v(y.filter(Y=>Y.id!==L))},F=()=>{e(`/manage-classroom/${n}`)},G=()=>{e(`/checkin/${n}/question`)};return b.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("button",{onClick:F,className:"group flex items-center space-x-2 px-4 py-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-white transition duration-200 mb-6",children:[b.jsx("svg",{className:"w-5 h-5 transform group-hover:-translate-x-1 transition duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),b.jsx("span",{className:"font-medium",children:"กลับสู่หน้าจัดการห้องเรียน"})]}),b.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600 rounded-2xl shadow-lg mb-8",children:[b.jsxs("div",{className:"relative z-10 p-8",children:[b.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:u.info.name}),b.jsxs("div",{className:"space-y-2 text-white/90",children:[b.jsxs("p",{className:"text-lg",children:["รหัสวิชา: ",u.info.code]}),b.jsxs("p",{className:"text-lg",children:["ห้องเรียน: ",u.info.room]})]})]}),b.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20",children:b.jsx("div",{className:"w-40 h-40 bg-white/10 rounded-full blur-2xl"})})]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[b.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white rounded-xl font-medium shadow-lg shadow-blue-500/20 hover:bg-blue-600 transition duration-200 transform hover:scale-105",children:"เปิดเช็คชื่อ"}),b.jsx("button",{className:"px-6 py-3 bg-red-500 text-white rounded-xl font-medium shadow-lg shadow-red-500/20 hover:bg-red-600 transition duration-200 transform hover:scale-105",children:"ปิดเช็คชื่อ"}),b.jsx("button",{className:"px-6 py-3 bg-green-500 text-white rounded-xl font-medium shadow-lg shadow-green-500/20 hover:bg-green-600 transition duration-200 transform hover:scale-105",children:"บันทึกการเช็คชื่อ"}),b.jsx("button",{onClick:G,className:"px-6 py-3 bg-purple-500 text-white rounded-xl font-medium shadow-lg shadow-purple-500/20 hover:bg-purple-600 transition duration-200 transform hover:scale-105",children:"สร้างคำถาม"})]}),b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-8",children:[b.jsx("div",{className:"p-6 border-b border-gray-100",children:b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"รายชื่อผู้ที่เช็คชื่อ"})}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50",children:[b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"รหัส"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ชื่อ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"หมายเหตุ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"วันเวลา"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"จัดการ"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:y.map((L,Y)=>b.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[b.jsx("td",{className:"px-6 py-4 text-gray-600",children:Y+1}),b.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:L.stdid}),b.jsx("td",{className:"px-6 py-4 text-gray-800",children:L.name}),b.jsx("td",{className:"px-6 py-4 text-gray-600",children:L.remark}),b.jsx("td",{className:"px-6 py-4 text-gray-600",children:L.date}),b.jsx("td",{className:"px-6 py-4",children:b.jsx("button",{onClick:()=>V(L.id),className:"text-red-500 hover:text-red-700 font-medium transition-colors",children:"ลบ"})})]},L.id))})]})})]}),b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[b.jsx("div",{className:"p-6 border-b border-gray-100",children:b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"คะแนนการเข้าเรียน"})}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"bg-gray-50",children:[b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ลำดับ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"รหัส"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"ชื่อ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"หมายเหตุ"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"วันเวลา"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"คะแนน"}),b.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"สถานะ"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-100",children:w.map((L,Y)=>b.jsxs("tr",{className:"hover:bg-gray-50/50 transition duration-150",children:[b.jsx("td",{className:"px-6 py-4 text-gray-600",children:Y+1}),b.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:L.stdid}),b.jsx("td",{className:"px-6 py-4 text-gray-800",children:L.name}),b.jsx("td",{className:"px-6 py-4 text-gray-600",children:L.remark}),b.jsx("td",{className:"px-6 py-4 text-gray-600",children:L.date}),b.jsx("td",{className:"px-6 py-4",children:b.jsx("input",{type:"text",value:L.score,onChange:ee=>{const X=[...w];X[Y].score=ee.target.value,A(X)},className:"w-16 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),b.jsx("td",{className:"px-6 py-4",children:b.jsxs("select",{value:L.status,onChange:ee=>{const X=[...w];X[Y].status=ee.target.value,A(X)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[b.jsx("option",{value:"0",children:"ไม่มา"}),b.jsx("option",{value:"1",children:"มาเรียน"}),b.jsx("option",{value:"2",children:"มาสาย"})]})})]},L.id))})]})}),b.jsx("div",{className:"p-6 border-t border-gray-100",children:b.jsx("button",{onClick:()=>alert("บันทึกคะแนนเรียบร้อย"),className:"px-6 py-3 bg-green-500 text-white rounded-xl font-medium shadow-lg shadow-green-500/20 hover:bg-green-600 transition duration-200 transform hover:scale-105",children:"บันทึกคะแนน"})})]})]})})};function z3(){return b.jsx("div",{children:b.jsxs(WN,{children:[b.jsx(ws,{path:"/",element:b.jsx(h3,{})}),b.jsx(ws,{path:"/home",element:b.jsx(d3,{})}),b.jsx(ws,{path:"/edit-profile",element:b.jsx(f3,{})}),b.jsx(ws,{path:"/add-course",element:b.jsx(m3,{})}),b.jsx(ws,{path:"/manage-classroom/:id",element:b.jsx(U3,{})}),b.jsx(ws,{path:"/checkin/:classroomId",element:b.jsx(B3,{})}),b.jsx(ws,{path:"/checkin/:classroomId/question",element:b.jsx(j3,{})})]})})}console.log("App is being rendered");aN.createRoot(document.getElementById("root")).render(b.jsx(Q.StrictMode,{children:b.jsx(E2,{basename:"/final-web-app-SC310006/",children:b.jsx(z3,{})})}));
